// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

{let Et=function(t){i=t},Dt=function(t){return t*n},At=function(t,i){return Math.abs(t-i)<=s*Math.max(1,Math.abs(t),Math.abs(i))},Lt=function(){var t=new i(4);return i!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},Ot=function(t){var s=new i(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},Rt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},kt=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},jt=function(t,s,e,r){var n=new i(4);return n[0]=t,n[1]=s,n[2]=e,n[3]=r,n},Pt=function(t,s,i,e,r){return t[0]=s,t[1]=i,t[2]=e,t[3]=r,t},Ft=function(t,s){if(t===s){var i=s[1];t[1]=s[2],t[2]=i}else t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3];return t},zt=function(t,s){var i=s[0],e=s[1],r=s[2],n=s[3],h=i*n-r*e;return h?(h=1/h,t[0]=n*h,t[1]=-e*h,t[2]=-r*h,t[3]=i*h,t):null},Bt=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},Ut=function(t){return t[0]*t[3]-t[2]*t[1]},Wt=function(t,s,i){var e=s[0],r=s[1],n=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*o+n*a,t[1]=r*o+h*a,t[2]=e*l+n*u,t[3]=r*l+h*u,t},Qt=function(t,s,i){var e=s[0],r=s[1],n=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+n*o,t[1]=r*a+h*o,t[2]=e*-o+n*a,t[3]=r*-o+h*a,t},Jt=function(t,s,i){var e=s[0],r=s[1],n=s[2],h=s[3],o=i[0],a=i[1];return t[0]=e*o,t[1]=r*o,t[2]=n*a,t[3]=h*a,t},Vt=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t},Yt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},Ht=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},qt=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},Zt=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},Xt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},Kt=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},$t=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},ts=function(t,i){var e=t[0],r=t[1],n=t[2],h=t[3],o=i[0],a=i[1],l=i[2],u=i[3];return Math.abs(e-o)<=s*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(r-a)<=s*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-l)<=s*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(h-u)<=s*Math.max(1,Math.abs(h),Math.abs(u))},ss=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},is=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},es=function(){var t=new i(6);return i!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},rs=function(t){var s=new i(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},ns=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},hs=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},os=function(t,s,e,r,n,h){var o=new i(6);return o[0]=t,o[1]=s,o[2]=e,o[3]=r,o[4]=n,o[5]=h,o},as=function(t,s,i,e,r,n,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=r,t[4]=n,t[5]=h,t},ls=function(t,s){var i=s[0],e=s[1],r=s[2],n=s[3],h=s[4],o=s[5],a=i*n-e*r;return a?(a=1/a,t[0]=n*a,t[1]=-e*a,t[2]=-r*a,t[3]=i*a,t[4]=(r*o-n*h)*a,t[5]=(e*h-i*o)*a,t):null},us=function(t){return t[0]*t[3]-t[1]*t[2]},cs=function(t,s,i){var e=s[0],r=s[1],n=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1],c=i[2],f=i[3],d=i[4],p=i[5];return t[0]=e*l+n*u,t[1]=r*l+h*u,t[2]=e*c+n*f,t[3]=r*c+h*f,t[4]=e*d+n*p+o,t[5]=r*d+h*p+a,t},fs=function(t,s,i){var e=s[0],r=s[1],n=s[2],h=s[3],o=s[4],a=s[5],l=Math.sin(i),u=Math.cos(i);return t[0]=e*u+n*l,t[1]=r*u+h*l,t[2]=e*-l+n*u,t[3]=r*-l+h*u,t[4]=o,t[5]=a,t},ds=function(t,s,i){var e=s[0],r=s[1],n=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1];return t[0]=e*l,t[1]=r*l,t[2]=n*u,t[3]=h*u,t[4]=o,t[5]=a,t},ps=function(t,s,i){var e=s[0],r=s[1],n=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1];return t[0]=e,t[1]=r,t[2]=n,t[3]=h,t[4]=e*l+n*u+o,t[5]=r*l+h*u+a,t},ms=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t[4]=0,t[5]=0,t},ys=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},gs=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},Ms=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},ws=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},bs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},Ss=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},Ts=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},vs=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},xs=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},Is=function(t,i){var e=t[0],r=t[1],n=t[2],h=t[3],o=t[4],a=t[5],l=i[0],u=i[1],c=i[2],f=i[3],d=i[4],p=i[5];return Math.abs(e-l)<=s*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(r-u)<=s*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-c)<=s*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(h-f)<=s*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(o-d)<=s*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-p)<=s*Math.max(1,Math.abs(a),Math.abs(p))},Cs=function(){var t=new i(9);return i!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},Gs=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},Ns=function(t){var s=new i(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},_s=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Es=function(t,s,e,r,n,h,o,a,l){var u=new i(9);return u[0]=t,u[1]=s,u[2]=e,u[3]=r,u[4]=n,u[5]=h,u[6]=o,u[7]=a,u[8]=l,u},Ds=function(t,s,i,e,r,n,h,o,a,l){return t[0]=s,t[1]=i,t[2]=e,t[3]=r,t[4]=n,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t},As=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ls=function(t,s){if(t===s){var i=s[1],e=s[2],r=s[5];t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=r}else t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8];return t},Os=function(t,s){var i=s[0],e=s[1],r=s[2],n=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=u*h-o*l,f=-u*n+o*a,d=l*n-h*a,p=i*c+e*f+r*d;return p?(p=1/p,t[0]=c*p,t[1]=(-u*e+r*l)*p,t[2]=(o*e-r*h)*p,t[3]=f*p,t[4]=(u*i-r*a)*p,t[5]=(-o*i+r*n)*p,t[6]=d*p,t[7]=(-l*i+e*a)*p,t[8]=(h*i-e*n)*p,t):null},Rs=function(t,s){var i=s[0],e=s[1],r=s[2],n=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8];return t[0]=h*u-o*l,t[1]=r*l-e*u,t[2]=e*o-r*h,t[3]=o*a-n*u,t[4]=i*u-r*a,t[5]=r*n-i*o,t[6]=n*l-h*a,t[7]=e*a-i*l,t[8]=i*h-e*n,t},ks=function(t){var s=t[0],i=t[1],e=t[2],r=t[3],n=t[4],h=t[5],o=t[6],a=t[7],l=t[8];return s*(l*n-h*a)+i*(-l*r+h*o)+e*(a*r-n*o)},js=function(t,s,i){var e=s[0],r=s[1],n=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=i[0],d=i[1],p=i[2],m=i[3],y=i[4],g=i[5],M=i[6],w=i[7],b=i[8];return t[0]=f*e+d*h+p*l,t[1]=f*r+d*o+p*u,t[2]=f*n+d*a+p*c,t[3]=m*e+y*h+g*l,t[4]=m*r+y*o+g*u,t[5]=m*n+y*a+g*c,t[6]=M*e+w*h+b*l,t[7]=M*r+w*o+b*u,t[8]=M*n+w*a+b*c,t},Ps=function(t,s,i){var e=s[0],r=s[1],n=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=i[0],d=i[1];return t[0]=e,t[1]=r,t[2]=n,t[3]=h,t[4]=o,t[5]=a,t[6]=f*e+d*h+l,t[7]=f*r+d*o+u,t[8]=f*n+d*a+c,t},Fs=function(t,s,i){var e=s[0],r=s[1],n=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=Math.sin(i),d=Math.cos(i);return t[0]=d*e+f*h,t[1]=d*r+f*o,t[2]=d*n+f*a,t[3]=d*h-f*e,t[4]=d*o-f*r,t[5]=d*a-f*n,t[6]=l,t[7]=u,t[8]=c,t},zs=function(t,s,i){var e=i[0],r=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=r*s[3],t[4]=r*s[4],t[5]=r*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Bs=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},Us=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=0,t[3]=-i,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ws=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Qs=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},Js=function(t,s){var i=s[0],e=s[1],r=s[2],n=s[3],h=i+i,o=e+e,a=r+r,l=i*h,u=e*h,c=e*o,f=r*h,d=r*o,p=r*a,m=n*h,y=n*o,g=n*a;return t[0]=1-c-p,t[3]=u-g,t[6]=f+y,t[1]=u+g,t[4]=1-l-p,t[7]=d-m,t[2]=f-y,t[5]=d+m,t[8]=1-l-c,t},Vs=function(t,s){var i=s[0],e=s[1],r=s[2],n=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],y=s[14],g=s[15],M=i*o-e*h,w=i*a-r*h,b=i*l-n*h,S=e*a-r*o,T=e*l-n*o,v=r*l-n*a,x=u*m-c*p,I=u*y-f*p,C=u*g-d*p,G=c*y-f*m,N=c*g-d*m,_=f*g-d*y,E=M*_-w*N+b*G+S*C-T*I+v*x;return E?(E=1/E,t[0]=(o*_-a*N+l*G)*E,t[1]=(a*C-h*_-l*I)*E,t[2]=(h*N-o*C+l*x)*E,t[3]=(r*N-e*_-n*G)*E,t[4]=(i*_-r*C+n*I)*E,t[5]=(e*C-i*N-n*x)*E,t[6]=(m*v-y*T+g*S)*E,t[7]=(y*b-p*v-g*w)*E,t[8]=(p*T-m*b+g*M)*E,t):null},Ys=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},Hs=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},qs=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Zs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},Xs=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},Ks=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},$s=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},ti=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},si=function(t,i){var e=t[0],r=t[1],n=t[2],h=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],f=i[0],d=i[1],p=i[2],m=i[3],y=i[4],g=i[5],M=i[6],w=i[7],b=i[8];return Math.abs(e-f)<=s*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(r-d)<=s*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(n-p)<=s*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(h-m)<=s*Math.max(1,Math.abs(h),Math.abs(m))&&Math.abs(o-y)<=s*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(a-g)<=s*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-M)<=s*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(u-w)<=s*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(c-b)<=s*Math.max(1,Math.abs(c),Math.abs(b))},ii=function(){var t=new i(16);return i!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},ei=function(t){var s=new i(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},ri=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},ni=function(t,s,e,r,n,h,o,a,l,u,c,f,d,p,m,y){var g=new i(16);return g[0]=t,g[1]=s,g[2]=e,g[3]=r,g[4]=n,g[5]=h,g[6]=o,g[7]=a,g[8]=l,g[9]=u,g[10]=c,g[11]=f,g[12]=d,g[13]=p,g[14]=m,g[15]=y,g},hi=function(t,s,i,e,r,n,h,o,a,l,u,c,f,d,p,m,y){return t[0]=s,t[1]=i,t[2]=e,t[3]=r,t[4]=n,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=y,t},oi=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ai=function(t,s){if(t===s){var i=s[1],e=s[2],r=s[3],n=s[6],h=s[7],o=s[11];t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=n,t[11]=s[14],t[12]=r,t[13]=h,t[14]=o}else t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15];return t},li=function(t,s){var i=s[0],e=s[1],r=s[2],n=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],y=s[14],g=s[15],M=i*o-e*h,w=i*a-r*h,b=i*l-n*h,S=e*a-r*o,T=e*l-n*o,v=r*l-n*a,x=u*m-c*p,I=u*y-f*p,C=u*g-d*p,G=c*y-f*m,N=c*g-d*m,_=f*g-d*y,E=M*_-w*N+b*G+S*C-T*I+v*x;return E?(E=1/E,t[0]=(o*_-a*N+l*G)*E,t[1]=(r*N-e*_-n*G)*E,t[2]=(m*v-y*T+g*S)*E,t[3]=(f*T-c*v-d*S)*E,t[4]=(a*C-h*_-l*I)*E,t[5]=(i*_-r*C+n*I)*E,t[6]=(y*b-p*v-g*w)*E,t[7]=(u*v-f*b+d*w)*E,t[8]=(h*N-o*C+l*x)*E,t[9]=(e*C-i*N-n*x)*E,t[10]=(p*T-m*b+g*M)*E,t[11]=(c*b-u*T-d*M)*E,t[12]=(o*I-h*G-a*x)*E,t[13]=(i*G-e*I+r*x)*E,t[14]=(m*w-p*S-y*M)*E,t[15]=(u*S-c*w+f*M)*E,t):null},ui=function(t,s){var i=s[0],e=s[1],r=s[2],n=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],y=s[14],g=s[15],M=i*o-e*h,w=i*a-r*h,b=i*l-n*h,S=e*a-r*o,T=e*l-n*o,v=r*l-n*a,x=u*m-c*p,I=u*y-f*p,C=u*g-d*p,G=c*y-f*m,N=c*g-d*m,_=f*g-d*y;return t[0]=o*_-a*N+l*G,t[1]=r*N-e*_-n*G,t[2]=m*v-y*T+g*S,t[3]=f*T-c*v-d*S,t[4]=a*C-h*_-l*I,t[5]=i*_-r*C+n*I,t[6]=y*b-p*v-g*w,t[7]=u*v-f*b+d*w,t[8]=h*N-o*C+l*x,t[9]=e*C-i*N-n*x,t[10]=p*T-m*b+g*M,t[11]=c*b-u*T-d*M,t[12]=o*I-h*G-a*x,t[13]=i*G-e*I+r*x,t[14]=m*w-p*S-y*M,t[15]=u*S-c*w+f*M,t},ci=function(t){var s=t[0],i=t[1],e=t[2],r=t[3],n=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[9],c=t[10],f=t[11],d=t[12],p=t[13],m=t[14],y=s*h-i*n,g=s*o-e*n,M=i*o-e*h,w=l*p-u*d,b=l*m-c*d,S=u*m-c*p;return a*(s*S-i*b+e*w)-r*(n*S-h*b+o*w)+t[15]*(l*M-u*g+c*y)-f*(d*M-p*g+m*y)},fi=function(t,s,i){var e=s[0],r=s[1],n=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],y=s[13],g=s[14],M=s[15],w=i[0],b=i[1],S=i[2],T=i[3];return t[0]=w*e+b*o+S*c+T*m,t[1]=w*r+b*a+S*f+T*y,t[2]=w*n+b*l+S*d+T*g,t[3]=w*h+b*u+S*p+T*M,w=i[4],b=i[5],S=i[6],T=i[7],t[4]=w*e+b*o+S*c+T*m,t[5]=w*r+b*a+S*f+T*y,t[6]=w*n+b*l+S*d+T*g,t[7]=w*h+b*u+S*p+T*M,w=i[8],b=i[9],S=i[10],T=i[11],t[8]=w*e+b*o+S*c+T*m,t[9]=w*r+b*a+S*f+T*y,t[10]=w*n+b*l+S*d+T*g,t[11]=w*h+b*u+S*p+T*M,w=i[12],b=i[13],S=i[14],T=i[15],t[12]=w*e+b*o+S*c+T*m,t[13]=w*r+b*a+S*f+T*y,t[14]=w*n+b*l+S*d+T*g,t[15]=w*h+b*u+S*p+T*M,t},di=function(t,s,i){var e,r,n,h,o,a,l,u,c,f,d,p,m=i[0],y=i[1],g=i[2];return s===t?(t[12]=s[0]*m+s[4]*y+s[8]*g+s[12],t[13]=s[1]*m+s[5]*y+s[9]*g+s[13],t[14]=s[2]*m+s[6]*y+s[10]*g+s[14],t[15]=s[3]*m+s[7]*y+s[11]*g+s[15]):(e=s[0],r=s[1],n=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=r,t[2]=n,t[3]=h,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*y+c*g+s[12],t[13]=r*m+a*y+f*g+s[13],t[14]=n*m+l*y+d*g+s[14],t[15]=h*m+u*y+p*g+s[15]),t},pi=function(t,s,i){var e=i[0],r=i[1],n=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*r,t[5]=s[5]*r,t[6]=s[6]*r,t[7]=s[7]*r,t[8]=s[8]*n,t[9]=s[9]*n,t[10]=s[10]*n,t[11]=s[11]*n,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},mi=function(t,i,e,r){var n,h,o,a,l,u,c,f,d,p,m,y,g,M,w,b,S,T,v,x,I,C,G,N,_=r[0],E=r[1],D=r[2],A=Math.hypot(_,E,D);return A<s?null:(_*=A=1/A,E*=A,D*=A,n=Math.sin(e),o=1-(h=Math.cos(e)),a=i[0],l=i[1],u=i[2],c=i[3],f=i[4],d=i[5],p=i[6],m=i[7],y=i[8],g=i[9],M=i[10],w=i[11],b=_*_*o+h,S=E*_*o+D*n,T=D*_*o-E*n,v=_*E*o-D*n,x=E*E*o+h,I=D*E*o+_*n,C=_*D*o+E*n,G=E*D*o-_*n,N=D*D*o+h,t[0]=a*b+f*S+y*T,t[1]=l*b+d*S+g*T,t[2]=u*b+p*S+M*T,t[3]=c*b+m*S+w*T,t[4]=a*v+f*x+y*I,t[5]=l*v+d*x+g*I,t[6]=u*v+p*x+M*I,t[7]=c*v+m*x+w*I,t[8]=a*C+f*G+y*N,t[9]=l*C+d*G+g*N,t[10]=u*C+p*G+M*N,t[11]=c*C+m*G+w*N,i!==t&&(t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t)},yi=function(t,s,i){var e=Math.sin(i),r=Math.cos(i),n=s[4],h=s[5],o=s[6],a=s[7],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=n*r+l*e,t[5]=h*r+u*e,t[6]=o*r+c*e,t[7]=a*r+f*e,t[8]=l*r-n*e,t[9]=u*r-h*e,t[10]=c*r-o*e,t[11]=f*r-a*e,t},gi=function(t,s,i){var e=Math.sin(i),r=Math.cos(i),n=s[0],h=s[1],o=s[2],a=s[3],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=n*r-l*e,t[1]=h*r-u*e,t[2]=o*r-c*e,t[3]=a*r-f*e,t[8]=n*e+l*r,t[9]=h*e+u*r,t[10]=o*e+c*r,t[11]=a*e+f*r,t},Mi=function(t,s,i){var e=Math.sin(i),r=Math.cos(i),n=s[0],h=s[1],o=s[2],a=s[3],l=s[4],u=s[5],c=s[6],f=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=n*r+l*e,t[1]=h*r+u*e,t[2]=o*r+c*e,t[3]=a*r+f*e,t[4]=l*r-n*e,t[5]=u*r-h*e,t[6]=c*r-o*e,t[7]=f*r-a*e,t},wi=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},bi=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Si=function(t,i,e){var r,n,h,o=e[0],a=e[1],l=e[2],u=Math.hypot(o,a,l);return u<s?null:(o*=u=1/u,a*=u,l*=u,r=Math.sin(i),h=1-(n=Math.cos(i)),t[0]=o*o*h+n,t[1]=a*o*h+l*r,t[2]=l*o*h-a*r,t[3]=0,t[4]=o*a*h-l*r,t[5]=a*a*h+n,t[6]=l*a*h+o*r,t[7]=0,t[8]=o*l*h+a*r,t[9]=a*l*h-o*r,t[10]=l*l*h+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},Ti=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},vi=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},xi=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ii=function(t,s,i){var e=s[0],r=s[1],n=s[2],h=s[3],o=e+e,a=r+r,l=n+n,u=e*o,c=e*a,f=e*l,d=r*a,p=r*l,m=n*l,y=h*o,g=h*a,M=h*l;return t[0]=1-(d+m),t[1]=c+M,t[2]=f-g,t[3]=0,t[4]=c-M,t[5]=1-(u+m),t[6]=p+y,t[7]=0,t[8]=f+g,t[9]=p-y,t[10]=1-(u+d),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Ci=function(t,s){var e=new i(3),r=-s[0],n=-s[1],h=-s[2],o=s[3],a=s[4],l=s[5],u=s[6],c=s[7],f=r*r+n*n+h*h+o*o;return f>0?(e[0]=2*(a*o+c*r+l*h-u*n)/f,e[1]=2*(l*o+c*n+u*r-a*h)/f,e[2]=2*(u*o+c*h+a*n-l*r)/f):(e[0]=2*(a*o+c*r+l*h-u*n),e[1]=2*(l*o+c*n+u*r-a*h),e[2]=2*(u*o+c*h+a*n-l*r)),Ii(t,s,e),t},Gi=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},Ni=function(t,s){var i=s[0],e=s[1],r=s[2],n=s[4],h=s[5],o=s[6],a=s[8],l=s[9],u=s[10];return t[0]=Math.hypot(i,e,r),t[1]=Math.hypot(n,h,o),t[2]=Math.hypot(a,l,u),t},_i=function(t,s){var e=new i(3);Ni(e,s);var r=1/e[0],n=1/e[1],h=1/e[2],o=s[0]*r,a=s[1]*n,l=s[2]*h,u=s[4]*r,c=s[5]*n,f=s[6]*h,d=s[8]*r,p=s[9]*n,m=s[10]*h,y=o+c+m,g=0;return y>0?(g=2*Math.sqrt(y+1),t[3]=.25*g,t[0]=(f-p)/g,t[1]=(d-l)/g,t[2]=(a-u)/g):o>c&&o>m?(g=2*Math.sqrt(1+o-c-m),t[3]=(f-p)/g,t[0]=.25*g,t[1]=(a+u)/g,t[2]=(d+l)/g):c>m?(g=2*Math.sqrt(1+c-o-m),t[3]=(d-l)/g,t[0]=(a+u)/g,t[1]=.25*g,t[2]=(f+p)/g):(g=2*Math.sqrt(1+m-o-c),t[3]=(a-u)/g,t[0]=(d+l)/g,t[1]=(f+p)/g,t[2]=.25*g),t},Ei=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var r=e[0],n=e[1],h=e[2],o=e[4],a=e[5],l=e[6],u=e[8],c=e[9],f=e[10];i[0]=Math.hypot(r,n,h),i[1]=Math.hypot(o,a,l),i[2]=Math.hypot(u,c,f);var d=1/i[0],p=1/i[1],m=1/i[2],y=r*d,g=n*p,M=h*m,w=o*d,b=a*p,S=l*m,T=u*d,v=c*p,x=f*m,I=y+b+x,C=0;return I>0?(C=2*Math.sqrt(I+1),t[3]=.25*C,t[0]=(S-v)/C,t[1]=(T-M)/C,t[2]=(g-w)/C):y>b&&y>x?(C=2*Math.sqrt(1+y-b-x),t[3]=(S-v)/C,t[0]=.25*C,t[1]=(g+w)/C,t[2]=(T+M)/C):b>x?(C=2*Math.sqrt(1+b-y-x),t[3]=(T-M)/C,t[0]=(g+w)/C,t[1]=.25*C,t[2]=(S+v)/C):(C=2*Math.sqrt(1+x-y-b),t[3]=(g-w)/C,t[0]=(T+M)/C,t[1]=(S+v)/C,t[2]=.25*C),t},Di=function(t,s,i,e){var r=s[0],n=s[1],h=s[2],o=s[3],a=r+r,l=n+n,u=h+h,c=r*a,f=r*l,d=r*u,p=n*l,m=n*u,y=h*u,g=o*a,M=o*l,w=o*u,b=e[0],S=e[1],T=e[2];return t[0]=(1-(p+y))*b,t[1]=(f+w)*b,t[2]=(d-M)*b,t[3]=0,t[4]=(f-w)*S,t[5]=(1-(c+y))*S,t[6]=(m+g)*S,t[7]=0,t[8]=(d+M)*T,t[9]=(m-g)*T,t[10]=(1-(c+p))*T,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Ai=function(t,s,i,e,r){var n=s[0],h=s[1],o=s[2],a=s[3],l=n+n,u=h+h,c=o+o,f=n*l,d=n*u,p=n*c,m=h*u,y=h*c,g=o*c,M=a*l,w=a*u,b=a*c,S=e[0],T=e[1],v=e[2],x=r[0],I=r[1],C=r[2],G=(1-(m+g))*S,N=(d+b)*S,_=(p-w)*S,E=(d-b)*T,D=(1-(f+g))*T,A=(y+M)*T,L=(p+w)*v,O=(y-M)*v,R=(1-(f+m))*v;return t[0]=G,t[1]=N,t[2]=_,t[3]=0,t[4]=E,t[5]=D,t[6]=A,t[7]=0,t[8]=L,t[9]=O,t[10]=R,t[11]=0,t[12]=i[0]+x-(G*x+E*I+L*C),t[13]=i[1]+I-(N*x+D*I+O*C),t[14]=i[2]+C-(_*x+A*I+R*C),t[15]=1,t},Li=function(t,s){var i=s[0],e=s[1],r=s[2],n=s[3],h=i+i,o=e+e,a=r+r,l=i*h,u=e*h,c=e*o,f=r*h,d=r*o,p=r*a,m=n*h,y=n*o,g=n*a;return t[0]=1-c-p,t[1]=u+g,t[2]=f-y,t[3]=0,t[4]=u-g,t[5]=1-l-p,t[6]=d+m,t[7]=0,t[8]=f+y,t[9]=d-m,t[10]=1-l-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Oi=function(t,s,i,e,r,n,h){var o=1/(i-s),a=1/(r-e),l=1/(n-h);return t[0]=2*n*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*n*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(r+e)*a,t[10]=(h+n)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=h*n*2*l,t[15]=0,t},Ri=function(t,s,i,e,r){var n=1/Math.tan(s/2);if(t[0]=n/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0){var h=1/(e-r);t[10]=(r+e)*h,t[14]=2*r*e*h}else t[10]=-1,t[14]=-2*e;return t},ki=function(t,s,i,e,r){var n=1/Math.tan(s/2);if(t[0]=n/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0){var h=1/(e-r);t[10]=r*h,t[14]=r*e*h}else t[10]=-1,t[14]=-e;return t},ji=function(t,s,i,e){var r=Math.tan(s.upDegrees*Math.PI/180),n=Math.tan(s.downDegrees*Math.PI/180),h=Math.tan(s.leftDegrees*Math.PI/180),o=Math.tan(s.rightDegrees*Math.PI/180),a=2/(h+o),l=2/(r+n);return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(h-o)*a*.5,t[9]=(r-n)*l*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},Pi=function(t,s,i,e,r,n,h){var o=1/(s-i),a=1/(e-r),l=1/(n-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(s+i)*o,t[13]=(r+e)*a,t[14]=(h+n)*l,t[15]=1,t},Fi=function(t,s,i,e,r,n,h){var o=1/(s-i),a=1/(e-r),l=1/(n-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=l,t[11]=0,t[12]=(s+i)*o,t[13]=(r+e)*a,t[14]=n*l,t[15]=1,t},zi=function(t,i,e,r){var n,h,o,a,l,u,c,f,d,p,m=i[0],y=i[1],g=i[2],M=r[0],w=r[1],b=r[2],S=e[0],T=e[1],v=e[2];return Math.abs(m-S)<s&&Math.abs(y-T)<s&&Math.abs(g-v)<s?oi(t):(c=m-S,f=y-T,d=g-v,n=w*(d*=p=1/Math.hypot(c,f,d))-b*(f*=p),h=b*(c*=p)-M*d,o=M*f-w*c,(p=Math.hypot(n,h,o))?(n*=p=1/p,h*=p,o*=p):(n=0,h=0,o=0),a=f*o-d*h,l=d*n-c*o,u=c*h-f*n,(p=Math.hypot(a,l,u))?(a*=p=1/p,l*=p,u*=p):(a=0,l=0,u=0),t[0]=n,t[1]=a,t[2]=c,t[3]=0,t[4]=h,t[5]=l,t[6]=f,t[7]=0,t[8]=o,t[9]=u,t[10]=d,t[11]=0,t[12]=-(n*m+h*y+o*g),t[13]=-(a*m+l*y+u*g),t[14]=-(c*m+f*y+d*g),t[15]=1,t)},Bi=function(t,s,i,e){var r=s[0],n=s[1],h=s[2],o=e[0],a=e[1],l=e[2],u=r-i[0],c=n-i[1],f=h-i[2],d=u*u+c*c+f*f;d>0&&(u*=d=1/Math.sqrt(d),c*=d,f*=d);var p=a*f-l*c,m=l*u-o*f,y=o*c-a*u;return(d=p*p+m*m+y*y)>0&&(p*=d=1/Math.sqrt(d),m*=d,y*=d),t[0]=p,t[1]=m,t[2]=y,t[3]=0,t[4]=c*y-f*m,t[5]=f*p-u*y,t[6]=u*m-c*p,t[7]=0,t[8]=u,t[9]=c,t[10]=f,t[11]=0,t[12]=r,t[13]=n,t[14]=h,t[15]=1,t},Ui=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},Wi=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Qi=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},Ji=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},Vi=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},Yi=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},Hi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},qi=function(t,i){var e=t[0],r=t[1],n=t[2],h=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],p=t[11],m=t[12],y=t[13],g=t[14],M=t[15],w=i[0],b=i[1],S=i[2],T=i[3],v=i[4],x=i[5],I=i[6],C=i[7],G=i[8],N=i[9],_=i[10],E=i[11],D=i[12],A=i[13],L=i[14],O=i[15];return Math.abs(e-w)<=s*Math.max(1,Math.abs(e),Math.abs(w))&&Math.abs(r-b)<=s*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(n-S)<=s*Math.max(1,Math.abs(n),Math.abs(S))&&Math.abs(h-T)<=s*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(o-v)<=s*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(a-x)<=s*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(l-I)<=s*Math.max(1,Math.abs(l),Math.abs(I))&&Math.abs(u-C)<=s*Math.max(1,Math.abs(u),Math.abs(C))&&Math.abs(c-G)<=s*Math.max(1,Math.abs(c),Math.abs(G))&&Math.abs(f-N)<=s*Math.max(1,Math.abs(f),Math.abs(N))&&Math.abs(d-_)<=s*Math.max(1,Math.abs(d),Math.abs(_))&&Math.abs(p-E)<=s*Math.max(1,Math.abs(p),Math.abs(E))&&Math.abs(m-D)<=s*Math.max(1,Math.abs(m),Math.abs(D))&&Math.abs(y-A)<=s*Math.max(1,Math.abs(y),Math.abs(A))&&Math.abs(g-L)<=s*Math.max(1,Math.abs(g),Math.abs(L))&&Math.abs(M-O)<=s*Math.max(1,Math.abs(M),Math.abs(O))},Zi=function(){var t=new i(3);return i!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},Xi=function(t){var s=new i(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Ki=function(t){var s=t[0],i=t[1],e=t[2];return Math.hypot(s,i,e)},$i=function(t,s,e){var r=new i(3);return r[0]=t,r[1]=s,r[2]=e,r},te=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},se=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},ie=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},ee=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},re=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},ne=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},he=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},oe=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},ae=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},le=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},ue=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},ce=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},fe=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},de=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],r=s[2]-t[2];return Math.hypot(i,e,r)},pe=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],r=s[2]-t[2];return i*i+e*e+r*r},me=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e},ye=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},ge=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},Me=function(t,s){var i=s[0],e=s[1],r=s[2],n=i*i+e*e+r*r;return n>0&&(n=1/Math.sqrt(n)),t[0]=s[0]*n,t[1]=s[1]*n,t[2]=s[2]*n,t},we=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},be=function(t,s,i){var e=s[0],r=s[1],n=s[2],h=i[0],o=i[1],a=i[2];return t[0]=r*a-n*o,t[1]=n*h-e*a,t[2]=e*o-r*h,t},Se=function(t,s,i,e){var r=s[0],n=s[1],h=s[2];return t[0]=r+e*(i[0]-r),t[1]=n+e*(i[1]-n),t[2]=h+e*(i[2]-h),t},Te=function(t,s,i,e){var r=Math.acos(Math.min(Math.max(we(s,i),-1),1)),n=Math.sin(r),h=Math.sin((1-e)*r)/n,o=Math.sin(e*r)/n;return t[0]=h*s[0]+o*i[0],t[1]=h*s[1]+o*i[1],t[2]=h*s[2]+o*i[2],t},ve=function(t,s,i,e,r,n){var h=n*n,o=h*(2*n-3)+1,a=h*(n-2)+n,l=h*(n-1),u=h*(3-2*n);return t[0]=s[0]*o+i[0]*a+e[0]*l+r[0]*u,t[1]=s[1]*o+i[1]*a+e[1]*l+r[1]*u,t[2]=s[2]*o+i[2]*a+e[2]*l+r[2]*u,t},xe=function(t,s,i,e,r,n){var h=1-n,o=h*h,a=n*n,l=o*h,u=3*n*o,c=3*a*h,f=a*n;return t[0]=s[0]*l+i[0]*u+e[0]*c+r[0]*f,t[1]=s[1]*l+i[1]*u+e[1]*c+r[1]*f,t[2]=s[2]*l+i[2]*u+e[2]*c+r[2]*f,t},Ie=function(t,s){s=s||1;var i=2*e()*Math.PI,r=2*e()-1,n=Math.sqrt(1-r*r)*s;return t[0]=Math.cos(i)*n,t[1]=Math.sin(i)*n,t[2]=r*s,t},Ce=function(t,s,i){var e=s[0],r=s[1],n=s[2],h=i[3]*e+i[7]*r+i[11]*n+i[15];return h=h||1,t[0]=(i[0]*e+i[4]*r+i[8]*n+i[12])/h,t[1]=(i[1]*e+i[5]*r+i[9]*n+i[13])/h,t[2]=(i[2]*e+i[6]*r+i[10]*n+i[14])/h,t},Ge=function(t,s,i){var e=s[0],r=s[1],n=s[2];return t[0]=e*i[0]+r*i[3]+n*i[6],t[1]=e*i[1]+r*i[4]+n*i[7],t[2]=e*i[2]+r*i[5]+n*i[8],t},Ne=function(t,s,i){var e=i[0],r=i[1],n=i[2],h=i[3],o=s[0],a=s[1],l=s[2],u=r*l-n*a,c=n*o-e*l,f=e*a-r*o,d=r*f-n*c,p=n*u-e*f,m=e*c-r*u,y=2*h;return u*=y,c*=y,f*=y,d*=2,p*=2,m*=2,t[0]=o+u+d,t[1]=a+c+p,t[2]=l+f+m,t},_e=function(t,s,i,e){var r=[],n=[];return r[0]=s[0]-i[0],r[1]=s[1]-i[1],r[2]=s[2]-i[2],n[0]=r[0],n[1]=r[1]*Math.cos(e)-r[2]*Math.sin(e),n[2]=r[1]*Math.sin(e)+r[2]*Math.cos(e),t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t},Ee=function(t,s,i,e){var r=[],n=[];return r[0]=s[0]-i[0],r[1]=s[1]-i[1],r[2]=s[2]-i[2],n[0]=r[2]*Math.sin(e)+r[0]*Math.cos(e),n[1]=r[1],n[2]=r[2]*Math.cos(e)-r[0]*Math.sin(e),t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t},De=function(t,s,i,e){var r=[],n=[];return r[0]=s[0]-i[0],r[1]=s[1]-i[1],r[2]=s[2]-i[2],n[0]=r[0]*Math.cos(e)-r[1]*Math.sin(e),n[1]=r[0]*Math.sin(e)+r[1]*Math.cos(e),n[2]=r[2],t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t},Ae=function(t,s){var i=t[0],e=t[1],r=t[2],n=s[0],h=s[1],o=s[2],a=Math.sqrt((i*i+e*e+r*r)*(n*n+h*h+o*o)),l=a&&we(t,s)/a;return Math.acos(Math.min(Math.max(l,-1),1))},Le=function(t){return t[0]=0,t[1]=0,t[2]=0,t},Oe=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},Re=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},ke=function(t,i){var e=t[0],r=t[1],n=t[2],h=i[0],o=i[1],a=i[2];return Math.abs(e-h)<=s*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(r-o)<=s*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-a)<=s*Math.max(1,Math.abs(n),Math.abs(a))},je=function(){var t=new i(4);return i!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},Pe=function(t){var s=new i(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},Fe=function(t,s,e,r){var n=new i(4);return n[0]=t,n[1]=s,n[2]=e,n[3]=r,n},ze=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},Be=function(t,s,i,e,r){return t[0]=s,t[1]=i,t[2]=e,t[3]=r,t},Ue=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},We=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Qe=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},Je=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},Ve=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},Ye=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},He=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},qe=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},Ze=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},Xe=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},Ke=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},$e=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],r=s[2]-t[2],n=s[3]-t[3];return Math.hypot(i,e,r,n)},tr=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],r=s[2]-t[2],n=s[3]-t[3];return i*i+e*e+r*r+n*n},sr=function(t){var s=t[0],i=t[1],e=t[2],r=t[3];return Math.hypot(s,i,e,r)},ir=function(t){var s=t[0],i=t[1],e=t[2],r=t[3];return s*s+i*i+e*e+r*r},er=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},rr=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},nr=function(t,s){var i=s[0],e=s[1],r=s[2],n=s[3],h=i*i+e*e+r*r+n*n;return h>0&&(h=1/Math.sqrt(h)),t[0]=i*h,t[1]=e*h,t[2]=r*h,t[3]=n*h,t},hr=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},or=function(t,s,i,e){var r=i[0]*e[1]-i[1]*e[0],n=i[0]*e[2]-i[2]*e[0],h=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],l=i[2]*e[3]-i[3]*e[2],u=s[0],c=s[1],f=s[2],d=s[3];return t[0]=c*l-f*a+d*o,t[1]=-u*l+f*h-d*n,t[2]=u*a-c*h+d*r,t[3]=-u*o+c*n-f*r,t},ar=function(t,s,i,e){var r=s[0],n=s[1],h=s[2],o=s[3];return t[0]=r+e*(i[0]-r),t[1]=n+e*(i[1]-n),t[2]=h+e*(i[2]-h),t[3]=o+e*(i[3]-o),t},lr=function(t,s){var i,r,n,h,o,a;s=s||1;do{o=(i=2*e()-1)*i+(r=2*e()-1)*r}while(o>=1);do{a=(n=2*e()-1)*n+(h=2*e()-1)*h}while(a>=1);var l=Math.sqrt((1-o)/a);return t[0]=s*i,t[1]=s*r,t[2]=s*n*l,t[3]=s*h*l,t},ur=function(t,s,i){var e=s[0],r=s[1],n=s[2],h=s[3];return t[0]=i[0]*e+i[4]*r+i[8]*n+i[12]*h,t[1]=i[1]*e+i[5]*r+i[9]*n+i[13]*h,t[2]=i[2]*e+i[6]*r+i[10]*n+i[14]*h,t[3]=i[3]*e+i[7]*r+i[11]*n+i[15]*h,t},cr=function(t,s,i){var e=s[0],r=s[1],n=s[2],h=i[0],o=i[1],a=i[2],l=i[3],u=l*e+o*n-a*r,c=l*r+a*e-h*n,f=l*n+h*r-o*e,d=-h*e-o*r-a*n;return t[0]=u*l+d*-h+c*-a-f*-o,t[1]=c*l+d*-o+f*-h-u*-a,t[2]=f*l+d*-a+u*-o-c*-h,t[3]=s[3],t},fr=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},dr=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},pr=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},mr=function(t,i){var e=t[0],r=t[1],n=t[2],h=t[3],o=i[0],a=i[1],l=i[2],u=i[3];return Math.abs(e-o)<=s*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(r-a)<=s*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-l)<=s*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(h-u)<=s*Math.max(1,Math.abs(h),Math.abs(u))},yr=function(){var t=new i(4);return i!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},gr=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},Mr=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},wr=function(t,i){var e=2*Math.acos(i[3]),r=Math.sin(e/2);return r>s?(t[0]=i[0]/r,t[1]=i[1]/r,t[2]=i[2]/r):(t[0]=1,t[1]=0,t[2]=0),e},br=function(t,s){var i=V(t,s);return Math.acos(2*i*i-1)},Sr=function(t,s,i){var e=s[0],r=s[1],n=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*u+h*o+r*l-n*a,t[1]=r*u+h*a+n*o-e*l,t[2]=n*u+h*l+e*a-r*o,t[3]=h*u-e*o-r*a-n*l,t},Tr=function(t,s,i){i*=.5;var e=s[0],r=s[1],n=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+h*o,t[1]=r*a+n*o,t[2]=n*a-r*o,t[3]=h*a-e*o,t},vr=function(t,s,i){i*=.5;var e=s[0],r=s[1],n=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a-n*o,t[1]=r*a+h*o,t[2]=n*a+e*o,t[3]=h*a-r*o,t},xr=function(t,s,i){i*=.5;var e=s[0],r=s[1],n=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+r*o,t[1]=r*a-e*o,t[2]=n*a+h*o,t[3]=h*a-n*o,t},Ir=function(t,s){var i=s[0],e=s[1],r=s[2];return t[0]=i,t[1]=e,t[2]=r,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-r*r)),t},Cr=function(t,s){var i=s[0],e=s[1],r=s[2],n=s[3],h=Math.sqrt(i*i+e*e+r*r),o=Math.exp(n),a=h>0?o*Math.sin(h)/h:0;return t[0]=i*a,t[1]=e*a,t[2]=r*a,t[3]=o*Math.cos(h),t},Gr=function(t,s){var i=s[0],e=s[1],r=s[2],n=s[3],h=Math.sqrt(i*i+e*e+r*r),o=h>0?Math.atan2(h,n)/h:0;return t[0]=i*o,t[1]=e*o,t[2]=r*o,t[3]=.5*Math.log(i*i+e*e+r*r+n*n),t},Nr=function(t,s,i){return Gr(t,s),J(t,t,i),Cr(t,t),t},_r=function(t,i,e,r){var n,h,o,a,l,u=i[0],c=i[1],f=i[2],d=i[3],p=e[0],m=e[1],y=e[2],g=e[3];return(h=u*p+c*m+f*y+d*g)<0&&(h=-h,p=-p,m=-m,y=-y,g=-g),1-h>s?(n=Math.acos(h),o=Math.sin(n),a=Math.sin((1-r)*n)/o,l=Math.sin(r*n)/o):(a=1-r,l=r),t[0]=a*u+l*p,t[1]=a*c+l*m,t[2]=a*f+l*y,t[3]=a*d+l*g,t},Er=function(t){var s=e(),i=e(),r=e(),n=Math.sqrt(1-s),h=Math.sqrt(s);return t[0]=n*Math.sin(2*Math.PI*i),t[1]=n*Math.cos(2*Math.PI*i),t[2]=h*Math.sin(2*Math.PI*r),t[3]=h*Math.cos(2*Math.PI*r),t},Dr=function(t,s){var i=s[0],e=s[1],r=s[2],n=s[3],h=i*i+e*e+r*r+n*n,o=h?1/h:0;return t[0]=-i*o,t[1]=-e*o,t[2]=-r*o,t[3]=n*o,t},Ar=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},Lr=function(t,s){var i,e=s[0]+s[4]+s[8];if(e>0)i=Math.sqrt(e+1),t[3]=.5*i,i=.5/i,t[0]=(s[5]-s[7])*i,t[1]=(s[6]-s[2])*i,t[2]=(s[1]-s[3])*i;else{var r=0;s[4]>s[0]&&(r=1),s[8]>s[3*r+r]&&(r=2);var n=(r+1)%3,h=(r+2)%3;i=Math.sqrt(s[3*r+r]-s[3*n+n]-s[3*h+h]+1),t[r]=.5*i,i=.5/i,t[3]=(s[3*n+h]-s[3*h+n])*i,t[n]=(s[3*n+r]+s[3*r+n])*i,t[h]=(s[3*h+r]+s[3*r+h])*i}return t},Or=function(t,s,i,e){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r,h=Math.PI/360;s*=h,e*=h,i*=h;var o=Math.sin(s),a=Math.cos(s),l=Math.sin(i),u=Math.cos(i),c=Math.sin(e),f=Math.cos(e);switch(n){case"xyz":t[0]=o*u*f+a*l*c,t[1]=a*l*f-o*u*c,t[2]=a*u*c+o*l*f,t[3]=a*u*f-o*l*c;break;case"xzy":t[0]=o*u*f-a*l*c,t[1]=a*l*f-o*u*c,t[2]=a*u*c+o*l*f,t[3]=a*u*f+o*l*c;break;case"yxz":t[0]=o*u*f+a*l*c,t[1]=a*l*f-o*u*c,t[2]=a*u*c-o*l*f,t[3]=a*u*f+o*l*c;break;case"yzx":t[0]=o*u*f+a*l*c,t[1]=a*l*f+o*u*c,t[2]=a*u*c-o*l*f,t[3]=a*u*f-o*l*c;break;case"zxy":t[0]=o*u*f-a*l*c,t[1]=a*l*f+o*u*c,t[2]=a*u*c+o*l*f,t[3]=a*u*f-o*l*c;break;case"zyx":t[0]=o*u*f-a*l*c,t[1]=a*l*f+o*u*c,t[2]=a*u*c-o*l*f,t[3]=a*u*f+o*l*c;break;default:throw new Error("Unknown angle order "+n)}return t},Rr=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},kr=function(t,i){return Math.abs(hr(t,i))>=1-s},jr=function(){var t=new i(8);return i!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},Pr=function(t){var s=new i(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},Fr=function(t,s,e,r,n,h,o,a){var l=new i(8);return l[0]=t,l[1]=s,l[2]=e,l[3]=r,l[4]=n,l[5]=h,l[6]=o,l[7]=a,l},zr=function(t,s,e,r,n,h,o){var a=new i(8);a[0]=t,a[1]=s,a[2]=e,a[3]=r;var l=.5*n,u=.5*h,c=.5*o;return a[4]=l*r+u*e-c*s,a[5]=u*r+c*t-l*e,a[6]=c*r+l*s-u*t,a[7]=-l*t-u*s-c*e,a},Br=function(t,s,i){var e=.5*i[0],r=.5*i[1],n=.5*i[2],h=s[0],o=s[1],a=s[2],l=s[3];return t[0]=h,t[1]=o,t[2]=a,t[3]=l,t[4]=e*l+r*a-n*o,t[5]=r*l+n*h-e*a,t[6]=n*l+e*o-r*h,t[7]=-e*h-r*o-n*a,t},Ur=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},Wr=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Qr=function(t,s){var e=yr();_i(e,s);var r=new i(3);return Gi(r,s),Br(t,e,r),t},Jr=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},Vr=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Yr=function(t,s,i,e,r,n,h,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=r,t[4]=n,t[5]=h,t[6]=o,t[7]=a,t},Hr=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},qr=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},Zr=function(t,s){var i=s[4],e=s[5],r=s[6],n=s[7],h=-s[0],o=-s[1],a=-s[2],l=s[3];return t[0]=2*(i*l+n*h+e*a-r*o),t[1]=2*(e*l+n*o+r*h-i*a),t[2]=2*(r*l+n*a+i*o-e*h),t},Xr=function(t,s,i){var e=s[0],r=s[1],n=s[2],h=s[3],o=.5*i[0],a=.5*i[1],l=.5*i[2],u=s[4],c=s[5],f=s[6],d=s[7];return t[0]=e,t[1]=r,t[2]=n,t[3]=h,t[4]=h*o+r*l-n*a+u,t[5]=h*a+n*o-e*l+c,t[6]=h*l+e*a-r*o+f,t[7]=-e*o-r*a-n*l+d,t},Kr=function(t,s,i){var e=-s[0],r=-s[1],n=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*n-l*r,f=a*h+u*r+l*e-o*n,d=l*h+u*n+o*r-a*e,p=u*h-o*e-a*r-l*n;return Tr(t,s,i),e=t[0],r=t[1],n=t[2],h=t[3],t[4]=c*h+p*e+f*n-d*r,t[5]=f*h+p*r+d*e-c*n,t[6]=d*h+p*n+c*r-f*e,t[7]=p*h-c*e-f*r-d*n,t},$r=function(t,s,i){var e=-s[0],r=-s[1],n=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*n-l*r,f=a*h+u*r+l*e-o*n,d=l*h+u*n+o*r-a*e,p=u*h-o*e-a*r-l*n;return vr(t,s,i),e=t[0],r=t[1],n=t[2],h=t[3],t[4]=c*h+p*e+f*n-d*r,t[5]=f*h+p*r+d*e-c*n,t[6]=d*h+p*n+c*r-f*e,t[7]=p*h-c*e-f*r-d*n,t},tn=function(t,s,i){var e=-s[0],r=-s[1],n=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*n-l*r,f=a*h+u*r+l*e-o*n,d=l*h+u*n+o*r-a*e,p=u*h-o*e-a*r-l*n;return xr(t,s,i),e=t[0],r=t[1],n=t[2],h=t[3],t[4]=c*h+p*e+f*n-d*r,t[5]=f*h+p*r+d*e-c*n,t[6]=d*h+p*n+c*r-f*e,t[7]=p*h-c*e-f*r-d*n,t},sn=function(t,s,i){var e=i[0],r=i[1],n=i[2],h=i[3],o=s[0],a=s[1],l=s[2],u=s[3];return t[0]=o*h+u*e+a*n-l*r,t[1]=a*h+u*r+l*e-o*n,t[2]=l*h+u*n+o*r-a*e,t[3]=u*h-o*e-a*r-l*n,o=s[4],a=s[5],l=s[6],u=s[7],t[4]=o*h+u*e+a*n-l*r,t[5]=a*h+u*r+l*e-o*n,t[6]=l*h+u*n+o*r-a*e,t[7]=u*h-o*e-a*r-l*n,t},en=function(t,s,i){var e=s[0],r=s[1],n=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*u+h*o+r*l-n*a,t[1]=r*u+h*a+n*o-e*l,t[2]=n*u+h*l+e*a-r*o,t[3]=h*u-e*o-r*a-n*l,o=i[4],a=i[5],l=i[6],u=i[7],t[4]=e*u+h*o+r*l-n*a,t[5]=r*u+h*a+n*o-e*l,t[6]=n*u+h*l+e*a-r*o,t[7]=h*u-e*o-r*a-n*l,t},rn=function(t,i,e,r){if(Math.abs(r)<s)return Jr(t,i);var n=Math.hypot(e[0],e[1],e[2]);r*=.5;var h=Math.sin(r),o=h*e[0]/n,a=h*e[1]/n,l=h*e[2]/n,u=Math.cos(r),c=i[0],f=i[1],d=i[2],p=i[3];t[0]=c*u+p*o+f*l-d*a,t[1]=f*u+p*a+d*o-c*l,t[2]=d*u+p*l+c*a-f*o,t[3]=p*u-c*o-f*a-d*l;var m=i[4],y=i[5],g=i[6],M=i[7];return t[4]=m*u+M*o+y*l-g*a,t[5]=y*u+M*a+g*o-m*l,t[6]=g*u+M*l+m*a-y*o,t[7]=M*u-m*o-y*a-g*l,t},nn=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},hn=function(t,s,i){var e=s[0],r=s[1],n=s[2],h=s[3],o=i[4],a=i[5],l=i[6],u=i[7],c=s[4],f=s[5],d=s[6],p=s[7],m=i[0],y=i[1],g=i[2],M=i[3];return t[0]=e*M+h*m+r*g-n*y,t[1]=r*M+h*y+n*m-e*g,t[2]=n*M+h*g+e*y-r*m,t[3]=h*M-e*m-r*y-n*g,t[4]=e*u+h*o+r*l-n*a+c*M+p*m+f*g-d*y,t[5]=r*u+h*a+n*o-e*l+f*M+p*y+d*m-c*g,t[6]=n*u+h*l+e*a-r*o+d*M+p*g+c*y-f*m,t[7]=h*u-e*o-r*a-n*l+p*M-c*m-f*y-d*g,t},on=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},an=function(t,s,i,e){var r=1-e;return ot(s,i)<0&&(e=-e),t[0]=s[0]*r+i[0]*e,t[1]=s[1]*r+i[1]*e,t[2]=s[2]*r+i[2]*e,t[3]=s[3]*r+i[3]*e,t[4]=s[4]*r+i[4]*e,t[5]=s[5]*r+i[5]*e,t[6]=s[6]*r+i[6]*e,t[7]=s[7]*r+i[7]*e,t},ln=function(t,s){var i=ut(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},un=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},cn=function(t,s){var i=ut(s);if(i>0){i=Math.sqrt(i);var e=s[0]/i,r=s[1]/i,n=s[2]/i,h=s[3]/i,o=s[4],a=s[5],l=s[6],u=s[7],c=e*o+r*a+n*l+h*u;t[0]=e,t[1]=r,t[2]=n,t[3]=h,t[4]=(o-e*c)/i,t[5]=(a-r*c)/i,t[6]=(l-n*c)/i,t[7]=(u-h*c)/i}return t},fn=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},dn=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},pn=function(t,i){var e=t[0],r=t[1],n=t[2],h=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=i[0],f=i[1],d=i[2],p=i[3],m=i[4],y=i[5],g=i[6],M=i[7];return Math.abs(e-c)<=s*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(r-f)<=s*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-d)<=s*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(h-p)<=s*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(o-m)<=s*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-y)<=s*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(l-g)<=s*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(u-M)<=s*Math.max(1,Math.abs(u),Math.abs(M))},mn=function(){var t=new i(2);return i!=Float32Array&&(t[0]=0,t[1]=0),t},yn=function(t){var s=new i(2);return s[0]=t[0],s[1]=t[1],s},gn=function(t,s){var e=new i(2);return e[0]=t,e[1]=s,e},Mn=function(t,s){return t[0]=s[0],t[1]=s[1],t},wn=function(t,s,i){return t[0]=s,t[1]=i,t},bn=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},Sn=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},Tn=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},vn=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},xn=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},In=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},Cn=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},Gn=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},Nn=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},_n=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},En=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},Dn=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return Math.hypot(i,e)},An=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e},Ln=function(t){var s=t[0],i=t[1];return Math.hypot(s,i)},On=function(t){var s=t[0],i=t[1];return s*s+i*i},Rn=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},kn=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},jn=function(t,s){var i=s[0],e=s[1],r=i*i+e*e;return r>0&&(r=1/Math.sqrt(r)),t[0]=s[0]*r,t[1]=s[1]*r,t},Pn=function(t,s){return t[0]*s[0]+t[1]*s[1]},Fn=function(t,s,i){var e=s[0]*i[1]-s[1]*i[0];return t[0]=t[1]=0,t[2]=e,t},zn=function(t,s,i,e){var r=s[0],n=s[1];return t[0]=r+e*(i[0]-r),t[1]=n+e*(i[1]-n),t},Bn=function(t,s){s=s||1;var i=2*e()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},Un=function(t,s,i){var e=s[0],r=s[1];return t[0]=i[0]*e+i[2]*r,t[1]=i[1]*e+i[3]*r,t},Wn=function(t,s,i){var e=s[0],r=s[1];return t[0]=i[0]*e+i[2]*r+i[4],t[1]=i[1]*e+i[3]*r+i[5],t},Qn=function(t,s,i){var e=s[0],r=s[1];return t[0]=i[0]*e+i[3]*r+i[6],t[1]=i[1]*e+i[4]*r+i[7],t},Jn=function(t,s,i){var e=s[0],r=s[1];return t[0]=i[0]*e+i[4]*r+i[12],t[1]=i[1]*e+i[5]*r+i[13],t},Vn=function(t,s,i,e){var r=s[0]-i[0],n=s[1]-i[1],h=Math.sin(e),o=Math.cos(e);return t[0]=r*o-n*h+i[0],t[1]=r*h+n*o+i[1],t},Yn=function(t,s){var i=t[0],e=t[1],r=s[0],n=s[1],h=Math.sqrt((i*i+e*e)*(r*r+n*n)),o=h&&(i*r+e*n)/h;return Math.acos(Math.min(Math.max(o,-1),1))},Hn=function(t){return t[0]=0,t[1]=0,t},qn=function(t){return"vec2("+t[0]+", "+t[1]+")"},Zn=function(t,s){return t[0]===s[0]&&t[1]===s[1]},Xn=function(t,i){var e=t[0],r=t[1],n=i[0],h=i[1];return Math.abs(e-n)<=s*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(r-h)<=s*Math.max(1,Math.abs(r),Math.abs(h))};s=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array,e=Math.random,r="zyx",n=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),h={__proto__:null,EPSILON:s,get i(){return i},h:e,o:r,l:Et,u:Dt,equals:At},o=Wt,a=Kt,l=Object.freeze({__proto__:null,create:Lt,clone:Ot,m:Rt,identity:kt,M:jt,set:Pt,S:Ft,T:zt,v:Bt,I:Ut,multiply:Wt,rotate:Qt,scale:Jt,C:Vt,G:Yt,N:Ht,_:qt,D:Zt,add:Xt,A:Kt,L:$t,equals:ts,O:ss,R:is,mul:o,sub:a}),u=cs,c=Ss,f=Object.freeze({__proto__:null,create:es,clone:rs,m:ns,identity:hs,M:os,set:as,T:ls,I:us,multiply:cs,rotate:fs,scale:ds,translate:ps,C:ms,G:ys,j:gs,N:Ms,_:ws,add:bs,A:Ss,O:Ts,R:vs,L:xs,equals:Is,mul:u,sub:c}),d=js,p=Xs,m=Object.freeze({__proto__:null,create:Cs,P:Gs,clone:Ns,m:_s,M:Es,set:Ds,identity:As,S:Ls,T:Os,v:Rs,I:ks,multiply:js,translate:Ps,rotate:Fs,scale:zs,j:Bs,C:Us,G:Ws,F:Qs,B:Js,U:Vs,W:Ys,N:Hs,_:qs,add:Zs,A:Xs,O:Ks,R:$s,L:ti,equals:si,mul:d,sub:p}),y=Ri,g=Pi,M=fi,w=Ji,b=Object.freeze({__proto__:null,create:ii,clone:ei,m:ri,M:ni,set:hi,identity:oi,S:ai,T:li,v:ui,I:ci,multiply:fi,translate:di,scale:pi,rotate:mi,J:yi,V:gi,Y:Mi,j:wi,G:bi,C:Si,H:Ti,Z:vi,X:xi,K:Ii,$:Ci,tt:Gi,st:Ni,it:_i,et:Ei,rt:Di,nt:Ai,B:Li,ht:Oi,ot:Ri,perspective:y,lt:ki,ut:ji,ct:Pi,ft:g,dt:Fi,yt:zi,gt:Bi,N:Ui,_:Wi,add:Qi,A:Ji,O:Vi,R:Yi,L:Hi,equals:qi,mul:M,sub:w}),S=ee,T=re,v=ne,x=de,I=pe,C=Ki,G=me,t=Zi(),N=function(s,i,e,r,n,h){var o,a;for(i||(i=3),e||(e=0),a=r?Math.min(r*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],n(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2];return s},_=Object.freeze({__proto__:null,create:Zi,clone:Xi,length:Ki,M:$i,m:te,set:se,add:ie,A:ee,multiply:re,Mt:ne,ceil:he,floor:oe,min:ae,max:le,round:ue,scale:ce,wt:fe,bt:de,St:pe,Tt:me,vt:ye,inverse:ge,normalize:Me,xt:we,It:be,Ct:Se,Gt:Te,Nt:ve,_t:xe,random:Ie,Et:Ce,Dt:Ge,At:Ne,J:_e,V:Ee,Y:De,angle:Ae,Lt:Le,N:Oe,L:Re,equals:ke,sub:S,mul:T,div:v,Ot:x,Rt:I,kt:C,jt:G,forEach:N}),E=We,D=Qe,A=Je,L=$e,O=tr,R=sr,k=ir,j=function(){var t=je();return function(s,i,e,r,n,h){var o,a;for(i||(i=4),e||(e=0),a=r?Math.min(r*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],t[3]=s[o+3],n(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2],s[o+3]=t[3];return s}}(),P=Object.freeze({__proto__:null,create:je,clone:Pe,M:Fe,m:ze,set:Be,add:Ue,A:We,multiply:Qe,Mt:Je,ceil:Ve,floor:Ye,min:He,max:qe,round:Ze,scale:Xe,wt:Ke,bt:$e,St:tr,length:sr,Tt:ir,vt:er,inverse:rr,normalize:nr,xt:hr,It:or,Ct:ar,random:lr,Et:ur,At:cr,Lt:fr,N:dr,L:pr,equals:mr,sub:E,mul:D,div:A,Ot:L,Rt:O,kt:R,jt:k,forEach:j}),F=Pe,z=Fe,B=ze,U=Be,W=Ue,Q=Sr,J=Xe,V=hr,Y=ar,q=H=sr,X=Z=ir,K=nr,$=pr,tt=function(){var t=Zi(),s=$i(1,0,0),i=$i(0,1,0);return function(e,r,n){var h=we(r,n);return h<-.999999?(be(t,s,r),C(t)<1e-6&&be(t,i,r),Me(t,t),Mr(e,t,Math.PI),e):h>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(be(t,r,n),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1+h,K(e,e))}}(),st=function(){var t=yr(),s=yr();return function(i,e,r,n,h,o){return _r(t,e,h,o),_r(s,r,n,o),_r(i,t,s,2*o*(1-o)),i}}(),it=function(){var t=Cs();return function(s,i,e,r){return t[0]=e[0],t[3]=e[1],t[6]=e[2],t[1]=r[0],t[4]=r[1],t[7]=r[2],t[2]=-i[0],t[5]=-i[1],t[8]=-i[2],K(s,Lr(s,t))}}(),et=Object.freeze({__proto__:null,create:yr,identity:gr,Pt:Mr,Ft:wr,zt:br,multiply:Sr,J:Tr,V:vr,Y:xr,Bt:Ir,exp:Cr,Ut:Gr,pow:Nr,Gt:_r,random:Er,T:Dr,Wt:Ar,Qt:Lr,Jt:Or,N:Rr,clone:F,M:z,m:B,set:U,add:W,mul:Q,scale:J,xt:V,Ct:Y,length:H,kt:q,Tt:Z,jt:X,normalize:K,L:$,equals:kr,Vt:tt,Yt:st,Ht:it}),rt=B,nt=B,ht=hn,ot=V,lt=at=H,ct=ut=Z,ft=Object.freeze({__proto__:null,create:jr,clone:Pr,M:Fr,qt:zr,K:Br,j:Ur,C:Wr,P:Qr,m:Jr,identity:Vr,set:Yr,Zt:rt,Xt:Hr,Kt:nt,$t:qr,tt:Zr,translate:Xr,J:Kr,V:$r,Y:tn,ts:sn,ss:en,es:rn,add:nn,multiply:hn,mul:ht,scale:on,xt:ot,Ct:an,T:ln,Wt:un,length:at,kt:lt,Tt:ut,jt:ct,normalize:cn,N:fn,L:dn,equals:pn}),dt=Ln,pt=Sn,mt=Tn,yt=vn,gt=Dn,Mt=An,wt=On,bt=function(){var t=mn();return function(s,i,e,r,n,h){var o,a;for(i||(i=2),e||(e=0),a=r?Math.min(r*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],n(t,t,h),s[o]=t[0],s[o+1]=t[1];return s}}(),St=Object.freeze({__proto__:null,create:mn,clone:yn,M:gn,m:Mn,set:wn,add:bn,A:Sn,multiply:Tn,Mt:vn,ceil:xn,floor:In,min:Cn,max:Gn,round:Nn,scale:_n,wt:En,bt:Dn,St:An,length:Ln,Tt:On,vt:Rn,inverse:kn,normalize:jn,xt:Pn,It:Fn,Ct:zn,random:Bn,rs:Un,ns:Wn,Dt:Qn,Et:Jn,rotate:Vn,angle:Yn,Lt:Hn,N:qn,L:Zn,equals:Xn,kt:dt,sub:pt,mul:mt,div:yt,Ot:gt,Rt:Mt,jt:wt,forEach:bt}),globalThis.hs=h,globalThis.hs.ls=l,globalThis.hs.us=f,globalThis.hs.cs=m,globalThis.hs.fs=b,globalThis.hs.ds=et,globalThis.hs.ps=ft,globalThis.hs.ys=St,globalThis.hs.gs=_,globalThis.hs.Ms=P}var t,s,i,e,r,n,h,o,a,l,u,c,f,d,p,m,y,g,M,w,b,S,T,v,x,I,C,G,N,_,E,D,A,L,O,R,k,j,P,F,z,B,U,W,Q,J,V,Y,H,q,Z,X,K,$,tt,st,it,et,rt,nt,ht,ot,at,lt,ut,ct,ft,dt,pt,mt,yt,gt,Mt,wt,bt,St,Tt,vt,xt,It;{let Kn=function(t,s,i){i=i||0;var e,r,n,h,o,a,l,u=[0,0];return e=t[1][1]-t[0][1],r=t[0][0]-t[1][0],n=e*t[0][0]+r*t[0][1],h=s[1][1]-s[0][1],o=s[0][0]-s[1][0],a=h*s[0][0]+o*s[0][1],xh(l=e*o-h*r,0,i)||(u[0]=(o*n-r*a)/l,u[1]=(e*a-h*n)/l),u},$n=function(t,s,i,e){var r=s[0]-t[0],n=s[1]-t[1],h=e[0]-i[0],o=e[1]-i[1];if(h*n-o*r===0)return!1;var a=(r*(i[1]-t[1])+n*(t[0]-i[0]))/(h*n-o*r),l=(h*(t[1]-i[1])+o*(i[0]-t[0]))/(o*r-h*n);return a>=0&&a<=1&&l>=0&&l<=1},th=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},sh=function(t,s,i){return th(t,s,i)>0},ih=function(t,s,i){return th(t,s,i)>=0},eh=function(t,s,i){return th(t,s,i)<0},rh=function(t,s,i){return th(t,s,i)<=0},nh=function(t,s,i,e){if(e){var r=Tt,n=vt;r[0]=s[0]-t[0],r[1]=s[1]-t[1],n[0]=i[0]-s[0],n[1]=i[1]-s[1];var h=r[0]*n[0]+r[1]*n[1],o=Math.sqrt(r[0]*r[0]+r[1]*r[1]),a=Math.sqrt(n[0]*n[0]+n[1]*n[1]);return Math.acos(h/(o*a))<e}return 0===th(t,s,i)},hh=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e},oh=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},ah=function(t){t.length=0},lh=function(t,s,i,e){for(var r=i;r<e;r++)t.push(s[r])},uh=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!sh(oh(t,s-1),oh(t,s),oh(t,s+1))&&(ch(t),!0)},ch=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},fh=function(t,s){return eh(oh(t,s-1),oh(t,s),oh(t,s+1))},dh=function(t,s,i){var e,r,n=xt,h=It;if(ih(oh(t,s+1),oh(t,s),oh(t,i))&&rh(oh(t,s-1),oh(t,s),oh(t,i)))return!1;r=hh(oh(t,s),oh(t,i));for(var o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&ih(oh(t,s),oh(t,i),oh(t,o+1))&&rh(oh(t,s),oh(t,i),oh(t,o))&&(n[0]=oh(t,s),n[1]=oh(t,i),h[0]=oh(t,o),h[1]=oh(t,o+1),e=Kn(n,h),hh(oh(t,s),e)<r))return!1;return!0},ph=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&$n(oh(t,s),oh(t,i),oh(t,e),oh(t,e+1)))return!1;return!0},mh=function(t,s,i,e){var r=e||[];if(ah(r),s<i)for(var n=s;n<=i;n++)r.push(t[n]);else{for(n=0;n<=i;n++)r.push(t[n]);for(n=s;n<t.length;n++)r.push(t[n])}return r},yh=function(t){for(var s=[],i=[],e=[],r=[],n=Number.MAX_VALUE,h=0;h<t.length;++h)if(fh(t,h))for(var o=0;o<t.length;++o)if(dh(t,h,o)){i=yh(mh(t,h,o,r)),e=yh(mh(t,o,h,r));for(var a=0;a<e.length;a++)i.push(e[a]);i.length<n&&(s=i,n=i.length,s.push([oh(t,h),oh(t,o)]))}return s},gh=function(t){var s=yh(t);return s.length>0?Mh(t,s):[t]},Mh=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var r=s[e],n=0;n<i.length;n++){var h=Mh(i[n],r);if(h){i.splice(n,1),i.push(h[0],h[1]);break}}return i}return r=s,e=t.indexOf(r[0]),n=t.indexOf(r[1]),-1!==e&&-1!==n&&[mh(t,e,n),mh(t,n,e)]},wh=function(t){var s,i=t;for(s=0;s<i.length-1;s++)for(var e=0;e<s-1;e++)if($n(i[s],i[s+1],i[e],i[e+1]))return!1;for(s=1;s<i.length-2;s++)if($n(i[0],i[i.length-1],i[s],i[s+1]))return!1;return!0},bh=function(t,s,i,e,r){r=r||0;var n=s[1]-t[1],h=t[0]-s[0],o=n*t[0]+h*t[1],a=e[1]-i[1],l=i[0]-e[0],u=a*i[0]+l*i[1],c=n*l-a*h;return xh(c,0,r)?[0,0]:[(l*o-h*u)/c,(n*u-a*o)/c]},Sh=function(t,s,i,e,r,n,h){n=n||100,h=h||0,r=r||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],l=[0,0],u=0,c=0,f=0,d=0,p=0,m=0,y=0,g=[],M=[],w=t,b=t;if(b.length<3)return s;if(++h>n)return console.warn("quickDecomp: max level ("+n+") reached."),s;for(var S=0;S<t.length;++S)if(fh(w,S)){i.push(w[S]),u=c=Number.MAX_VALUE;for(var T=0;T<t.length;++T)sh(oh(w,S-1),oh(w,S),oh(w,T))&&rh(oh(w,S-1),oh(w,S),oh(w,T-1))&&(l=bh(oh(w,S-1),oh(w,S),oh(w,T),oh(w,T-1)),eh(oh(w,S+1),oh(w,S),l)&&(f=hh(w[S],l))<c&&(c=f,a=l,m=T)),sh(oh(w,S+1),oh(w,S),oh(w,T+1))&&rh(oh(w,S+1),oh(w,S),oh(w,T))&&(l=bh(oh(w,S+1),oh(w,S),oh(w,T),oh(w,T+1)),sh(oh(w,S-1),oh(w,S),l)&&(f=hh(w[S],l))<u&&(u=f,o=l,p=T));if(m===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,e.push(l),S<p?(lh(g,w,S,p+1),g.push(l),M.push(l),0!==m&&lh(M,w,m,w.length),lh(M,w,0,S+1)):(0!==S&&lh(g,w,S,w.length),lh(g,w,0,p+1),g.push(l),M.push(l),lh(M,w,m,S+1));else{if(m>p&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(T=m;T<=p;++T)ih(oh(w,S-1),oh(w,S),oh(w,T))&&rh(oh(w,S+1),oh(w,S),oh(w,T))&&(f=hh(oh(w,S),oh(w,T)))<d&&ph(w,S,T)&&(d=f,y=T%t.length);S<y?(lh(g,w,S,y+1),0!==y&&lh(M,w,y,b.length),lh(M,w,0,S+1)):(0!==S&&lh(g,w,S,b.length),lh(g,w,0,y+1),lh(M,w,y,S+1))}return g.length<M.length?(Sh(g,s,i,e,r,n,h),Sh(M,s,i,e,r,n,h)):(Sh(M,s,i,e,r,n,h),Sh(g,s,i,e,r,n,h)),s}return s.push(t),s},Th=function(t,s){for(var i=0,e=t.length-1;t.length>3&&e>=0;--e)nh(oh(t,e-1),oh(t,e),oh(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},vh=function(t,s){for(var i=t.length-1;i>=1;--i)for(var e=t[i],r=i-1;r>=0;--r)Ih(e,t[r],s)&&t.splice(i,1)},xh=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},Ih=function(t,s,i){return xh(t[0],s[0],i)&&xh(t[1],s[1],i)};Tt=[],vt=[],xt=[],It=[],self.ws={bs:gh,Ss:Sh,Ts:wh,vs:Th,xs:vh,Is:uh}}{let Ch=!1,Gh=!1,Nh="dev";const _h=Symbol("Construct internal API token");let Eh=16;const Dh=self.Cs=class{constructor(){throw TypeError("static class can't be instantiated")}static Gs(){if(Eh<=0)throw new Error("cannot obtain internal API token");return--Eh,_h}static Ns(){Ch=!0}static _s(){return Ch}static Es(){Gh=!0}static Ds(){return Gh}static As(t){Nh=t}static Ls(){return Nh}static Os(){return"final"===Nh}};Dh.Rs=!1,Dh.ks=!1,Dh.hardwareConcurrency=navigator.hardwareConcurrency||2,self.js={}}{const Ah=self.Cs;Ah.Ps=class{constructor(t){this.Fs=t,this.zs=new Map,this.Bs()}Bs(){let t=this.Fs;(t.startsWith("?")||t.startsWith("#"))&&(t=t.substr(1));const s=t.split("&");for(const t of s)this.Us(t)}Us(t){if(!t)return;if(!t.includes("="))return void this.zs.set(t,null);const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.zs.set(i,e)}Ws(){for(const t of this.zs)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}Qs(t){return this.zs.has(t)}Js(t){const s=this.zs.get(t);return void 0===s?null:s}Vs(){history.replaceState("",document.title,location.pathname+location.search)}Ys(t){this.Fs=t,this.zs.clear(),this.Bs()}},Ah.Hs=new Ah.Ps(location.search),Ah.qs=new Ah.Ps(location.hash),Ah.Hs.Qs("perf")&&(Ah.Zs=!0),"dev"!==Ah.Hs.Js("mode")&&Ah.As("final")}{let Lh=function(t){const s=parseFloat(t);return kh.get(s)||(s>=13?"11":"NT "+t)};0;const Oh=self.Cs,Rh="(unknown)";Oh.Xs={Ks:Rh,$s:Rh,ti:Rh,si:Rh,ii:NaN,ei:Rh,ri:"browser",ni:!0,hi:!1,oi:!1,ai:!1,li:async()=>{}};const kh=new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]]),jh=navigator.userAgent,Ph=navigator.userAgentData;if(Ph&&Ph.brands.length>0){let Fh=function(t){let s="",i="",e="",r="";for(const n of t){const t=zh.get(n.brand);!s&&t&&(s=t,i=n.version);const h=Bh.get(n.brand);!e&&h&&(e=h,r=n.version)}s||"Chromium"!==e||(Oh.Xs.ti="Chromium",Oh.Xs.si=r),Oh.Xs.ti=s||Rh,Oh.Xs.si=i||Rh,Oh.Xs.ei=e||Rh};Oh.Xs.Ks=Ph.platform,Oh.Xs.hi=Ph.mobile,Oh.Xs.ni=!Oh.Xs.hi;const zh=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),Bh=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);Fh(Ph.brands);let Uh=!1;Oh.Xs.li=async()=>{if(!Uh)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);Fh(t.fullVersionList),"Windows"===Oh.Xs.Ks?Oh.Xs.$s=Lh(t.platformVersion):Oh.Xs.$s=t.platformVersion,Uh=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let Wh=function(t,s){const i=Array.isArray(t)?t:[t];for(const t of i){const i=t.exec(jh);if(i){s(i);break}}};Wh(/windows\s+nt\s+([\d\.]+)/i,t=>{Oh.Xs.Ks="Windows";const s=t[1];Oh.Xs.$s=Lh(s)}),Wh(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{Oh.Xs.Ks="macOS",Oh.Xs.$s=t[1].replace(/_/g,".")}),Wh(/CrOS/,()=>{Oh.Xs.Ks="Chrome OS"}),Wh(/linux|openbsd|freebsd|netbsd/i,()=>{Oh.Xs.Ks="Linux"}),Wh(/android/i,()=>{Oh.Xs.Ks="Android"}),Wh(/android\s+([\d\.]+)/i,t=>{Oh.Xs.Ks="Android",Oh.Xs.$s=t[1]}),Oh.Xs.Ks===Rh&&(Wh(/(iphone|ipod|ipad)/i,t=>{Oh.Xs.Ks="iOS"}),Wh([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{Oh.Xs.Ks="iOS",Oh.Xs.$s=t[1].replace(/_/g,".")}));const Qh=/chrome\//i.test(jh),Jh=/chromium\//i.test(jh),Vh=/edg\//i.test(jh),Yh=/OPR\//.test(jh),Hh=/nwjs/i.test(jh),qh=/safari\//i.test(jh),Zh=/webkit/i.test(jh);Vh||Yh||Wh(/chrome\/([\d\.]+)/i,t=>{Oh.Xs.ti="Chrome",Oh.Xs.si=t[1],Oh.Xs.ei="Chromium"}),Wh(/edg\/([\d\.]+)/i,t=>{Oh.Xs.ti="Edge",Oh.Xs.si=t[1],Oh.Xs.ei="Chromium"}),Wh(/OPR\/([\d\.]+)/,t=>{Oh.Xs.ti="Opera",Oh.Xs.si=t[1],Oh.Xs.ei="Chromium"}),Wh(/chromium\/([\d\.]+)/i,t=>{Oh.Xs.ti="Chromium",Oh.Xs.si=t[1],Oh.Xs.ei="Chromium"}),Wh(/nwjs\/[0-9.]+/i,t=>{Oh.Xs.ti="NW.js",Oh.Xs.si=t[1],Oh.Xs.ei="Chromium",Oh.Xs.ri="nwjs"}),Wh(/firefox\/([\d\.]+)/i,t=>{Oh.Xs.ti="Firefox",Oh.Xs.si=t[1],Oh.Xs.ei="Gecko"}),!qh||Qh||Jh||Vh||Yh||Hh||(Oh.Xs.ti="Safari",Oh.Xs.ei="WebKit",Wh(/version\/([\d\.]+)/i,t=>{Oh.Xs.si=t[1]}),Wh(/crios\/([\d\.]+)/i,t=>{Oh.Xs.ti="Chrome for iOS",Oh.Xs.si=t[1]}),Wh(/fxios\/([\d\.]+)/i,t=>{Oh.Xs.ti="Firefox for iOS",Oh.Xs.si=t[1]}),Wh(/edgios\/([\d\.]+)/i,t=>{Oh.Xs.ti="Edge for iOS",Oh.Xs.si=t[1]})),Oh.Xs.ei===Rh&&Zh&&(Oh.Xs.ei="WebKit"),"Android"===Oh.Xs.Ks&&"Safari"===Oh.Xs.ti&&(Oh.Xs.ti="Stock");const Xh=new Set(["Windows","macOS","Linux","Chrome OS"]).has(Oh.Xs.Ks)||"nwjs"===Oh.Xs.ri;Oh.Xs.ni=Xh,Oh.Xs.hi=!Xh}"Chrome"===Oh.Xs.ti&&"browser"===Oh.Xs.ri&&/wv\)/.test(jh)&&(Oh.Xs.ri="webview"),"nwjs"!==Oh.Xs.ri&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(Oh.Xs.ri="webapp"),Oh.Xs.ii=parseFloat(Oh.Xs.si);"macOS"===Oh.Xs.Ks&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&(Oh.Xs.Ks="iOS",Oh.Xs.$s=Oh.Xs.si,Oh.Xs.ni=!1,Oh.Xs.hi=!0,Oh.Xs.ai=!0),Oh.Xs.oi="macOS"===Oh.Xs.Ks||"iOS"===Oh.Xs.Ks}{let Kh=function(t){return new Promise((s,i)=>{t.onsuccess=()=>s(t.result),t.onerror=()=>i(t.error)})},$h=function(t){return new Promise((s,i)=>{t.oncomplete=()=>s(),t.onerror=()=>i(t.error),t.onabort=()=>i(t.error)})},to=function(t,s){return uo(t,s)},so=function(t,s){return uo(t,s,!0)},io=function(t){eo(t);let s=oo.get(t);return s instanceof Promise||(s=co(t),oo.set(t,s),s.catch(s=>oo.delete(t))),s},eo=function(t){if("string"!=typeof t)throw new TypeError("expected string")},ro=function(t,s){const i=t.objectStore(ho).openCursor();return new Promise(t=>{const e=[];i.onsuccess=i=>{const r=i.target.result;if(r){switch(s){case"entries":e.push([r.key,r.value]);break;case"keys":e.push(r.key);break;case"values":e.push(r.value)}r.continue()}else t(e)}})};0;const no=2,ho="keyvaluepairs",oo=new Map,ao="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,lo="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function uo(t,s,i=!1,e=!0){const r=await io(t);try{return s(r.transaction([ho],i?"readwrite":"readonly"))}catch(r){if(e&&"InvalidStateError"===r.name)return oo.delete(t),uo(t,s,i,!1);throw r}}async function co(t){eo(t);const s=indexedDB.open(t,no);return s.addEventListener("upgradeneeded",s=>{try{s.target.result.createObjectStore(ho)}catch(s){console.error(`Failed to create objectstore for database ${t}`,s)}}),Kh(s)}class fo{constructor(t){eo(t),this.name=t}async ready(){await io(this.name)}set(t,s){return eo(t),so(this.name,async i=>{const e=Kh(i.objectStore(ho).put(s,t)),r=$h(i);await Promise.all([r,e])})}get(t){return eo(t),to(this.name,async s=>{const i=Kh(s.objectStore(ho).get(t)),e=$h(s),[r,n]=await Promise.all([e,i]);return n})}delete(t){return eo(t),so(this.name,async s=>{const i=Kh(s.objectStore(ho).delete(t)),e=$h(s);await Promise.all([e,i])})}clear(){return so(this.name,async t=>{const s=Kh(t.objectStore(ho).clear()),i=$h(t);await Promise.all([i,s])})}keys(){return to(this.name,async t=>{let s;s=lo?Kh(t.objectStore(ho).getAllKeys()):ro(t,"keys");const i=$h(t),[e,r]=await Promise.all([i,s]);return r})}values(){return to(this.name,async t=>{let s;s=ao?Kh(t.objectStore(ho).getAll()):ro(t,"values");const i=$h(t),[e,r]=await Promise.all([i,s]);return r})}entries(){return to(this.name,async t=>{const s=ro(t,"entries"),i=$h(t),[e,r]=await Promise.all([i,s]);return r})}}self.ci=fo}{let po=function(t){throw new Error(`"${t}" is not implemented`)},mo=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},yo=function(t){return"object"==typeof t?new Promise(s=>{const{port1:i,port2:e}=new MessageChannel;e.onmessage=t=>s(t.data),i.postMessage(t)}):Promise.resolve(t)};0;const go=self.ci,Mo=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];class wo{constructor(t){this.fi=t,this.di=!this.fi,this.di||"undefined"!=typeof indexedDB||(this.di=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.pi=new Map}mi(t){if(!this.di)for(const s of Mo)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.di=!0;break}}async yi(t){const s=this.pi.get(t),i=await yo(s);return void 0===i?null:i}async gi(t,s){s=await yo(s),this.pi.set(t,s)}Mi(t){this.pi.delete(t)}wi(){this.pi.clear()}bi(){return Array.from(this.pi.keys())}Si(){return this.di}Ti(){return this.pi}xi(t){this.pi=t}async getItem(t,s){if(mo(s),this.di)return await this.yi(t);let i;try{i=await this.fi.get(t)}catch(s){return this.mi(s),this.di?await this.yi(t):(console.error(`Error reading '${t}' from storage, returning null: `,s),null)}return void 0===i?null:i}async setItem(t,s,i){if(mo(i),void 0===s&&(s=null),this.di)await this.gi(t,s);else try{await this.fi.set(t,s)}catch(i){if(this.mi(i),!this.di)throw i;await this.gi(t,s)}}async removeItem(t,s){if(mo(s),this.di)this.Mi(t);else try{await this.fi.delete(t)}catch(s){this.mi(s),this.di?this.Mi(t):console.error(`Error removing '${t}' from storage: `,s)}}async clear(t){if(mo(t),this.di)this.wi();else try{await this.fi.clear()}catch(t){this.mi(t),this.di?this.wi():console.error("Error clearing storage: ",t)}}async keys(t){if(mo(t),this.di)return this.bi();let s=[];try{s=await this.fi.keys()}catch(t){if(this.mi(t),this.di)return this.bi();console.error("Error getting storage keys: ",t)}return s}ready(t){return mo(t),this.di?Promise.resolve(!0):this.fi.ready()}Ii(t){if(t.Ci)return new wo(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new go(s);return new wo(i)}}length(t){po("localforage.length()")}key(t,s){po("localforage.key()")}iterate(t,s){po("localforage.iterate()")}Gi(t){po("localforage.setDriver()")}config(t){po("localforage.config()")}Ni(t){po("localforage.defineDriver()")}_i(){po("localforage.driver()")}supports(t){po("localforage.supports()")}dropInstance(){po("localforage.dropInstance()")}}self.localforage=new wo(new go("localforage"))}{const bo=self.Cs;if(bo.Ei={},bo.Ei.Di=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");return void 0!==t.animate&&void 0!==t.animate([{opacity:"0"},{opacity:"1"}],1e3).reverse}catch(t){return!1}})(),bo.Ei.Ai="undefined"!=typeof HTMLDialogElement,bo.Ei.Li=!!self.requestIdleCallback,bo.Ei.ImageBitmap=!!self.createImageBitmap,bo.Ei.ImageBitmapOptions=!1,bo.Ei.Oi=!1,bo.Ei.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{bo.Ei.ImageBitmapOptions=!0}).catch(()=>{bo.Ei.ImageBitmapOptions=!1})}catch(So){bo.Ei.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{bo.Ei.Oi=10===t.width&&10===t.height}).catch(()=>{bo.Ei.Oi=!1})}catch(To){bo.Ei.Oi=!1}}if(bo.Ei.Ri=!(!navigator.clipboard||!navigator.clipboard.readText),bo.Ei.ki=!(!navigator.permissions||!navigator.permissions.query),bo.Ei.ji=!1,bo.Ei.ki){const vo={name:"clipboard-read"};navigator.permissions.query(vo).then(()=>{bo.Ei.ji=!0}).catch(()=>{bo.Ei.ji=!1})}bo.Ei.Pi=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),bo.Ei.Fi="undefined"!=typeof Proxy,bo.Ei.zi="undefined"!=typeof document&&void 0!==document.createElement("a").download,bo.Ei.Bi="function"==typeof fetch,bo.Ei.Ui=!!(self.isSecureContext&&"Opera"!==bo.Xs.ti&&navigator.storage&&navigator.storage.persist),bo.Ei.Wi=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),bo.Ei.Qi=(()=>{if("undefined"==typeof document)return!1;if("iOS"===bo.Xs.Ks)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),bo.Ei.ImageDecoder=void 0!==self.ImageDecoder,bo.Ei.Ji=!!self.VideoEncoder,bo.Ei.Vi=!!self.showOpenFilePicker,bo.Ei.Yi=!!self.queryLocalFonts,bo.Ei.UserActivation=!!navigator.userActivation,bo.Ei.Hi=!1,(async()=>{let t;"undefined"==typeof document?t=new OffscreenCanvas(32,32):(t=document.createElement("canvas"),t.width=32,t.height=32);const s=t.getContext("2d");s.fillStyle="blue",s.fillRect(0,0,32,32);let i=null;try{t.convertToBlob?i=await t.convertToBlob({type:"image/webp",quality:1}):t.toBlob&&(i=await new Promise(s=>t.toBlob(s,"image/webp",1))),bo.Ei.Hi=i&&"image/webp"===i.type}catch(t){bo.Ei.Hi=!1}})()}{const xo=self.Cs;if(!String.prototype.trimStart){const Io=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(Io,"")}}if(!String.prototype.trimEnd){const Co=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(Co,"")}}if(String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(xo.Zi(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),!Array.prototype.flat){let Go=function(t,s){return t.reduce((t,i)=>s>0&&Array.isArray(i)?(Array.prototype.push.apply(t,Go(i,s-1)),t):(t.push(i),t),[])};Array.prototype.flat=function(t=1){return Go(this,t)}}Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((t,s)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((s,i)=>t({usage:s,quota:i}),s))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let No=function(t){let s="Assertion failure: "+t+"\n\nStack trace:\n"+_o.Xi();console.error(s)};0;const _o=self.Cs;self.assert=function(t,s){t||No(s)}}{const Eo=self.Cs,Do=self.js;Eo.Ki=function(t){return"number"==typeof t},Eo.$i=function(t){return Eo.Ki(t)&&isFinite(t)},Eo.te=function(t){if(!Eo.Ki(t))throw new TypeError("expected number")},Eo.se=function(t){Eo.ie(t)},Eo.ee=function(t,s,i){if(!Eo.Ki(t)||isNaN(t)||s>t||i<t)throw new RangeError("number outside of range")},Eo.re=function(...t){for(let s of t);},Eo.ne=function(t){if(!Eo.$i(t))throw new TypeError("expected finite number")},Eo.he=function(t){Eo.ie(t)},Eo.oe=function(...t){for(let s of t);},Eo.ae=function(t){return"string"==typeof t},Eo.le=function(t){if(!Eo.ae(t))throw new TypeError("expected string")},Eo.ue=function(t){Eo.ie(t)},Eo.ce=function(...t){for(let s of t);},Eo.fe=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},Eo.de=function(t){if(!Eo.fe(t))throw new TypeError("expected simple object")},Eo.pe=function(t){if(!Eo.ie(t)&&!Eo.fe(t))throw new TypeError("expected simple object")},Eo.me=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},Eo.ye=function(t){if(!Eo.me(t))throw new TypeError("expected object")},Eo.ge=function(t){Eo.ie(t)},Eo.Me=function(...t){for(let s of t);},Eo.we=function(t){return Eo.be(t,Blob)&&"string"==typeof t.name},Eo.Se=function(t){if(!Eo.we(t))throw new TypeError("expected file")},Eo.Te=function(t){Eo.ie(t)},Eo.ve=function(t){return Array.isArray(t)},Eo.xe=function(t){if(!Eo.ve(t))throw new TypeError("expected array")},Eo.Ie=function(t){Eo.ie(t)},Eo.Ce=function(...t){for(let s of t);},Eo.Ge=function(t){return!(!Eo.ve(t)||t.length&&!Eo.ve(t[0]))},Eo.Ne=function(t){if(!Eo.Ge(t))throw new TypeError("expected 2d array");for(let s of t)if(!Eo.ve(s))throw new TypeError("expected 2d array")},Eo._e=function(t){Eo.ie(t)},Eo.Ee=function(t){return"function"==typeof t},Eo.De=function(t,s){if(!Eo.Ee(t))throw new TypeError("expected function");if(!Eo.ie(s)&&t!==s)throw new TypeError("expected same function reference")},Eo.Ae=function(t){Eo.ie(t)},Eo.Le=function(...t){for(let s of t);},Eo.Oe=function(t,...s){if(!Eo.Ee(t))throw new TypeError("expected function");if(!s.length)throw new Error("missing comparison functions");for(let i of s)if(!Eo.ie(i)&&t===i)return;throw new TypeError("expected same function reference")},Eo.Re=function(...t){if(!Eo.ie(t))for(let s of t);},Eo.ke=function(t,s){return t instanceof s},Eo.je=function(t,...s){for(let i of s)if(Eo.ke(t,i))return!0;return!1},Eo.Pe=function(t,s){if(!Eo.ke(t,s))throw new TypeError("unexpected type")},Eo.Fe=function(t,s){Eo.ie(t)},Eo.ze=function(t,...s){for(let t of s);},Eo.Be=function(t,...s){if(!Eo.je(t,...s))throw new TypeError("unexpected type")},Eo.Ue=function(t,...s){if(!Eo.ie(t)&&!Eo.je(t,...s))throw new TypeError("unexpected type")},Eo.We=function(t,s){for(let i of t)if(!Eo.ke(i,s))return!1;return!0},Eo.Qe=function(t){for(let s of t)if(!Eo.$i(s))return!1;return!0},Eo.Je=function(t,s){for(let s of t);},Eo.Ve=function(t,s){if(!Eo.ie(t))for(let s of t);},Eo.Ye=function(t,s){if(!Eo.ie(t))for(let s of t);},Eo.He=function(t,...s){for(let s of t);},Eo.qe=function(t,...s){if(!Eo.ie(t))for(let s of t);},Eo.Ze=function(t,s){return!(Eo.ie(t)||!Eo.ae(t.nodeName))&&(!s||Eo.Xe(t.nodeName,s))},Eo.Ke=function(t,s){if(Eo.ie(t)||!Eo.ae(t.nodeName))throw new TypeError("expected DOM node");if(s&&!Eo.Xe(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},Eo.$e=function(t,s){Eo.ie(t)},Eo.tr=function(t,s){return!(Eo.ie(t)||!Eo.ae(t.tagName))&&(!s||Eo.Xe(t.tagName,s))},Eo.sr=function(t,s){if(Eo.ie(t)||!Eo.ae(t.tagName))throw new TypeError("expected HTML element");if(s&&!Eo.Xe(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},Eo.ir=function(t,s){Eo.ie(t)},Eo.er=function(t){return Eo.tr(t,"img")||Eo.tr(t,"canvas")||Eo.tr(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},Eo.rr=function(t){if(!Eo.er(t))throw new TypeError("expected drawable")},Eo.nr=function(t){Eo.ie(t)},Eo.hr=function(t){return t instanceof ImageData||Eo.er(t)},Eo.ar=function(t){if(!Eo.hr(t))throw new TypeError("expected drawable or image data")},Eo.lr=function(t){if(!Eo.ie(t)&&!Eo.hr(t))throw new TypeError("expected drawable or image data")},Eo.ur=function(t){return"string"==typeof t||Eo.cr&&t instanceof Eo.cr||t instanceof Eo.dr},Eo.pr=function(t){if(!Eo.ur(t))throw new TypeError("expected string-like")},Eo.mr=function(t){Eo.ie(t)},Eo.yr=function(...t){for(let s of t);},Eo.gr=function(){throw new Error("must be overridden")},Eo.Mr=function(){throw new Error("not yet implemented")},Eo.wr=function(t){return t.constructor===function*(){}.constructor},Eo.br=function(t){if(!Eo.wr(t))throw new Error("expected generator function")},Eo.Sr=function(t){return"function"===t[Symbol.iterator]},Eo.Tr=function(t){if(!Eo.Sr(t))throw new Error("expected iterable")},Eo.vr=function(t){return!Eo.ie(t)},Eo.ie=function(t){return null==t},Eo.Ir=function(t){let s=t[0].constructor;for(let i of t)if(i.constructor!==s)return!1;return s},Eo.Cr=function(t,s){for(let i of t)if(!(i instanceof s))return!1;return!0};const Ao=Object.getPrototypeOf(Uint8Array);Eo.Gr=function(t){return Eo.ke(t,Ao)},Eo.Nr=function(t){},Eo._r=function(t){Eo.Er(t,Ao)},Eo.Dr=function(t,...s){if(!Eo.Ar(t,...s))throw new TypeError("unexpected type")},Eo.Ar=function(t,...s){for(const i of s)if(Eo.be(t,i))return!0;return!1},Eo.Er=function(t,s){if(!Eo.be(t,s))throw new TypeError("unexpected type")},Eo.be=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},Do.te=Eo.te,Do.se=Eo.se,Do.ne=Eo.ne,Do.he=Eo.he,Do.le=Eo.le,Do.ue=Eo.ue,Do.ye=Eo.ye,Do.ge=Eo.ge,Do.xe=Eo.xe,Do.Ie=Eo.Ie,Do.De=Eo.De,Do.Ae=Eo.Ae,Do.Pe=Eo.Pe,Do.Fe=Eo.Fe,Do.ie=Eo.ie}{let Lo=function(t,s){let i=Po.getType(t),e=Po.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},Oo=function(t){console.warn("[Defence] "+t+" @",Po.Xi())},Ro=function(){if(Vo=-1,Bo.size>0||Uo.size>0){let t=[...new Set([...Bo.keys()].map(t=>Po.getName(t)))].join(",");console.warn(`An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: ${t}`),Bo.clear(),Uo.clear()}},ko=function(t){let s=new Set;for(let i in t)s.add(i);return s},jo=function(t,s){let i=ko(s),e=Yo.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);Po.Lr(s,[...i]),s.length&&console.warn(`[Defence] '${Po.getName(t)}' constructor creates inconsistent properties: ${s.join(", ")}`)}else Yo.set(t,i)};0;const Po=self.Cs,Fo=new Map;let zo;Po.Or=function(t,s){console.log(`%c${t}`,`font-weight: bold; color:${s}`)},Po.Rr=function(t,...s){Fo.has(t)||Fo.set(t,-1),-1===Fo.get(t)&&Fo.set(t,requestAnimationFrame(()=>{console.log(`%c${t}`,"font-weight: bold",...s),Fo.set(t,-1)}))},Po.kr=function(t){performance.mark(t),zo||(zo=new Map),zo.has(t)||zo.set(t,{jr:0,total:0,Pr:0,Fr:1,toString:function(){return`${t} :: current => ${this.jr.toPrecision(3)} :: average => ${this.Pr.toPrecision(3)} :: calls => ${this.Fr}`}})},Po.zr=function(t){performance.measure(`measure-${t}`,t);const s=performance.getEntriesByName(`measure-${t}`)[0],i=zo.get(t);i.jr=s.duration,i.total+=i.jr,i.Pr=i.total/i.Fr,console.log(i.toString()),i.Fr++,performance.clearMarks(t),performance.clearMeasures(`measure-${t}`)},Po.Xi=function(){return(new Error).stack},Po.Br=function(){},Po.cast=function(t,s){return t&&t instanceof s?t:null},Po.getName=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":Po.Ki(t)?"<number>":Po.ae(t)?"<string>":Po.ve(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":Po.Ee(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},Po.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},Po.range=function*(t,s){if(!isFinite(Math.abs(t-s)))throw new Error("Invalid parameters");if(t>s)for(let i=t-1;i>=s;i--)yield i;else for(let i=t;i<s;i++)yield i};let Bo=new Map,Uo=new Map,Wo=new WeakMap,Qo=new WeakMap;Po.Ur={};const Jo=new Set(["then","splice"]);Po.Ur.get=function(t,s){return s in t||"symbol"==typeof s||Jo.has(s)||Oo(`Accessed missing property '${s}' from defended object '${Po.getName(t)}', returning undefined`),Qo.has(t)&&"symbol"!=typeof s&&!Jo.has(s)&&Oo(`Accessed property '${s}' on a released object '${Po.getName(t)}'\nObject was originally released at: ${Qo.get(t)})\nCall stack at access: `),t[s]},Po.Ur.set=function(t,s,i){return s in t||Bo.has(t)||Oo(`Set non-existent property '${s}' to '${i}' on defended object '${Po.getName(t)}'`),Lo(t[s],i)||Bo.has(t)||Oo(`Set '${Po.getType(t[s])}' property '${s}' to type '${Po.getType(i)}' on defended object '${Po.getName(t)}'`),Qo.has(t)&&Oo(`Set property '${s}' on a released object '${Po.getName(t)}'\nObject was originally released at: ${Qo.get(t)})\nCall stack at access: `),t[s]=i,!0},Po.Ur.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${Po.getName(t)}'`)},Po.Ur.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${Po.getName(t)}'`)},Po.Ur.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${Po.getName(t)}'`)};let Vo=-1;Po.Wr=class{constructor(){if(!Po.ks||!Po.Ei.Fi)return;let t=new.target,s=Object.create(t.prototype),i=new Proxy(s,Po.Ur);return Bo.set(s,i),Uo.set(i,s),Wo.set(i,s),-1===Vo&&(Vo=requestAnimationFrame(Ro)),i}},Po.Qr=function(t){if(Po.ks&&Po.Ei.Fi&&t instanceof Po.Wr){if(!Uo.has(t))return t;let s=Uo.get(t);return Uo.delete(t),Bo.delete(s),t}return Po.Rs?Object.seal(t):t},Po.Jr=function(t,...s){let i;try{i=new t(...s)}catch(t){throw Uo.clear(),Bo.clear(),t}return Po.ks&&jo(t,i),Po.Qr(i)},Po.Vr=function(t){let s=Wo.get(t);s&&Qo.set(s,Po.Xi())},Po.Yr=function(t){let s=Wo.get(t);return!!s&&!!Qo.get(s)};let Yo=new Map;Po.Hr=class{constructor(t){this.qr="",t&&this.start(t)}start(t){Po.Zs&&(this.qr=t,performance.mark(this.qr+"-Start"))}end(){Po.Zs&&(performance.mark(this.qr+"-End"),performance.measure(this.qr,this.qr+"-Start",this.qr+"-End"))}next(t){Po.Zs&&(this.end(),this.qr=t,performance.mark(this.qr+"-Start"))}}}{let Ho=function(t){return 0===t&&1/t<0};0;const qo=self.Cs,Zo=2*Math.PI,Xo=Math.PI/180,Ko=180/Math.PI;qo.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0===e)return i;if(t<s){const r=i-(s-t)%e;return r===i?0:r}return s+(t-s)%e},qo.Zr=function(t,s,i,e,r){const n=i-s;return 0===n&&0===e?t:(t-s)*(r-e)/n+e},qo.normalize=function(t,s,i){return s-i===0?1:(t-s)/(i-s)},qo.Xr=function(t,s,i){return t<s?s:t>i?i:t},qo.Kr=function(t){return(t%=Zo)<0&&(t+=Zo),t},qo.$r=function(t){return t*Xo},qo.tn=function(t){return t*Ko},qo.sn=function(t,s){return Math.sqrt(t*t+s*s)},qo.en=function(t,s,i){return Math.sqrt(t*t+s*s+i*i)},qo.rn=function(t,s,i,e){return qo.sn(i-t,e-s)},qo.nn=function(t,s,i,e){const r=i-t,n=e-s;return r*r+n*n},qo.hn=function(t,s,i,e){return Math.atan2(e-s,i-t)},qo.an=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),r=i*Math.sin(s)+e*Math.cos(s);return r>=1?0:r<=-1?Math.PI:Math.acos(r)},qo.ln=function(t,s,i){let e=Math.sin(t),r=Math.cos(t),n=Math.sin(s),h=Math.cos(s);return Math.acos(e*n+r*h)>i?r*n-e*h>0?qo.Kr(t+i):qo.Kr(t-i):qo.Kr(s)},qo.un=function(t,s){let i=Math.sin(t);return Math.cos(t)*Math.sin(s)-i*Math.cos(s)<=0},qo.cn=function(t,s,i,e=0){let r=qo.an(t,s);const n=Zo*e;return qo.un(s,t)?qo.Kr(t+(r+n)*i):qo.Kr(t-(r+n)*i)},qo.fn=function(t,s,i,e=0){const r=qo.an(t,s),n=Zo*e;return qo.un(s,t)?qo.Kr(t+(r+n)*i):qo.Kr(t+(Zo-r+n)*i)},qo.dn=function(t,s,i,e=0){const r=qo.an(t,s),n=Zo*e;return qo.un(s,t)?qo.Kr(t-(-Zo+r-n)*i):qo.Kr(t-(r+n)*i)},qo.pn=function(t,s){const i=qo.an(t,s);return qo.un(t,s)?qo.Kr(s-i):qo.Kr(s+i)},qo.Ct=function(t,s,i){return t+i*(s-t)},qo.mn=function(t,s,i){return t===s?0:(i-t)/(s-t)},qo.yn=function(t,s,i,e,r){return qo.Ct(e,r,qo.mn(t,s,i))},qo.gn=function(t,s,i,e){return qo.Ct(qo.Ct(t,s,e),qo.Ct(s,i,e),e)},qo.Mn=function(t,s,i,e,r){return qo.Ct(qo.gn(t,s,i,r),qo.gn(s,i,e,r),r)},qo.wn=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},qo.bn=function(t){return t>0&&!(t-1&t)},qo.Sn=function(t){--t;for(let s=1;s<32;s<<=1)t|=t>>s;return t+1},qo.Tn=function(t,s){return Math.round(t*s)/s},qo.vn=function(t,s){return Math.floor(t*s)/s},qo.xn=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},qo.In=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},qo.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;e>=0&&"0"===i.charAt(e);--e);return e>=0&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},qo.Cn=function(t,s,i){return qo.Xr(t,0,255)|qo.Xr(s,0,255)<<8|qo.Xr(i,0,255)<<16};qo.Gn=function(t,s,i,e){return(t=qo.Xr(Math.floor(1024*t),-8192,8191))<0&&(t+=16384),(s=qo.Xr(Math.floor(1024*s),-8192,8191))<0&&(s+=16384),(i=qo.Xr(Math.floor(1024*i),-8192,8191))<0&&(i+=16384),-(16384*t*16384*1024+16384*s*1024+1024*i+(e=qo.Xr(Math.floor(1023*e),0,1023)))},qo.Nn=function(t,s,i){return qo.Gn(t,s,i,1)},qo._n=function(t){if(t>=0)return(255&t)/255;{let s=Math.floor(-t/274877906944);return s>8191&&(s-=16384),s/1024}},qo.En=function(t){if(t>=0)return((65280&t)>>8)/255;{let s=Math.floor(-t%274877906944/16777216);return s>8191&&(s-=16384),s/1024}},qo.Dn=function(t){if(t>=0)return((16711680&t)>>16)/255;{let s=Math.floor(-t%16777216/1024);return s>8191&&(s-=16384),s/1024}},qo.An=function(t){return Ho(t)?0:t>=0?1:Math.floor(-t%1024)/1023},qo.Ln=function(t,s){for(t=Math.floor(t),s=Math.floor(s);0!==s;){let i=s;s=t%s,t=i}return t};const $o=[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]];qo.On=function(t,s){if((t=Math.floor(t))===(s=Math.floor(s)))return[1,1];for(let i of $o){let e=t/i[0]*i[1];if(Math.abs(s-e)<1)return i.slice(0);if(e=t/i[1]*i[0],Math.abs(s-e)<1)return[i[1],i[0]]}let i=qo.Ln(t,s);return[t/i,s/i]},qo.Rn=function(t,s,i,e,r,n,h,o){const a=Math.min(t,i),l=Math.max(t,i),u=Math.min(r,h),c=Math.max(r,h);if(l<u||a>c)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(n,o),m=Math.max(n,o);if(d<p||f>m)return!1;const y=r-t+h-i,g=n-s+o-e,M=i-t,w=e-s,b=h-r,S=o-n,T=Math.abs(w*b-S*M),v=b*g-S*y;if(Math.abs(v)>T)return!1;const x=M*g-w*y;return Math.abs(x)<=T},qo.kn=function(t,s,i,e,r,n,h,o,a,l,u,c){const f=Math.min(a,u),d=Math.max(a,u);if(n<f||r>d)return!1;const p=Math.min(l,c),m=Math.max(l,c);if(o<p||h>m)return!1;const y=a-t+u-i,g=l-s+c-e,M=i-t,w=e-s,b=u-a,S=c-l,T=Math.abs(w*b-S*M),v=b*g-S*y;if(Math.abs(v)>T)return!1;const x=M*g-w*y;return Math.abs(x)<=T},qo.jn=function(t,s,i,e,r){const n=Math.min(t,i),h=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),l=r.Pn(),u=r.Fn(),c=r.zn(),f=r.Bn(),d=r.Un(),p=r.Wn(),m=r.Qn(),y=r.Jn();return qo.kn(t,s,i,e,n,h,o,a,l,u,c,f)||qo.kn(t,s,i,e,n,h,o,a,c,f,d,p)||qo.kn(t,s,i,e,n,h,o,a,d,p,m,y)||qo.kn(t,s,i,e,n,h,o,a,m,y,l,u)},qo.Vn=function(t,s,i,e,r){const n=Math.min(t,i),h=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e);let l=0;for(let u=r.length-4;l<=u;l+=2)if(qo.kn(t,s,i,e,n,h,o,a,r[l],r[l+1],r[l+2],r[l+3]))return!0;return qo.kn(t,s,i,e,n,h,o,a,r[l],r[l+1],r[0],r[1])};qo.Yn=function(t,s,i,e,r,n,h,o){const a=i-t,l=o-n,u=a*l-(e-s)*(h-r);if(0===u)return 2;const c=((s-e)*(h-t)+a*(o-s))/u;return 0<c&&c<1.000001?(l*(h-t)+(r-h)*(o-s))/u:2},qo.Hn=function(t,s,i,e,r,n,h,o,a){const l=(h-r)*a,u=(o-n)*a;return qo.Yn(t,s,i,e,r-l,n-u,h+l,o+u)},qo.qn=function(t,s,i,e,r,n,h,o){const a=r-i,l=n-e,u=h-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,y=a*f+l*d,g=u*u+c*c,M=u*f+c*d,w=1/(p*g-m*m),b=(g*y-m*M)*w,S=(p*M-m*y)*w;return b>=0&&S>=0&&b+S<=1},qo.Zn=function(t,s,i,e,r,n,h,o){const a=r-i,l=n-e,u=h-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,y=u*u+c*c,g=f*a+d*l,M=f*u+d*c,w=p*y-m*m,b=(y*g-m*M)/w,S=(p*M-m*g)/w;return[1-b-S,b,S]},qo.Xn=function(t,s,i,e,r,n,h,o,a,l,u,c){return[t*e+s*h+i*l,t*r+s*o+i*u,t*n+s*a+i*c]}}{const ta=self.Cs;let sa=null,ia="";if("undefined"!=typeof document){sa=document;const aa=document.querySelector("base");ia=aa&&aa.hasAttribute("href")?aa.getAttribute("href"):"",ia&&(ia.startsWith("/")&&(ia=ia.substr(1)),ia.endsWith("/")||(ia+="/"))}ta.Kn=function(){return ia},ta.$n=function(){if(!sa)return"";const t=sa.location;return ta.th(t.origin+t.pathname)+ia},ta.th=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},ta.sh=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},ta.ih=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},ta.eh=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},ta.rh=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},ta.nh=function(t){return t.replace(/\\/g,"/")},ta.hh=function(t,s){return s===(t?ta.ih(t).slice(1):"")},ta.oh=function(t,s){let i,e;return ta.we(t)&&(i=ta.rh(t.name)),ta.ae(t)&&(i=ta.rh(t)),ta.we(s)&&(e=ta.rh(s.name)),ta.ae(s)&&(e=ta.rh(s)),i===e},ta.ah=function(t){t=ta.nh(t);let s=/^\w\:\//.exec(t);s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=t.replace(/\/{2,}/g,"/")).length>1&&"/"===t.slice(-1)&&(t=t.slice(0,-1));const i=t.lastIndexOf("/")+1;let e,r="",n=t,h="";i>0&&(r=t.slice(0,i),n=t.slice(i)),e=n;const o=n.lastIndexOf(".");return o>0&&(h=n.slice(o),e=n.slice(0,-h.length)),{dir:r,uh:n,name:e,root:s,ext:h,fh:s+r+n}},ta.dh=function(t,s){return new Promise((i,e)=>{self.setTimeout(i,t,s)})},ta.ph=function(t){try{t()}catch(t){ta.Rs&&console.warn("Swallowed exception: ",t)}},ta.mh=function(){},ta.Xe=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},ta.yh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},ta.gh=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},ta.Mh=function(t,s){t.length=s},ta.wh=function(t){t&&0!==t.length&&ta.Mh(t,0)},ta.bh=function(t){if(t){for(let s=0;s<t.length;s++){let i=t[s];ta.Mh(i,0)}ta.Mh(t,0)}},ta.Sh=function(t,s,i){s|=0;const e=t.length;if(!(s<=e))for(let r=e;r<s;++r)t.push(i)},ta.Th=function(t,s,i){s|=0;const e=t.length;s<e?ta.Mh(t,s):s>e&&ta.Sh(t,s,i)},ta.xh=function(t,s){ta.wh(t),ta.Lr(t,s)},ta.Lr=function(t,s){if(s.length<1e4)t.push(...s);else for(let i=0,e=s.length;i<e;++i)t.push(s[i])},ta.Ih=function(t,s){if((s=Math.floor(s))<0||s>=t.length)return;let i=t.length-1;for(let e=s;e<i;++e)t[e]=t[e+1];ta.Mh(t,i)},ta.Ch=function(t,s){let i=t.indexOf(s);i>=0&&t.splice(i,1)},ta.Gh=function(t,s){let i=t.length;if(s.length!==i)return!1;for(let e=0;e<i;++e)if(t[e]!==s[e])return!1;return!0},ta.Nh=function(t,s){let i=[],e=0;for(let r=0,n=t.length;r<n;++r){let n=t[r];s(n)?i.push(n):(t[e]=n,++e)}return ta.Mh(t,e),i},ta._h=function(t,s){const i=t.length;let e=0;for(let i=0,r=t.length;i<r;++i){let r=t[i];s.has(r)||(t[e++]=r)}return ta.Mh(t,e),i-e},ta.Eh=function(t,s){return t===Math.floor(t)&&t>=0&&t<s.length},ta.Dh=function(t,s){if(!ta.Eh(t,s))throw new RangeError("array index out of bounds")},ta.Ah=function(t){return t.slice()},ta.Lh=function(t,s){let i=[];for(let e of t)if(ta.me(e)){let t=s(e);if(!t)throw new Error("missing clone");if(t.constructor!==e.constructor)throw new Error("object is not a clone");i.push(t)}else ta.ve(e)?i.push(ta.Lh(e,s)):i.push(e);return i},ta.Oh=function(t){let s=[];for(let i of t)s.push(i.slice());return s},ta.Rh=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},ta.kh=function(t,s,i){const e=new Set;for(const r of t.values())s(r)&&(i?e.add(i(r)):e.add(r));return e},ta.jh=function(t,s){return t.union?t.union(s):new Set([...t,...s])},ta.Ph=function(t,s){for(const i of s)t.add(i);return t},ta.Fh=function(t){for(let s of t)return s;return null},ta.xor=function(t,s){return!t!=!s},ta.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return t>i;case 5:return t>=i;default:return!1}},ta.zh=function(t){for(let s in t)if(t.hasOwnProperty(s))return!0;return!1},ta.Bh=function(t,s){return t.length?new Promise((i,e)=>{const r=[];let n=0,h=!1;for(let o=0,a=t.length;o<a;++o)r.push(void 0),t[o].then(e=>{h||(r[o]=e,++n,n===t.length?i(r):s(n,t.length))}).catch(t=>{h=!0,e(t)})}):Promise.resolve([])};let ea=[];ta.Uh=function(t){ea.push(t)},ta.Wh=function(){let t=0;for(let s of ea)t+=s();return Math.floor(t)};let ra=1;const na=new Map,ha=new MessageChannel;ha.port2.onmessage=function(t){const s=t.data,i=na.get(s);na.delete(s),i&&i(performance.now())},ta.Qh=function(t){const s=ra++;return na.set(s,t),ha.port1.postMessage(s),s},ta.Jh=function(t){na.delete(t)},ta.Vh=ta.Qh,ta.Yh=function(){return new Promise(t=>ta.Vh(t))};const oa=new Set;ta.Hh=function(t){const s=self.requestAnimationFrame(async i=>{await ta.Yh(),oa.has(s)&&(oa.delete(s),t(i))});return oa.add(s),s},ta.qh=function(t){oa.has(t)&&(self.cancelAnimationFrame(t),oa.delete(t))}}{const la=self.Cs;la.Zh=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},la.Xh=function(t){return!la.Zh(t)},la.Kh=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} ${t.statusText}`)},la.$h=function(t,s){return fetch(t,s).then(t=>(la.Kh(t),t))},la.so=function(t){return la.$h(t).then(t=>t.text())},la.io=function(t){return la.$h(t).then(t=>t.json())},la.eo=function(t){return la.$h(t).then(t=>t.blob())},la.ro=function(t){return la.$h(t).then(t=>t.arrayBuffer())},la.no=function(t){return new Promise((s,i)=>{const e=new Image;e.onload=()=>s(e),e.onerror=t=>i(t),e.src=t})},la.ho=function(t){return"function"==typeof t.arrayBuffer?t.arrayBuffer():new Promise((s,i)=>{const e=new FileReader;e.onload=()=>s(e.result),e.onerror=()=>i(e.error),e.readAsArrayBuffer(t)})},la.oo=function(t){return"function"==typeof t.text?t.text():new Promise((s,i)=>{const e=new FileReader;e.onload=()=>s(e.result),e.onerror=()=>i(e.error),e.readAsText(t)})},la.ao=function(t){return la.oo(t).then(t=>JSON.parse(t))},la.lo=async function(t,s){let i=URL.createObjectURL(t);try{const t=await la.no(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof t.decode&&await t.decode(),t}finally{i&&URL.revokeObjectURL(i)}},la.uo=function(t,s){if("undefined"!=typeof document&&"function"==typeof document.createElement){const i=document.createElement("canvas");return i.width=t,i.height=s,i}return new OffscreenCanvas(t,s)},la.co=function(t,s,i){if("number"!=typeof i&&(i=1),s=s||"image/png",i=la.Xr(i,0,1),t.convertToBlob)return t.convertToBlob({type:s,quality:i});if(t.toBlob)return new Promise(e=>t.toBlob(e,s,i));throw new Error("could not convert canvas to blob")},la.fo=function(t,s,i){const e=la.uo(t.width,t.height);return e.getContext("2d").drawImage(t,0,0),la.co(e,s,i)},la.do=function(t,s,i){if(la.Ei.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>la.fo(t,s,i));if(la.Ei.ImageBitmap)return createImageBitmap(t).then(t=>la.fo(t,s,i));{const e=la.uo(t.width,t.height);return e.getContext("2d").putImageData(t,0,0),la.co(e,s,i)}},la.po=function(t,s){t.clear();for(const i of s)t.add(i)},la.mo=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},la.yo=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},la.Mo=function t(s){if("object"==typeof s&&null!==s){if(s instanceof Set)return{_c3type_:"set",data:[...s].map(s=>t(s))};if(s instanceof Map)return{_c3type_:"map",data:[...s].map(s=>[s[0],t(s[1])])};{const i=Object.create(null);for(const[e,r]of Object.entries(s))i[e]=t(r);return i}}return s},la.wo=function t(s){if("object"==typeof s&null!==s){if("set"===s._c3type_)return new Set(s.data.map(s=>t(s)));if("map"===s._c3type_)return new Map(s.data.map(s=>[s[0],t(s[1])]));{const i=Object.create(null);for(const[e,r]of Object.entries(s))i[e]=t(r);return i}}return s},la.bo=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const r of t)"-"===r?e>0&&(i=!0):i?(s+=r.toUpperCase(),i=!1):s+=r,++e;return s},la.So=function(t){return"object"==typeof t&&"function"==typeof t.next},la.To=function(t,s){const i=[];if("function"==typeof s)for(let e=0;e<t;++e)i.push(s());else for(let e=0;e<t;++e)i.push(s);return i}}{let ua=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},ca=function(t,s,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};0;const fa=self.Cs,da=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,pa=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;fa.vo=class{constructor(t,s,i,e){this.xo=NaN,this.Io=NaN,this.Co=NaN,this.Go=NaN,this.xo=0,this.Io=0,this.Co=0,this.Go=0,t instanceof fa.vo?this.set(t):this.No(t||0,s||0,i||0,e||0)}_o(t,s,i){return this.xo=+t,this.Io=+s,this.Co=+i,this.Xr(),this}No(t,s,i,e){return this.xo=+t,this.Io=+s,this.Co=+i,this.Go=+e,this.Xr(),this}set(t){return this.xo=t.xo,this.Io=t.Io,this.Co=t.Co,this.Go=t.Go,this}m(t){return this.set(t)}add(t){this.xo+=t.xo,this.Io+=t.Io,this.Co+=t.Co,this.Go+=t.Go,this.Xr()}Eo(t,s,i,e=0){this.xo+=+t,this.Io+=+s,this.Co+=+i,this.Go+=+e,this.Xr()}Do(t){this.Ao(Math.max(this.xo,t.xo)-Math.min(this.xo,t.xo)),this.Lo(Math.max(this.Io,t.Io)-Math.min(this.Io,t.Io)),this.Oo(Math.max(this.Co,t.Co)-Math.min(this.Co,t.Co)),this.Ro(Math.max(this.Go,t.Go)-Math.min(this.Go,t.Go)),this.Xr()}ko(t){this.xo=t.xo,this.Io=t.Io,this.Co=t.Co}Ao(t){this.xo=fa.Xr(+t,0,1)}jo(){return this.xo}Lo(t){this.Io=fa.Xr(+t,0,1)}Po(){return this.Io}Oo(t){this.Co=fa.Xr(+t,0,1)}Fo(){return this.Co}Ro(t){this.Go=fa.Xr(+t,0,1)}zo(){return this.Go}clone(){return fa.Jr(fa.vo,this.xo,this.Io,this.Co,this.Go)}toArray(){return[this.xo,this.Io,this.Co,this.Go]}Bo(){return new Float64Array(this.toArray())}Uo(t,s){t[s++]=this.xo,t[s++]=this.Io,t[s++]=this.Co,t[s]=this.Go}Wo(t,s){const i=this.xo,e=this.Io,r=this.Co,n=this.Go;for(let h=0;h<4;++h)t[s++]=i,t[s++]=e,t[s++]=r,t[s++]=n}Qo(t,s){t[s++]=this.xo,t[s++]=this.Io,t[s]=this.Co}equals(t){return this.xo===t.xo&&this.Io===t.Io&&this.Co===t.Co&&this.Go===t.Go}Jo(t){return this.xo===t.xo&&this.Io===t.Io&&this.Co===t.Co}Vo(t,s,i){return this.xo===t&&this.Io===s&&this.Co===i}Yo(t,s,i,e){return this.xo===t&&this.Io===s&&this.Co===i&&this.Go===e}Ho(t,s){return t[s]===Math.fround(this.xo)&&t[s+1]===Math.fround(this.Io)&&t[s+2]===Math.fround(this.Co)&&t[s+3]===Math.fround(this.Go)}qo(t,s){return t[s]===Math.fround(this.xo)&&t[s+1]===Math.fround(this.Io)&&t[s+2]===Math.fround(this.Co)}multiply(t){this.xo*=t.xo,this.Io*=t.Io,this.Co*=t.Co,this.Go*=t.Go}Zo(t){this.xo*=t,this.Io*=t,this.Co*=t,this.Go*=t}Xo(){return this.xo*=this.Go,this.Io*=this.Go,this.Co*=this.Go,this}Ko(){return this.xo/=this.Go,this.Io/=this.Go,this.Co/=this.Go,this}Xr(){return this.xo=fa.Xr(this.xo,0,1),this.Io=fa.Xr(this.Io,0,1),this.Co=fa.Xr(this.Co,0,1),this.Go=fa.Xr(this.Go,0,1),this}$o(t){this.xo=fa._n(t),this.Io=fa.En(t),this.Co=fa.Dn(t),this.Go=fa.An(t)}ta(t,s,i){return`rgb(${100*(fa.$i(t)?t:this.jo())}%, ${100*(fa.$i(s)?s:this.Po())}%, ${100*(fa.$i(i)?i:this.Fo())}%)`}sa(t,s,i,e){return`rgba(${100*(fa.$i(t)?t:this.jo())}%, ${100*(fa.$i(s)?s:this.Po())}%, ${100*(fa.$i(i)?i:this.Fo())}%, ${fa.$i(e)?e:this.zo()})`}ia(){const t=Math.round(255*this.jo()),s=Math.round(255*this.Po()),i=Math.round(255*this.Fo());return"#"+ua(t.toString(16))+ua(s.toString(16))+ua(i.toString(16))}ea(t){if("string"!=typeof t)return!1;let s,i,e;if("#"===(t=t.trim()).charAt(0)&&(t=t.substr(1)),3===t.length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.Ao(s),isFinite(i)&&this.Lo(i),isFinite(e)&&this.Oo(e),this.Ro(1),!0}ra(){return`${Math.round(255*this.jo())}, ${Math.round(255*this.Po())}, ${Math.round(255*this.Fo())}`}na(){return[Math.round(255*this.jo()),Math.round(255*this.Po()),Math.round(255*this.Fo())]}ha(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,r=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.Ao(i),isFinite(e)&&this.Lo(e),isFinite(r)&&this.Oo(r),this.Ro(1),!0}oa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,r=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.Ao(i),isFinite(e)&&this.Lo(e),isFinite(r)&&this.Oo(r),this.Ro(1),!0}aa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,r=parseInt(s[2].trim(),10)/255,n=parseFloat(s[3].trim());return isFinite(i)&&this.Ao(i),isFinite(e)&&this.Lo(e),isFinite(r)&&this.Oo(r),isFinite(n)&&this.Ro(n),!0}la(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,r=parseInt(s[2].trim(),10)/100,n=parseFloat(s[3].trim());return isFinite(i)&&this.Ao(i),isFinite(e)&&this.Lo(e),isFinite(r)&&this.Oo(r),isFinite(n)&&this.Ro(n),!0}ua(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.oa(t):this.ha(t);if(t.startsWith("rgba("))return t.includes("%")?this.la(t):this.aa(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.ca(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.oa(t):4===s.length&&this.la(t):3===s.length?this.ha(t):4===s.length&&this.aa(t)}}return this.ea(t)}toJSON(){return[this.xo,this.Io,this.Co,this.Go]}fa(t,s,i,e){let r,n,h;if(t%=360,s=fa.Xr(s,0,100),i=fa.Xr(i,0,100),e=fa.Xr(e,0,1),t/=360,i/=100,0==(s/=100))r=n=h=i;else{const e=i<.5?i*(1+s):i+s-i*s,o=2*i-e;r=ca(o,e,t+1/3),n=ca(o,e,t),h=ca(o,e,t-1/3)}return this.Ao(r),this.Lo(n),this.Oo(h),this.Ro(e),this}ca(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=da.exec(s),e=pa.exec(s);return i&&4===i.length?(this.fa(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.fa(+i[1],+i[2],+i[3],+i[4]),0))}da(){const t=this.xo,s=this.Io,i=this.Co,e=this.Go;return`hsla(${fa.vo.pa(t,s,i)}, ${fa.vo.ma(t,s,i)}%, ${fa.vo.ya(t,s,i)}%, ${e})`}ga(){const t=this.xo,s=this.Io,i=this.Co;return[fa.vo.pa(t,s,i),fa.vo.ma(t,s,i),fa.vo.ya(t,s,i),this.Go]}Ma(t){Array.isArray(t)&&(t.length<3||(this.xo=t[0],this.Io=t[1],this.Co=t[2],t.length>=4?this.Go=t[3]:this.Go=1))}set r(t){this.Ao(t)}get r(){return this.jo()}set g(t){this.Lo(t)}get g(){return this.Po()}set b(t){this.Oo(t)}get b(){return this.Fo()}set a(t){this.Ro(t)}get a(){return this.zo()}wa(t,s){switch(t){case 0:this.Ao(s);break;case 1:this.Lo(s);break;case 2:this.Oo(s);break;case 3:this.Ro(s);break;default:throw new RangeError("invalid color index")}}ba(t){switch(t){case 0:return this.jo();case 1:return this.Po();case 2:return this.Fo();case 3:return this.zo();default:throw new RangeError("invalid color index")}}static Sa(t,s){let i,e;if(Array.isArray(t))i=new fa.vo,i.Ma(t);else{if(!(t instanceof fa.vo))throw new Error("unexpected type");i=t}if(Array.isArray(s))e=new fa.vo,e.Ma(s);else{if(!(s instanceof fa.vo))throw new Error("unexpected type");e=s}return i.equals(e)}static Ta(t,s){return fa.Xr(Math.max(t,s)-Math.min(t,s),0,1)}static va(t,s){const i=new fa.vo;return i.Ao(Math.max(t.xo,s.xo)-Math.min(t.xo,s.xo)),i.Lo(Math.max(t.Io,s.Io)-Math.min(t.Io,s.Io)),i.Oo(Math.max(t.Co,s.Co)-Math.min(t.Co,s.Co)),i.Ro(Math.max(t.Go,s.Go)-Math.min(t.Go,s.Go)),i}static xa(t,s){const i=new fa.vo(0,0,0,1);return i.Ao(Math.max(t.xo,s.xo)-Math.min(t.xo,s.xo)),i.Lo(Math.max(t.Io,s.Io)-Math.min(t.Io,s.Io)),i.Oo(Math.max(t.Co,s.Co)-Math.min(t.Co,s.Co)),i}static pa(t,s,i){const e=Math.max(t,s,i),r=Math.min(t,s,i);if(e===r)return 0;let n=0;switch(e){case t:n=(s-i)/(e-r)+(s<i?6:0);break;case s:n=(i-t)/(e-r)+2;break;case i:n=(t-s)/(e-r)+4}return Math.round(n/6*360)}static ma(t,s,i){const e=Math.max(t,s,i),r=Math.min(t,s,i);if(e===r)return 0;const n=e-r,h=(e+r)/2>.5?n/(2-e-r):n/(e+r);return Math.round(100*h)}static ya(t,s,i){const e=Math.max(t,s,i),r=(e+Math.min(t,s,i))/2;return e?Math.round(100*r):0}},fa.vo.Ia=Object.freeze(fa.Jr(fa.vo,1,1,1,1)),fa.vo.Ca=Object.freeze(fa.Jr(fa.vo,0,0,0,1)),fa.vo.Ga=Object.freeze(fa.Jr(fa.vo,0,0,0,0))}{const ma=self.Cs;ma.Na=class{constructor(t,s){this._a=0,this.Ea=0,t instanceof ma.Na?this.m(t):this.set(t||0,s||0)}set(t,s){this._a=+t,this.Ea=+s}m(t){this._a=t._a,this.Ea=t.Ea}equals(t){return this._a===t._a&&this.Ea===t.Ea}Da(t,s){return this._a===t&&this.Ea===s}Ho(t,s){return t[s]===Math.fround(this._a)&&t[s+1]===Math.fround(this.Ea)}Aa(t){this._a=+t}La(){return this._a}Oa(t){this.Ea=+t}Ra(){return this.Ea}toArray(){return[this._a,this.Ea]}Bo(){return new Float64Array(this.toArray())}Uo(t,s){t[s++]=this._a,t[s]=this.Ea}offset(t,s){this._a+=+t,this.Ea+=+s}scale(t,s){this._a*=t,this.Ea*=s}Mt(t,s){this._a/=t,this.Ea/=s}round(){this._a=Math.round(this._a),this.Ea=Math.round(this.Ea)}floor(){this._a=Math.floor(this._a),this.Ea=Math.floor(this.Ea)}ceil(){this._a=Math.ceil(this._a),this.Ea=Math.ceil(this.Ea)}angle(){return ma.hn(0,0,this._a,this.Ea)}ka(){return this._a*this._a+this.Ea*this.Ea}length(){return ma.sn(this._a,this.Ea)}ja(t,s){const i=this._a*s-this.Ea*t;this.Ea=this.Ea*s+this._a*t,this._a=i}rotate(t){0!==t&&this.ja(Math.sin(t),Math.cos(t))}Pa(t,s,i){0===t||s===this._a&&i===this.Ea||(this._a-=s,this.Ea-=i,this.ja(Math.sin(t),Math.cos(t)),this._a+=+s,this.Ea+=+i)}move(t,s){0!==s&&(this._a+=Math.cos(t)*s,this.Ea+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this._a/=t,this.Ea/=t)}Xr(t,s){this._a=ma.Xr(this._a,t,s),this.Ea=ma.Xr(this.Ea,t,s)}xt(t){return this._a*t._a+this.Ea*t.Ea}reverse(){this._a=-this._a,this.Ea=-this.Ea}Fa(){let t=this._a;return this._a=this.Ea,this.Ea=-t,this}}}{const ya=self.Cs;ya.Rect=class{constructor(t,s,i,e){this.za=NaN,this.Ba=NaN,this.Ua=NaN,this.Wa=NaN,this.za=0,this.Ba=0,this.Ua=0,this.Wa=0,t instanceof ya.Rect?this.m(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.za=+t,this.Ba=+s,this.Ua=+i,this.Wa=+e}Qa(t,s,i,e){t=+t,s=+s,this.za=t,this.Ba=s,this.Ua=t+ +i,this.Wa=s+ +e}m(t){this.za=+t.za,this.Ba=+t.Ba,this.Ua=+t.Ua,this.Wa=+t.Wa}clone(){return new ya.Rect(this.za,this.Ba,this.Ua,this.Wa)}static Ja(t,s){const i=new ya.Rect;return i.Va(Math.min(t.za,s.za)),i.Ya(Math.min(t.Ba,s.Ba)),i.Ha(Math.max(t.Ua,s.Ua)),i.qa(Math.max(t.Wa,s.Wa)),i}static Za(t){return new ya.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.za===t.za&&this.Ba===t.Ba&&this.Ua===t.Ua&&this.Wa===t.Wa}Xa(t,s,i,e){return this.za===t&&this.Ba===s&&this.width()===i&&this.height()===e}Ho(t,s){return t[s]===Math.fround(this.za)&&t[s+1]===Math.fround(this.Ba)&&t[s+2]===Math.fround(this.Ua)&&t[s+3]===Math.fround(this.Wa)}Va(t){this.za=+t}Ka(){return this.za}Ya(t){this.Ba=+t}$a(){return this.Ba}Ha(t){this.Ua=+t}tl(){return this.Ua}qa(t){this.Wa=+t}sl(){return this.Wa}toArray(){return[this.za,this.Ba,this.Ua,this.Wa]}Bo(){return new Float64Array(this.toArray())}il(){return new DOMRect(this.za,this.Ba,this.width(),this.height())}static el(t){return ya.Jr(ya.Rect,t.left,t.top,t.right,t.bottom)}Uo(t,s){t[s++]=this.za,t[s++]=this.Ba,t[s++]=this.Ua,t[s]=this.Wa}rl(t,s){t[s++]=this.za,t[s++]=this.Ba,t[s++]=this.Ua,t[s++]=this.Ba,t[s++]=this.Ua,t[s++]=this.Wa,t[s++]=this.za,t[s]=this.Wa}nl(t,s,i){t[s++]=this.za,t[s++]=this.Ba,t[s++]=i,t[s++]=this.Ua,t[s++]=this.Ba,t[s++]=i,t[s++]=this.Ua,t[s++]=this.Wa,t[s++]=i,t[s++]=this.za,t[s++]=this.Wa,t[s]=i}width(){return this.Ua-this.za}height(){return this.Wa-this.Ba}hl(){return(this.za+this.Ua)/2}ol(){return(this.Ba+this.Wa)/2}offset(t,s){t=+t,s=+s,this.za+=t,this.Ba+=s,this.Ua+=t,this.Wa+=s}offsetLeft(t){this.za+=+t}offsetTop(t){this.Ba+=+t}al(t){this.Ua+=+t}ll(t){this.Wa+=+t}ul(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.Ba<this.Wa?this.za<this.Ua?this.Wa=this.Ba+this.width():this.Wa=this.Ba-this.width():this.za<this.Ua?this.Wa=this.Ba-this.width():this.Wa=this.Ba+this.width()}cl(t,s){t=+t,s=+s,this.za-=t,this.Ba-=s,this.Ua+=t,this.Wa+=s}fl(t,s){t=+t,s=+s,this.za+=t,this.Ba+=s,this.Ua-=t,this.Wa-=s}multiply(t,s){this.za*=t,this.Ba*=s,this.Ua*=t,this.Wa*=s}Mt(t,s){this.za/=t,this.Ba/=s,this.Ua/=t,this.Wa/=s}dl(t){this.za=+t-this.za,this.Ua=+t-this.Ua}pl(t){this.Ba=+t-this.Ba,this.Wa=+t-this.Wa}ml(t,s){const i=this.width(),e=this.height(),r=this.Ka()+i*t,n=this.$a()+e*s;this.Qa(r-e*s,n-i*t,e,i)}yl(){const t=this.za;this.za=this.Ua,this.Ua=t}gl(){const t=this.Ba;this.Ba=this.Wa,this.Wa=t}Ml(t){const s=this.Ba;this.Ba=+t-this.Wa,this.Wa=+t-s}round(){this.za=Math.round(this.za),this.Ba=Math.round(this.Ba),this.Ua=Math.round(this.Ua),this.Wa=Math.round(this.Wa)}wl(){this.za=Math.ceil(this.za),this.Ba=Math.ceil(this.Ba),this.Ua=Math.floor(this.Ua),this.Wa=Math.floor(this.Wa)}bl(){this.za=Math.floor(this.za),this.Ba=Math.floor(this.Ba),this.Ua=Math.ceil(this.Ua),this.Wa=Math.ceil(this.Wa)}floor(){this.za=Math.floor(this.za),this.Ba=Math.floor(this.Ba),this.Ua=Math.floor(this.Ua),this.Wa=Math.floor(this.Wa)}ceil(){this.za=Math.ceil(this.za),this.Ba=Math.ceil(this.Ba),this.Ua=Math.ceil(this.Ua),this.Wa=Math.ceil(this.Wa)}Xr(t,s,i,e){this.za=Math.max(this.za,+t),this.Ba=Math.max(this.Ba,+s),this.Ua=Math.min(this.Ua,+i),this.Wa=Math.min(this.Wa,+e)}Sl(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.za=ya.Xr(this.za,t,i),this.Ba=ya.Xr(this.Ba,s,e),this.Ua=ya.Xr(this.Ua,t,i),this.Wa=ya.Xr(this.Wa,s,e)}normalize(){this.za>this.Ua&&this.yl(),this.Ba>this.Wa&&this.gl()}Tl(t){return!(t.Ua<this.za||t.Wa<this.Ba||t.za>this.Ua||t.Ba>this.Wa)}vl(t,s,i){return!(t.Ua+s<this.za||t.Wa+i<this.Ba||t.za+s>this.Ua||t.Ba+i>this.Wa)}xl(t,s){return t>=this.za&&t<=this.Ua&&s>=this.Ba&&s<=this.Wa}Il(t){return t.za>=this.za&&t.Ba>=this.Ba&&t.Ua<=this.Ua&&t.Wa<=this.Wa}Cl(t){t.za<this.za&&(this.za=+t.za),t.Ba<this.Ba&&(this.Ba=+t.Ba),t.Ua>this.Ua&&(this.Ua=+t.Ua),t.Wa>this.Wa&&(this.Wa=+t.Wa)}Gl(t){this.za=ya.Ct(t.za,t.Ua,this.za),this.Ba=ya.Ct(t.Ba,t.Wa,this.Ba),this.Ua=ya.Ct(t.za,t.Ua,this.Ua),this.Wa=ya.Ct(t.Ba,t.Wa,this.Wa)}}}{const ga=self.Cs;ga.Nl=class{constructor(t,s,i,e,r,n,h,o){this._l=NaN,this.El=NaN,this.Dl=NaN,this.Al=NaN,this.Ll=NaN,this.Ol=NaN,this.Rl=NaN,this.kl=NaN,this._l=0,this.El=0,this.Dl=0,this.Al=0,this.Ll=0,this.Ol=0,this.Rl=0,this.kl=0,t instanceof ga.Nl?this.m(t):this.set(t||0,s||0,i||0,e||0,r||0,n||0,h||0,o||0)}set(t,s,i,e,r,n,h,o){this._l=+t,this.El=+s,this.Dl=+i,this.Al=+e,this.Ll=+r,this.Ol=+n,this.Rl=+h,this.kl=+o}jl(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}m(t){this._l=t._l,this.El=t.El,this.Dl=t.Dl,this.Al=t.Al,this.Ll=t.Ll,this.Ol=t.Ol,this.Rl=t.Rl,this.kl=t.kl}equals(t){return this._l===t._l&&this.El===t.El&&this.Dl===t.Dl&&this.Al===t.Al&&this.Ll===t.Ll&&this.Ol===t.Ol&&this.Rl===t.Rl&&this.kl===t.kl}Pl(t){this._l=+t}Pn(){return this._l}Fl(t){this.El=+t}Fn(){return this.El}zl(t){this.Dl=+t}zn(){return this.Dl}Bl(t){this.Al=+t}Bn(){return this.Al}Ul(t){this.Ll=+t}Un(){return this.Ll}Wl(t){this.Ol=+t}Wn(){return this.Ol}Ql(t){this.Rl=+t}Qn(){return this.Rl}Jl(t){this.kl=+t}Jn(){return this.kl}Vl(){return new DOMQuad(new DOMPoint(this._l,this.El),new DOMPoint(this.Dl,this.Al),new DOMPoint(this.Ll,this.Ol),new DOMPoint(this.Rl,this.kl))}static Yl(t){return ga.Jr(ga.Nl,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this._l,this.El,this.Dl,this.Al,this.Ll,this.Ol,this.Rl,this.kl]}Bo(){return new Float64Array(this.toArray())}Uo(t,s){t[s++]=this._l,t[s++]=this.El,t[s++]=this.Dl,t[s++]=this.Al,t[s++]=this.Ll,t[s++]=this.Ol,t[s++]=this.Rl,t[s]=this.kl}Hl(t,s,i){t[s++]=this._l,t[s++]=this.El,t[s++]=i,t[s++]=this.Dl,t[s++]=this.Al,t[s++]=i,t[s++]=this.Ll,t[s++]=this.Ol,t[s++]=i,t[s++]=this.Rl,t[s++]=this.kl,t[s]=i}offset(t,s){t=+t,s=+s,this._l+=t,this.El+=s,this.Dl+=t,this.Al+=s,this.Ll+=t,this.Ol+=s,this.Rl+=t,this.kl+=s}round(){this._l=Math.round(this._l),this.El=Math.round(this.El),this.Dl=Math.round(this.Dl),this.Al=Math.round(this.Al),this.Ll=Math.round(this.Ll),this.Ol=Math.round(this.Ol),this.Rl=Math.round(this.Rl),this.kl=Math.round(this.kl)}floor(){this._l=Math.floor(this._l),this.El=Math.floor(this.El),this.Dl=Math.floor(this.Dl),this.Al=Math.floor(this.Al),this.Ll=Math.floor(this.Ll),this.Ol=Math.floor(this.Ol),this.Rl=Math.floor(this.Rl),this.kl=Math.floor(this.kl)}ceil(){this._l=Math.ceil(this._l),this.El=Math.ceil(this.El),this.Dl=Math.ceil(this.Dl),this.Al=Math.ceil(this.Al),this.Ll=Math.ceil(this.Ll),this.Ol=Math.ceil(this.Ol),this.Rl=Math.ceil(this.Rl),this.kl=Math.ceil(this.kl)}ql(t){this._l=t.za,this.El=t.Ba,this.Dl=t.Ua,this.Al=t.Ba,this.Ll=t.Ua,this.Ol=t.Wa,this.Rl=t.za,this.kl=t.Wa}Zl(t,s){0===s?this.ql(t):this.Xl(t,Math.sin(s),Math.cos(s))}Xl(t,s,i){const e=t.za*s,r=t.Ba*s,n=t.Ua*s,h=t.Wa*s,o=t.za*i,a=t.Ba*i,l=t.Ua*i,u=t.Wa*i;this._l=o-r,this.El=a+e,this.Dl=l-r,this.Al=a+n,this.Ll=l-h,this.Ol=u+n,this.Rl=o-h,this.kl=u+e}Kl(t){t.set(Math.min(this._l,this.Dl,this.Ll,this.Rl),Math.min(this.El,this.Al,this.Ol,this.kl),Math.max(this._l,this.Dl,this.Ll,this.Rl),Math.max(this.El,this.Al,this.Ol,this.kl))}xl(t,s){let i=this.Dl-this._l,e=this.Al-this.El;const r=this.Ll-this._l,n=this.Ol-this.El,h=t-this._l,o=s-this.El;let a=i*i+e*e,l=i*r+e*n,u=i*h+e*o;const c=r*r+n*n,f=r*h+n*o;let d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d;return p>=0&&m>0&&p+m<1||(i=this.Rl-this._l,e=this.kl-this.El,a=i*i+e*e,l=i*r+e*n,u=i*h+e*o,d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d,p>=0&&m>0&&p+m<1)}hl(){return(this._l+this.Dl+this.Ll+this.Rl)/4}ol(){return(this.El+this.Al+this.Ol+this.kl)/4}$l(t,s,i,e){return!(!this.xl(t,s)&&!this.xl(i,e))||ga.jn(t,s,i,e,this)}tu(t){let s=t.hl(),i=t.ol();if(this.xl(s,i))return!0;if(s=this.hl(),i=this.ol(),t.xl(s,i))return!0;const e=this._l,r=this.El,n=this.Dl,h=this.Al,o=this.Ll,a=this.Ol,l=this.Rl,u=this.kl;return ga.jn(e,r,n,h,t)||ga.jn(n,h,o,a,t)||ga.jn(o,a,l,u,t)||ga.jn(l,u,e,r,t)}su(){const t=this._l,s=this.El;this._l=this.Dl,this.El=this.Al,this.Dl=this.Ll,this.Al=this.Ol,this.Ll=this.Rl,this.Ol=this.kl,this.Rl=t,this.kl=s}iu(){this.eu(0,2),this.eu(1,3),this.eu(6,4),this.eu(7,5)}ru(){this.eu(0,6),this.eu(1,7),this.eu(2,4),this.eu(3,5)}nu(){this.eu(2,6),this.eu(3,7)}eu(t,s){const i=this.hu(t);this.ou(t,this.hu(s)),this.ou(s,i)}hu(t){switch(t){case 0:return this._l;case 1:return this.El;case 2:return this.Dl;case 3:return this.Al;case 4:return this.Ll;case 5:return this.Ol;case 6:return this.Rl;case 7:return this.kl;default:throw new RangeError("invalid quad point index")}}ou(t,s){switch(s=+s,t){case 0:this._l=s;break;case 1:this.El=s;break;case 2:this.Dl=s;break;case 3:this.Al=s;break;case 4:this.Ll=s;break;case 5:this.Ol=s;break;case 6:this.Rl=s;break;case 7:this.kl=s;break;default:throw new RangeError("invalid quad point index")}}Mt(t,s){this._l/=t,this.El/=s,this.Dl/=t,this.Al/=s,this.Ll/=t,this.Ol/=s,this.Rl/=t,this.kl/=s}}}{const Ma=self.Cs,wa=(self.assert,[0,0,1,0,1,1,0,1]),ba=Ma.Jr(Ma.Nl);Ma.au=class extends Ma.Wr{constructor(t,s=!0){super(),t||(t=wa),this.lu=Float64Array.from(t),this.uu=new Ma.Rect,this.cu=!0,this.fu=s}Vr(){}du(){return this.lu}pu(){return this.lu.length/2}mu(t){this.lu.length===t.length?this.lu.set(t):this.lu=Float64Array.from(t),this.cu=!0}yu(){this.mu(wa)}m(t){this.mu(t.lu)}gu(){this.cu=!0}Mu(){if(!this.cu)return;const t=this.lu;let s=t[0],i=t[1],e=s,r=i;for(let n=0,h=t.length;n<h;n+=2){const h=t[n],o=t[n+1];h<s&&(s=h),h>e&&(e=h),o<i&&(i=o),o>r&&(r=o)}this.uu.set(s,i,e,r),this.cu=!1}ql(t,s,i){let e=this.lu;8!==e.length&&(e=new Float64Array(8),this.lu=e),e[0]=t.Ka()-s,e[1]=t.$a()-i,e[2]=t.tl()-s,e[3]=t.$a()-i,e[4]=t.tl()-s,e[5]=t.sl()-i,e[6]=t.Ka()-s,e[7]=t.sl()-i,this.uu.m(t),0===s&&0===i||this.uu.offset(-s,-i),this.cu=!1}wu(t,s,i){ba.m(t),ba.offset(s,i),this.mu(ba.toArray()),this.cu=!0}transform(t,s,i){let e=0,r=1;0!==i&&(e=Math.sin(i),r=Math.cos(i)),this.bu(t,s,e,r)}bu(t,s,i,e){const r=this.lu;for(let n=0,h=r.length;n<h;n+=2){const h=n+1,o=r[n]*t,a=r[h]*s;r[n]=o*e-a*i,r[h]=a*e+o*i}this.cu=!0}offset(t,s){const i=this.lu;for(let e=0,r=i.length;e<r;e+=2)i[e]+=t,i[e+1]+=s}xl(t,s){const i=this.lu;if(t===i[0]&&s===i[1])return!0;this.Mu();const e=this.uu,r=e.Ka()-110,n=e.$a()-101,h=e.tl()+131,o=e.sl()+120;let a=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0;r<t?(a=r,u=t):(a=t,u=r),n<s?(l=n,c=s):(l=s,c=n),h<t?(f=h,p=t):(f=t,p=h),o<s?(d=o,m=s):(d=s,m=o);let y=0,g=0;for(let e=0,M=i.length;e<M;e+=2){const w=(e+2)%M,b=i[e],S=i[e+1],T=i[w],v=i[w+1];Ma.kn(r,n,t,s,a,u,l,c,b,S,T,v)&&++y,Ma.kn(h,o,t,s,f,p,d,m,b,S,T,v)&&++g}return y%2==1||g%2==1}Su(t,s,i){const e=t.lu,r=this.lu;if(this.xl(e[0]+s,e[1]+i))return!0;if(t.xl(r[0]-s,r[1]-i))return!0;for(let t=0,n=r.length;t<n;t+=2){const h=(t+2)%n,o=r[t],a=r[t+1],l=r[h],u=r[h+1];let c=0,f=0,d=0,p=0;o<l?(c=o,d=l):(c=l,d=o),a<u?(f=a,p=u):(f=u,p=a);for(let t=0,r=e.length;t<r;t+=2){const n=(t+2)%r,h=e[t]+s,m=e[t+1]+i,y=e[n]+s,g=e[n+1]+i;if(Ma.kn(o,a,l,u,c,d,f,p,h,m,y,g))return!0}}return!1}$l(t,s,i,e,r,n){if(this.xl(i-t,e-s))return!0;if(this.xl(r-t,n-s))return!0;let h=0,o=0,a=0,l=0;i<r?(h=i,a=r):(h=r,a=i),e<n?(o=e,l=n):(o=n,l=e);const u=this.lu;for(let c=0,f=u.length;c<f;c+=2){const d=(c+2)%f,p=u[c]+t,m=u[c+1]+s,y=u[d]+t,g=u[d+1]+s;if(Ma.kn(i,e,r,n,h,a,o,l,p,m,y,g))return!0}return!1}iu(t){const s=this.lu;for(let i=0,e=s.length;i<e;i+=2)s[i]=2*t-s[i];this.cu=!0}ru(t){const s=this.lu;for(let i=0,e=s.length;i<e;i+=2){const e=i+1;s[e]=2*t-s[e]}this.cu=!0}nu(){const t=this.lu;for(let s=0,i=t.length;s<i;s+=2){const i=s+1,e=t[s];t[s]=t[i],t[i]=e}this.cu=!0}Tu(){const t=this.lu;let s=0;for(let i=0,e=t.length;i<e;i+=2)s+=t[i];return s/this.pu()}vu(){const t=this.lu;let s=0;for(let i=0,e=t.length;i<e;i+=2)s+=t[i+1];return s/this.pu()}xu(){return this.lu}Iu(){return this.pu()}Cu(){return this.fu}}}{const Sa=self.Cs;Sa.Gu=class extends Sa.Wr{constructor(t){if(super(),this.Nu=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}Vr(){this._u(),this.Nu=null}Eu(){return 0===this.Nu.size}_u(){const t=this.Nu;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){const e=this.Nu;let r=e.get(t);r||(r=new Map,e.set(t,r)),r.set(s,i)}Js(t,s){const i=this.Nu.get(t);return i?i.get(s):i}Qs(t,s){const i=this.Nu.get(t);return!!i&&i.has(s)}Du(t,s){const i=this.Nu,e=i.get(t);if(!e)return!1;const r=e.delete(s);return r&&0===e.size&&i.delete(t),r}Au(t){const s=this.Nu,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[i,e]of s.entries())e.delete(t)&&0===e.size&&s.delete(i)}Lu(){let t=0;for(const s of this.Nu.values())t+=s.size;return t}*values(){for(const t of this.Nu.values())yield*t.values()}*Ou(){for(const[t,s]of this.Nu.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.Nu.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const Ta=self.Cs;Ta.Ru=class extends Ta.Wr{constructor(){super(),this.ku=new Set,this.ju=[],this.Pu=!1}Vr(){this._u()}_u(){this.ku.clear(),Ta.wh(this.ju),this.Pu=!1}Fu(t){this.ku.has(t)||(this.ku.add(t),this.Pu||this.ju.push(t))}Qs(t){return this.ku.has(t)}Du(t){this.ku.delete(t)&&(this.Pu=!0)}Lu(){return this.ku.size}Eu(){return 0===this.ku.size}zu(){return this.Pu&&(this.Bu(),this.Pu=!1),this.ju}Bu(){const t=this.ju;Ta.wh(t);for(const s of this.ku)t.push(s)}}}{const va=self.Cs,xa=new Map,Ia=new Map,Ca=new Map,Ga=new Map,Na=new Map,_a=new Map,Ea=new Map,Da=new Map,Aa=new Map;Aa.set("linear","noease"),Aa.set("default","noease");const La=["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"],Oa=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],Ra=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]);self.Uu=class t{constructor(){}static Wu(){return"default"}static Qu(){return"noease"}static Ju(t){return Ra.get(t)}static Vu(s,...i){let e,r;this.Yu(),s?(Ca.has(s)||Ca.set(s,new Map),e=Ca.get(s),r=[...e.keys()].filter(i=>!t.Hu(i,s)||t.Hu(i,s).transition.qu())):(e=Na,r=[...e.keys()]);const n=r.sort();return[...Ia.keys()].concat(n).filter(t=>!i.includes(t))}static Zu(){this.Yu();const t=[...Na.keys()];return t.sort(),[...Ia.keys()].concat(t)}static Xu(){this.Yu();const t=[...Na.keys()];return t.sort(),t}static Ku(t){for(const s of La)if(self.lang(`ui.bars.timeline.eases.${s}`)===t)return!0;for(const s of Oa)if(self.lang(`ui.bars.timeline.short-eases.${s}`)===t)return!0}static $u(t){return this.Yu(),[...Ia.keys()].includes(t)}static tc(s){const i=Aa.get(s);return i?xa.get(i):t.$u(s)?xa.get(s):Ea.has(s)?Ea.get(s):void 0}static sc(t){return this.Yu(),Da.get(t)}static ec(s,i){this.Yu();const e=t.tc(s);if(e)return e;if(!i)throw new Error("missing ease function");return Ca.get(i).get(s)}static Hu(t,s){this.Yu();const i=Ga.get(s);if(i)return i.get(t)}static rc(s,i){return this.Yu(),!!t.tc(s)||!!Ca.get(i).get(s)}static nc(s){this.Yu();return t.tc(s)||Na.get(s)}static hc(t){return this.Yu(),_a.get(t)}static oc(t){return this.Yu(),this.Zu()[t]}static ac(t,s){return this.Yu(),this.Vu(s).indexOf(t)}static lc(t){return this.ac(t)}static Yu(){0===xa.size&&(this.uc("default",()=>{}),this.uc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.uc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.uc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.uc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.uc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.uc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.uc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.uc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.uc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.uc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.uc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.uc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.uc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.uc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.uc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.uc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.uc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.uc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.uc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.uc("easeinquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.uc("easeoutquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.uc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.uc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.uc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.uc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.uc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.uc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.uc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.uc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.uc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.uc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.cc("cubicbezier",this.fc),this.cc("spline",this.dc))}static uc(s,i,e=!1){if("function"==typeof i)t.mc(s,i,"predefined");else{if(!va.ve(i))throw new Error("unexpected arguments");if(self.yc){const r=va.Jr(self.yc,s,e);r.Mc(i),t.mc(s,(t,s,i,e)=>r.wc(t,s,i,e),"predefined"),Da.set(s,r)}else{const r=va.Jr(va.bc,[s,i.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);r.Sc(e),t.mc(s,(t,s,i,e)=>r.wc(t,s,i,e),"predefined")}}}static cc(s,i){t.mc(s,i,"private")}static Tc(s,i,e,r){this.Yu(),t.mc(s,i,"custom",e,r)}static vc(t,s){if(this.$u(t))return;if([...Ea.keys()].includes(t))return;const i=Ca.get(s);i&&i.delete(t);const e=Ga.get(s);e&&e.delete(t)}static mc(t,s,i,e,r){switch(i){case"predefined":xa.set(t,s),Ia.set(t,s);break;case"custom":e?(Ca.has(e)||Ca.set(e,new Map),Ga.has(e)||Ga.set(e,new Map),Ca.get(e).set(t,s),Ga.get(e).set(t,r)):(Na.set(t,s),_a.set(t,r));break;case"private":xa.set(t,s),Ea.set(t,s);break;default:throw new Error("unexpected ease mode")}}static xc(t,s,i,e){return 0===e?s:i*t/e+s}static fc(t,s,i,e,r){return s+3*t*(i-s)+3*t**2*(s+e-2*i)+t**3*(r-s+3*i-3*e)}static dc(t,s,i,e,r,n,h,o,a,l){if(e===r&&n===h)return t;const u=Wa(t,s,e,n,o,l),c=Pa(i,r,h,a),f=Fa(i,r,h,a),d=za(i,r,h,a);return Ba(u,c,f,d)}static Ic(t,s,i,e){const r=[],n=Pa(t,s,i,e),h=Fa(t,s,i,e),o=za(t,s,i,e);for(let t=0;t<ka;++t){const s=Ba(t*ja,n,h,o);r.push(s)}return r}};const ka=11,ja=1/(ka-1),Pa=(t,s,i,e)=>e-3*i+3*s-t,Fa=(t,s,i,e)=>3*i-6*s+3*t,za=(t,s,i,e)=>3*(s-t),Ba=(t,s,i,e)=>((s*t+i)*t+e)*t,Ua=(t,s,i,e)=>3*s*t*t+2*i*t+e,Wa=(t,s,i,e,r,n)=>{if(1==t)return 1;let h=0,o=1,a=n[o],l=ka-1;for(n[ka-1];o!=l&&a<=t;)o++,a=n[o],h+=ja;o--,a=n[o];let u=h+(t-a)/(n[o+1]-a)*ja;const c=Pa(s,i,e,r),f=Fa(s,i,e,r),d=za(s,i,e,r),p=Ua(u,c,f,d);if(0===p)return u;if(p>=.01){for(let s=0;s<4;++s)u-=(Ba(u,c,f,d)-t)/Ua(u,c,f,d);return u}{let s,i,e=h,r=h+ja,n=0;do{u=e+(r-e)/2;let h=Ba(u,c,f,d)-t;h>0?r=u:e=u,s=Math.abs(h)>1e-7,i=++n<10}while(s&&i);return u}}}{let Qa=function(t){Ja.ae(t)};0;const Ja=self.Cs;Ja.Cc=class{constructor(t){this.Gc=[],this.qr=t||"",this.Nc=0}Vr(){this._u(),this.Gc=null}_c(){return this.qr}_u(){Ja.bh(this.Gc),this.Nc=0}Ec(){return this.Nc}Dc(t=Math.random()*this.Ec()){let s=0;for(const[i,e]of this.Gc)if(s+=i,t<s)return e;return 0}Ac(){return!!this.Gc.length}Lc(t,s){Qa(s),this.Nc+=t,this.Gc.push([t,s])}Oc(t,s){Qa(s);const i=0===t;for(let e=0;e<this.Gc.length;e++){const r=this.Gc[e],n=i||r[0]===t,h=r[1]===s;if(n&&h){this.Gc.splice(e,1),this.Nc-=r[0];break}}}Rc(){return JSON.stringify(this.Gc)}static kc(t,s){const i=new Ja.Cc(s),e=JSON.parse(t);for(const t of e){const s=t[0],e=t[1];i.Lc(s,e)}return i}}}{const Va=self.Cs;let Ya=0;Va.jc=class{constructor(t,s){this.Pc=t,this.Fc=s,this.zc=Ya++,this.Pc.Bc("runtime","screen-reader-text",{type:"create",id:this.zc,text:this.Fc})}Vr(){this.Pc.Bc("runtime","screen-reader-text",{type:"release",id:this.zc}),this.Pc=null,this.Fc="",this.zc=-1}Uc(t){this.Fc!==t&&(this.Fc=t,this.Pc.Bc("runtime","screen-reader-text",{type:"update",id:this.zc,text:this.Fc}))}}}self.Cs.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.Wc=!1,this.Qc=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.Qc)throw new Error(`cannot stop async event '${this.type}' propagation`);this.Wc=!0}};{const Ha=self.Cs;self.assert;Ha.Event.Jc=class extends Ha.Wr{constructor(t){super(),this.Vc=t,this.Yc=[],this.Hc=new Set,this.qc=[],this.Zc=new Set,this.Xc=0,this.Kc=[]}Vr(){this.Xc>0||(Ha.wh(this.Yc),this.Hc.clear(),Ha.wh(this.qc),this.Zc.clear(),Ha.wh(this.Kc),Ha.Vr(this))}$c(t,s){if(this.tf())this.Kc.push({sf:"add",if:t,capture:s});else if(s){if(this.Hc.has(t))return;this.Yc.push(t),this.Hc.add(t)}else{if(this.Zc.has(t))return;this.qc.push(t),this.Zc.add(t)}}ef(t,s){this.tf()?this.Kc.push({sf:"remove",if:t,capture:s}):s?this.Hc.has(t)&&(this.Hc.delete(t),Ha.Ch(this.Yc,t)):this.Zc.has(t)&&(this.Zc.delete(t),Ha.Ch(this.qc,t))}rf(){return!this.Yc.length&&!this.qc.length}tf(){return this.Xc>0}nf(){const t=new Set,s=new Set;for(const i of this.Kc)if("add"===i.sf)this.$c(i.if,i.capture),i.capture?s.delete(i.if):t.delete(i.if);else{if("remove"!==i.sf)throw new Error("invalid op");i.capture?(this.Hc.delete(i.if),s.add(i.if)):(this.Zc.delete(i.if),t.add(i.if))}Ha._h(this.qc,t),Ha._h(this.Yc,s),Ha.wh(this.Kc)}hf(t){this.af();let s=!1;for(let i=0,e=this.Yc.length;i<e;++i)if(this.Yc[i](t),t.Wc){s=!0;break}if(!s)for(let s=0,i=this.qc.length;s<i&&(this.qc[s](t),!t.Wc);++s);return this.lf(),!t.defaultPrevented}uf(t){this.af();for(let s=0,i=this.Yc.length;s<i;++s)this.Yc[s](t);for(let s=0,i=this.qc.length;s<i;++s)this.qc[s](t);return this.lf(),!0}af(){this.Xc++}lf(){this.Xc--,0===this.Xc&&this.Kc.length>0&&this.nf()}cf(t){t?this.af():this.lf()}ff(t){let s=[];for(let i=0,e=this.Yc.length;i<e;++i){let e=this.Yc[i];s.push(Ha.df(()=>e(t)))}for(let i=0,e=this.qc.length;i<e;++i){let e=this.qc[i];s.push(Ha.df(()=>e(t)))}return Promise.all(s).then(()=>!t.defaultPrevented)}pf(t){const s=[];this.af();for(let i=0,e=this.Yc.length;i<e;++i){const e=this.Yc[i](t);e instanceof Promise&&s.push(e)}for(let i=0,e=this.qc.length;i<e;++i){const e=this.qc[i](t);e instanceof Promise&&s.push(e)}return this.lf(),s.length?Promise.all(s).then(()=>!t.defaultPrevented):!t.defaultPrevented}async mf(t){return await this.pf(t)}async yf(t){this.af();for(let s=0,i=this.Yc.length;s<i;++s){const i=this.Yc[s](t);i instanceof Promise&&await i}for(let s=0,i=this.qc.length;s<i;++s){const i=this.qc[s](t);i instanceof Promise&&await i}return this.lf(),!t.defaultPrevented}*gf(t){this.af();for(let s=0,i=this.Yc.length;s<i;++s){const i=this.Yc[s](t);Ha.So(i)&&(yield*i)}for(let s=0,i=this.qc.length;s<i;++s){const i=this.qc[s](t);Ha.So(i)&&(yield*i)}this.lf()}}}{const qa=self.Cs;qa.Event.Mf=class extends qa.Wr{constructor(){super(),this.wf=new Map,this.bf=!1}Vr(){if(this.bf)throw new Error("already released");this.Sf(),this.bf=!0,qa.Vr(this)}Yr(){return this.bf}Sf(){if(this.wf){for(let t of this.wf.values())t.Vr();this.wf.clear()}}Tf(t,s){let i=this.wf.get(t);return i||(s?(i=qa.Jr(qa.Event.Jc,t),this.wf.set(t,i),i):null)}vf(t){return this.wf.has(t)}addEventListener(t,s,i){this.Tf(t,!0).$c(s,!!i)}removeEventListener(t,s,i){let e=this.Tf(t,!1);e&&(e.ef(s,!!i),e.rf()&&this.wf.delete(t))}dispatchEvent(t){const s=this.Tf(t.type,!1);return!s||(t.cancelable?s.hf(t):s.uf(t))}xf(t){const s=this.Tf(t.type,!1);return s?(t.Qc=!0,s.ff(t)):Promise.resolve(!0)}async If(t){const s=this.Tf(t.type,!1);if(!s)return!0;this.wf.delete(t.type),t.Qc=!0;const i=await s.ff(t);return s.Vr(),i}async Cf(t){const s=this.Tf(t.type,!1);return!s||await s.mf(t)}Gf(t){const s=this.Tf(t.type,!1);return!s||s.pf(t)}async Nf(t){const s=this.Tf(t.type,!1);return!s||await s.yf(t)}_f(t){const s=this.Tf(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.gf(t)}cf(t){for(const s of this.wf.values())s.cf(t)}}}{let Za=function(t){il=tl&&0===el?requestIdleCallback(Xa,{timeout:35}):setTimeout(Xa,el>0?1:t)},Xa=function(t){if(il=-1,!sl.length)return;let s=performance.now(),i=s,e=0,r=0;do{Ka(sl.shift()),i=performance.now(),++e,r=(i-s)/e*1.1}while(sl.length&&(tl&&0===el&&void 0!==t?r<t.timeRemaining():i-s+r<12));if(-1===il&&sl.length){let t=i-s;Za(Math.max(16-t,4))}},Ka=function(t){let s;try{s=t.if()}catch(s){return void t.reject(s)}t.resolve(s)};0;const $a=self.Cs,tl="undefined"!=typeof requestIdleCallback;let sl=[],il=-1,el=0,rl=$a.Hs.Qs("disable-asyncify");rl&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),$a.df=function(t){let s=null;return $a.Rs&&(s=$a.Xi()),new Promise((i,e)=>{sl.push({if:t,resolve:i,reject:e,stack:s}),rl?Ka(sl.pop()):-1===il&&Za(16)})},$a.df.Ef=function(t){if(t)++el;else if(--el,el<0)throw new Error("already turned off high throughput mode")}}{let nl=function(){al=-1},hl=function(){ll=-1,ul=-1;let t=Date.now();for(let s of cl)if(s.Df(t)){let t=s.Af();(-1===ul||t<ul)&&(ul=t)}else cl.delete(s);if(-1!==ul){let s=Math.max(ul-t+100,1e3);ll=self.setTimeout(hl,s)}};0;const ol=self.Cs;let al=-1;ol.Lf=function(){return-1===al&&(al=Date.now(),self.setTimeout(nl,16)),al};let ll=-1,ul=-1,cl=new Set;ol.Of=class{constructor(t,s){this.Rf=t,this.kf=1e3*s,this.jf=0,this.Pf=!1}Ff(){let t=ol.Lf();this.jf=t+this.kf,this.Pf||(cl.add(this),this.Pf=!0),-1===ll?(ul=this.jf,ll=self.setTimeout(hl,this.kf+100)):this.jf<ul&&ul>t+1e3&&(self.clearTimeout(ll),ul=this.jf,ll=self.setTimeout(hl,this.kf+100))}Df(t){return!(t>=this.jf&&(this.Rf()?(this.jf=t+this.kf,0):(this.Pf=!1,1)))}Af(){return this.jf}zf(){this.Pf&&(cl.delete(this),this.Pf=!1,0===cl.size&&-1!==ll&&(self.clearTimeout(ll),ll=-1,ul=-1))}Vr(){this.zf(),this.Rf=null}}}{const fl=self.Cs;fl.Bf=class t{constructor(t){this.Uf=!1,this.Wf=t}Qf(){this.Uf||(this.Uf=!0,this.Wf&&(this.Wf(),this.Wf=null))}Jf(){return this.Uf}Vr(){this.Qf()}static Vr(s){return new t(()=>s.Vr())}static Vf(t,s,i,e,r){if("string"!=typeof s&&!Array.isArray(s))throw new TypeError("expected string or array");if(null==e)e=!1;else if("boolean"!=typeof e&&"object"!=typeof e)throw new TypeError("invalid event listener options");if(r&&(i=i.bind(r)),Array.isArray(s)||s.includes(" ")){"string"==typeof s&&(s=s.split(" "));const r=new fl.Yf;for(const n of s)t.addEventListener(n,i,e),r.Fu(fl.Jr(fl.Bf,()=>t.removeEventListener(n,i,e)));return r}return t.addEventListener(s,i,e),fl.Jr(fl.Bf,()=>t.removeEventListener(s,i,e))}},fl.Hf=class extends fl.Bf{qf(t){this.Wf=t}},fl.Yf=class extends fl.Bf{constructor(...t){super(),this.Zf=new Set;for(let s of t)this.Fu(s)}Fu(...t){if(this.Uf)throw new Error("already disposed");for(let s of t)this.Zf.add(s)}Xf(t){if(this.Uf)throw new Error("already disposed");this.Zf.delete(t)}Kf(){if(this.Uf)throw new Error("already disposed");if(this.Zf){for(let t of this.Zf)t.Qf();this.Zf.clear()}}Jf(){return this.Uf}Qf(){if(this.Uf)throw new Error("already disposed");this.Uf=!0;for(let t of this.Zf)t.Qf();this.Zf.clear(),this.Zf=null}Vr(){this.Qf()}}}{const dl=self.Cs;dl.$f=class extends dl.Wr{constructor(){super(),this.td=0,this.Ea=0,this.sd=0,this.ed=0}Fu(t){t=+t,this.Ea=t-this.td,this.sd=this.ed+this.Ea,this.td=this.sd-this.ed-this.Ea,this.ed=this.sd}rd(t){this.ed-=+t}Js(){return this.ed}Ff(){this.td=0,this.Ea=0,this.sd=0,this.ed=0}Set(t){this.td=0,this.Ea=0,this.sd=0,this.ed=+t}nd(t){this.td=t.td,this.Ea=t.Ea,this.sd=t.sd,this.ed=t.ed}Vr(){}}}{const pl=self.Cs,ml={},yl=!0;ml.hd=function(t){this.od=t,this.right=this.od.ad,this.left=this.od.ad,this.parent=null,this.color=!1,this.key=null},ml.ld=function(t){this.size=0,this.ad=new ml.hd(this),this.ad.color=!1,this.root=this.ad,this.root.parent=this.ad,this.compare=t||this.ud},ml.ld.prototype.ud=function(t,s){return t<s?-1:s<t?1:0},ml.ld.prototype.clone=function(){var t=new ml.ld(this.compare);return t.fd(this),t},ml.ld.prototype.clear=function(){this.size=0,this.ad=new ml.hd(this),this.ad.color=!1,this.root=this.ad,this.root.parent=this.ad},ml.ld.prototype.dd=function(t){var s=t.right;t.right=s.left,s.left!=this.ad&&(s.left.parent=t),s.parent=t.parent,t.parent==this.ad?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,s.left=t,t.parent=s},ml.ld.prototype.pd=function(t){var s=t.left;t.left=s.right,s.right!=this.ad&&(s.right.parent=t),s.parent=t.parent,t.parent==this.ad?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,s.right=t,t.parent=s},ml.ld.prototype.md=function(t){if(this.contains(t))this.yd(t).key=t;else{var s=new ml.hd(this);s.key=t;for(var i=this.ad,e=this.root;e!=this.ad;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;s.parent=i,i==this.ad?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.ad,s.right=this.ad,s.color=yl,this.gd(s),this.size++}},ml.ld.prototype.gd=function(t){for(;t!=this.ad&&t!=this.root&&t.parent.color==yl;){var s;t.parent==t.parent.parent.left?(s=t.parent.parent.right).color==yl?(t.parent.color=!1,s.color=!1,t.parent.parent.color=yl,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.dd(t)),t.parent.color=!1,t.parent.parent.color=yl,t.parent.parent!=this.ad&&this.pd(t.parent.parent)):(s=t.parent.parent.left).color==yl?(t.parent.color=!1,s.color=!1,t.parent.parent.color=yl,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.pd(t)),t.parent.color=!1,t.parent.parent.color=yl,t.parent.parent!=this.ad&&this.dd(t.parent.parent))}this.root.color=!1},ml.ld.prototype.Md=function(t){var s,i;(i=(s=t.left==this.ad||t.right==this.ad?t:this.wd(t)).left!=this.ad?s.left:s.right).parent=s.parent,s.parent==this.ad?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.bd(i),this.size--},ml.ld.prototype.bd=function(t){for(;t!=this.root&&0==t.color;){var s;t==t.parent.left?((s=t.parent.right).color==yl&&(s.color=!1,t.parent.color=yl,this.dd(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=yl,t=t.parent):(0==s.right.color&&(s.left.color=!1,s.color=yl,this.pd(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.dd(t.parent),t=this.root)):((s=t.parent.left).color==yl&&(s.color=!1,t.parent.color=yl,this.pd(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=yl,t=t.parent):(0==s.left.color&&(s.right.color=!1,s.color=yl,this.dd(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.pd(t.parent),t=this.root))}t.color=!1},ml.ld.prototype.remove=function(t){var s=this.yd(t);if(s!=this.ad){var i=s.key;return this.Md(s),i}return null},ml.ld.prototype.Sd=function(t,s){this.remove(s)},ml.ld.prototype.min=function(t){for(;t.left!=this.ad;)t=t.left;return t},ml.ld.prototype.max=function(t){for(;t.right!=this.ad;)t=t.right;return t},ml.ld.prototype.wd=function(t){if(t.right!=this.ad)return this.min(t.right);for(var s=t.parent;s!=this.ad&&t==s.right;)t=s,s=s.parent;return s},ml.ld.prototype.Td=function(t){if(t.left!=this.ad)return this.max(t.left);for(var s=t.parent;s!=this.ad&&t==s.left;)t=s,s=s.parent;return s},ml.ld.prototype.vd=function(t){if(this.size>0){var s=this.yd(t);if(s==this.ad)return null;if(s.right!=this.ad)return this.min(s.right).key;for(var i=s.parent;i!=this.ad&&s==i.right;)s=i,i=i.parent;return i!=this.ad?i.key:null}return null},ml.ld.prototype.xd=function(t){if(this.size>0){var s=this.yd(t);if(s==this.ad)return null;if(s.left!=this.ad)return this.max(s.left).key;for(var i=s.parent;i!=this.ad&&s==i.left;)s=i,i=i.parent;return i!=this.ad?i.key:null}return null},ml.ld.prototype.Id=function(){return this.min(this.root).key},ml.ld.prototype.Cd=function(){return this.max(this.root).key},ml.ld.prototype.yd=function(t){for(var s=this.root;s!=this.ad&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},ml.ld.prototype.contains=function(t){return null!=this.yd(t).key},ml.ld.prototype.getValues=function(){var t=[];return this.forEach(function(s){t.push(s)}),t},ml.ld.prototype.fd=function(t){if("array"==ml.Gd(t))for(var s=0;s<t.length;s++)this.md(t[s]);else if("function"==ml.Gd(t.forEach))t.forEach(this.md,this);else if("function"==ml.Gd(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)this.md(i[s])}else if("object"==ml.Gd(t))for(var e in t)this.md(t[e])},ml.ld.prototype.Nd=function(t){if("array"==ml.Gd(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==ml.Gd(t.forEach))t.forEach(this.Sd,this);else if("function"==ml.Gd(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)this.remove(i[s])}else if("object"==ml.Gd(t))for(var e in t)this.remove(t[e])},ml.ld.prototype._d=function(t){if("array"==ml.Gd(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==ml.Gd(t.forEach))return t.every(this.contains,this);if("function"==ml.Gd(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==ml.Gd(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},ml.ld.prototype.range=function(t,s){var i=[];return this.Ed(function(t){i.push(t)},t,s),i},ml.ld.prototype.Dd=function(t,s){if(!this.Ad())for(var i=this.min(this.root);i!=this.ad;){if(t.call(s,i.key,this))return;i=this.wd(i)}},ml.ld.prototype.Ld=function(t,s,i){if(!this.Ad())for(var e=this.yd(s);e!=this.ad;){if(t.call(i,e.key,this))return;e=this.wd(e)}},ml.ld.prototype.traverseTo=function(t,s,i){if(!this.Ad())for(var e=this.min(this.root),r=this.yd(s);e!=r;){if(t.call(i,e.key,this))return;e=this.wd(e)}},ml.ld.prototype.Ed=function(t,s,i,e){if(!this.Ad())for(var r=this.yd(s),n=this.yd(i);r!=n;){if(t.call(e,r.key,this))return;r=this.wd(r)}},ml.ld.prototype.Od=function(t,s){if(!this.Ad())for(var i=this.max(this.root);i!=this.ad;){if(t.call(s,i.key,this))return;i=this.Td(i)}},ml.ld.prototype.forEach=function(t,s){if(!this.Ad())for(var i=this.min(this.root);i!=this.ad;i=this.wd(i))t.call(s,i.key,i.key,this)},ml.ld.prototype.some=function(t,s){if(this.Ad())return!1;for(var i=this.min(this.root);i!=this.ad;i=this.wd(i))if(t.call(s,i.key,i.key,this))return!0;return!1},ml.ld.prototype.every=function(t,s){if(this.Ad())return!1;for(var i=this.min(this.root);i!=this.ad;i=this.wd(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},ml.ld.prototype.map=function(t,s){var i=[];if(this.Ad())return i;for(var e=this.min(this.root);e!=this.ad;e=this.wd(e))i.push(t.call(s,e.key,e.key,this));return i},ml.ld.prototype.filter=function(t,s){var i=[];if(this.Ad())return i;for(var e=this.min(this.root);e!=this.ad;e=this.wd(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},ml.ld.prototype.Rd=function(){return this.size},ml.ld.prototype.Ad=function(){return 0==this.size},ml.ld.prototype.isSubsetOf=function(t){var s=ml.Rd(t);if(this.Rd()>s)return!1;var i=0;if(this.Ad())return!0;for(var e=this.min(this.root);e!=this.ad;e=this.wd(e))ml.contains.call(t,t,e.key)&&i++;return i==this.Rd()},ml.ld.prototype.intersection=function(t){var s=new ml.ld(this.compare);if(this.Ad())return s;for(var i=this.min(this.root);i!=this.ad;i=this.wd(i))t.contains.call(t,i.key,i.key,this)&&s.md(i.key);return s},pl.ld=class extends pl.Wr{constructor(t){super(),this.kd=new ml.ld(t),this.jd=!1,this.Pd=new Set,this.Fd=new Set}Fu(t){this.jd?this.kd.contains(t)?this.Fd.delete(t):this.Pd.add(t):this.kd.md(t)}Xf(t){this.jd?this.kd.contains(t)?this.Fd.add(t):this.Pd.delete(t):this.kd.remove(t)}Qs(t){return this.jd?!!this.Pd.has(t)||!this.Fd.has(t)&&this.kd.contains(t):this.kd.contains(t)}_u(){this.kd.clear(),this.Pd.clear(),this.Fd.clear()}toArray(){if(this.jd)throw new Error("cannot be used in queueing mode");return this.kd.getValues()}Lu(){return this.kd.Rd()+this.Pd.size-this.Fd.size}Eu(){return 0===this.Lu()}zd(){if(this.Eu())throw new Error("empty set");if(this.jd)throw new Error("cannot be used in queueing mode");const t=this.kd;return t.min(t.root).key}Bd(){if(this.Eu())throw new Error("empty set");if(this.jd)throw new Error("cannot be used in queueing mode");const t=this.zd();return this.Xf(t),t}Ud(t){if(t=!!t,this.jd!==t&&(this.jd=t,!t)){for(const t of this.Fd)this.kd.remove(t);this.Fd.clear();for(const t of this.Pd)this.kd.md(t);this.Pd.clear()}}Wd(t){this.kd.forEach(t)}*values(){if(this.Eu())return;const t=this.kd;for(let s=t.min(t.root);s!=t.ad;s=t.wd(s))yield s.key}[Symbol.iterator](){return this.values()}}}{const gl=self.Cs;gl.Qd=class{constructor(t=gl.hardwareConcurrency){this.Jd=t,this.Vd=[],this.Yd=0}Fu(t,s){return new Promise((i,e)=>{const r={if:t,resolve:i,reject:e,Hd:s};s?.signal&&s.signal.aborted?e(new Error("abort")):(s?.signal&&(r.onabort=()=>{const t=this.Vd.indexOf(r);-1!==t&&(this.Vd.splice(t,1),e(new Error("abort")))},s.signal.addEventListener("abort",r.onabort)),this.Vd.push(r),this.qd())})}Zd(t){for(let s=0,i=this.Vd.length;s<i;++s)if(this.Vd[s].if===t)return s;return-1}Xd(t,s){const i=this.Zd(t);if(-1===i)throw new Error("cannot find promise to resolve");this.Vd[i].resolve(s),this.Vd.splice(i,1)}Kd(t,s){const i=this.Zd(t);if(-1===i)throw new Error("cannot find promise to reject");this.Vd[i].reject(s),this.Vd.splice(i,1)}async qd(){if(!this.Vd.length)return;if(this.Yd>=this.Jd)return;this.Yd++;const t=this.Vd.shift();t.Hd?.signal&&t.onabort&&t.Hd.signal.removeEventListener("abort",t.onabort);try{const s=await t.if();t.resolve(s)}catch(s){t.reject(s)}this.Yd--,this.qd()}}}{const Ml=self.Cs;Ml.$d=class{constructor(t,s,i){this.Rf=t,this.tp=s,this.sp=i||2*s,this.ip=-1,this.ep=-1/0,this.rp=()=>this.np(),this.hp=!1,this.op=!1,this.ap=null}lp(t){this.op=!!t}up(){return void 0!==Ml.cp&&Ml.cp.fp()?this.sp:this.tp}pp(...t){if(-1!==this.ip)return;this.ap=t;let s=Ml.Lf(),i=s-this.ep,e=this.up();i>=e&&this.op?(this.ep=s,this.mp()):this.ip=self.setTimeout(this.rp,Math.max(e-i,4))}mp(){this.hp=!0;const t=this.ap;this.ap=null,t?this.Rf(...t):this.Rf(),this.hp=!1}Ff(){this.hp||(this.yp(),this.ap=null,this.ep=Ml.Lf())}np(){this.ip=-1,this.ep=Ml.Lf(),this.mp()}yp(){-1!==this.ip&&(self.clearTimeout(this.ip),this.ip=-1)}Vr(){this.yp(),this.Rf=null,this.ap=null,this.rp=null}}}{const wl=self.Cs;wl.gp=class{constructor(){this.Mp=new Map,this.wp=!1,this.bp=null,this.Sp=null,this.Tp=null,this.vp=null}xp(t){this.wp=!!t}Ip(){return this.wp}Cp(t){this.bp=t}Gp(t){if(!this.bp)throw new Error("no get base size callback set");return this.bp(t)}Np(t){this.Sp=t}_p(t,s,i,e,r,n){if(!this.Sp)throw new Error("no raster at size callback set");return this.Sp(t,s,i,e,r,n)}Ep(t){this.Tp=t}Dp(t){if(!this.Tp)throw new Error("no release result callback set");this.Tp(t)}Ap(t){this.vp=t}Lp(){if(!this.vp)throw new Error("no redraw callback set");this.vp()}Op(t){let s=this.Mp.get(t);return s||(s=wl.Jr(wl.Rp,this,t),this.Mp.set(t,s)),s.kp(),s}jp(t){this.Mp.delete(t.Pp())}Fp(){for(const t of this.Mp.values())t.zp(),t.Bp()}}}{const bl=self.Cs;bl.Rp=class{constructor(t,s){this.Up=t,this.Wp=s,this.Qp=0,this.Jp=0,this.Vp=0,this.Yp=this.Up.Gp(s).then(t=>{this.Up&&(this.Jp=t[0],this.Vp=t[1],this.Up.Lp())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.Hp=!0,this.Up&&this.Up.Lp()}),this.qp=0,this.Zp=0,this.Xp=0,this.Kp=0,this.$p=!1,this.tm=null,this.sm=!1,this.Hp=!1}Vr(){if(this.Qp<=0)throw new Error("already released");this.Qp--,0===this.Qp&&this.im()}zp(){this.tm&&(this.Up.Dp(this.tm),this.tm=null)}im(){this.zp(),this.Up.jp(this),this.Up=null}Pp(){return this.Wp}kp(){this.Qp++}rm(){return this.Qp>0}nm(){return this.tm}Bp(){this.sm=!0}async hm(t,s,i){if(0===s||0===i||this.Hp)return;if(this.$p)return;let e=bl.Sn(Math.ceil(s)),r=bl.Sn(Math.ceil(i));const n=Math.max(e,r);if(n>4096){const t=4096/n;s*=t,i*=t,e=Math.min(Math.ceil(e*t),4096),r=Math.min(Math.ceil(r*t),4096)}if(s<e&&i<r){const t=s/i;e/r>t?(s=r*t,i=r):(s=e,i=e/t)}if(this.Up.Ip()&&(e=Math.ceil(s),r=Math.ceil(i)),e<=this.qp&&r<=this.Zp&&!this.sm)return;this.$p=!0,this.qp=e,this.Zp=r;const h=await this.Up._p(this.Wp,t,this.qp,this.Zp,s,i);this.Up&&(this.zp(),this.tm=h,this.Xp=s,this.Kp=i,this.$p=!1,this.sm=!1,this.Up.Lp())}om(){return this.Yp}am(){return this.Jp}lm(){return this.Vp}um(){return this.Xp}fm(){return this.Kp}dm(){return this.Hp}}}{let Sl=function(t){return Gl.get(t)};0;const Tl=self.Cs;Tl.pm="\ufeff";const vl=new Set("0123456789");Tl.ym=function(t){return vl.has(t)};const xl=new Set(" \t\n\r            ​\u2028\u2029  　");Tl.gm=function(t){return xl.has(t)},Tl.Mm=function(t){return[...t].filter(t=>!Tl.gm(t)).join("")},Tl.wm=function(t){for(const s of t)if(!Tl.gm(s))return!1;return!0},Tl.bm=function(t){for(const s of t)if(!Tl.gm(s))return!1;return!0},Tl.Sm=function(t){return 1===t.length&&t.charCodeAt(0)<32},Tl.Tm=function(t){return[...t].filter(t=>!Tl.Sm(t)).join("")};let Il=null;try{Il=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}Tl.vm=function(t){return!Tl.gm(t)&&Il&&Il.test(t)};const Cl=new Set("0123456789.+-e");Tl.xm=function(t){if(!(t=t.trim()).length)return!1;let s=t.charAt(0);if("-"!==s&&!vl.has(s))return!1;for(let s of t)if(!Cl.has(s))return!1;return!0},Tl.Im=function(t){let s=t.length;for(;s>0;){let i=t.charAt(s-1);if(!Tl.ym(i))break;--s}return t.substr(0,s)},Tl.Cm=function(t){let s=Tl.Im(t),i=t.substr(s.length);return i=i?(parseInt(i,10)+1).toString():"2",s+i};const Gl=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]]),Nl=/[&<>"']/g;Tl.Gm=function(t){return t.replace(Nl,Sl)},Tl.Nm=function(t){let s=Tl._m(t,"\\","\\\\");return s=Tl._m(s,'"','\\"'),s=Tl._m(s,"\t","\\t"),s=Tl._m(s,"\r",""),Tl._m(s,"\n","\\n")},Tl.Em=function(t){let s=Tl._m(t,"&","&amp;");return s=Tl._m(s,"<","&lt;"),s=Tl._m(s,">","&gt;"),Tl._m(s,'"',"&quot;")};const _l=/[-[\]{}()*+?.,\\^$|#\s]/g;Tl.Zi=function(t){return t.replace(_l,"\\$&")},Tl.Dm=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},Tl.Am=function(t,s){let i=0,e=0;for(;i<s;){if(i=t.indexOf("\n",i),-1===i)return e;e++,i++}return e},Tl.Lm=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());const e=s.length;let r=0,n=0,h=[];for(;(n=t.indexOf(s,r))>-1;)h.push(n),r=n+e;return h},Tl._m=function(t,s,i){return t.replaceAll(s,()=>i)},Tl.Om=function(t,s,i){return t.replace(new RegExp(Tl.Zi(s),"gi"),()=>i)},Tl.Rm=function(t,s){"string"==typeof s?t.textContent=s:s.km()?t.textContent=s.toString():(t.innerHTML=s.jm(),s instanceof Tl.dr&&s.Pm(t))},Tl.Fm=function(t,s){return t instanceof Tl.cr||t instanceof Tl.dr?t.equals(s):s instanceof Tl.cr||s instanceof Tl.dr?s.equals(t):t===s},Tl.zm=function(t,...s){let i=t;for(let e=0,r=s.length;e<r;++e){const r=`{${e}}`;if(!t.includes(r))throw new Error(`missing placeholder '${r}' in string substitution`);i=i.replace(r,s[e].toString())}return i},Tl.Bm=function(t,...s){let i=t,e=-1,r=-1;for(let n=0,h=s.length;n<h;++n){const h=`{${n}}`;t.includes(h)?(r=n,i=i.replace(h,s[n].toString())):-1===e&&(e=n)}if(e>=0&&r>=0&&e<r)throw new Error(`missing placeholder '${e}' in string substitution`);return i},Tl.Um=function(t,s){let i=t;for(let[t,e]of Object.entries(s))i=i.replaceAll(t,e.toString());return i},Tl.Wm=function(t,s){return t>s?1:t<s?-1:0},Tl.Qm=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return i>e?1:i<e?-1:0};const El=new self.Intl.Segmenter;Tl.Jm=function(t){const s=[];for(const i of El.segment(t))s.push(i.segment);return s},Tl.Vm=function*(t){for(const s of El.segment(t))yield s.segment},Tl.Ym=function(t){let s=0;for(const i of El.segment(t))++s;return s};const Dl=1073741824,Al=1099511627776;Tl.Hm=function(t,s){let i="common."+(s?"dataRates":"dataSizes")+".";const e=self.qm;if(t<1024)return e(i+"bytes",t);if(t<1048576){let s=t/1024;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"kilobytes",s)}if(t<Dl){let s=t/1048576;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"megabytes",s)}if(t<Al){let s=t/Dl;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"gigabytes",s)}{let s=t/Al;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"terabytes",s)}};const Ll={Zm:!1,Xm:!0,Km:!0,$m:!0,ty:!0};Tl.sy=function(t,s){s=Object.assign({},Ll,s),Tl.ey.iy("common.time");const i=[],e=self.lang,r=self.ny;if(s.Xm){const s=Math.floor(t/86400);s>0&&(t-=24*s*3600,i.push(r(".days",null,s)))}if(s.Km){const s=Math.floor(t/3600);(s>0||i.length)&&(t-=3600*s,i.push(r(".hours",null,s)))}if(s.$m){const e=Math.floor(t/60);(e>0||i.length||!s.ty)&&(t-=60*e,i.push(r(".minutes",null,e)))}if(s.ty){const s=Math.floor(t%60);i.push(r(".seconds",null,s))}const n=(s.Zm?e(".approx-prefix"):"")+i.join(e(".separator"));return Tl.ey.hy(),n},Tl.oy=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),r=s-e.length;for(let t=0;t<r;++t)i+="0";return i+e},Tl.ly=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},Tl.uy=function(t,s){let i=t.split(".").map(t=>t.trim()),e=s.split(".").map(t=>t.trim());Tl.Th(i,4,"0"),Tl.Th(e,4,"0"),i=i.map(t=>parseInt(t,10)),e=e.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const s=i[t]-e[t];if(0!==s)return s<0?-1:1}return 0},Tl.py=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random());return("x"===t?s:3&s|8).toString(16)})},Tl.my=function(t,s){if(t.length!==s.length)throw new Error("strings must be same length");let i=0;for(let e=0,r=t.length;e<r;++e)t.charAt(e)!==s.charAt(e)&&++i;return i},Tl.yy=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,r,n,h,o;for(t.length>s.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(n=e,r=1;r<=t.length;r++)h=s[e-1]===t[r-1]?o[r-1]:Math.min(o[r-1]+1,Math.min(n+1,o[r]+1)),o[r-1]=n,n=h;o[t.length]=n}return o[t.length]}}{let Ol=function(t,s,i){const e=kl.get(i);if(!e)return"class"===i?s?"</span>":`<span class="bbclass${Ul++}">`:t;if("string"==typeof e){if("a"===e&&0===zl.length||"abbr"===e&&0===Bl.length)return t;if("a"!==e||s){if("abbr"!==e||s)return"<"+s+e+">";{const t=parseInt(i.substring(3),10)-1;if(t<0||t>=Bl.length)throw new Error("invalid bbcode tip substitution");const s=Bl[t];let e="";if("string"==typeof s?e=s:"function"==typeof s&&(e=s()),"string"!=typeof e)throw new TypeError("invalid bbcode tip");return`<abbr title="${Rl._m(e,'"',"&quot;")}">`}}{const t=parseInt(i.substring(1),10)-1;if(t<0||t>=zl.length)throw new Error("invalid bbcode link substitution");const s=zl[t];if("string"==typeof s)return`<a href="${zl[t]}">`;if("function"==typeof s)return`<a class="bblink${t}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(e)){let t=e[0],i=e[1];return s?"</"+t+">":`<${t} class="${i}">`}};0;const Rl=self.Cs,kl=(self.assert,new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]])),jl=new Set(["icon"]),Pl=/\[(\/?)([a-zA-Z0-9]+)\]/g,Fl=/\[(\/?)([^\[\n]*?)\]/g;let zl=null,Bl=null,Ul=0;const Wl=/\n/g;Rl.dr=class{constructor(t,s){if(this.gy=s&&s.My?t:Rl.Gm(t),this.wy="",this.by=!1,this.Sy=[],this.Ty=[],s){if(this.by=!!s.vy,s.links){if(s.links.length>9)throw new Error("too many links");this.Sy=s.links}if(s.xy){if(s.xy.length>9)throw new Error("too many tips");this.Ty=s.xy}}this.Iy=this.gy.includes("["),this.Cy=this.by&&this.gy.includes("\n"),this.Gy=!this.Iy&&!this.Cy&&!this.gy.includes("&"),this.Ny=!1,this._y=[]}toString(){return this.gy}valueOf(){return this.gy}km(){return this.Gy}Ey(){return this.Iy?this.gy.replace(Pl,""):this.gy}jm(){if(this.Gy)return this.gy;if(!this.wy&&this.gy){let t=this.gy;this.Iy&&(Ul=0,zl=this.Sy,Bl=this.Ty,t=t.replace(Pl,Ol),zl=null,Bl=null),this.Cy&&(t=t.replace(Wl,"<br>")),this.wy=t}return this.wy}Pm(t){if(this.Sy.length)for(let s=0,i=this.Sy.length;s<i;++s){const i=this.Sy[s];if("function"!=typeof i)continue;const e=t.querySelector(".bblink"+s);if(!e)throw new Error("unable to attach BBString link handler");e.onclick=i}}equals(t){return t instanceof Rl.cr?this.jm()===t.jm():t instanceof Rl.dr?this.gy===t.gy:this.gy===t}Dy(){if(this.Ny)return this._y;const t=[],s=this.gy,i=[];Fl.lastIndex=0;let e=0,r=null;for(;null!==(r=Fl.exec(s));){const n=r.index;if(n>0&&"\\"===s.charAt(n-1))continue;const h=r[0],o=r[1],a=r[2],l=s.substring(e,n);if(e=n+h.length,l&&t.push({text:l,Ay:i.slice(0)}),a)if(o){const t=a.toLowerCase();for(let s=i.length-1;s>=0;--s)if(i[s].tag===t){i.splice(s,1);break}}else{let s=a,e=null;const r=a.indexOf("=");if(-1!==r?(s=a.substring(0,r).toLowerCase(),e=a.substring(r+1)):s=s.toLowerCase(),jl.has(s)){if("icon"!==s)throw new Error(`unknown self-closing tag ${s}`);t.push({icon:e,Ay:i.slice(0)})}else i.push({tag:s,Ly:e})}}e<s.length&&t.push({text:s.substring(e),Ay:i.slice(0)});for(const s of t)s.text&&(s.text=this.Oy(s.text));return this._y=t.map(t=>t.icon?Rl.Jr(Rl.Ry,{icon:t.icon,Ay:t.Ay}):Rl.Jr(Rl.ky,{jy:Rl.Jm(t.text),Ay:t.Ay})),this.Ny=!0,this._y}Oy(t){return t=Rl._m(t,"\\[","["),Rl._m(t,"\\\\","\\")}static Py(t){return Rl.Jr(Rl.dr,t,{My:!0}).Ey()}static Fy(t){return t.replace(Fl,"")}}}{let Ql=function(t){return" "!==t&&" "!==t&&ql.gm(t)},Jl=function(t){return Zl.has(t)},Vl=function(t){return ql.vm(t)&&!Jl(t)},Yl=function(t){for(;t.length>0&&Ql(t.at(-1));)t.pop()},Hl=function(t){return"\n"===t||"\r\n"===t};0;const ql=self.Cs,Zl=new Set("〈《「『【〔〖〘〚〝");ql.zy=class{constructor(){this.By=[],this.Uy=null}Wy(){return this.By}Qy(){return this.By.length}Jy(t){this.Uy=t}Vy(t,s){let i=0,e=0,r=0,n=0,h=0;for(const o of t){if(-1===o.Yy()){const t=s(o);o.Hy(t.height),o.qy(t.fontBoundingBoxAscent||0),o.Zy(t.fontBoundingBoxDescent||0),o.Xy(t.Ky||0),o.$y()?o.tg(t.width):o.sg()&&o.ig(this.Uy)}i+=o.Yy(),e=Math.max(e,o.eg()),r=Math.max(r,o.rg()),n=Math.max(n,o.ng()),h=Math.max(h,o.hg())}return{width:i,height:e,fontBoundingBoxAscent:r,fontBoundingBoxDescent:n,Ky:h}}og(t,s,i,e,r,n){this.By.push(ql.Jr(ql.zy.ag,{lg:t,width:s,height:i,fontBoundingBoxAscent:e,fontBoundingBoxDescent:r,Ky:n}))}zy(t,s,i,e,r){if("string"==typeof t&&(t=[ql.Jr(ql.ky,{jy:ql.Jm(t)})]),ql.wh(this.By),!t.length||1===t.length&&t[0].$y()&&t[0].Eu()||i<2)return;if(1===t.length){const e=t[0];if(e.$y()&&e.ug()<=100&&!e.cg()){let{width:t,height:n,fontBoundingBoxAscent:h,fontBoundingBoxDescent:o,Ky:a}=s(e);if(t+=r,e.tg(t),e.Hy(n),e.qy(h||0),e.Zy(o||0),e.Xy(a||0),t<=i)return void this.og([e],t,n,h,o,a)}}let n;n="word"===e?this.fg(t):"cjk"===e?this.dg(t):this.pg(t),this.mg(n,s,i,r)}fg(t){const s=[];let i=[],e=!1;for(const r of t){const t=r.yg();if(r.sg())i.length>0&&s.push(i),s.push([r]),i=[];else for(const n of r.gg())if(Hl(n))i.length>0&&s.push(i),s.push([ql.Jr(ql.ky,{jy:["\n"],Ay:t})]),i=[];else if(0===i.length)i.push(ql.Jr(ql.ky,{jy:[n],Ay:t})),e=Ql(n);else{const r=Ql(n);if(r===e){const s=i.at(-1);s.yg()===t?s.Mg(n):i.push(ql.Jr(ql.ky,{jy:[n],Ay:t}))}else s.push(i),i=[ql.Jr(ql.ky,{jy:[n],Ay:t})],e=r}}return i.length>0&&s.push(i),s}dg(t){const s=[];let i=[],e=!1;for(const r of t){const t=r.yg();if(r.sg())i.length>0&&s.push(i),s.push([r]),i=[];else for(const n of r.gg())if(Hl(n))i.length>0&&s.push(i),s.push([ql.Jr(ql.ky,{jy:["\n"],Ay:t})]),i=[];else if(0===i.length)i.push(ql.Jr(ql.ky,{jy:[n],Ay:t})),e=Jl(n);else if(e||Vl(n)){const s=i.at(-1);s.yg()===t?s.Mg(n):i.push(ql.Jr(ql.ky,{jy:[n],Ay:t})),e=Jl(n)}else s.push(i),i=[ql.Jr(ql.ky,{jy:[n],Ay:t})],e=Jl(n)}return i.length>0&&s.push(i),s}pg(t){const s=[];for(const i of t)if(i.$y()){const t=i.gg();ql.Lr(s,t.map(t=>[ql.Jr(ql.ky,{jy:[t],Ay:i.yg()})]))}else s.push([i]);return s}wg(t){return t.map(t=>t.bg())}Sg(t,s){const i=t.length?t.at(-1):null;let e=0;i&&i.$y()&&s[0].$y()&&s[0].yg()===i.yg()&&(i.Tg(s[0].gg()),e=1);for(let i=s.length;e<i;++e){const i=s[e];t.push(i.bg())}}mg(t,s,i,e){let r=[],n=0,h=0,o=0,a=0,l=0;for(const e of t){if(1===e.length&&e[0].$y()&&1===e[0].ug()&&Hl(e[0].gg()[0])){if(0===h){const t=s(ql.Jr(ql.ky,{jy:[" "],Ay:e[0].yg()}));h=t.height,o=t.fontBoundingBoxAscent||0,a=t.fontBoundingBoxDescent||0,l=t.Ky||0}this.og(r,n,h,o,a,l),r=[],n=0,h=0,o=0,a=0,l=0;continue}const t=this.wg(r);this.Sg(t,e);const u=this.Vy(t,s),c=u.width;if(c>=i)if(r.length>0&&this.og(r,n,h,o,a,l),r=[],e[0].$y()&&ql.bm(e[0].gg()))n=0,h=0,o=0,a=0,l=0;else{this.Sg(r,e);const t=this.Vy(r,s);n=t.width,h=t.height,o=t.fontBoundingBoxAscent,a=t.fontBoundingBoxDescent,l=t.Ky}else r=t,n=c,h=u.height,o=u.fontBoundingBoxAscent,a=u.fontBoundingBoxDescent,l=u.Ky}r.length>0&&this.og(r,n,h,o,a,l),this.vg(s,e)}vg(t,s){for(const i of this.By){const e=i.xg();if(!e.length)continue;let r=e.at(-1);if(r.$y()){const n=r.gg(),h=n.slice(0);if(Yl(h),0===h.length)i.Ig(-r.Yy()),e.pop();else if(h.length<n.length){r.Cg(h);const s=t(r).width,e=r.Yy()-s;r.tg(s),i.Ig(-e)}0!==s&&e.length>0&&(r=e.at(-1),r.Ig(s),i.Ig(s))}}}_u(){ql.wh(this.By)}Gg(){return this.By.reduce((t,s)=>Math.max(t,s.Yy()),0)}Ng(){return this.By.reduce((t,s)=>t+s.eg(),0)}}}self.Cs.zy.ag=class{constructor(t){this._y=t.lg||[],this._g=t.width||-1,this.Eg=t.height||-1,this.Dg=t.fontBoundingBoxAscent||-1,this.Ag=t.fontBoundingBoxDescent||-1,this.Lg=t.Ky||-1,this.Og=0,this.Rg=0}lg(){return this._y.values()}*kg(){const t=this._y;for(let s=t.length-1;s>=0;--s)yield t[s]}xg(){return this._y}Ig(t){this._g+=t}Yy(){return this._g}eg(){return this.Eg}jg(){return this.Dg}ng(){return this.Ag}hg(){return this.Lg}Pg(t){this.Og=t}Fg(){return this.Og}zg(t){this.Rg=t}Bg(){return this.Rg}};self.Cs.Ug=class{constructor(t){this.Wg=t.Ay||[],this._g=t.width||-1,this.Eg=t.height||-1,this.Dg=t.fontBoundingBoxAscent||-1,this.Ag=t.fontBoundingBoxDescent||-1,this.Lg=t.Ky||-1,this.Og=0,this.Rg=0}$y(){return!1}sg(){return!1}yg(){return this.Wg}Qg(t){const s=this.Wg;for(let i=s.length-1;i>=0;--i){const e=s[i];if(e.tag===t)return e}return null}Jg(t){return!!this.Qg(t)}Vg(){const t=new Map;for(const s of this.Wg)t.set(s.tag,s.Ly);return t}Ig(t){this._g+=t}tg(t){this._g=t}Yy(){return this._g}Hy(t){this.Eg=t}eg(){return this.Eg}qy(t){this.Dg=t}rg(){return this.Dg}Zy(t){this.Ag=t}ng(){return this.Ag}Xy(t){this.Lg=t}hg(){return this.Lg}Pg(t){this.Og=t}Fg(){return this.Og}zg(t){this.Rg=t}Bg(){return this.Rg}};{const Xl=self.Cs;Xl.ky=class extends Xl.Ug{constructor(t){super(t),this.Yg=t.jy}$y(){return!0}Tg(t){Xl.Lr(this.Yg,t),this._g=-1,this.Eg=-1,this.Dg=-1,this.Ag=-1,this.Lg=-1}Mg(t){this.Yg.push(t)}bg(){return Xl.Jr(Xl.ky,{jy:this.Yg.slice(0),Ay:this.Wg,width:this._g,height:this.Eg,fontBoundingBoxAscent:this.Dg,fontBoundingBoxDescent:this.Ag,Ky:this.Lg})}gg(){return this.Yg}Cg(t){this.Yg=t}ug(){return this.Yg.length}Eu(){return 0===this.Yg.length}cg(){return this.Yg.includes("\n")}}}{const Kl=self.Cs;Kl.Ry=class extends Kl.Ug{constructor(t){super(t),this.Hg=t.icon}sg(){return!0}qg(){return this.Hg}bg(){return Kl.Jr(Kl.Ry,{icon:this.Hg,Ay:this.Wg,width:this._g,height:this.Eg,fontBoundingBoxAscent:this.Dg,fontBoundingBoxDescent:this.Ag,Ky:this.Lg})}Zg(t){if(!t)return null;let s=Number(this.Hg);return String(s)===this.Hg?(s=Math.floor(s),t.Xg(s)):t.Kg(this.Hg)}ig(t){const s=this.Zg(t);this._g=s?this.Eg*s.Yy()/s.eg():0}$g(t){const s=this.Zg(t);return s?s.$g():null}ug(){return 1}}}{const $l=self.Cs;$l.tM=class{constructor(t){this.sM=new Map,this.iM=t.eM,this.rM=t.nM}Vr(){for(const t of this.sM.values())t.Vr();this.sM.clear()}hM(t){let s=this.sM.get(t);if(s)return s;const i=this.iM(t);return s=$l.Jr($l.oM,this,{source:t,aM:i}),this.sM.set(t,s),s}lM(t){return this.sM.has(t)}uM(t){const s=this.sM.get(t);s&&s.Vr(),this.sM.delete(t)}async cM(t){return await this.rM(t)}}}{const tu=self.Cs;tu.oM=class{constructor(t,s){this.fM=t,this.dM=s.source,this.pM=[],this.mM=new Map,this.yM=!1,this.gM=!1,this.MM=null;const i=s.aM.wM;for(let t=0,s=i.length;t<s;++t){const s=i[t],e=tu.Jr(tu.bM,this,{index:t,tag:s.tag,source:s.source,width:s.width,height:s.height});this.pM.push(e),s.tag&&this.mM.set(s.tag.toLowerCase(),e)}}Vr(){for(const t of this.pM)t.Vr();tu.wh(this.pM),this.mM.clear(),this.fM=null,this.dM=null}SM(){return this.yM}TM(){return this.gM}vM(){return this.MM||(this.MM=this.xM()),this.MM}async xM(){if(this.yM)return;this.yM=!0,this.gM=!0;const t=await this.fM.cM(this.dM);if(!this.fM)return;const s=t.wM;for(let t=0,i=Math.min(s.length,this.pM.length);t<i;++t){const i=s[t].IM;this.pM[t].CM(i)}this.gM=!1}Xg(t){return(t=Math.floor(t))<0||t>=this.pM.length?null:this.pM[t]}Kg(t){return this.mM.get(t.toLowerCase())||null}}}self.Cs.bM=class{constructor(t,s){this.GM=t,this.dM=s.source||null,this.NM=s.index,this._M=s.tag,this._g=s.width,this.Eg=s.height,this.EM=null}Vr(){this._g=0,this.Eg=0,this.GM=null}DM(){return this.dM}Yy(){return this._g}eg(){return this.Eg}CM(t){this.EM=t}$g(){return this.EM}};{let su=function(t,s,i,e){const r=cu;hu.A(lu,i,s),hu.A(uu,t,s),hu.It(r,lu,uu),hu.normalize(r,r),e.set(r[0],r[1],r[2],hu.xt(t,r))},iu=function(t,s,i,e,r,n,h){const o=h.x,a=h.y,l=h.z,u=h.w,c=h.AM,f=h.LM,d=h.OM,p=1-c,m=1-f,y=1-d;return o*t*c+o*e*p+a*s*f+a*r*m+l*i*d+l*n*y>=u||o*e*c+o*t*p+a*r*f+a*s*m+l*n*d+l*i*y>u},eu=function(t,s,i,e){return e.x*t+e.y*s+e.z*i>=e.w};0;const ru=self.Cs,nu=self.hs,hu=nu.gs,ou=nu.Ms,au=nu.fs,lu=hu.create(),uu=hu.create(),cu=hu.create(),fu=ou.create(),du=au.create(),pu=hu.create(),mu=hu.create(),yu=hu.create(),gu=hu.create(),Mu=hu.create(),wu=hu.create(),bu=hu.create(),Su=hu.create(),Tu=ou.M(0,0,1,1);ru.RM={kM(t,s,i,e,r,n,h){const o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],l=e[2]*t+e[6]*s+e[10]*i+e[14],u=e[3]*t+e[7]*s+e[11]*i+e[15];let c=r[0]*o+r[4]*a+r[8]*l+r[12]*u,f=r[1]*o+r[5]*a+r[9]*l+r[13]*u,d=r[2]*o+r[6]*a+r[10]*l+r[14]*u,p=r[3]*o+r[7]*a+r[11]*l+r[15]*u;return 0!==p&&(p=1/p,c*=p,f*=p,d*=p,h[0]=(.5*c+.5)*n[2]+n[0],h[1]=(.5*f+.5)*n[3]+n[1],h[2]=.5*(1+d),!0)},jM(t,s,i,e,r,n,h){const o=du,a=fu;return au.multiply(o,r,e),null!==au.T(o,o)&&(a[0]=(t-n[0])/n[2]*2-1,a[1]=(s-n[1])/n[3]*2-1,a[2]=2*i-1,a[3]=1,ou.Et(a,a,o),0!==a[3]&&(a[3]=1/a[3],h[0]=a[0]*a[3],h[1]=a[1]*a[3],h[2]=a[2]*a[3],!0))},PM(t,s,i,e,r,n,h){const o=lu,a=uu;if(!ru.RM.jM(t,s,0,e,r,n,o))return!1;if(!ru.RM.jM(t,s,1,e,r,n,a))return!1;const l=uu;hu.A(l,a,o);const u=cu;hu.set(u,0,0,1);const c=-i,f=hu.xt(u,l);let d=0;if(0===f){if(0!==hu.xt(u,o)+c)return!1}else if(d=-(hu.xt(o,u)+c)/f,d<0)return!1;return hu.wt(h,o,l,d),!0}};class vu{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.AM=NaN,this.LM=NaN,this.OM=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.AM=t>0?1:0,this.LM=s>0?1:0,this.OM=i>0?1:0}}ru.RM.FM=class{constructor(){this.zM=new vu,this.BM=new vu,this.UM=new vu,this.WM=new vu,this.QM=new vu,this.JM=new vu}VM(t,s){const i=Tu;ru.RM.jM(0,1,0,t,s,i,pu),ru.RM.jM(1,1,0,t,s,i,mu),ru.RM.jM(0,0,0,t,s,i,yu),ru.RM.jM(1,0,0,t,s,i,gu),ru.RM.jM(0,1,1,t,s,i,Mu),ru.RM.jM(1,1,1,t,s,i,wu),ru.RM.jM(0,0,1,t,s,i,bu),ru.RM.jM(1,0,1,t,s,i,Su),su(yu,pu,Mu,this.zM),su(pu,mu,wu,this.BM),su(mu,gu,Su,this.UM),su(gu,yu,bu,this.WM),su(bu,Mu,wu,this.JM),su(gu,mu,pu,this.QM)}YM(t,s,i,e,r,n){return iu(t,s,i,e,r,n,this.zM)&&iu(t,s,i,e,r,n,this.BM)&&iu(t,s,i,e,r,n,this.UM)&&iu(t,s,i,e,r,n,this.WM)&&iu(t,s,i,e,r,n,this.QM)&&iu(t,s,i,e,r,n,this.JM)}HM(t,s,i){return!eu(t,s,i,this.QM)}}}{const xu=self.Cs,Iu=self.hs,Cu=Iu.gs,Gu=Iu.Ms,Nu=Iu.fs,_u=Nu.create(),Eu=Cu.M(0,0,0),Du=Cu.M(0,0,0),Au=Cu.M(0,0,0),Lu=Cu.M(0,1,0),Ou=(Gu.M(0,0,0,0),new xu.Nl),Ru=new xu.Rect,ku=new xu.Nl(0,0,1,0,1,1,0,1),ju={qM:1,ZM:1e4},Pu=Nu.M(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);xu.RM.XM=class{constructor(t){t=Object.assign({},ju,t),this._g=0,this.Eg=0,this.KM=xu.$r(45),this.$M=Math.tan(this.KM/2),this.tw=Nu.create(),this.sw=Nu.create(),this.iw=!1,this.ew=t.qM,this.rw=t.ZM,this.hw=[],this.ow=new Map,this.aw=null,this.lw=null,this.uw=null,this.cw=null,this.fw=null,this.dw=null,this.pw=null,this.mw=null,this.yw=null,this.gw=null,this.Mw=null,this.ww=null,this.bw=new Map,this.Sw=null,this.Tw=[],this.xw=new Map,this.Iw=0,this.Cw=0,this.Gw=1,this.Nw=[this.Gw],this._w=1,this.Ew=[this._w],this.Dw=.5,this.Aw=[this.Dw],this.Lw=0,this.Ow=!0,this.Rw=!1}kw(){this.Iw=0,this.Cw=0,this.aw=null,this.lw=null,this.uw=null,this.cw=null,this.fw=null,this.dw=null,this.pw=null,this.mw=null,this.yw=null,this.gw=null,this.Mw=null,this.ww=null,this.jw()}Pw(){this.kw(),this.Sw=null}Fw(){for(const t of this.hw)t.Vr();this.kw()}Yy(){return this._g}eg(){return this.Eg}zw(t){return this.Bw()?100:t/(2*this.Uw())}Ww(t){return this.Bw()?t/(2*this.Uw())/this.zw(t):1}Qw(t){this.ew=t}Jw(){return this.ew}Vw(t){this.rw=t}Yw(){return this.rw}Hw(t){this.KM=t,this.$M=Math.tan(this.KM/2)}qw(){return this.KM}Uw(){return this.$M}Zw(){this.iw=!1}Xw(){this.iw=!0}Bw(){return!this.iw}Kw(){return this.iw}$w(t,s,i=.5,e=.5){const r=this.Jw(),n=this.Yw(),h=this.qw();if(.5===i&&.5===e)this.tb()?Nu.lt(t,h,s,r,n):Nu.perspective(t,h,s,r,n);else{const h=2*(i=1-i)-2,o=2*i,a=2*e-2,l=2*e,u=this.Uw()*r,c=u*s;Nu.ht(t,h*c,o*c,a*u,l*u,r,n),this.tb()&&Nu.mul(t,Pu,t)}}sb(t,s,i,e=1){const r=self.devicePixelRatio,n=2*this.zw(i)*r*this.Uw()/i,h=s*n/(2*r*e),o=i*n/(2*r*e),a=-h,l=h,u=-o,c=o;this.tb()?Nu.dt(t,a,l,u,c,this.Jw(),this.Yw()):Nu.ft(t,a,l,u,c,this.Jw(),this.Yw())}ib(t,s,i,e,r,n=1){let h=1;this.Bw()&&(h=200*this.Uw()/r);const o=Au;Cu.set(o,h,-h,1);const a=Eu,l=Du;Cu.multiply(a,s,o),Cu.multiply(l,i,o),Nu.yt(t,a,l,e||Lu),o[2]=n,Nu.scale(t,t,o)}eb(t,s,i,e,r,n,h,o){return Cu.set(Eu,t,s,i),Cu.set(Du,e,r,n),this.ib(_u,Eu,Du,Lu,h,o),_u}rb(t){this.hw.push(t),this.ow.set(t._c(),t)}nb(t){const s=this.hw.indexOf(t);-1!==s&&this.hw.splice(s,1),this.ow.delete(t._c())}jw(){xu.wh(this.hw),this.ow.clear()}hb(t){return this.ow.get(t)||null}ob(){return this.aw}ab(){this.lb(this.aw)}ub(){return this.lw}cb(){this.lb(this.lw)}fb(){this.lb(this.uw)}pb(){this.lb(this.cw)}mb(){this.lb(this.fw)}yb(){this.lb(this.dw)}gb(){this.lb(this.pw)}Mb(){this.lb(this.mw)}wb(){this.lb(this.yw)}bb(){this.lb(this.gw)}Sb(){this.lb(this.Mw)}Tb(){this.lb(this.ww)}xb(t){this.Sw=t}Ib(){return this.Sw}Cb(t,s,i,e,r,n){const h=xu.RM.Nb.Gb(t,s,i,e,r,n);let o=this.bw.get(h);return o||(o=xu.Jr(xu.RM.Nb,this,t,s,i,e,r,n),this.bw.set(h,o)),o._b(),o}Eb(t){t.Db(),0===t.Ab()&&(this.Sw===t&&(this.Sw=null),this.bw.delete(t.Lb()),t.Vr())}Ob(t){xu.wh(this.Tw),this.xw.clear();let s=0;for(const i of t){const t=i[0],e=i[1],r=i[2];this.Tw.push([e,r]),this.xw.set(t,{number:s,Rb:e,kb:r}),s++}}jb(t){return this.Tw[t]}Pb(t){return this.jb(t)[0]}Fb(t){return this.jb(t)[1]}zb(t){const s=this.xw.get(t);if(void 0===s)throw new Error("invalid blend name");return s}Bb(t){const s=this.xw.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}Ub(t){this.Iw=t}Wb(){return this.Iw}Qb(t){this.Cw=t,this.Sw=null}Jb(){return this.Cw}ag(t,s,i,e){const r=xu.hn(t,s,i,e),n=Math.sin(r),h=Math.cos(r),o=.5*this.Gw,a=n*o,l=h*o,u=this._w;2===u?this.Vb(t,s,0,i,e,0,a,l):1===u?this.Yb(t,s,0,i,e,0,a,l):this.Hb(t,s,0,i,e,0,a,l)}qb(t,s,i,e,r,n){const h=xu.hn(t,s,e,r),o=Math.sin(h),a=Math.cos(h),l=.5*this.Gw,u=o*l,c=a*l,f=this._w;2===f?this.Vb(t,s,i,e,r,n,u,c):1===f?this.Yb(t,s,i,e,r,n,u,c):this.Hb(t,s,i,e,r,n,u,c)}Vb(t,s,i,e,r,n,h,o){const a=this.Dw,l=t+a-o,u=s+a-h,c=e+a+o,f=r+a+h,d=2*o,p=2*h,m=l+h,y=u-o,g=l-h+d,M=u+o+p,w=c+h,b=f-o,S=c-h-d,T=f+o-p;this.Zb(m,y,i,w,b,n,S,T,n,g,M,i,ku)}Yb(t,s,i,e,r,n,h,o){const a=this.Dw,l=t+a-o,u=s+a-h,c=e+a+o,f=r+a+h,d=l+h,p=u-o,m=l-h,y=u+o,g=c+h,M=f-o,w=c-h,b=f+o;this.Zb(d,p,i,g,M,n,w,b,n,m,y,i,ku)}Hb(t,s,i,e,r,n,h,o){const a=this.Dw,l=t+a,u=s+a,c=e+a,f=r+a,d=l+h,p=u-o,m=l-h,y=u+o,g=c+h,M=f-o,w=c-h,b=f+o;this.Zb(d,p,i,g,M,n,w,b,n,m,y,i,ku)}Xb(t,s,i,e,r,n){const h=xu.hn(t,s,i,e),o=Math.sin(h),a=Math.cos(h),l=.5*this.Gw,u=o*l,c=a*l,f=this._w;2===f?this.Kb(t,s,i,e,u,c,r,n):1===f?this.$b(t,s,i,e,u,c,r,n):this.tS(t,s,i,e,u,c,r,n)}Kb(t,s,i,e,r,n,h,o){const a=this.Dw,l=t+a-n,u=s+a-r,c=i+a+n,f=e+a+r,d=2*n,p=2*r,m=l+r,y=u-n,g=l-r+d,M=u+n+p,w=c+r,b=f-n,S=c-r-d,T=f+n-p;Ou.set(m,y,w,b,S,T,g,M),Ru.set(h,0,o,0),this.sS(Ou,Ru)}$b(t,s,i,e,r,n,h,o){const a=this.Dw,l=t+a-n,u=s+a-r,c=i+a+n,f=e+a+r,d=l+r,p=u-n,m=l-r,y=u+n,g=c+r,M=f-n,w=c-r,b=f+n;Ou.set(d,p,g,M,w,b,m,y),Ru.set(h,0,o,0),this.sS(Ou,Ru)}tS(t,s,i,e,r,n,h,o){const a=this.Dw,l=t+a,u=s+a,c=i+a,f=e+a,d=l+r,p=u-n,m=l-r,y=u+n,g=c+r,M=f-n,w=c-r,b=f+n;Ou.set(d,p,g,M,w,b,m,y),Ru.set(h,0,o,0),this.sS(Ou,Ru)}iS(t,s,i,e){const r=.5*this.Gw,n=this._w;2===n?this.eS(t,s,i,e,r):1===n?this.rS(t,s,i,e,r):this.nS(t,s,i,e,r)}eS(t,s,i,e,r){this.Vb(t,s,0,i,s,0,0,r),this.Vb(i,s,0,i,e,0,r,0),this.Vb(i,e,0,t,e,0,0,-r),this.Vb(t,e,0,t,s,0,-r,0)}rS(t,s,i,e,r){this.Yb(t,s,0,i,s,0,0,r),this.Yb(i,s,0,i,e,0,r,0),this.Yb(i,e,0,t,e,0,0,-r),this.Yb(t,e,0,t,s,0,-r,0)}nS(t,s,i,e,r){this.Hb(t,s,0,i,s,0,0,r),this.Hb(i,s,0,i,e,0,r,0),this.Hb(i,e,0,t,e,0,0,-r),this.Hb(t,e,0,t,s,0,-r,0)}hS(t){this.iS(t.Ka(),t.$a(),t.tl(),t.sl())}oS(t){const s=xu.hn(t.Pn(),t.Fn(),t.zn(),t.Bn()),i=Math.sin(s),e=Math.cos(s),r=.5*this.Gw,n=i*r,h=e*r,o=this._w;2===o?this.aS(t,n,h):1===o?this.lS(t,n,h):this.uS(t,n,h)}aS(t,s,i){this.Vb(t.Pn(),t.Fn(),0,t.zn(),t.Bn(),0,s,i),this.Vb(t.zn(),t.Bn(),0,t.Un(),t.Wn(),0,i,-s),this.Vb(t.Un(),t.Wn(),0,t.Qn(),t.Jn(),0,-s,-i),this.Vb(t.Qn(),t.Jn(),0,t.Pn(),t.Fn(),0,-i,s)}lS(t,s,i){this.Yb(t.Pn(),t.Fn(),0,t.zn(),t.Bn(),0,s,i),this.Yb(t.zn(),t.Bn(),0,t.Un(),t.Wn(),0,i,-s),this.Yb(t.Un(),t.Wn(),0,t.Qn(),t.Jn(),0,-s,-i),this.Yb(t.Qn(),t.Jn(),0,t.Pn(),t.Fn(),0,-i,s)}uS(t,s,i){this.Hb(t.Pn(),t.Fn(),0,t.zn(),t.Bn(),0,s,i),this.Hb(t.zn(),t.Bn(),0,t.Un(),t.Wn(),0,i,-s),this.Hb(t.Un(),t.Wn(),0,t.Qn(),t.Jn(),0,-s,-i),this.Hb(t.Qn(),t.Jn(),0,t.Pn(),t.Fn(),0,-i,s)}cS(t){this.Gw=t,this.Nw[this.Nw.length-1]=t}fS(){return this.Gw}dS(t){if(this.Nw.length>=100)throw new Error("pushed too many line widths - check push/pop pairs");this.Nw.push(t),this.Gw=t}pS(){if(this.Nw.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.Nw.pop(),this.Gw=this.Nw.at(-1)}mS(){this._w=0,this.Ew[this.Ew.length-1]=0}yS(){this._w=1,this.Ew[this.Ew.length-1]=0}gS(){this._w=2,this.Ew[this.Ew.length-1]=0}MS(t){if("butt"===t)this.wS();else if("square"===t)this.bS();else{if("zag"!==t)throw new Error("invalid line cap");this.SS()}}wS(){if(this.Ew.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.Ew.push(0),this._w=0}bS(){if(this.Ew.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.Ew.push(1),this._w=1}SS(){if(this.Ew.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.Ew.push(2),this._w=2}TS(){if(this.Ew.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.Ew.pop(),this._w=this.Ew.at(-1)}vS(t){this.Dw=t,this.Aw[this.Aw.length-1]=t}xS(){return this.Dw}IS(t){if(this.Aw.length>=100)throw new Error("pushed too many line offsets - check push/pop pairs");this.Aw.push(t),this.Dw=t}CS(){if(this.Aw.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.Aw.pop(),this.Dw=this.Aw.at(-1)}GS(){this.NS(0),this._S(0)}ES(t){const s=t.length/2;if(s<3)throw new Error("need at least 3 points");const i=s-2,e=i-1,r=t[0],n=t[1];for(let s=0;s<i;s+=2){const i=2*s,h=t[i+2],o=t[i+3],a=t[i+4],l=t[i+5];if(s===e)this.DS(r,n,h,o,a,l,a,l);else{const s=t[i+6],e=t[i+7];this.DS(r,n,h,o,a,l,s,e)}}}AS(){this.LS(!0),this.Lw++}OS(){return this.Lw}RS(){this.Lw++}kS(t){this.Ow=!!t}jS(){return this.Ow}PS(t){this.Rw=!!t}FS(){return this.Rw}zS(){return!1}tb(){return!1}BS(){}US(){}WS(){}QS(){return this.BS()+this.US()+this.WS()}JS(){return xu.Jr(xu.RM.VS,this)}}}self.Cs.RM.YS=class{constructor(t,s){this.qr=s.name,this.HS=t,this.qS=s.ZS||0,this.XS=s.KS||0,this.$S=!!s.tT,this.sT=!!s.iT,this.eT=!!s.rT,this.nT=!!s.hT,this.oT=!!s.animated,this.aT=!!s.lT,this.uT=!!s.cT,this.fT=!1,this.dT=this.$S||this.aT||0!==this.qS||0!==this.XS}Vr(){this.HS=null}pT(){return this.HS}_c(){return this.qr}mT(){return 0!==this.qS||0!==this.XS}yT(){return this.qS}gT(){return this.XS}MT(){return this.$S}wT(){return this.sT}bT(){return this.eT}ST(){return this.nT}TT(){return this.oT}vT(){return this.aT}xT(){return this.uT}IT(){return this.fT}CT(){return this.dT}GT(){return!1}};{const Fu=self.Cs;Fu.RM.Nb=class{constructor(t,s,i,e,r,n,h){this.HS=t,this.Qp=0,this.NT=null,this._T="",this.ET=i,this.DT=Fu.Jr(Fu.vo),this.DT.set(e),this.AT=r,this.LT=n,this.OT=h,"string"==typeof s?this._T=s:(this.NT=s,this._T=this.NT._c())}Vr(){if(this.Qp>0)throw new Error("releasing state group still in use");this.HS=null,this.NT=null,this._T=""}RT(){const t=this.HS;t.lb(this.NT),t.kT(this.ET),t.jT(this.DT),t.Qb(this.AT),t.NS(this.LT),t._S(this.OT),t.xb(this)}Lb(){return Fu.RM.Nb.Gb(this._T,this.ET,this.DT,this.AT,this.LT,this.OT)}_b(){++this.Qp}Db(){--this.Qp}Ab(){return this.Qp}PT(){this.NT=null}FT(t){if(this.NT=t.hb(this._T),!this.NT)throw new Error("failed to restore shader program")}static Gb(t,s,i,e,r,n){return("string"==typeof t?t:t._c())+","+s+","+i.jo()+","+i.Po()+","+i.Fo()+","+i.zo()+","+e+","+r+","+n}}}{let zu=function(t,s,i){const e=i.Pn(),r=i.Fn(),n=i.zn()-e,h=i.Bn()-r;return[e+n*t+(i.Qn()-e)*s,r+h*t+(i.Jn()-r)*s]};0;const Bu=globalThis.Cs;globalThis.assert;Bu.RM.zT=class{constructor(t,s,i){this.BT=t,this.UT=s,this.WT=i,this._a=NaN,this.Ea=NaN,this.AT=NaN,this.QT=NaN,this.JT=NaN,this._a=0,this.Ea=0,this.AT=0,this.QT=0,this.JT=0}VT(t,s,i,e){this._a=t,this.Ea=s,this.QT=i,this.JT=e}YT(){return this._a}HT(t){this._a!==t&&(this._a=t,this.BT.qT())}ZT(){return this.Ea}XT(t){this.Ea!==t&&(this.Ea=t,this.BT.qT())}KT(){return this.AT}$T(t){this.AT!==t&&(this.AT=Math.max(t,0),this.BT.qT())}tv(){return this.QT}sv(t){this.QT=t}ev(){return this.JT}rv(t){this.JT=t}nv(t,s,i){[this._a,this.Ea]=zu(t._a,t.Ea,s),this.AT=t.AT,this.QT=Bu.Ct(i.Ka(),i.tl(),t.QT),this.JT=Bu.Ct(i.$a(),i.sl(),t.JT)}hv(t,s,i){[this._a,this.Ea]=zu(t._a,t.Ea,s),this.AT=t.AT,[this.QT,this.JT]=zu(t.QT,t.JT,i)}ov(){return{x:this.YT(),y:this.ZT(),z:this.KT(),u:this.tv(),v:this.ev()}}av(t){this.HT(t.x),this.XT(t.y),t.hasOwnProperty("z")&&this.$T(t.z),this.sv(t.u),this.rv(t.v)}lv(){return this.BT}uv(){return this.UT}cv(){return this.WT}},Bu.RM.fv=class{constructor(t,s,i){if(t<2||s<2)throw new Error("invalid mesh size");this.dv=t,this.pv=s,this.mv=i||null,this.yv=[],this.gv=0,this.Mv=0,this.wv=1,this.bv=1,this.Sv=0,this.Tv=!1,this.vv=[],this.xv=0,this.Iv=!0;const e=t-1,r=s-1;for(let i=0;i<s;++i){const s=[];for(let n=0;n<t;++n){const t=Bu.Jr(Bu.RM.zT,this,n,i),h=n/e,o=i/r;t.VT(h,o,h,o),s.push(t)}this.yv.push(s)}}Vr(){Bu.wh(this.yv),Bu.wh(this.vv)}Cv(){return this.dv}Gv(){return this.pv}Nv(){return this.mv}_v(){return this.yv}qT(){this.Tv=!0,this.Iv=!0}Ev(){if(!this.Tv)return;let t=1/0,s=1/0,i=-1/0,e=-1/0,r=0;for(const n of this.yv)for(const h of n){const n=h.YT(),o=h.ZT();t=Math.min(t,n),s=Math.min(s,o),i=Math.max(i,n),e=Math.max(e,o),r=Math.max(r,h.KT())}this.gv=t,this.Mv=s,this.wv=i,this.bv=e,this.Sv=r,this.Tv=!1}Dv(){return this.Ev(),this.gv}Av(){return this.Ev(),this.Mv}Lv(){return this.Ev(),this.wv}Ov(){return this.Ev(),this.bv}Rv(){return this.Ev(),this.Sv}kv(){return this.Rv()>0}jv(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.dv||s<0||s>=this.pv?null:this.yv[s][t]}Pv(t,s,i){const e=i instanceof Bu.Rect;if(t.Cv()!==this.Cv()||t.Gv()!==this.Gv())throw new Error("source mesh wrong size");const r=t.yv,n=this.yv;for(let t=0,h=n.length;t<h;++t){const h=r[t],o=n[t];for(let t=0,r=o.length;t<r;++t){const r=h[t],n=o[t];e?n.nv(r,s,i):n.hv(r,s,i)}}this.Iv=!0}Fv(t){if(!this.Iv&&this.xv===t)return;const s=this.dv,i=this.pv,e=this.vv,r=Math.floor(65535/s)-1;if(r<=0)throw new Error("mesh too large");const n=Math.ceil((i-1)/r);n<e.length&&(e.length=n);let h=0;for(let o=0;o<n;++o){const n=Math.min(r,i-h-1),a=(n+1)*s,l=3*a,u=2*a,c=(s-1)*n*6;if(o===e.length)e.push({zv:new Float32Array(l),Bv:new Float32Array(u),Uv:new Uint16Array(c)});else{const t=e[o];t.zv.length!==l&&(t.zv=new Float32Array(l)),t.Bv.length!==u&&(t.Bv=new Float32Array(u)),t.Uv.length!==c&&(t.Uv=new Uint16Array(c))}const{zv:f,Bv:d,Uv:p}=e[o];this.Wv(h,n,t,f,d,p),h+=r}this.xv=t,this.Iv=!1}Wv(t,s,i,e,r,n){const h=this.yv,o=this.dv;let a=0,l=0,u=0;for(let c=t,f=t+s+1;c<f;++c){const s=h[c],d=c+1,p=c-t,m=p*o,y=(p+1)*o;for(let t=0,h=s.length;t<h;++t){const o=s[t],c=t+1;if(e[a++]=o.YT(),e[a++]=o.ZT(),e[a++]=o.KT()+i,r[l++]=o.tv(),r[l++]=o.ev(),c<h&&d<f){const s=t+m,i=c+m,e=c+y,r=t+y;n[u++]=s,n[u++]=i,n[u++]=e,n[u++]=s,n[u++]=e,n[u++]=r}}}}Qv(t,s){this.Fv(s);for(const{zv:s,Bv:i,Uv:e}of this.vv)t.Jv(s,i,e)}Vv(t,s){s||(s=(t,s,i)=>[t,s,i]);const i=this.yv;let e=i[0];for(let r=1,n=i.length;r<n;++r){const h=i[r];let o=e[0],a=h[0];for(let i=1,l=h.length;i<l;++i){const u=e[i],c=h[i],[f,d,p]=s(o.YT(),o.ZT(),o.KT()),[m,y,g]=s(u.YT(),u.ZT(),u.KT()),[M,w,b]=s(c.YT(),c.ZT(),c.KT()),[S,T,v]=s(a.YT(),a.ZT(),a.KT());t.qb(f,d,p,m,y,g),t.qb(f,d,p,M,w,b),t.qb(f,d,p,S,T,v),i===l-1&&t.qb(m,y,g,M,w,b),r===n-1&&t.qb(S,T,v,M,w,b),o=u,a=c}e=h}}Yv(t){const s=.001,i=.99999999,e=t.du(),r=[],n=this.Cv()-1,h=this.Gv()-1,o=1/n,a=1/h,l=n-1,u=h-1;let c=e[0],f=e[1],d=Bu.Xr(Math.floor(c*n),0,l),p=Bu.Xr(Math.floor(f*h),0,u),m=!0,y=0,g=0,M=0,w=-1;const b=()=>{c=Bu.Xr(Bu.Ct(c,y,M),0,1),f=Bu.Xr(Bu.Ct(f,g,M),0,1),r.push(c,f)};for(let t=0,S=e.length;t<S;t+=2){c=e[t],f=e[t+1],r.push(c,f),d=Bu.Xr(Math.floor(c*n),0,l),p=Bu.Xr(Math.floor(f*h),0,u);const T=(t+2)%S;for(y=e[T],g=e[T+1],w=-1;;){if(r.length>1e6)throw new Error("Too many mesh poly points");const t=d*o,e=p*a,n=(d+1)*o,h=(p+1)*a;if(m=Bu.qn(c,f,t,e,n,e,n,h),0!==w&&(M=Bu.Hn(c,f,y,g,t,e,n,h,-.001),M>=0&&M<=i))b(),m=!m,w=0;else if(p>0&&2!==w&&(M=Bu.Hn(c,f,y,g,t,e,n,e,s),M>=0&&M<=i))b(),p--,m=!1,w=4;else if(d<l&&3!==w&&(M=Bu.Hn(c,f,y,g,n,e,n,h,s),M>=0&&M<=i))b(),d++,m=!1,w=1;else if(d>0&&1!==w&&(M=Bu.Hn(c,f,y,g,t,e,t,h,s),M>=0&&M<=i))b(),d--,m=!0,w=3;else{if(!(p<u&&4!==w&&(M=Bu.Hn(c,f,y,g,t,h,n,h,s),M>=0&&M<=i)))break;b(),p++,m=!0,w=2}}}return Bu.Jr(Bu.au,r)}Hv(t,s){const i=this.qv(t);this.Zv(i),s.mu(i)}qv(t){const s=[],i=t.du();for(let t=0,e=i.length;t<e;t+=2){const e=i[t],r=i[t+1],[n,h]=this.Xv(e,r);s.push(n,h)}return s}Xv(t,s){const i=this.Cv()-1,e=this.Gv()-1,r=1/i,n=1/e,h=Bu.Xr(Math.floor(t*i),0,i-1),o=Bu.Xr(Math.floor(s*e),0,e-1),a=h*r,l=o*n,u=(h+1)*r,c=(o+1)*n,f=this.jv(h,o),d=this.jv(h+1,o+1),p=Bu.qn(t,s,a,l,u,l,u,c),m=p?a+r:a,y=p?l:l+n,g=this.jv(h+(p?1:0),o+(p?0:1)),[M,w,b]=Bu.Zn(t,s,a,l,m,y,u,c);return Bu.Xn(M,w,b,f.YT(),f.ZT(),f.KT(),g.YT(),g.ZT(),g.KT(),d.YT(),d.ZT(),d.KT())}Zv(t){const s=[],i=1e-7;let e=t[0],r=t[1],n=e-t.at(-2),h=r-t.at(-1);for(let o=0,a=t.length;o<a;o+=2){const l=(o+2)%a,u=t[l],c=t[l+1],f=u-e,d=c-r,p=Math.abs(f)<i&&Math.abs(n)<i&&Math.sign(d)===Math.sign(h),m=Math.abs(d)<i&&Math.abs(h)<i&&Math.sign(f)===Math.sign(n);(!p&&!m&&Math.abs(f/n-d/h)>.001||0==f&&0===d)&&s.push(e,r),e=u,r=c,n=f,h=d}s.length>=6&&s.length<t.length&&Bu.xh(t,s)}ov(){return{cols:this.Cv(),rows:this.Gv(),points:this.yv.map(t=>t.map(t=>t.ov()))}}av(t){const s=this.Cv(),i=this.Gv();if(t.cols!==s||t.rows!==i)throw new Error("mesh data wrong size");const e=t.points;for(let t=0;t<i;++t){const i=e[t];for(let e=0;e<s;++e)this.jv(e,t).av(i[e])}}}}{let Uu=function(t,s){let i,e,r,n;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,r=s.RGBA,n=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,r=s.RGB,n=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,r=s.RGBA,n=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,r=s.RGBA,n=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,r=s.RGB,n=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{Kv:i,$v:e,format:r,type:n}};0;const Wu=self.Cs,Qu=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),Ju=new Set(["nearest","bilinear","trilinear"]),Vu=new Set(["default","low","high"]),Yu=new Set(["clamp-to-edge","repeat","mirror-repeat"]),Hu={tx:"clamp-to-edge",sx:"clamp-to-edge",ix:"trilinear",nx:0,hx:"rgba8",ox:!0,lx:"default",ux:!0,mx:!1,width:-1,height:-1},qu={ux:!0,flipY:!1},Zu=new Set;Wu.RM.yx=class{constructor(t){this.HS=t,this.gx=null,this._g=0,this.Eg=0,this.Mx=!0,this.wx="clamp-to-edge",this.bx="clamp-to-edge",this.Sx="trilinear",this.Tx=0,this.vx="rgba8",this.xx=!1,this.Ix="default",this.Qp=0}Cx(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData||t instanceof ArrayBuffer))throw new Error("invalid texture source");if(s=Object.assign({},Hu,s),this.gx)throw new Error("already created texture");if(this.wx=s.tx,this.bx=s.sx,this.Sx=s.ix,this.Tx=s.nx,this.vx=s.hx,this.xx=!!s.ox&&this.HS.jS(),this.Ix=s.lx,!Yu.has(this.wx)||!Yu.has(this.bx))throw new Error("invalid wrap mode");if(!Ju.has(this.Sx))throw new Error("invalid sampling");if(!Qu.has(this.vx))throw new Error("invalid pixel format");if(!Vu.has(this.Ix))throw new Error("invalid mipmap quality");if(this.Mx=!0,t instanceof ArrayBuffer||null===t||s.mx){if(this._g=s.width,this.Eg=s.height,t instanceof ArrayBuffer&&t.byteLength!==this._g*this.Eg*4)throw new Error("ArrayBuffer wrong size")}else this._g=t.width,this.Eg=t.height;if(this._g<=0||this.Eg<=0)throw new Error("invalid texture data size");if(s.mx){const s=Wu.uo(this._g,this.Eg);s.getContext("2d").drawImage(t,0,0,this._g,this.Eg),t=s}const i=Wu.bn(this._g)&&Wu.bn(this.Eg),e=this.HS.Gx();if(this._g>e||this.Eg>e)throw new Error("texture data exceeds maximum texture size");const r=this.HS.Nx(),n=this.HS._x();this.gx=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.gx),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.ux),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1);const h=Uu(this.vx,r);if(this.HS.Ex()||i||!this.Dx())if(n>=2){let s;s=this.xx?Math.floor(Math.log2(Math.max(this._g,this.Eg))+1):1,r.texStorage2D(r.TEXTURE_2D,s,h.Kv,this._g,this.Eg),t instanceof ArrayBuffer?r.texSubImage2D(r.TEXTURE_2D,0,0,0,this._g,this.Eg,h.format,h.type,new Uint8Array(t)):null!==t&&r.texSubImage2D(r.TEXTURE_2D,0,0,0,h.format,h.type,t)}else t instanceof ArrayBuffer?r.texImage2D(r.TEXTURE_2D,0,h.$v,this._g,this.Eg,0,h.format,h.type,new Uint8Array(t)):null===t?r.texImage2D(r.TEXTURE_2D,0,h.$v,this._g,this.Eg,0,h.format,h.type,null):r.texImage2D(r.TEXTURE_2D,0,h.$v,h.format,h.type,t);else{if(null===t)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if(t instanceof ArrayBuffer&&(t=new ImageData(new Uint8ClampedArray(t),this._g,this.Eg)),t instanceof ImageData){const s=Wu.uo(this._g,this.Eg);s.getContext("2d").putImageData(t,0,0),t=s}const s=Wu.uo(Wu.Sn(this._g),Wu.Sn(this.Eg)),i=s.getContext("2d");i.imageSmoothingEnabled="nearest"!==this.Sx,i.drawImage(t,0,0,this._g,this.Eg,0,0,s.width,s.height),r.texImage2D(r.TEXTURE_2D,0,h.$v,h.format,h.type,s)}null!==t&&this.Ax(r),r.bindTexture(r.TEXTURE_2D,null),this.HS.Lx(),this.Qp=1,Zu.add(this)}Ox(t,s,i){if(i=Object.assign({},Hu,i),this.gx)throw new Error("already created texture");if(this.wx=i.tx,this.bx=i.sx,this.Sx=i.ix,this.vx=i.hx,this.xx=!!i.ox&&this.HS.jS(),this.Ix=i.lx,!Yu.has(this.wx)||!Yu.has(this.bx))throw new Error("invalid wrap mode");if(!Ju.has(this.Sx))throw new Error("invalid sampling");if(!Qu.has(this.vx))throw new Error("invalid pixel format");if(!Vu.has(this.Ix))throw new Error("invalid mipmap quality");this.Mx=!1,this._g=Math.floor(t),this.Eg=Math.floor(s);const e=Wu.bn(this._g)&&Wu.bn(this.Eg),r=this.HS.Gx();if(this._g<=0||this.Eg<=0)throw new Error("invalid texture size");if(this._g>r||this.Eg>r)throw new Error("texture exceeds maximum texture size");if(!this.HS.Ex()&&this.Dx()&&!e)throw new Error("non-power-of-two tiled textures not supported");const n=this.HS.Nx(),h=this.HS._x();this.gx=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.gx),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.ux),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);const o=Uu(this.vx,n),a=h>=2?o.Kv:o.$v;n.texImage2D(n.TEXTURE_2D,0,a,this._g,this.Eg,0,o.format,o.type,null),this.Ax(n),n.bindTexture(n.TEXTURE_2D,null),this.HS.Lx(),this.Qp=1,Zu.add(this)}Rx(t){if("default"===this.Ix)return this.Mx?t.NICEST:t.FASTEST;if("low"===this.Ix)return t.FASTEST;if("high"===this.Ix)return t.NICEST;throw new Error("invalid mipmap quality")}Dx(){return"clamp-to-edge"!==this.wx||"clamp-to-edge"!==this.bx}kx(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}Ax(t){const s=Wu.bn(this._g)&&Wu.bn(this.Eg);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.kx(t,this.wx)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.kx(t,this.bx)),"nearest"===this.Sx)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.xx=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.HS.Ex())&&this.xx){t.hint(t.GENERATE_MIPMAP_HINT,this.Rx(t)),t.generateMipmap(t.TEXTURE_2D);const s="trilinear"===this.Sx&&!this.HS.FS();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,s?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.xx=!1;const i=this.HS.jx();i&&this.Tx>0&&"nearest"!==this.Sx&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.Tx,this.HS.Px()))}Fx(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.gx||this.Qp<=0)throw new Error("texture not created");if(this.Mx)throw new Error("cannot update static texture");s=Object.assign({},qu,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,r=this.HS._x(),n=this.HS.Nx();n.bindTexture(n.TEXTURE_2D,this.gx),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.ux),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!!s.flipY);const h=Uu(this.vx,n),o=r>=2?h.Kv:h.$v;try{if(this._g===i&&this.Eg===e){const s=Wu.bn(this._g)&&Wu.bn(this.Eg);n.texSubImage2D(n.TEXTURE_2D,0,0,0,h.format,h.type,t),(s||this.HS.Ex())&&this.xx&&(n.hint(n.GENERATE_MIPMAP_HINT,this.Rx(n)),n.generateMipmap(n.TEXTURE_2D))}else{this._g=i,this.Eg=e;const s=Wu.bn(this._g)&&Wu.bn(this.Eg);if(!this.HS.Ex()&&this.Dx()&&!s)throw new Error("non-power-of-two tiled textures not supported");n.texImage2D(n.TEXTURE_2D,0,o,h.format,h.type,t),(s||this.HS.Ex())&&this.xx&&(n.hint(n.GENERATE_MIPMAP_HINT,this.Rx(n)),n.generateMipmap(n.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}n.bindTexture(n.TEXTURE_2D,null),this.HS.Lx()}zx(){if(this.Qp>0)throw new Error("texture still has references");if(!this.gx)throw new Error("already deleted texture");Zu.delete(this),this.HS.Nx().deleteTexture(this.gx),this.gx=null}Bx(){return!!this.gx}Ux(){return this.gx}pT(){return this.HS}Wx(){this.Qp++}Qx(){if(this.Qp<=0)throw new Error("no more references");this.Qp--}Jx(){return this.Qp}Yy(){return this._g}eg(){return this.Eg}Vx(){return this.Mx}Yx(){let t=this._g*this.Eg;switch(this.vx){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.xx&&(t+=Math.floor(t/3)),t}static PT(){Zu.clear()}static Hx(){return Zu.values()}}}{const Xu=self.Cs,Ku=(self.assert,self.hs),$u=(Ku.gs,Ku.fs),tc=new Set(["nearest","bilinear","trilinear"]),sc={ix:"trilinear",alpha:!0,depth:!1,qx:!0,Zx:!0,Xx:0},ic=new Set;Xu.RM.Kx=class{constructor(t){this.HS=t,this.$x=null,this.tI=null,this.gx=null,this.sI=null,this._g=0,this.Eg=0,this.iI=!0,this.Sx="trilinear",this.eI=!0,this.rI=!1,this.nI=!0,this.hI=0,this.oI=$u.create(),this.aI=0,this.lI=0,this.uI=0}cI(t,s,i){i=Object.assign({},sc,i);const e=this.HS._x();if(this.gx||this.sI)throw new Error("already created render target");if(this.Sx=i.ix,this.eI=!!i.alpha,this.rI=!!i.depth,this.nI=!!i.qx,this.iI=!!i.Zx,this.hI=i.Xx,!tc.has(this.Sx))throw new Error("invalid sampling");if(this.hI>0&&(e<2||this.nI))throw new Error("invalid use of multisampling");if(e<2&&(this.nI=!0),this._g=t,this.Eg=s,this._g<=0||this.Eg<=0)throw new Error("invalid render target size");this.fI();const r=this.HS.Nx();if(this.$x=r.createFramebuffer(),this.rI&&(this.tI=r.createFramebuffer()),this.nI){this.gx=this.HS.dI(this._g,this.Eg,{ix:this.Sx,hx:this.eI?"rgba8":"rgb8",ox:!1});const t=this.gx.Ux();r.bindFramebuffer(r.FRAMEBUFFER,this.$x),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),this.rI&&(r.bindFramebuffer(r.FRAMEBUFFER,this.tI),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0))}else{this.sI=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,this.sI);const t=this.eI?r.RGBA8:r.RGB8;if(this.hI>0){const s=r.getInternalformatParameter(r.RENDERBUFFER,t,r.SAMPLES);if(s&&s[0]){const t=s[0];this.hI>t&&(this.hI=t)}else this.hI=0}0===this.hI?r.renderbufferStorage(r.RENDERBUFFER,t,this._g,this.Eg):r.renderbufferStorageMultisample(r.RENDERBUFFER,this.hI,t,this._g,this.Eg),r.bindFramebuffer(r.FRAMEBUFFER,this.$x),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,this.sI),this.rI&&(r.bindFramebuffer(r.FRAMEBUFFER,this.tI),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,this.sI)),r.bindRenderbuffer(r.RENDERBUFFER,null)}const n=this.HS.pI();this.rI&&n&&(r.bindFramebuffer(r.FRAMEBUFFER,this.$x),this.HS.mI()?r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,n,0):r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,n)),r.bindFramebuffer(r.FRAMEBUFFER,null),ic.add(this)}yI(t,s){if(this._g===t&&this.Eg===s)return;this._g=t,this.Eg=s,this.fI();const i=this.HS.Nx();i.bindFramebuffer(i.FRAMEBUFFER,this.$x),this.gx?this.gx.Fx(new ImageData(this._g,this.Eg)):(i.bindRenderbuffer(i.RENDERBUFFER,this.sI),i.renderbufferStorage(i.RENDERBUFFER,this.eI?i.RGBA8:i.RGB8,this._g,this.Eg),i.bindRenderbuffer(i.RENDERBUFFER,null));const e=this.HS.pI();this.rI&&e&&(this.HS.mI()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}zx(){if(!this.gx&&!this.sI)throw new Error("already deleted render target");ic.delete(this);const t=this.HS.Nx();this.gx?(t.bindFramebuffer(t.FRAMEBUFFER,this.$x),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.rI&&(t.bindFramebuffer(t.FRAMEBUFFER,this.tI),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.HS.gI(this.gx),this.gx=null):this.sI&&(t.bindFramebuffer(t.FRAMEBUFFER,this.$x),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.rI&&(t.bindFramebuffer(t.FRAMEBUFFER,this.tI),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.sI),this.sI=null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.HS._x()>=2&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.$x),this.rI&&t.deleteFramebuffer(this.tI);const s=this.HS.MI();s.wI=null,s.bI=null,this.$x=null}fI(){this.HS.$w(this.oI,this._g/this.Eg),this.aI=this.HS.qw(),this.lI=this.HS.Jw(),this.uI=this.HS.Yw()}SI(){return this.$x}TI(){return this.tI}pT(){return this.HS}vI(){return this.gx}xI(){return this.HS.qw()===this.aI&&this.HS.Jw()===this.lI&&this.HS.Yw()===this.uI||this.fI(),this.oI}II(){return"nearest"!==this.Sx}CI(){return this.eI}GI(){return this.nI}NI(){return this.rI}Yy(){return this._g}eg(){return this.Eg}_I(){return this.iI}EI(){return this.hI}DI(){const t={ix:this.Sx,alpha:this.eI,qx:this.nI};return this.iI||(t.width=this._g,t.height=this.Eg),t}AI(t){return"nearest"!==(t=Object.assign({},sc,t)).ix===this.II()&&!!t.alpha===this.CI()&&!!t.depth===this.NI()&&!(this.HS._x()>=2&&!!t.qx!==this.GI())&&("number"==typeof t.width||"number"==typeof t.height?!this._I()&&this.Yy()===Math.floor(t.width)&&this.eg()===Math.floor(t.height):this._I())}LI(){return this.gx?this.gx.Ux():null}Yx(){return this.gx?this.gx.Yx():this._g*this.Eg*(this.eI?4:3)}static async OI(t,s){const i=await t.RI(s,!0);return await Xu.do(i)}static PT(){ic.clear()}static kI(){return ic.values()}static jI(t,s){for(const i of ic)i._I()&&i.yI(t,s)}}}{const ec=self.Cs,rc=self.hs,nc=(rc.gs,rc.fs,new Set(["aPos","aTex","aColor","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]));ec.RM.FI=class extends ec.RM.YS{static async zI(t,s){const i=t.Nx(),e=s.src,r=s.BI,n=s.name,h=i.createShader(i.FRAGMENT_SHADER);i.shaderSource(h,e),i.compileShader(h);const o=i.createShader(i.VERTEX_SHADER);i.shaderSource(o,r),i.compileShader(o);const a=i.createProgram();i.attachShader(a,h),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aColor"),i.bindAttribLocation(a,3,"aPoints"),i.linkProgram(a);const l=t.UI();if(l?await t.WI(()=>i.getProgramParameter(a,l.COMPLETION_STATUS_KHR)):await ec.dh(5),!i.getShaderParameter(h,i.COMPILE_STATUS)){const t=i.getShaderInfoLog(h);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+t)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const t=i.getShaderInfoLog(o);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+t)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const t=i.getProgramInfoLog(a);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+t)}const u=ec.Tm(i.getProgramInfoLog(a)||"").trim();return u&&!ec.wm(u)&&console.info(`[WebGL] Shader program '${n}' compilation log: `,u),i.deleteShader(h),i.deleteShader(o),a}static async QI(t,s){const i=await ec.RM.FI.zI(t,s);return new ec.RM.FI(t,i,s)}constructor(t,s,i){super(t,i);const e=t.Nx(),r=t.MI();t.LS(),e.useProgram(s),this.JI=e,this.NT=s,this.VI="<default-device-transform>"===i.name;const n=e.getAttribLocation(s,"aPos"),h=e.getAttribLocation(s,"aTex"),o=e.getAttribLocation(s,"aColor");this.YI=e.getAttribLocation(s,"aPoints"),-1!==n&&(e.bindBuffer(e.ARRAY_BUFFER,t.HI),e.vertexAttribPointer(n,3,e.FLOAT,!1,0,0),e.enableVertexAttribArray(n)),-1!==h&&(e.bindBuffer(e.ARRAY_BUFFER,t.qI),e.vertexAttribPointer(h,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(h)),-1!==o&&(e.bindBuffer(e.ARRAY_BUFFER,t.ZI),e.vertexAttribPointer(o,4,t.XI()?e.HALF_FLOAT:e.FLOAT,!1,0,0),e.enableVertexAttribArray(o)),-1!==this.YI&&(e.bindBuffer(e.ARRAY_BUFFER,t.KI),e.vertexAttribPointer(this.YI,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.YI)),e.bindBuffer(e.ARRAY_BUFFER,null),this.$I=new ec.RM.tC(this,"matP","mat4"),this.sC=new ec.RM.tC(this,"matMV","mat4"),this.iC=new ec.RM.tC(this,"color","vec4"),this.eC=new ec.RM.tC(this,"samplerFront","sampler"),this.rC=new ec.RM.tC(this,"pointTexStart","vec2"),this.nC=new ec.RM.tC(this,"pointTexEnd","vec2"),this.hC=new ec.RM.tC(this,"zElevation","float"),this.oC=new ec.RM.tC(this,"tileSize","vec2"),this.aC=new ec.RM.tC(this,"tileSpacing","vec2"),this.lC=new ec.RM.tC(this,"color2_","vec4"),this.uC=new ec.RM.tC(this,"outlineThickness","float"),this.cC=new ec.RM.tC(this,"samplerBack","sampler"),this.fC=new ec.RM.tC(this,"samplerDepth","sampler"),this.dC=new ec.RM.tC(this,"destStart","vec2"),this.pC=new ec.RM.tC(this,"destEnd","vec2"),this.mC=new ec.RM.tC(this,"srcStart","vec2"),this.yC=new ec.RM.tC(this,"srcEnd","vec2"),this.gC=new ec.RM.tC(this,"srcOriginStart","vec2"),this.MC=new ec.RM.tC(this,"srcOriginEnd","vec2"),this.wC=new ec.RM.tC(this,"pixelSize","vec2"),this.bC=new ec.RM.tC(this,"seconds","float"),this.SC=new ec.RM.tC(this,"devicePixelRatio","float"),this.TC=new ec.RM.tC(this,"layerScale","float"),this.vC=new ec.RM.tC(this,"layerAngle","float"),this.xC=new ec.RM.tC(this,"layoutStart","vec2"),this.IC=new ec.RM.tC(this,"layoutEnd","vec2"),this.CC=new ec.RM.tC(this,"zNear","float"),this.GC=new ec.RM.tC(this,"zFar","float"),this.NC=!!(this.wC._C()||this.bC._C()||this.cC._C()||this.dC._C()||this.pC._C()||this.mC._C()||this.yC._C()||this.gC._C()||this.MC._C()||this.SC._C()||this.TC._C()||this.vC._C()||this.xC._C()||this.IC._C());const a=i.parameters||[];this.EC=[],this.fT=this.wC._C()||this.mC._C()||this.yC._C()||this.gC._C()||this.MC._C(),this.DC=!1,this.AC=!1,this.iC.LC(1,1,1,1),this.lC.LC(1,1,1,1),this.eC.OC(0),this.cC.OC(1),this.fC.OC(2),this.rC.RC(0,0),this.nC.RC(1,1),this.hC.kC(0),this.oC.RC(0,0),this.aC.RC(0,0),this.dC.RC(0,0),this.pC.RC(1,1),this.mC.RC(0,0),this.yC.RC(0,0),this.gC.RC(0,0),this.MC.RC(0,0),this.wC.RC(0,0),this.SC.kC(1),this.CC.kC(t.Jw()),this.GC.kC(t.Yw()),this.TC.kC(1),this.vC.kC(0),this.bC.kC(0),this.xC.RC(0,0),this.IC.RC(0,0),this.uC.kC(1);for(const t of a){const s=t[0],i=t[2],e=new ec.RM.tC(this,s,i);"color"===i?e.jC(0,0,0):e.kC(0),this.EC.push(e)}this.VI?this.PC(r.FC):(this.zC(r.FC,!0),this.BC(r.UC,!0));const l=r.WC;e.useProgram(l?l.NT:null)}Vr(){this.JI.deleteProgram(this.NT),this.NT=null,this.HS.nb(this),this.JI=null,super.Vr()}QC(){return this.JI}JC(){return this.NT}VC(){return this.EC.length}YC(t){return t<0||t>=this.EC.length?null:this.EC[t].HC()}qC(t){for(let s=0,i=t.length;s<i;++s)if(!this.EC[s].ZC(t[s]))return!1;return!0}XC(t){for(let s=0,i=t.length;s<i;++s)this.EC[s].KC(t[s])}$C(t,s,i,e,r,n,h,o,a,l){return!(this.cC._C()||this.wC._C()&&!this.wC.tG(r,n)||this.dC._C()&&!this.dC.tG(t.Ka(),t.$a())||this.pC._C()&&!this.pC.tG(t.tl(),t.sl())||this.SC._C()&&!this.SC.sG(h)||this.TC._C()&&!this.TC.sG(o)||this.vC._C()&&!this.vC.sG(a)||this.mC._C()&&!this.mC.tG(s.Ka(),s.$a())||this.yC._C()&&!this.yC.tG(s.tl(),s.sl())||this.gC._C()&&!this.gC.tG(i.Ka(),i.$a())||this.MC._C()&&!this.MC.tG(i.tl(),i.sl())||this.xC._C()&&!this.xC.tG(e.Ka(),e.$a())||this.IC._C()&&!this.IC.tG(e.$a(),e.sl())||this.bC._C()&&!this.bC.sG(l))}iG(t,s,i,e,r,n,h,o,a,l){this.cC._C()||(this.wC._C()&&this.wC.eG(r,n),this.dC._C()&&this.dC.eG(t.Ka(),t.$a()),this.pC._C()&&this.pC.eG(t.tl(),t.sl()),this.SC._C()&&this.SC.rG(h),this.TC._C()&&this.TC.rG(o),this.vC._C()&&this.vC.rG(a),this.mC._C()&&this.mC.eG(s.Ka(),s.$a()),this.yC._C()&&this.yC.eG(s.tl(),s.sl()),this.gC._C()&&this.gC.eG(i.Ka(),i.$a()),this.MC._C()&&this.MC.eG(i.tl(),i.sl()),this.xC._C()&&this.xC.eG(e.Ka(),e.$a()),this.IC._C()&&this.IC.eG(e.$a(),e.sl()),this.bC._C()&&this.bC.rG(l))}zC(t,s){this.DC&&!s||this.VI||(this.$I._C()&&this.$I.nG(t),this.DC=!0)}hG(){this.DC=!1}BC(t,s){this.AC&&!s||this.VI||(this.sC._C()&&this.sC.nG(t),this.AC=!0)}oG(){this.AC=!1}PC(t){if(!this.VI)throw new Error("not device transform shader");this.$I.nG(t);const s=this.HS,i=s.Yy()/2,e=s.eg()/2,r=s.eb(i,e,s.zw(s.eg()),i,e,0,s.eg());this.sC.nG(r)}aG(t){this.iC._C()&&this.iC.lG(t[0],t[1],t[2],t[3])}static uG(){return nc}static cG(t){return t?"\n#extension GL_EXT_conservative_depth : enable\nlayout (depth_greater) out highp float gl_FragDepth;\n\t":""}static fG(t){const s=t?"highp":"mediump";return["attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"attribute lowp vec4 aColor;","varying lowp vec4 vColor;","uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","\tvColor = aColor;","}"].join("\n")}static dG(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"in lowp vec4 aColor;","out lowp vec4 vColor;","uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","\tvColor = aColor;","}"].join("\n")}static pG(){return["varying mediump vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * vColor;","}"].join("\n")}static mG(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * vColor;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static yG(t){return["#version 300 es",ec.RM.FI.cG(t),"in mediump vec2 vTex;","out lowp vec4 outColor;","in lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * vColor;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static gG(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","}"].join("\n")}static MG(){return["#extension GL_EXT_frag_depth : enable","varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static wG(t){return["#version 300 es",ec.RM.FI.cG(t),"in highp vec2 vTex;","out lowp vec4 outColor;","in lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static bG(t,s,i,e){let r="";return t>=2?r="#version 300 es\n"+ec.RM.FI.cG(e):(s&&(r="#extension GL_EXT_frag_depth : enable\n"),i&&(r+="#extension GL_EXT_shader_texture_lod : enable\n",r+="#extension GL_OES_standard_derivatives : enable\n")),r+`\nprecision highp float;\n${t>=2?"in":"varying"} vec2 vTex;\n${t>=2?"out lowp vec4 outColor;":""}\n${t>=2?"in":"varying"} lowp vec4 vColor;\nuniform lowp sampler2D samplerFront;\nuniform vec2 pixelSize;\n\nuniform vec2 tileSize;\nuniform vec2 tileSpacing;\nuniform float outlineThickness;\n\nconst float PI = 3.1415926;\n\nlowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)\n{\n\treturn (a + b + (a - b) * cos(x * PI)) / 2.0;\n}\n\nvec3 randVec3(vec2 seed)\n{\n\treturn vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));\n}\n\nlowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)\n{\n\tvec2 posRandom = tileSize;\n\tfloat angleRandom = outlineThickness;\n\t\n\tvec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;\n\t\n\tfloat angle = angleRandom * rand.z * PI;\n\tfloat sin_a = sin(angle);\n\tfloat cos_a = cos(angle);\n\tfloat aspect = pixelSize.x / pixelSize.y;\n\n\tvec2 mid = tile + vec2(0.5, 0.5);\n\tvec2 dp = uv - mid;\n\tdp.x /= aspect;\n\tvec2 r = vec2(dp.x * cos_a - dp.y * sin_a,\n\t\t\t\t  dp.y * cos_a + dp.x * sin_a);\n\tr.x *= aspect;\n\n\tvec2 p = mid + r + (posRandom * rand.xy / 2.0);\n\t\n\t${t>=2?"return textureGrad(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&!i?"return texture2D(samplerFront, p);":""}\n}\n\nvoid main(void) {\n\t\n\t${t<2?"lowp vec4 outColor;":""}\n\t\n\tfloat blendMarginX = tileSpacing.x;\n\tfloat blendMarginY = tileSpacing.y;\n\t\n\tvec2 tile = floor(vTex);\n\tvec2 tex = fract(vTex);\n\tvec2 ddx = ${t>=2||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};\n\tvec2 ddy = ${t>=2||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};\n\t\n\tvec4 curTile = sampleTile(tile, vTex, ddx, ddy);\n\t\n\tbool inLeftMargin = (tex.x < blendMarginX);\n\tbool inRightMargin = (tex.x > 1.0 - blendMarginX);\n\tbool inTopMargin = (tex.y < blendMarginY);\n\tbool inBottomMargin = (tex.y > 1.0 - blendMarginY);\n\t\n\tif (inLeftMargin)\n\t{\n\t\tlowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;\n\t\tlowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = leftMixedTile;\n\t\t}\n\t}\n\telse if (inRightMargin)\n\t{\n\t\tlowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);\n\t\tlowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = rightMixedTile;\n\t\t}\n\t}\n\telse if (inTopMargin)\n\t{\n\t\tlowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t}\n\telse if (inBottomMargin)\n\t{\n\t\tlowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t}\n\telse\n\t{\n\t\toutColor = curTile;\n\t}\n\t\n\toutColor *= vColor;\n\t${t<2?"gl_FragColor = outColor;":""}\n\t${t>=2?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n\t${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n}\n`}static SG(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static TG(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static vG(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static xG(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static IG(t){return["#version 300 es",ec.RM.FI.cG(t),"uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static CG(){return["varying lowp vec4 vColor;","void main(void) {","\tgl_FragColor = vColor;","}"].join("\n")}static GG(){return["precision lowp float;","varying mediump vec2 vTex;","varying vec4 vColor;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(vColor.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(vColor.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static NG(){return["precision lowp float;","varying highp vec2 vTex;","varying vec4 vColor;","void main(void) {","\thighp float grad = vTex.x / (1.0 - vTex.y);","\tgl_FragColor = vColor * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);","}"].join("\n")}static _G(){return["varying mediump vec2 vTex;","varying lowp vec4 vColor;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = vColor * f;","}"].join("\n")}static EG(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = vColor * f;","}"].join("\n")}static DG(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp float innerF = step(distSq, 0.25);","\thighp vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = vColor * innerF * outerF;","}"].join("\n")}static AG(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 innerEdge = halfNorm - pixelSize * norm;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = vColor * f;","}"].join("\n")}static LG(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 pxNorm = pixelSize * norm;","\thighp vec2 innerEdge1 = halfNorm - pxNorm;","\thighp vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\thighp float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\thighp vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\thighp vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\thighp vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\thighp vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\thighp float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = vColor * innerF * outerF;","}"].join("\n")}}}{const hc=self.Cs,oc=self.hs.fs,ac=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);hc.RM.tC=class{constructor(t,s,i){if(!ac.has(i))throw new Error("invalid uniform type");this.mv=t,this.JI=this.mv.QC(),this.qr=s,this.Vc=i,this.OG="color"===this.Vc,this.kG=this.JI.getUniformLocation(this.mv.JC(),s),this.jG=!!this.kG;const e=ac.get(i);this.PG=new Float32Array(e),this.FG=new Float32Array(e)}Vr(){this.mv=null,this.JI=null,this.kG=null}_C(){return this.jG}HC(){return this.Vc}zG(){return this.OG}kC(t){this._C()&&(this.PG[0]=t,this.FG.set(this.PG),this.JI.uniform1f(this.kG,t))}OC(t){this._C()&&(this.PG[0]=t,this.FG.set(this.PG),this.JI.uniform1i(this.kG,t))}RC(t,s){this._C()&&(this.PG[0]=t,this.PG[1]=s,this.FG.set(this.PG),this.JI.uniform2f(this.kG,t,s))}jC(t,s,i){this._C()&&(this.PG[0]=t,this.PG[1]=s,this.PG[2]=i,this.FG.set(this.PG),this.JI.uniform3f(this.kG,t,s,i))}LC(t,s,i,e){this._C()&&(this.PG[0]=t,this.PG[1]=s,this.PG[2]=i,this.PG[3]=e,this.FG.set(this.PG),this.JI.uniform4f(this.kG,t,s,i,e))}BG(t){t=Math.fround(t);const s=this.PG;s[0]!==t&&(s[0]=t,this.JI.uniform1f(this.kG,t))}UG(t){const s=this.PG;s[0]!==t&&(s[0]=t,this.JI.uniform1i(this.kG,t))}WG(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.PG;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.JI.uniform2f(this.kG,t,s))}QG(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.PG;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.JI.uniform3f(this.kG,t,s,i))}lG(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const r=this.PG;r[0]===t&&r[1]===s&&r[2]===i&&r[3]===e||(r[0]=t,r[1]=s,r[2]=i,r[3]=e,this.JI.uniform4f(this.kG,t,s,i,e))}nG(t){const s=this.PG;oc.L(s,t)||(hc.gh(s,t,0),this.JI.uniformMatrix4fv(this.kG,!1,t))}ZC(t){const s=this.FG;return this.zG()?s[0]===Math.fround(t.jo())&&s[1]===Math.fround(t.Po())&&s[2]===Math.fround(t.Fo()):s[0]===Math.fround(t)}KC(t){const s=this.FG;this.zG()?(s[0]=t.jo(),s[1]=t.Po(),s[2]=t.Fo()):s[0]=t}sG(t){return this.FG[0]===Math.fround(t)}tG(t,s){const i=this.FG;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}rG(t){this.FG[0]=t}eG(t,s){const i=this.FG;i[0]=t,i[1]=s}}}{const lc=self.Cs,uc=self.hs,cc=(uc.Ms,uc.fs);lc.RM.JG=class{constructor(t){this.VG=t,this.UC=cc.create(),this.FC=cc.create(),this.wI=null,this.bI=null,this.YG=!1,this.WC=null,this.HG=new lc.Rect,this.clearColor=lc.Jr(lc.vo,0,0,0,0)}},lc.RM.qG=class{constructor(t){const s=new ArrayBuffer(96);this.Vc=0,this.ZG=t,this.JI=t.VG.Nx(),this.XG=0,this.KG=0,this.$G=null,this.tN=new Float32Array(s,0,16),this.sN=new Float32Array(s,64,4),this.iN=new Float32Array(s,80,4),this.eN=[]}rN(t,s){this.Vc=1,this.XG=t,this.KG=s}nN(){const t=this.JI;t.drawElements(t.TRIANGLES,this.KG,t.UNSIGNED_SHORT,this.XG)}hN(t){this.Vc=2,this.$G=t}oN(){const t=this.JI,s=this.$G;t.bindTexture(t.TEXTURE_2D,s?s.Ux():null)}aN(t){this.Vc=20,t.Uo(this.sN,0)}lN(){const t=this.sN,s=this.ZG.WC;s.lC._C()&&s.lC.lG(t[0],t[1],t[2],t[3])}uN(t,s){this.Vc=3,this.XG=t,this.KG=s}cN(){this.JI.blendFunc(this.XG,this.KG)}fN(t,s,i,e){this.Vc=4;const r=this.sN;r[0]=t,r[1]=s,r[2]=i,r[3]=e}dN(){const t=this.sN;this.JI.viewport(t[0],t[1],t[2],t[3])}pN(t){this.Vc=5,cc.m(this.tN,t)}mN(){const t=this.ZG,s=t.VG.hw,i=t.WC,e=this.tN;for(let t=0,r=s.length;t<r;++t){const r=s[t];r===i?r.zC(e,!0):r.hG()}cc.m(t.FC,e)}yN(t){this.Vc=6,cc.m(this.tN,t)}gN(){const t=this.ZG,s=t.VG.hw,i=t.WC,e=this.tN;for(let t=0,r=s.length;t<r;++t){const r=s[t];r===i?r.BC(e,!0):r.oG()}cc.m(t.UC,e)}MN(t){this.Vc=7,this.$G=t}wN(){const t=this.JI,s=this.$G,i=this.ZG;s?(i.wI=s.SI(),i.bI=s.TI(),i.YG&&i.bI?t.bindFramebuffer(t.FRAMEBUFFER,i.bI):t.bindFramebuffer(t.FRAMEBUFFER,i.wI)):(i.wI=null,i.bI=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}bN(t){this.Vc=8,t.Uo(this.tN,0)}SN(t,s,i,e){this.Vc=8;const r=this.tN;r[0]=t,r[1]=s,r[2]=i,r[3]=e}TN(){const t=this.JI,s=this.tN,i=this.ZG.clearColor,e=s[0],r=s[1],n=s[2],h=s[3];i.Yo(e,r,n,h)||(t.clearColor(e,r,n,h),i.No(e,r,n,h)),t.clear(t.COLOR_BUFFER_BIT)}vN(t){this.Vc=14,t.Uo(this.tN,0)}xN(){const t=this.tN;this.ZG.HG.set(t[0],t[1],t[2],t[3])}IN(t,s,i){this.Vc=9,this.XG=t,this.KG=1,this.tN[0]=s,i.Uo(this.sN,0)}CN(){const t=this.JI,s=this.ZG,i=s.VG.lw;t.useProgram(i.NT),i.zC(s.FC,!1),i.BC(s.UC,!1);const e=s.HG;i.rC._C()&&i.rC.WG(e.Ka(),e.$a()),i.nC._C()&&i.nC.WG(e.tl(),e.sl());const r=this.tN[0];if(i.hC._C()&&i.hC.BG(r),i.iC._C()){const t=this.sN;i.iC.lG(t[0],t[1],t[2],t[3])}t.drawArrays(t.POINTS,this.XG/4,this.KG),t.useProgram(s.WC.NT)}GN(t){this.Vc=10,this.$G=t}NN(){const t=this.JI,s=this.ZG,i=this.$G;s.WC=i,t.useProgram(i.NT),i.zC(s.FC,!1),i.BC(s.UC,!1)}_N(){this.Vc=11}EN(){const t=this.ZG.WC,s=this.JI,i=this.tN,e=this.sN,r=this.iN;if(t.cC._C()){const t=this.ZG.VG,i=this.$G;t.DN!==i&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,i?i.Ux():null),t.DN=i,s.activeTexture(s.TEXTURE0))}t.wC._C()&&t.wC.WG(i[0],i[1]),t.dC._C()&&t.dC.WG(i[2],i[3]),t.pC._C()&&t.pC.WG(i[4],i[5]),t.SC._C()&&t.SC.BG(this.KG),t.TC._C()&&t.TC.BG(i[6]),t.vC._C()&&t.vC.BG(i[7]),t.mC._C()&&t.mC.WG(i[12],i[13]),t.yC._C()&&t.yC.WG(i[14],i[15]),t.gC._C()&&t.gC.WG(r[0],r[1]),t.MC._C()&&t.MC.WG(r[2],r[3]),t.xC._C()&&t.xC.WG(e[0],e[1]),t.IC._C()&&t.IC.WG(e[2],e[3]),t.bC._C()&&t.bC.BG(this.XG)}AN(){this.Vc=12}LN(){const t=this.ZG.WC.EC,s=this.eN;for(let i=0,e=t.length;i<e;++i){const e=t[i],r=s[i];e.zG()?e.QG(r.jo(),r.Po(),r.Fo()):e.BG(r)}}ON(t){this.Vc=13,this.$G=t}RN(){const t=this.JI,s=this.$G,i=this.ZG.wI;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}kN(t,s,i){this.Vc=16;const e=this.tN,r=this.ZG.VG;e[0]=t.Yy(),e[1]=t.eg(),e[2]=s?s.Yy():r.Yy(),e[3]=s?s.eg():r.eg(),e[4]=t.II()?1:0,e[5]="stretch"===i;const n=this.eN;lc.wh(n),n.push(t.SI()),n.push(s?s.SI():null)}jN(){const t=this.tN,s=this.eN,i=this.JI,e=t[0],r=t[1],n=t[2],h=t[3],o=0!==t[4],a=0!==t[5],l=s[0],u=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,l),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,u),a)i.blitFramebuffer(0,0,e,r,0,0,n,h,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const t=Math.min(e,n),s=Math.min(r,h),o=Math.max(r-h,0),a=Math.max(h-r,0);i.blitFramebuffer(0,o,t,s+o,0,a,t,s+a,i.COLOR_BUFFER_BIT,i.NEAREST)}}PN(t){this.Vc=17,this.$G=t}FN(){this.$G.zN(),this.$G=null}BN(t){this.Vc=18,this.$G=t}UN(){this.$G.WN(),this.$G=null}QN(t,s,i){this.Vc=19;const e=this.tN;e[0]=t,e[1]=s,e[2]=i}JN(){const t=this.ZG.WC,s=this.tN;t.wC._C()&&t.wC.WG(s[0],s[1]),t.uC._C()&&t.uC.BG(s[2])}VN(t,s,i,e,r,n,h){this.Vc=15;const o=this.tN;t.Uo(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=r/i,o[8]=n/s,o[9]=h/i}YN(){const t=this.ZG.WC,s=this.tN;t.mC._C()&&t.mC.WG(s[0],s[1]),t.wC._C()&&t.wC.WG(s[4],s[5]),t.oC._C()&&t.oC.WG(s[6],s[7]),t.aC._C()&&t.aC.WG(s[8],s[9])}HN(t,s,i,e,r,n,h){this.Vc=28;const o=this.tN;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=r,o[5]=n,o[6]=h}qN(){const t=this.ZG.WC,s=this.tN;t.wC._C()&&t.wC.WG(s[0],s[1]),t.oC._C()&&t.oC.WG(s[2],s[3]),t.uC._C()&&t.uC.BG(s[4]),t.aC._C()&&t.aC.WG(s[5],s[6])}ZN(t){this.Vc=21,this.XG=t?1:0}XN(){const t=this.JI,s=0!==this.XG;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}KN(t){this.Vc=22,this.XG=t?1:0}$N(){const t=this.JI;0===this.XG?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}t_(t){this.Vc=23,this.XG=t?1:0}s_(){const t=this.JI,s=this.ZG,i=s.VG,e=0!==this.XG;s.YG=e,t.activeTexture(t.TEXTURE2),e?(s.bI&&t.bindFramebuffer(t.FRAMEBUFFER,s.bI),t.bindTexture(t.TEXTURE_2D,i.pI())):(t.bindTexture(t.TEXTURE_2D,null),s.bI&&t.bindFramebuffer(t.FRAMEBUFFER,s.wI)),t.activeTexture(t.TEXTURE0)}i_(){this.Vc=24}e_(){const t=this.JI;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}r_(){this.Vc=25}n_(){const t=this.JI;t.enable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}h_(){this.Vc=26}o_(){const t=this.JI;t.disable(t.STENCIL_TEST)}a_(t,s,i,e,r){this.Vc=27,this.XG=t?1:0;const n=this.tN;n[0]=s,n[1]=i,n[2]=e,n[3]=r}l_(){const t=this.JI,s=this.tN;1===this.XG?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}u_(t){this.Vc=29,this.XG=t}c_(){const t=this.JI,s=this.XG;0===s?t.disable(t.CULL_FACE):(t.enable(t.CULL_FACE),1===s?t.cullFace(t.BACK):t.cullFace(t.FRONT))}f_(t){this.Vc=30,this.XG=t}d_(){const t=this.JI;t.frontFace(0===this.XG?t.CW:t.CCW)}p_(){switch(this.Vc){case 1:return void this.nN();case 2:return void this.oN();case 3:return void this.cN();case 4:return void this.dN();case 5:return void this.mN();case 6:return void this.gN();case 7:return void this.wN();case 8:return void this.TN();case 9:return void this.CN();case 10:return void this.NN();case 11:return void this.EN();case 12:return void this.LN();case 13:return void this.RN();case 14:return void this.xN();case 15:return void this.YN();case 16:return void this.jN();case 17:return void this.FN();case 18:return void this.UN();case 19:return void this.JN();case 20:return void this.lN();case 21:return void this.XN();case 22:return void this.$N();case 23:return void this.s_();case 24:return void this.e_();case 25:return void this.n_();case 26:return void this.o_();case 27:return void this.l_();case 28:return void this.qN();case 29:return void this.c_();case 30:return void this.d_()}}}}{let fc=function(t,s,i,e,r,n){s?t.strokeRect(i,e,r,n):t.fillRect(i,e,r,n)},dc=function(t){return t*(4/3)},pc=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};0;const mc=self.Cs,yc=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),gc={timeout:60},Mc=new mc.vo(0,0,0,1),wc=new Set(["left","center","right"]),bc=new Set(["top","center","bottom"]),Sc=new Set(["word","cjk","character"]),Tc=new Set(["ltr","rtl"]),vc=new Set;mc.m_&&mc.m_.addEventListener("fontload",t=>{const s=t.font._c();for(const t of vc)(t.y_()||mc.Xe(t.g_(),s))&&t.M_()});let xc=!1,Ic=!1;mc.RM.VS=class{constructor(t,s){s=Object.assign({},gc,s),this.HS=t,this.w_="Arial",this.b_=16,this.S_=1,this.T_=0,this.v_=!1,this.x_=!1,this.I_="black",this.C_=!1,this.Uy=null,this.G_=!0,this.N_=null,this.__=new Set,this.E_="left",this.D_="top",this.Fc="",this.A_=null,this.L_=mc.Jr(mc.zy),this.O_="word",this.R_="ltr",this.k_=!1,this.j_=!1,this.P_=!1,this.F_=-1,this.z_=0,this.B_=0,this.U_=0,this._g=0,this.Eg=0,this.W_=1,this.Q_=null,this.J_=null,this.V_=null,this.Y_=null,this.H_=-1,this.q_=-1,this.Z_="",this.X_="",this.K_="",this.tE=1,this.sE=1,this.iE=t=>this.eE(t),this.gx=null,this.rE=new mc.Rect,this.nE=1,this.hE=new mc.Of(()=>{this.oE(),this.aE(8,8)},s.timeout),this.lE=null,this.uE=!1,vc.add(this)}Vr(){this.N_=null,this.__.clear(),this.Uy=null,this.A_=null,this.Q_=null,this.J_=null,this.V_=null,this.Y_=null,this.iE=null,this.hE.Vr(),this.lE=null,this.oE(),this.L_._u(),this.L_=null,this.HS=null,this.uE=!0,vc.delete(this)}cE(){this.P_=!0}fE(){this.cE(),this.j_=!0}M_(){this.fE(),this.k_=!0}dE(t){if(t=!!t,this.C_===t)return;this.C_=t;const s=this.C_?"alphabetic":"top";this.J_&&(this.J_.textBaseline=s),this.V_&&(this.V_.textBaseline=s),this.M_()}y_(){return this.C_}Jy(t){this.Uy!==t&&(this.Uy=t,this.L_.Jy(t),this.Uy&&this.Uy.TM()&&this.Uy.vM().then(()=>this.cE()),this.M_())}pE(t){t=!!t,this.G_!==t&&(this.G_=t,this.cE())}mE(t){t||(t="serif"),this.w_!==t&&(this.w_=t,this.M_())}g_(){return this.w_}yE(t){t<.1&&(t=.1),this.b_!==t&&(this.b_=t,this.M_())}gE(){return this.b_}ME(t){this.S_!==t&&(this.S_=t,this.M_())}wE(t){this.T_!==t&&(this.T_=t,this.fE())}bE(){return this.T_}SE(t){t=!!t,this.v_!==t&&(this.v_=t,this.M_())}TE(){return this.v_}vE(t){t=!!t,this.x_!==t&&(this.x_=t,this.M_())}xE(){return this.x_}IE(t){t=Math.floor(t),this.F_!==t&&(this.F_=t,this.cE())}CE(){return this.F_}GE(t,s){let i=[];(this.v_||s.Jg("b"))&&i.push("bold"),(this.x_||s.Jg("i"))&&i.push("italic");const e=s.Qg("size"),r=(e?parseFloat(e.Ly):this.b_)*this.S_;t?i.push(r+"pt"):i.push(r*this.NE()+"pt");let n=this.w_;const h=s.Qg("font");return h&&h.Ly&&(n=h.Ly,this.N_&&!this.__.has(n)&&(this.N_(n),this.__.add(n))),n&&(yc.has(n)?i.push(n):i.push('"'+n+'"')),i.join(" ")}jT(t){t instanceof mc.vo&&(t=t.ta()),this.I_!==t&&(this.I_=t,this.cE())}_E(t,s,i){Mc._o(t,s,i),this.jT(Mc)}EE(t){if(!wc.has(t))throw new Error("invalid horizontal alignment");this.E_!==t&&(this.E_=t,this.fE())}DE(){return this.E_}AE(t){if(!bc.has(t))throw new Error("invalid vertical alignment");this.D_!==t&&(this.D_=t,this.fE())}LE(){return this.D_}OE(t){if(!Sc.has(t))throw new Error("invalid word wrap mode");this.O_!==t&&(this.O_=t,this.M_())}RE(){return this.O_}kE(t){if(!Tc.has(t))throw new Error("invalid text direction");this.R_!==t&&(this.R_=t,this.J_&&(this.J_.direction=this.R_),this.V_&&(this.V_.direction=this.R_),this.M_())}jE(){return this.R_}Uc(t){this.Fc!==t&&(this.Fc=t,this.M_())}PE(){return this.Fc}NE(){return this.nE*this.W_*self.devicePixelRatio}FE(t,s,i){if(void 0===i&&(i=1),t<=0||t<=0)return;if(this.B_===t&&this.U_===s&&this.W_===i)return;const e=this.B_;this.B_=t,this.U_=s,this.W_=i;const r=self.devicePixelRatio;this._g=this.B_*this.W_*r,this.Eg=this.U_*this.W_*r;const n=Math.max(this._g,this.Eg),h=Math.min(this.HS.Gx(),4096);let o=1;n>h&&(o=h/n,this._g=Math.min(this._g*o,h),this.Eg=Math.min(this.Eg*o,h)),this.nE=o,this.B_!==e?this.M_():this.fE()}Yy(){return this._g}eg(){return this.Eg}zE(){return this.W_}BE(){return this.UE(),this.L_.Gg()}WE(){return this.UE(),this.L_.Ng()+this.L_.Qy()*(this.T_+4)-this.T_}QE(){this.UE();let t=0;for(const s of this.L_.Wy())for(const i of s.lg())t+=i.ug();return t}vI(){return this.hE.Ff(),this.JE(),this.gx}VE(t,s){this.UE();const i=this.NE(),e=this.L_.Wy();for(const r of e){const e=r.ng()*i;if(s>=r.Bg()-r.eg()*i+e&&s<r.Bg()+e)for(const s of r.lg())if(t>=s.Fg()&&t<s.Fg()+s.Yy()*i)return s}return null}*YE(t){this.UE();const s=this.L_.Wy();for(const i of s)for(const s of i.lg()){const i=s.Qg("tag");i&&mc.Xe(i.Ly,t)&&(yield s)}}HE(t,s){for(const i of this.YE(t)){if(0===s)return i;--s}return null}qE(t){let s=0;for(const i of this.YE(t))++s;return s}JE(){(!this.gx||this.P_||this.j_||this.k_)&&(this.uE||this._g<=0||this.Eg<=0||(this.P_=!1,this.ZE()))}ZE(){this.uE||(this.UE(),this.aE(Math.max(mc.Sn(Math.ceil(this._g)),128),Math.max(mc.Sn(Math.ceil(this.Eg)),64)),this.XE(),this.KE(),this.hE.Ff())}aE(t,s){this.Q_||(this.Q_=mc.uo(16,16));let i=!1;this.H_===t&&this.q_===s||(this.H_=t,this.q_=s,this.Q_.width=t,this.Q_.height=s,i=!0),this.J_||(this.J_=this.Q_.getContext("2d"),i=!0),i?(this.J_.textBaseline=this.C_?"alphabetic":"top",this.J_.direction=this.R_,this.J_.font=this.Z_,this.J_.fillStyle=this.K_,this.J_.strokeStyle=this.K_,this.J_.globalAlpha=this.tE,this.J_.lineWidth=this.sE):this.J_.clearRect(0,0,t,s)}$E(){this.V_||(this.V_=mc.uo(16,16).getContext("2d"),this.Y_=mc.uo(16,16).getContext("2d"),this.V_.textBaseline=this.C_?"alphabetic":"top",this.Y_.textBaseline="top",this.V_.direction=this.R_,this.Y_.direction=this.R_)}tD(t){this.X_!==t&&(this.X_=t,this.V_.font=t,this.Y_.font=t)}sD(){if(!xc){xc=!0,this.$E();const t=this.V_.measureText("test");Ic="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return Ic}UE(){this.iD(),this.eD()}iD(){this.k_&&(this.$E(),!this.C_||this.A_&&this.A_.toString()===this.Fc||(this.A_=new mc.dr(this.Fc,{My:!0})),this.L_.zy(this.C_?this.A_.Dy():this.Fc,this.iE,this.B_,this.O_,0),this.k_=!1)}eD(){this.j_&&(this.rD(),this.j_=!1)}eE(t){const s=t.$y()?t.gg().join(""):" ";this.tD(this.GE(!0,t));const i=t.Qg("size"),e=(i?parseFloat(i.Ly):this.b_)*this.S_,r=this.V_.measureText(s);let n=0;if(this.C_&&this.sD()){const t=this.Y_.measureText(s);n=r.fontBoundingBoxAscent-t.fontBoundingBoxAscent}return{width:r.width,height:dc(e),fontBoundingBoxAscent:r.fontBoundingBoxAscent||0,fontBoundingBoxDescent:r.fontBoundingBoxDescent||0,Ky:n}}nD(t){this.Z_!==t&&(this.Z_=t,this.J_.font=t)}hD(t){this.K_!==t&&(this.K_=t,this.J_.fillStyle=t,this.J_.strokeStyle=t)}oD(t){this.tE!==t&&(this.tE=t,this.J_.globalAlpha=t)}aD(t){this.sE!==t&&(this.sE=t,this.J_.lineWidth=t)}rD(){const t=this.NE(),s=(4+this.T_)*t;let i=0;const e=this.L_.Wy();if(0===e.length)return;for(const t of e){t.Pg(NaN),t.zg(NaN);for(const s of t.lg())s.Pg(NaN),s.zg(NaN)}const r=this.C_&&this.sD();let n=e[0].eg()*t;if("center"===this.D_){const h=e.reduce((i,e)=>i+e.eg()*t+s,0)-s;i=Math.max(this.Eg/2-h/2,0),r&&(n=e[0].hg()*t)}else if("bottom"===this.D_){const n=e.reduce((i,e)=>i+e.eg()*t+s,0)-this.T_*t,h=r?e.at(-1).ng()*t:0;i=this.Eg-n-h-2}for(let r=0,h=e.length;r<h;++r){const h=e[r],o=h.eg()*t,a=i;if(this.C_){if(i+=0===r?n:o,r>0&&i>this.Eg-4*t)break}else if(r>0&&i>=this.Eg-o)break;a>=0&&this.lD(h,i,t),this.C_||(i+=o),i+=s}}lD(t,s,i){let e=0;"center"===this.E_?e=Math.floor((this._g-t.Yy()*i)/2):"right"===this.E_&&(e=this._g-t.Yy()*i),t.Pg(e),t.zg(s);for(const r of"ltr"===this.R_?t.lg():t.kg())this.uD(r,e,s,i),e+=r.Yy()*i}uD(t,s,i,e){const r=t.Qg("offsetx");s+=r?pc(r.Ly,t.eg())*e:0;const n=t.Qg("offsety");if(i+=n?pc(n.Ly,t.eg())*e:0,t.sg()){const s=t.Qg("iconoffsety");i+=s?pc(s.Ly,t.eg())*e:.2*t.eg()*e}t.Pg(s),t.zg(i)}XE(){this.J_.imageSmoothingEnabled=this.G_,this.J_.imageSmoothingQuality="high",this.z_=0;const t=this.NE(),s=this.L_.Wy();for(const i of s)this.cD(i,t)}cD(t,s){const i=t.Fg(),e=t.Bg();if(Number.isFinite(i)&&Number.isFinite(e))for(const i of"ltr"===this.R_?t.lg():t.kg())this.fD(i,s,t.eg())}fD(t,s,i){const e=this.J_,r=t.Fg(),n=t.Bg();if(!Number.isFinite(r)||!Number.isFinite(n))return;const h=i/16;let o=t.Yy()*s;const a=t.eg()*s,l=t.eg()/16,u=(4+this.T_)*s;let c=t.$y()?t.gg():null;if(-1!==this.F_){if(this.z_>=this.F_)return;t.$y()&&this.z_+c.length>this.F_&&(c=c.slice(0,this.F_-this.z_),o=this.eE(t).width*s),this.z_+=t.ug()}const f=t.Qg("background"),d=t.Jg("u"),p=t.Jg("s");if(t.$y()&&mc.bm(c)&&!f&&!d&&!p||t.Jg("hide"))return;const m=t.Qg("color"),y=t.Qg("opacity");this.oD(y?parseFloat(y.Ly)/100:1),f&&(this.hD(f.Ly),e.fillRect(r,n-a,o,a+u));const g=t.Qg("linethickness"),M=g?parseFloat(g.Ly):1,w=t.Jg("stroke");if(w&&this.aD(.5*l*M*this.NE()),t.$y()){const s=c.join("");if(this.nD(this.GE(!1,t)),!w){this.aD(.5*l*M*this.NE());const i=t.Qg("outlineback");i&&(this.hD(i.Ly),this.dD(!0,s,r,n,o))}if(this.hD(m?m.Ly:this.I_),this.dD(w,s,r,n,o),!w){this.aD(.5*l*M*this.NE());const i=t.Qg("outline");i&&(this.hD(i.Ly),this.dD(!0,s,r,n,o))}}else if(t.sg()&&t.Yy()>0){const s=t.$g(this.Uy);s&&e.drawImage(s,r,n-a,o,a)}if(this.hD(m?m.Ly:this.I_),d&&fc(e,w,r,n+s*h,o,s*h*M),p){const t=s*l,i=n-a/4+t/2;e.fillRect(r,i-t*M/2,o,t*M)}}dD(t,s,i,e,r){"rtl"===this.R_&&(i+=r),t?"Gecko"===mc.Xs.ei?this.J_.strokeText(s,i,e,r):this.J_.strokeText(s,i,e):"Gecko"===mc.Xs.ei?this.J_.fillText(s,i,e,r):this.J_.fillText(s,i,e)}KE(){this.HS.pD()||(this.gx||(this.gx=this.HS.dI(this.Q_.width,this.Q_.height,{ox:!0,lx:"high"})),this.HS.mD(this.Q_,this.gx),this.rE.set(0,0,this._g/this.gx.Yy(),this.Eg/this.gx.eg()),this.lE&&this.lE())}yD(){return this.rE}oE(){this.gx&&(this.HS.pD()||this.HS.gI(this.gx),this.gx=null)}static PT(){for(const t of vc)t.oE()}static gD(){return vc.values()}}}{const Cc=self.Cs;class Gc{constructor(t){this.JI=t.Nx(),this.MD=t._x(),this.wD=t.bD(),this.SD=null,this.Pf=!1,this.TD=!1,this.vD=0,1===this.MD?this.SD=this.wD.createQueryEXT():this.SD=this.JI.createQuery()}Vr(){this.xD(),this.JI=null,this.wD=null,this.TD=!1}xD(){this.SD&&(1===this.MD?this.wD.deleteQueryEXT(this.SD):this.JI.deleteQuery(this.SD),this.SD=null)}zN(){if(this.Pf)throw new Error("query already active");1===this.MD?this.wD.beginQueryEXT(this.wD.TIME_ELAPSED_EXT,this.SD):this.JI.beginQuery(this.wD.TIME_ELAPSED_EXT,this.SD),this.Pf=!0}WN(){if(!this.Pf)throw new Error("query not active");1===this.MD?this.wD.endQueryEXT(this.wD.TIME_ELAPSED_EXT):this.JI.endQuery(this.wD.TIME_ELAPSED_EXT),this.Pf=!1}ID(){if(!this.SD||this.TD||this.Pf)return;let t=!1;t=1===this.MD?this.wD.getQueryObjectEXT(this.SD,this.wD.QUERY_RESULT_AVAILABLE_EXT):this.JI.getQueryParameter(this.SD,this.JI.QUERY_RESULT_AVAILABLE);const s=this.JI.getParameter(this.wD.GPU_DISJOINT_EXT);t&&!s&&(1===this.MD?this.vD=this.wD.getQueryObjectEXT(this.SD,this.wD.QUERY_RESULT_EXT):this.vD=this.JI.getQueryParameter(this.SD,this.JI.QUERY_RESULT),this.vD/=1e9,this.TD=!0),(t||s)&&this.xD()}CD(){return this.TD}GD(){if(!this.TD)throw new Error("no result available");return this.vD}}Cc.RM.ND=class{constructor(t){this.HS=t,this.Lw=t.OS(),this.Pf=!1,this._D=null,this.ED=!1,this.DD=null,this.AD=[]}Vr(){for(const t of this.AD)t instanceof Gc&&t.Vr();Cc.wh(this.AD),this._D=null,this.DD=null,this.HS=null}zN(){if(this.Pf)throw new Error("query already active");const t=this.HS.LD();t.length>0?(this.ED=!0,this._D=t.at(-1),this._D.OD(),this._D.AD.push(this)):(this.ED=!1,this._D=null),this.Pf=!0,t.push(this),this.RD()}WN(){if(!this.Pf)throw new Error("query not active");if(this.HS.LD().pop()!==this)throw new Error("can only end most nested query");this.Pf=!1,this.OD(),this._D&&(this._D.RD(),this._D=null)}RD(){this.DD=Cc.Jr(Gc,this.HS),this.AD.push(this.DD),this.DD.zN()}OD(){this.DD.WN(),this.DD=null}ID(){for(const t of this.AD)t.ID()}kD(){return this.ED}CD(){return this.AD.every(t=>t.CD())}GD(){return this.AD.reduce((t,s)=>t+s.GD(),0)}OS(){return this.Lw}}}{const Nc=self.Cs;Nc.RM.jD=class{constructor(t,s=1e3){this.HS=t,this.PD=s,this.FD=[],this.HS.zD(this)}Vr(){this._u(),this.HS.BD(this),this.HS=null}_u(){for(const t of this.FD)t.Vr();Nc.wh(this.FD)}UD(){const t=new Nc.RM.ND(this.HS);return this.FD.push(t),this.FD.length>this.PD&&this.FD.shift().Vr(),t}WD(t){for(const s of this.FD){if(s.OS()>=t)return;if(s.kD())return;s.ID()}}QD(t,s){if(s<=t)return NaN;let i=0;for(const e of this.FD){if(e.OS()>=s)break;if(!(e.OS()<t)){if(!e.CD())return NaN;i+=e.GD()}}return i}JD(t){for(let s=0,i=this.FD.length;s<i;++s){const i=this.FD[s];if(!(i.OS()<t))return void(s>0&&this.FD.splice(0,s));i.Vr()}}}}{let _c=function(){Wc=-1;for(const t of Uc)t.VD()&&(t.resolve(),Uc.delete(t));Uc.size>0&&(Wc=self.requestAnimationFrame(_c))};0;const Ec=self.Cs,Dc=(self.assert,self.hs),Ac=(Dc.gs,Dc.Ms),Lc=Dc.fs,Oc={powerPreference:"default",YD:!0,alpha:!1,depth:!1,HD:!1,qD:2,failIfMajorPerformanceCaveat:!1},Rc=new Set(["default","low-power","high-performance"]),kc=new Ec.Nl(0,0,1,0,1,1,0,1),jc=Lc.create(),Pc=Lc.create(),Fc=new Ec.Nl,zc=new Ec.Rect;let Bc=null;Ec.Rs&&(self.ZD=function(){Bc?Bc.loseContext():console.warn("WEBGL_lose_context not supported")},self.XD=function(){Bc?Bc.restoreContext():console.warn("WEBGL_lose_context not supported")});const Uc=new Set;let Wc=-1;Ec.RM.KD=class extends Ec.RM.XM{constructor(t,s){if(super(s),s=Object.assign({},Oc,s),!Rc.has(s.powerPreference))throw new Error("invalid power preference");const i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat};let e=null,r=0;if(s.qD>=2&&(e=t.getContext("webgl2",i),r=2),e||(e=t.getContext("webgl",i),r=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.JI=e,this.$D=e.getContextAttributes(),this.tA=e.getParameter(e.VERSION),this.MD=r,this.sA=Ac.create(),this.iA=!1,this.eA=Lc.create(),this.rA=!!s.depth,this.nA=!(!s.depth||!s.HD),this.hA=this.rA,this.oA=!1,this.aA=null,this.lA=!0,this.uA=0,this.cA=0,this.HI=null,this.qI=null,this.ZI=null,this.fA=null,this.KI=null,this.dA=this.MD>=2&&void 0!==globalThis.Float16Array,this.pA=new Float32Array(196605),this.mA=new Uint16Array(393210),this.yA=new Float32Array(131070),this.gA=this.dA?new globalThis.Float16Array(262140):new Float32Array(262140),this.MA=new Float32Array(32e3),this.wA=0,this.bA=0,this.SA=0,this.TA=null,this.vA=null,this.xA=[],this.IA=0,this.CA=0,this.GA=null,this.NA=0,this.ZG=Ec.Jr(Ec.RM.JG,this),this._A=Ec.Jr(Ec.vo,1,1,1,1),this.EA=null,this.DN=null,this.DA=0,this.AA=0,this.LA=new Ec.Rect,this.OA=Ec.Jr(Ec.Rect,0,0,-1,-1),this.RA=0,this.kA=0,this.jA=0,this.PA=-1,this.FA=0,this.zA=0,this.BA="(unavailable)",this.UA="(unavailable)",this.WA=[],this.QA=!1,this.JA=null,this.VA=null,this.YA=null,this.HA=null,this.qA=null,this.ZA=null,this.XA=null,this.KA=0,this.$A=!!s.YD,this.wD=null,this.tL=new Set,this.sL=[]}zS(){return!0}async Pw(){super.Pw();const t=this.JI;this._A.No(1,1,1,1),this.EA=null,this.DN=null,this.wA=0,this.bA=0,this.SA=0,Ec.wh(this.xA),this.IA=0,this.CA=0,this.TA=null,this.GA=null,this.LA.set(0,0,1,1),this.NA=0;const s=this.ZG;s.WC=null,s.wI=null,s.bI=null,s.clearColor.No(0,0,0,0),s.HG.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.DA=t.ONE,this.AA=t.ONE_MINUS_SRC_ALPHA,this.iL(t),t.cullFace(t.BACK),t.disable(t.CULL_FACE),this.kA=0,t.frontFace(t.CW),this.jA=0,t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.rA?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.hA=this.rA,this.oA=!1,this.KI=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.KI),t.bufferData(t.ARRAY_BUFFER,this.MA.byteLength,t.DYNAMIC_DRAW),this.HI=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.HI),t.bufferData(t.ARRAY_BUFFER,this.pA.byteLength,t.DYNAMIC_DRAW),this.qI=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.qI),t.bufferData(t.ARRAY_BUFFER,this.yA.byteLength,t.DYNAMIC_DRAW),this.ZI=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.ZI),t.bufferData(t.ARRAY_BUFFER,this.gA.byteLength,t.DYNAMIC_DRAW),this.fA=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.fA),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.mA.byteLength,t.DYNAMIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.PA=t.getParameter(t.MAX_TEXTURE_SIZE);const i=t.getParameter(t.ALIASED_POINT_SIZE_RANGE);this.FA=i[0],this.zA=i[1],this.zA>2048&&(this.zA=2048),this.WA=t.getSupportedExtensions();const e=t.getExtension("WEBGL_debug_renderer_info");if(e&&(this.BA=t.getParameter(e.UNMASKED_VENDOR_WEBGL),this.UA=t.getParameter(e.UNMASKED_RENDERER_WEBGL)),this.JA=t.getExtension("KHR_parallel_shader_compile"),this.MD>=2&&("Chromium"!==Ec.Xs.ei||Ec.Xs.ii>=135)&&(this.YA=t.getExtension("EXT_conservative_depth")),Ec.Rs&&(Bc=t.getExtension("WEBGL_lose_context")),this.$A&&(1===this._x()?this.wD=t.getExtension("EXT_disjoint_timer_query"):this.wD=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.VA=t.getExtension("EXT_texture_filter_anisotropic"),this.VA?this.KA=t.getParameter(this.VA.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.KA=0,this._x()<2&&this.rA&&this.nA&&(this.HA=t.getExtension("WEBGL_depth_texture"),!this.HA))throw new Error("no depth texture support");this._x()<2&&(this.qA=t.getExtension("EXT_frag_depth"),this.ZA=t.getExtension("OES_standard_derivatives"),this.XA=t.getExtension("EXT_shader_texture_lod"));const r=Ec.RM.FI,n=r.fG(!1);let h=r.pG(),o=n,a=r.vG(),l=r.SG(),u=r.gG(),c=r.fG(!0),f=!1;this.rA&&(this._x()<2?this.qA&&(h=r.mG(),a=r.xG(),u=r.MG(),f=!0):(o=r.dG(),h=r.yG(this.eL()),a=r.IG(this.eL()),l=r.TG(),u=r.wG(this.eL()),c=r.dG(!0)));const d=r.bG(this._x(),f,this.ZA&&this.XA,this.eL()),p=this._x()>=2?r.dG():n,m=[[h,o,"<default>"],[h,o,"<default-device-transform>"],[a,l,"<point>"],[r.CG(),n,"<fill>"],[r.GG(),n,"<lineargradient>"],[r.NG(),n,"<penumbra>"],[r.EG(),n,"<hardellipse>"],[r.DG(),n,"<hardellipseoutline>"],[r.AG(),n,"<smoothellipse>"],[r.LG(),n,"<smoothellipseoutline>"],[r._G(),n,"<smoothline>"],[u,c,"<tilemap>"],[d,p,"<tilerandomization>"]],y=await Promise.all(m.map(t=>this.rL({src:t[0],BI:t[1],name:t[2]})));this.aw=y[0],this.vA=y[1],this.lw=y[2],this.fw=y[3],this.dw=y[4],this.pw=y[5],this.mw=y[6],this.yw=y[7],this.gw=y[8],this.Mw=y[9],this.ww=y[10],this.uw=y[11],this.cw=y[12],this.ab()}async rL(t){const s=await Ec.RM.FI.QI(this,t);return this.rb(s),s}nL(){this.TA=null}FE(t,s,i){if(this._g===t&&this.Eg===s&&!i)return;this.LS();const e=this.JI,r=this.ZG;this._g=t,this.Eg=s,this.hL(0,0,t,s),this.$w(this.eA,t/s),this.oL(this.eA),this.vA&&(e.useProgram(this.vA.JC()),this.vA.PC(this.tw),this.TA=this.vA,this.ZG.WC=this.vA),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.EA=null,this.DN=null,this.rA&&this.lA&&this.aL(this._g,this.Eg),this.GA&&this.GA.yI(this._g,this.Eg),e.bindFramebuffer(e.FRAMEBUFFER,null),this.GA=null,r.wI=null,r.bI=null}aL(t,s){const i=this.JI;this.aA&&this.uA===t&&this.cA===s||(this.nA?(this.aA&&i.deleteTexture(this.aA),this.aA=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.aA),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),this._x()>=2?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.HA&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.HA.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.aA&&i.deleteRenderbuffer(this.aA),this.aA=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.aA),i.renderbufferStorage(i.RENDERBUFFER,this.MD>=2?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.uA=t,this.cA=s)}lL(t,s){this.rA&&(this.lA=!1,this.aL(t,s))}uL(){this.rA&&(this.lA=!0,this.aL(this._g,this.Eg))}hL(t,s,i,e){const r=this.sA;r[0]===t&&r[1]===s&&r[2]===i&&r[3]===e||(this.cL().fN(t,s,i,e),Ac.set(r,t,s,i,e),this.CA=0)}Hw(t){super.Hw(t),this.$w(this.eA,this._g/this.Eg)}Qw(t){super.Qw(t),this.$w(this.eA,this._g/this.Eg)}Vw(t){super.Vw(t),this.$w(this.eA,this._g/this.Eg)}oL(t){Lc.L(this.tw,t)||(this.cL().pN(t),Lc.m(this.tw,t),this.CA=0,this.iA=!0)}fL(){let t,s,i;const e=this.GA;null===e?(t=this.eA,s=this.Yy(),i=this.eg()):(t=e.xI(),s=e.Yy(),i=e.eg()),this.oL(t),this.hL(0,0,s,i)}dL(t){Lc.L(this.sw,t)||(this.cL().yN(t),Lc.m(this.sw,t),this.CA=0,this.iA=!0)}pL(){this.iA=!1}mL(){return this.iA}MI(){return this.ZG}cL(){const t=this.xA;return this.IA===t.length&&t.push(new Ec.RM.qG(this.ZG)),t[this.IA++]}LS(){0!==this.IA&&(this.pD()||(this.yL(),this.gL(),this.IA=0,this.wA=0,this.bA=0,this.SA=0,this.CA=0))}yL(){const t=this.JI;this.wA>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.HI),t.bufferSubData(t.ARRAY_BUFFER,0,this.pA.subarray(0,3*this.wA)),t.bindBuffer(t.ARRAY_BUFFER,this.qI),t.bufferSubData(t.ARRAY_BUFFER,0,this.yA.subarray(0,2*this.wA)),t.bindBuffer(t.ARRAY_BUFFER,this.ZI),t.bufferSubData(t.ARRAY_BUFFER,0,this.gA.subarray(0,4*this.wA))),this.bA>0&&(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.fA),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,this.mA.subarray(0,this.bA))),this.SA>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.KI),t.bufferSubData(t.ARRAY_BUFFER,0,this.MA.subarray(0,this.SA)))}gL(){const t=this.xA;for(let s=0,i=this.IA;s<i;++s)t[s].p_()}ML(){return this._A.zo()}wL(t,s,i,e){const r=this._A;r.Yo(t,s,i,e)||(r.No(t,s,i,e),this.Sw=null,2===this.CA&&(this.CA=0))}bL(t){const s=this._A;s.zo()!==t&&(s.Ro(t),this.Sw=null,2===this.CA&&(this.CA=0))}jT(t){const s=this._A;s.equals(t)||(s.set(t),this.Sw=null,2===this.CA&&(this.CA=0))}SL(){this.wL(1,1,1,1)}TL(){return this._A}vL(t){t!==this.EA&&(this.cL().hN(t),this.EA=t,this.CA=0)}Lx(){this.EA=null}kT(t){const s=this.jb(t);this.xL(s[0],s[1])}IL(t){const s=this.zb(t);this.xL(s.Rb,s.kb)}xL(t,s){t===this.DA&&s===this.AA||(this.cL().uN(t,s),this.DA=t,this.AA=s,this.CA=0,this.Sw=null)}CL(){return this.DA===this.JI.ONE&&this.AA===this.JI.ONE_MINUS_SRC_ALPHA}GL(){this.xL(this.JI.ONE,this.JI.ONE_MINUS_SRC_ALPHA)}NL(){this.xL(this.JI.SRC_ALPHA,this.JI.ONE_MINUS_SRC_ALPHA)}NS(t){this.kA!==t&&(this.cL().u_(t),this.kA=t,this.CA=0,this.Sw=null)}_L(){return this.kA}_S(t){this.jA!==t&&(this.cL().f_(t),this.jA=t,this.CA=0,this.Sw=null)}EL(){return this.jA}DL(){this.xL(this.JI.ONE,this.JI.ZERO)}Rect(t){this.AL(t.Ka(),t.$a(),t.tl(),t.sl())}AL(t,s,i,e){this.DS(t,s,i,s,i,e,t,e)}LL(t,s){(this.wA+t>65535||this.bA+s>393210)&&this.LS(),1===this.CA?this.xA[this.IA-1].KG+=s:(this.cL().rN(2*this.bA,s),this.CA=1)}OL(){const t=this.wA;let s=this.bA;this.bA+=6;const i=this.mA;i[s++]=t,i[s++]=t+1,i[s++]=t+2,i[s++]=t,i[s++]=t+2,i[s]=t+3}Nl(t){this.RL(t,kc)}DS(t,s,i,e,r,n,h,o){this.LL(4,6),this.OL();const a=this.pA,l=this.wA;this.wA+=4;let u=3*l;const c=this.Iw+this.Cw;a[u++]=t,a[u++]=s,a[u++]=c,a[u++]=i,a[u++]=e,a[u++]=c,a[u++]=r,a[u++]=n,a[u++]=c,a[u++]=h,a[u++]=o,a[u]=c,kc.Uo(this.yA,2*l),this._A.Wo(this.gA,4*l)}sS(t,s){this.LL(4,6),this.OL();const i=this.wA;this.wA+=4,t.Hl(this.pA,3*i,this.Iw+this.Cw),s.rl(this.yA,2*i),this._A.Wo(this.gA,4*i)}RL(t,s){this.LL(4,6),this.OL();const i=this.wA;this.wA+=4,t.Hl(this.pA,3*i,this.Iw+this.Cw),s.Uo(this.yA,2*i),this._A.Wo(this.gA,4*i)}kL(t,s,i){this.LL(4,6),this.OL();const e=this.wA;this.wA+=4,t.Hl(this.pA,3*e,this.Iw+this.Cw),s.Uo(this.yA,2*e),this.gA.set(i,4*e)}jL(t,s,i,e,r,n,h,o,a,l,u,c,f){this.LL(4,6),this.OL();const d=this.pA,p=this.wA;this.wA+=4;let m=3*p;const y=this.Iw+this.Cw;d[m++]=t,d[m++]=s,d[m++]=y+i,d[m++]=e,d[m++]=r,d[m++]=y+n,d[m++]=h,d[m++]=o,d[m++]=y+a,d[m++]=l,d[m++]=u,d[m]=y+c,f.rl(this.yA,2*p),this._A.Wo(this.gA,4*p)}Zb(t,s,i,e,r,n,h,o,a,l,u,c,f){this.LL(4,6),this.OL();const d=this.pA,p=this.wA;this.wA+=4;let m=3*p;const y=this.Iw+this.Cw;d[m++]=t,d[m++]=s,d[m++]=y+i,d[m++]=e,d[m++]=r,d[m++]=y+n,d[m++]=h,d[m++]=o,d[m++]=y+a,d[m++]=l,d[m++]=u,d[m]=y+c,f.Uo(this.yA,2*p),this._A.Wo(this.gA,4*p)}PL(t,s,i,e,r,n,h,o,a,l,u,c,f,d){this.LL(4,6),this.OL();const p=this.pA,m=this.wA;this.wA+=4;let y=3*m;const g=this.Iw+this.Cw;p[y++]=t,p[y++]=s,p[y++]=g+i,p[y++]=e,p[y++]=r,p[y++]=g+n,p[y++]=h,p[y++]=o,p[y++]=g+a,p[y++]=l,p[y++]=u,p[y]=g+c,f.Uo(this.yA,2*m),this.gA.set(d,4*m)}Jv(t,s,i,e){if(t.length%3!=0)throw new Error("vertex buffer length not multiple of 3");if(t.length>196605)throw new Error(`too many vertices (${t.length/3}, limit 65535)`);if(i.length%3!=0)throw new Error("index buffer length not multiple of 3");if(i.length>393210)throw new Error(`too many indices (${i.length}, limit 393210)`);this.LL(t.length,i.length);const r=this.wA;this.pA.set(t,3*r),this.yA.set(s,2*r);const n=this.mA;if(0===r)n.set(i,this.bA);else{let t=this.bA;for(let s=0,e=i.length;s<e;++s)n[t++]=i[s]+r}const h=this.gA;if(void 0!==e)h.set(e,4*r);else{const s=this._A,i=s.jo(),e=s.Po(),n=s.Fo(),o=s.zo();let a=4*r;for(let s=0,r=t.length;s<r;++s)h[a++]=i,h[a++]=e,h[a++]=n,h[a++]=o}this.wA+=t.length/3,this.bA+=i.length}FL(t,s){this.Qb(0),Lc.m(jc,this.tw),Lc.m(Pc,this.sw),this.fL();const[i,e]=this.zL(this.GA),r=this.eb(0,0,this.zw(e),0,0,0,e);if(this.dL(r),"crop"===t&&this.GA&&s){const t=this._g/2,i=this.Eg/2,e=s.Yy(),r=s.eg(),n=this.GA.Yy(),h=this.GA.eg(),o=Math.min(n,e),a=Math.min(h,r),l=Math.max(r-h,0),u=Math.max(h-r,0);zc.set(-t,i-u,-t+o,i-a-u),Fc.ql(zc),zc.set(0,l,o,a+l),zc.Mt(e,r),this.sS(Fc,zc)}else{const t=i/2,s=e/2;this.AL(-t,s,t,-s)}this.oL(jc),this.dL(Pc)}BL(t){this.LA.equals(t)||(this.LA.m(t),this.cL().vN(t),this.CA=0)}UL(){}WL(t,s,i,e){this.SA>=7996&&this.LS();let r=this.SA;const n=this.Iw+this.Cw;2===this.CA&&this.NA===n?this.xA[this.IA-1].KG++:(this.cL().IN(r,n,this._A),this.CA=2,this.NA=n);const h=this.MA;h[r++]=t,h[r++]=s,h[r++]=i,h[r++]=e,this.SA=r}lb(t){this.TA!==t&&(this.cL().GN(t),this.TA=t,this.CA=0,this.Sw=null)}QL(){return this.TA}JL(){this.lb(this.vA)}VL(t){this.cL().aN(t),this.CA=0}YL(t,s,i=1){this.cL().QN(t,s,i),this.CA=0}HL(t,s,i,e,r,n,h){if(this.TA!==this.uw)throw new Error("must set tilemap fill mode first");this.cL().VN(t,s,i,e,r,n,h),this.CA=0}qL(t,s,i,e,r,n,h){if(this.TA!==this.cw)throw new Error("must set tile randomization mode first");this.cL().HN(t,s,i,e,r,n,h),this.CA=0}ZL(t,s,i,e,r,n,h,o,a,l,u){const c=this.TA;if(u%=10800,!c.NC||c.$C(s,i,e,r,n,h,o,a,l,u))return;const f=this.cL();f._N(),c.iG(s,i,e,r,n,h,o,a,l,u);const d=f.tN;d[0]=n,d[1]=h,s.Uo(d,2),d[6]=a,d[7]=l,i.Uo(d,12);const p=f.sN;r.Uo(p,0);const m=p[1];p[1]=p[3],p[3]=m,e.Uo(f.iN,0),f.XG=u,f.KG=o,c.cC._C()?f.$G=t?t.vI():null:f.$G=null,this.CA=0}XL(t){const s=this.TA;if(0===t.length||s.qC(t))return;const i=this.cL();i.AN(),s.XC(t),Ec.xh(i.eN,t),this.CA=0}KL(t,s,i,e){this.cL().SN(t,s,i,e),this.CA=0}_u(t){this.cL().bN(t),this.CA=0}$L(){}AS(){super.AS(),this.JI.flush()}tO(){this.rA&&this.GA&&this.GA.NI()&&(this.cL().ZN(this.hA),this.CA=0)}sO(t){t=!!t,this.hA!==t&&this.rA&&(this.hA=t,this.cL().KN(t),this.CA=0)}iO(){return this.hA}pI(){return this.aA}mI(){return this.nA}eO(t){if(t=!!t,this.nA&&this.oA!==t){if(t&&this.iO())throw new Error("depth still enabled");this.oA=t,this.cL().t_(t),this.CA=0}}rO(t,s,i,e,r=0){t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),this.OA.Xa(t,s,i,e)||(this.OA.Qa(t,s,i,e),s=(r||this.zL(this.nO())[1])-s-e,this.cL().a_(!0,t,s,i,e),this.CA=0)}hO(){-1!==this.OA.tl()&&(this.OA.set(0,0,-1,-1),this.cL().a_(!1,0,0,0,0),this.CA=0)}oO(){for(const t of this.tL)t.WD(this.Lw)}pD(){return!this.JI||this.JI.isContextLost()||this.QA}PT(){super.Fw(),Ec.RM.yx.PT(),Ec.RM.Kx.PT(),Ec.RM.VS.PT();for(const t of this.tL)t._u();this.WA=[],this.wD=null,this.JA=null,this.YA=null,this.VA=null,this.HA=null,this.qA=null,this.ZA=null,this.XA=null,this.KA=0,this.BA="(unavailable)",this.UA="(unavailable)",this.TA=null,this.vA=null,this.aA=null;for(const t of this.bw.values())t.PT()}async FT(){this.QA=!0,await this.Pw(),this.QA=!1;for(const t of this.bw.values())t.FT(this);this.FE(this._g,this.Eg,!0)}aO(t,s){if(this.pD())throw new Error("context lost");this.LS();const i=Ec.Jr(Ec.RM.yx,this);return i.Cx(t,s),i}async lO(t,s){if(this.pD())throw new Error("context lost");if(s=Object.assign({},s),Ec.Ei.ImageBitmapOptions){let i=await createImageBitmap(t,{premultiplyAlpha:"premultiply"});const e=s.tx&&"clamp-to-edge"!==s.tx||s.sx&&"clamp-to-edge"!==s.sx,r=Ec.bn(i.width)&&Ec.bn(i.height);return this.Ex()||r||!e?s.ux=!1:Ec.Ei.Oi?(i=await createImageBitmap(t,{premultiplyAlpha:"premultiply",resizeWidth:Ec.Sn(i.width),resizeHeight:Ec.Sn(i.height)}),s.ux=!1):i=await createImageBitmap(t,{premultiplyAlpha:"none"}),await Ec.df(()=>this.aO(i,s))}if(t instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const s=await Ec.lo(t);t=s}return await Ec.df(()=>this.aO(t,s))}dI(t,s,i){this.LS();const e=Ec.Jr(Ec.RM.yx,this);return e.Ox(t,s,i),e}mD(t,s,i){this.LS(),s.Fx(t,i)}gI(t){t&&(t.Qx(),t.Jx()>0||(this.LS(),t===this.EA&&(this.JI.bindTexture(this.JI.TEXTURE_2D,null),this.EA=null),t===this.DN&&(this.JI.activeTexture(this.JI.TEXTURE1),this.JI.bindTexture(this.JI.TEXTURE_2D,null),this.JI.activeTexture(this.JI.TEXTURE0),this.DN=null),t.zx()))}uO(t){let s=this._g,i=this.Eg,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height&&(i=Math.floor(t.height),e=!1)),s<=0||i<=0)throw new Error("invalid size");this.LS();const r=Ec.Jr(Ec.RM.Kx,this);return r.cI(s,i,Object.assign({Zx:e},t)),this.GA=null,this.ZG.wI=null,this.ZG.bI=null,r}cO(t,s=!0){t!==this.GA&&(t&&t._I()&&t.yI(this._g,this.Eg),this.cL().MN(t),this.GA=t,this.CA=0,s&&this.fL())}nO(){return this.GA}zL(t){return t?[t.Yy(),t.eg()]:[this._g,this.Eg]}fO(t,s="stretch"){this.MD<2||this.GA&&this.GA.EI()>0?(this.DL(),this.SL(),this.dO(t,s)):(this.cL().kN(t,this.GA,s),this.CA=0)}dO(t,s="stretch"){const i=t.vI();if(!i)throw new Error("not a texture-backed render target");this.vL(i),this.FL(s,i)}pO(t){this.MD<2||(this.cL().ON(t.SI()),this.CA=0)}mO(t){this.cO(null),this.LS();const s=t.vI();s===this.EA&&(this.JI.bindTexture(this.JI.TEXTURE_2D,null),this.EA=null),s===this.DN&&(this.JI.activeTexture(this.JI.TEXTURE1),this.JI.bindTexture(this.JI.TEXTURE_2D,null),this.JI.activeTexture(this.JI.TEXTURE0),this.DN=null),t.zx()}async RI(t,s,i){this.LS();const e=this.GA;let r,n,h;t?(r=t.Yy(),n=t.eg(),h=t.SI()):(r=this.Yy(),n=this.eg(),h=null);let o=0,a=0,l=r,u=n;if(i){o=Ec.Xr(Math.floor(i.Ka()),0,r-1),a=Ec.Xr(Math.floor(i.$a()),0,n-1);let t=i.width();t=0===t?r-o:Ec.Xr(Math.floor(t),0,r-o);let s=i.height();s=0===s?n-a:Ec.Xr(Math.floor(s),0,n-a),l=t,u=s,a=n-(a+u)}const c=this.JI;c.bindFramebuffer(c.FRAMEBUFFER,h);const f=()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.GA=null,this.ZG.wI=null,this.ZG.bI=null,this.cO(e)};let d;if(!s&&this._x()>=2){c.bindFramebuffer(c.READ_FRAMEBUFFER,h);const t=c.createBuffer(),s=l*u*4,i=c.PIXEL_PACK_BUFFER;c.bindBuffer(i,t),c.bufferData(i,s,c.STREAM_READ),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(i,null),f();const e=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);await this.WI(()=>c.getSyncParameter(e,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(e),d=new ImageData(l,u),c.bindBuffer(i,t),c.getBufferSubData(i,0,new Uint8Array(d.data.buffer),0,s),c.bindBuffer(i,null),c.deleteBuffer(t)}else d=new ImageData(l,u),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}yO(){this.sO(!0),this.cL().i_(),this.CA=0,this.RA=1}gO(){this.sO(!1),this.cL().r_(),this.CA=0,this.RA=2}MO(){return 2===this.RA}wO(){this.sO(!0),this.cL().h_(),this.CA=0,this.RA=0}bO(t){this.SO()&&(this.cL().PN(t),this.CA=0)}TO(t){this.SO()&&(this.cL().BN(t),this.CA=0)}WI(t){const s=new Promise(s=>Uc.add({resolve:s,VD:t}));return-1===Wc&&(Wc=self.requestAnimationFrame(_c)),s}BS(){return this._g*this.Eg*(this.$D.alpha?4:3)}US(){let t=0;for(const s of Ec.RM.Kx.kI())s.vI()||(t+=s.Yx());return t}WS(){let t=0;for(const s of Ec.RM.yx.Hx())t+=s.Yx();return t}vO(){return this.tA}_x(){return this.MD}XI(){return this.dA}xO(){return"webgl"+this._x()}Ex(){return this._x()>=2}Gx(){return this.PA}IO(){return this.FA}CO(){return this.zA}GO(){return this.BA}NO(){return this.UA}_O(){if(this._x()>=2)return"webgl2";{const t=[];return this.qA&&t.push("EXT_frag_depth"),this.ZA&&t.push("OES_standard_derivatives"),this.XA&&t.push("EXT_shader_texture_lod"),t.length>0?"webgl1:"+t.join(","):"webgl1:none"}}EO(){return this.WA}SO(){return!!this.wD}bD(){return this.wD}UI(){return this.JA}eL(){return!!this.YA}jx(){return this.VA}Px(){return this.KA}zD(t){this.tL.add(t)}BD(t){this.tL.delete(t)}LD(){return this.sL}Nx(){return this.JI}iL(t){this.Ob([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}DO(){return this.JS()}}}{const Qc=self.Cs,Jc={AO:null,LO:null,OO:null,getTime:null,RO:null};Qc.RM.kO=class{constructor(t){t=Object.assign({},Jc,t),this.jO=t.AO,this.PO=t.LO,this.FO=t.OO,this.zO=t.getTime,this.BO=t.RO,this.UO=null,this.WO=new Set}QO(t){this.WO.add(t)}JO(t){this.WO.delete(t)}PT(){this.UO=null;for(const t of this.WO)t.PT()}VO(t){return this.jO?this.jO(t):[t.Yy(),t.eg()]}nO(t){return this.PO(t)}YO(t,s){this.FO(t,s)}HO(){return this.zO()}Lp(t){this.BO(t)}qO(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.UO||this.UO.Yy()===s&&this.UO.eg()===i||(t.gI(this.UO),this.UO=null),null===this.UO&&(this.UO=t.aO(null,{width:s,height:i,ix:"nearest",ox:!1})),this.UO}}}{const Vc=self.Cs,Yc=(self.assert,self.hs.fs),Hc=Vc.Jr(Vc.Rect),qc=Vc.Jr(Vc.Rect),Zc=Vc.Jr(Vc.Rect),Xc=Vc.Jr(Vc.Rect),Kc=Yc.create(),$c=Yc.create(),tf={ZO:null,XO:null,KO:null,$O:!1},sf={tR:null,sR:!1,iR:!1,eR:!1,rR:!1,nR:!1,hR:!1};Vc.RM.oR=class{constructor(t,s){s=Object.assign({},tf,s),this.Up=t,this.aR=s.ZO,this.lR=s.XO,this.uR=s.KO,this.cR=null,this.fR=[],this.dR=[],this.pR=[],this.mR=!1,this.ET=0,this.yR=!1,this.gR=!1,this.MR=!1,this.wR=!1,this.bR=!1,this.SR=!1,this.iA=!1,this.TR=!1,this.vR=!1,this.xR=!1,this.IR=!1,this.CR=!1,this.GR=0,this.NR=[null,null,null],this._R=!!s.$O,this.ER=0,this.DR=0,this.AR=0,this.LR=0,this.OR=null,this.RR=null,this.kR=Vc.Jr(Vc.Rect),this.jR=Vc.Jr(Vc.Rect),this.PR=Vc.Jr(Vc.Rect),this.FR=Vc.Jr(Vc.Rect),this.zR=Vc.Jr(Vc.Rect),this.BR=1,this.UR=1,this.WR=0,this.QR=0,this.JR=null,this.VR=null,this.YR=0,this.HR=0,this.qR=0,this.ZR=0,this.XR=!1,this.oI=Yc.create(),this.KR=Yc.create(),this.Up.QO(this)}Vr(){this.Up.JO(this),Vc.wh(this.pR),Vc.wh(this.fR),Vc.wh(this.dR),this.OR=null,this.RR=null,this.aR=null,this.lR=null,this.uR=null}PT(){this.mR=!0,Vc.wh(this.pR),Vc.wh(this.fR),Vc.wh(this.dR)}$R(){return this.mR}tk(t,s){if(s=Object.assign({},sf,s),Vc.wh(this.pR),this.ER=0,this.DR=0,this.yR=!1,this.gR=!1,this.MR=!1,this.wR=!1,this.bR=!1,this.SR=!1,this.GR=0,this.CR=!!s.rR,this.IR=!!s.hR,this.mR=!1,Vc.xh(this.fR,t),0===t.length)return;if(s.tR){if(s.tR.length!==t.length)throw new Error("incorrect indexMap length");Vc.xh(this.dR,s.tR)}else{Vc.wh(this.dR);for(let s=0,i=t.length;s<i;++s)this.dR.push(s)}for(const s of t)this.ER+=s.yT(),this.DR+=s.gT(),s.TT()&&(this.yR=!0),s.xT()&&(this.gR=!0),s.vT()&&(this.MR=!0),s.MT()&&(this.wR=!0),s.GT()&&(this.bR=!0);this.SR=this.sk(t[0].pT());const i=this.ik(t[0],s),e=this.ek(t.at(-1),s);if(1===t.length&&!i&&!e)return void(this.xR=!0);this.xR=!1;let r=0;i&&(this.GR=1,this.pR.push(Vc.Jr(Vc.RM.oR.nk.rk,this,-1,1)),r=1);for(let s=0,n=t.length;s<n;++s)if(0!==s||i){let t=1===r?2:1;s!==n-1||e||(t=0),this.GR=Math.max(this.GR,t),this.pR.push(Vc.Jr(Vc.RM.oR.nk.hk,this,r,t,s)),r=t}else this.GR=1,this.pR.push(Vc.Jr(Vc.RM.oR.nk.ak,this,-1,1,s)),r=1;e&&this.pR.push(Vc.Jr(Vc.RM.oR.nk.lk,this,r,0))}ik(t,s){return!!(s.sR||t.wT()||s.eR&&!t.ST()||t.xT()&&!this.IR||0!==this.ER||0!==this.DR)||(t.pT().zS()?t.vT()&&(s.nR||s.rR)||t.IT()&&s.rR:t.vT()&&!this.SR&&s.nR)}ek(t,s){return!!s.iR||(t.pT().zS()?t.vT()||t.MT():(t.vT()||t.MT())&&this.uk())}sk(t){return t.tb()&&this.MR&&!this.wR}ck(t,s,i){t.tb()&&null===s&&(s=t.fk()),this.JR=s,this.OR=i.dk||null,this.RR=i.pk||null,this.ET=i.mk||0,this.BR=i.devicePixelRatio||1,this.UR=i.yk||1,this.WR=i.gk||0,this.QR="number"==typeof i.time?i.time:this.Up.HO(),this.iA=!1,t.pL(),this.yR&&this.Mk();let e=!1;if(this.wk()&&(this.bk(t,i),e=!0,this.VR=this.Up.qO(t,this.AR,this.LR),Hc.m(this.jR),Hc.bl(),t.tb()&&t.Sk(this.JR),t.Tk(this.JR.vI(),this.VR,Hc.Ka(),Hc.$a(),Hc.width(),Hc.height())),this.xR)this.vk(t,i);else if(e||this.bk(t,i),0!==this.PR.width()||0!==this.PR.height()){t.GL(),t.GS(),t.SL(),t.Ub(0),t.Qb(0),this.cR=i.xk||null,this.YR=i.Ik||0,this.HR=i.Ck||0,this.qR=i.Gk||0,this.ZR=i.Nk||0,this.XR=!!i._k,this.Ek(t),this.NR[0]=s,this.NR[1]=this.GR>=1?this.Dk():null,this.NR[2]=2===this.GR?this.Dk():null;for(const s of this.pR){const i=this.Ak(s.Lk()),e=this.Ak(s.Ok());t.tb()?s.Rk(t,i,e):s.kk(t,i,e)}t.vL(null),this.NR[1]&&this.jk(this.NR[1]),this.NR[2]&&this.jk(this.NR[2]),this.NR.fill(null),this.Pk(t),this.JR=null,this.VR=null,this.OR=null,this.RR=null,this.cR=null}}bk(t,s){const[i,e]=this.Up.VO(t);this.Fk(t,i,e),this.zk(s)}Fk(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.AR===s&&this.LR===i||this.Bk(t,s,i,0,0,this.oI,this.KR),this.AR=s,this.LR=i}Bk(t,s,i,e,r,n,h){const o=s/2+e,a=i/2+r;t.$w(n,s/i);const l=t.eb(o,a,t.zw(i),o,a,0,i);Yc.m(h,l)}zk(t){this.kR.m(t.Uk),t.Wk?this.jR.m(t.Wk):this.jR.set(0,0,this.AR,this.LR),this.PR.m(this.jR),this.PR.Mt(this.AR,this.LR);const s=this.UR*this.BR;this.jR.cl(this.ER*s,this.DR*s),this.zR.m(this.jR),this.zR.Mt(this.AR,this.LR),this.jR.Sl(0,0,this.AR,this.LR),this.FR.m(this.jR),this.FR.Mt(this.AR,this.LR)}Ek(t){if(this.TR=t.iO(),this.vR=t.MO(),this.IR)t.sO(!1),this.gR&&t.eO(!0);else{if(Hc.m(this.jR),t.zS()){const t=this.UR*this.BR;Hc.cl(Math.max(this.ER,1)*t,Math.max(this.DR,1)*t),Hc.bl(),Hc.Xr(0,0,this.AR,this.LR)}else Hc.bl();t.rO(Hc.Ka(),Hc.$a(),Hc.width(),Hc.height(),this.LR)}}Qk(t){t.SL(),this.IR||(this.vR&&t.wO(),t.sO(!1),this.gR&&t.eO(!0)),t.tb()&&t.Jk(!0)}Pk(t){t.eO(!1),this.vR&&t.gO(),t.sO(this.TR),this.IR||t.hO(),t.tb()&&t.Jk(!1),this.iA=t.mL()}Vk(){this.zR.Xr(0,0,1,1)}Ak(t){return t<0?null:this.NR[t]}Dk(){return this.Up.nO(this)}Yk(){return this.JR}jk(t){this.Up.YO(t,this)}Hk(t){return this.fR[t]}qk(t){this.cR?this.cR(this,t,()=>this.aR(t,this)):this.aR(t,this),this.xR||this.Qk(t)}Zk(t){if(this.IR)return!0;if(0!==this.YR||0!==this.HR||0!==this.qR||0!==this.ZR)return!1;const[s,i]=t.zL(t.nO());return s===this.AR&&i===this.LR}Xk(t,s){let i=this.oI,e=this.KR;if(s&&!this.Zk(t)){let s,r;i=Kc,e=$c,0!==this.qR&&0!==this.ZR?[s,r]=[this.qR,this.ZR]:[s,r]=t.zL(t.nO()),this.Bk(t,s,r,this.YR,this.HR,i,e),this.IR||t.hO()}t.oL(i),t.dL(e)}Mk(){this.Up.Lp(this)}Kk(t,s){return this.uR(this.dR[t],s)}$k(t,s){let i=this.zR,e=this.FR,r=this.PR;t.zS()&&(qc.m(i),qc.pl(1),i=qc,Zc.m(e),Zc.pl(1),e=Zc,Xc.m(r),Xc.pl(1),r=Xc),this.tj(t,s,e,r,i,1/this.AR,1/this.LR)}sj(t,s){let i=this.FR,e=this.PR,r=1/this.AR,n=1/this.LR;if(this.lR){let{ij:t,ej:s,rj:h}=this.lR(this.OR);t||(Hc.set(0,0,0,0),t=Hc),s||(s=this.AR),h||(h=this.LR),i=t,e=t,r=1/s,n=1/h}else t.zS()&&(Zc.m(i),Zc.pl(1),i=Zc,Xc.m(e),Xc.pl(1),e=Xc);let h=this.zR;t.zS()&&(h=qc,h.m(this.zR),h.pl(1)),this.tj(t,s,i,e,h,r,n),t.tb()&&this.bR&&t.nj(this.CR)}hj(t){return this.MR?t.tb()?this.wk()?this.VR:this.JR.vI():this.JR:null}tj(t,s,i,e,r,n,h){t.ZL(this.hj(t),r,i,e,this.kR,n,h,this.BR,this.UR,this.WR,this.QR),t.XL(this.Kk(s,t))}vk(t,s){const i=this.fR[0],e=t.iO(),r=i.xT();r&&(t.sO(!1),t.eO(!0),this.zR.set(0,0,1,1),this.PR.set(0,0,1,1)),t.lb(i),t.kT(this.ET),t.cO(this.JR),t.GS();let n=0,h=1;if(this.PR.set(0,0,1,1),i.IT()&&this.lR){const{ij:t,ej:s,rj:i}=this.lR(this.OR);t&&this.PR.m(t),n=Number.isFinite(s)?1/s:0,h=Number.isFinite(i)?1/i:0}else{const[s,i]=this.Up.VO(t);n=1/s,h=1/i}s.Uk?this.kR.m(s.Uk):this.kR.set(0,0,0,0),t.ZL(this.hj(t),this.zR,this.PR,this.PR,this.kR,n,h,this.BR,this.UR,this.WR,this.QR),t.XL(this.Kk(0,t)),t.tb()&&this.bR&&t.nj(this.CR),t.Ub(0),this.qk(t),r&&(t.eO(!1),t.sO(e))}wk(){return this.SR}uk(){return!this.SR}oj(){return this.MR}aj(){return!!this.xR&&!this.wk()}lj(){return this.IR}uj(){return this.OR}cj(){return this.RR}fj(){return this.ET}dj(){return this.XR}mL(){return this.iA}pj(){return this.jR}mj(){return this.FR}yj(){return this._R}async gj(t,s,i){}}}self.Cs.RM.oR.nk=class{constructor(t,s,i,e=-1){this.Mj=t,this.wj=s,this.bj=i,this.NM=e}Sj(){return this.Mj}Lk(){return this.wj}Ok(){return this.bj}Tj(){return this.NM}JC(){return this.Sj().Hk(this.Tj())}kk(t,s,i){}Rk(t,s,i){}};{const ef=self.Cs;ef.RM.oR.nk.rk=class extends ef.RM.oR.nk{constructor(t,s,i,e){super(t,s,i,e)}kk(t,s,i){const e=this.Sj();t.GL(),t.GS(),t.ab(),t.cO(i,e.dj()),t.KL(0,0,0,0),e.qk(t),e.Vk()}Rk(t,s,i){const e=this.Sj();t.GL(),t.GS(),t.ab(),t.cO(i,!1),t.KL(0,0,0,0),e.qk(t),e.Vk()}}}{const rf=self.Cs,nf=rf.Jr(rf.Rect),hf=rf.Jr(rf.Nl);rf.RM.oR.nk.lk=class extends rf.RM.oR.nk{constructor(t,s,i,e){super(t,s,i,e)}kk(t,s,i){const e=this.Sj();t.ab(),t.cO(i),e.Xk(t,!0),t.kT(e.fj()),t.vL(s.vI()),hf.ql(e.pj()),nf.m(e.mj()),nf.pl(1),t.sS(hf,nf),e.yj()&&t.pO(s)}Rk(t,s,i){const e=this.Sj();t.ab(),t.cO(i,!1),e.Zk(t)?hf.ql(e.mj()):(t.Jk(!1),e.Xk(t,!0),hf.ql(e.pj())),t.vj(null),t.kT(e.fj()),t.vL(s.vI()),e.lj()?t.FL():t.sS(hf,e.mj())}}}{const of=self.Cs;of.RM.oR.nk.ak=class extends of.RM.oR.nk{constructor(t,s,i,e){super(t,s,i,e)}kk(t,s,i){const e=this.Sj();t.cO(i,e.dj()),t.KL(0,0,0,0),t.DL(),t.lb(this.JC()),e.sj(t,this.Tj()),e.qk(t),e.Vk()}Rk(t,s,i){const e=this.Sj();t.cO(i,!1),t.KL(0,0,0,0),t.DL(),t.lb(this.JC()),e.sj(t,this.Tj()),e.qk(t),e.Vk()}}}{const af=self.Cs,lf=af.Jr(af.Rect),uf=af.Jr(af.Nl);af.RM.oR.nk.hk=class extends af.RM.oR.nk{constructor(t,s,i,e){super(t,s,i,e)}kk(t,s,i){const e=this.Sj();t.cO(i);const r=0===this.Ok();r?t.kT(e.fj()):(t.KL(0,0,0,0),t.DL()),t.lb(this.JC()),e.$k(t,this.Tj()),t.vL(s.vI()),e.Xk(t,r),uf.ql(e.pj()),lf.m(e.mj()),lf.pl(1),t.sS(uf,lf),e.yj()&&t.pO(s)}Rk(t,s,i){const e=this.Sj();t.cO(i,!1),0===this.Ok()?(t.kT(e.fj()),t.vj(null),e.Zk(t)?uf.ql(e.mj()):(t.Jk(!1),e.Xk(t,!0),uf.ql(e.pj()))):(t.KL(0,0,0,0),t.DL(),uf.ql(e.mj())),t.lb(this.JC()),e.$k(t,this.Tj()),t.vL(s.vI()),e.lj()?t.FL():t.sS(uf,e.mj())}}}{let cf=function(t,s){const i=t[0]-s[0];return 0!==i?i:t[1]-s[1]};0;const ff=self.Cs,df=self.js;let pf=null;const mf=new Set,yf=[],gf=[];let Mf=!1,wf=!1,bf=!1;const Sf=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.xj=class{constructor(t){pf=t,Object.defineProperties(this,{Ij:{value:pf.Gj().Cj(),writable:!1},Nj:{value:pf.Ej()._j(),writable:!1},Dj:{value:{},writable:!1},Aj:{value:{},writable:!1},Lj:{value:pf.Oj(),writable:!1},Rj:{value:pf.kj(),writable:!1},jj:{value:pf.Pj(),writable:!1},Fj:{value:pf.zj(),writable:!1},Bj:{value:new Date(pf.Uj()),writable:!1},storage:{value:new self.Wj(pf),writable:!1},Qj:{value:pf.Jj(),writable:!1},Vj:{value:pf.Yj(),writable:!1},Hj:{value:pf.qj(),writable:!1},ix:{value:pf.Zj(),writable:!1},Xj:{value:pf.Kj(),writable:!1},$j:{value:new self.tP(t),writable:!1},sP:{value:new self.iP(t),writable:!1}}),pf.eP().addEventListener("keydown",t=>{mf.has(t.key)?t.stopPropagation():mf.add(t.key)}),pf.eP().addEventListener("keyup",t=>mf.delete(t.key)),pf.Mf().addEventListener("window-blur",()=>mf.clear()),pf.Jj()&&(self.alert=t=>(Mf||(Mf=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}rP(t){Object.defineProperties(this.Dj,t)}nP(t){Object.defineProperties(this.Aj,t)}addEventListener(t,s){pf.eP().addEventListener(t,s)}removeEventListener(t,s){pf.eP().removeEventListener(t,s)}hP(t,...s){df.le(t);const i=pf.oP(),e=i.aP(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e.Cu())return e.lP();if(s.length<e.uP())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.uP()} expected)`);const r=e.cP();let n=r.fP();const h=i.dP();if(h){n=n.slice(0);const t=new Set(n);for(const s of h.fP())t.has(s)||(n.push(s),t.add(s));for(const s of i.pP())t.has(s)||(n.push(s),t.add(s))}return r.mP(n,e.yP(),e.gP(),e.lP(),...s)}MP(t){const s=pf.bP().wP();if(!s)throw new Error("not in a function which returns a value");switch(s.SP()){case 1:"number"==typeof t&&s.TP(t);break;case 2:"string"==typeof t&&s.TP(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.TP(t)}}signal(t){df.le(t),pf.oP().vP(t)}xP(t){return df.le(t),pf.oP().IP(t)}CP(){return[pf.Yj(),pf.qj()]}get GP(){return pf.NP()}get _P(){return pf.EP()}get DP(){return pf.AP()}get LP(){return pf.OP()}get RP(){return pf.kP()}get jP(){return pf.PP()}get FP(){return pf.zP()}set FP(t){df.ne(t),pf.BP(t)}get UP(){return wf||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),wf=!0),pf.WP()}get framesPerSecond(){return pf.WP()}get QP(){return pf.JP()}get VP(){return pf.YP()}get HP(){return pf.qP()}get ZP(){return pf.XP()}set ZP(t){if(!Sf.has(t))throw new Error("invalid framerate mode");pf.KP(t)}get $P(){return pf.tF()}set $P(t){df.ne(t),pf.sF(t)}get iF(){return pf.eF()}set iF(t){pf.rF(t)}get nF(){return pf.Gj().hF()}get oF(){return pf.Gj().aF()}random(){return pf.lF()}get layout(){const t=pf.uF();if(!t)throw new Error("no layout is running - make sure a layout is loaded before accessing");return t.cF()}fF(t){const s=pf.dF();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.pF(t),!i)throw new Error("invalid layout");return i.cF()}mF(){return pf.dF().yF().map(t=>t.cF())}gF(t){const s=pf.dF();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.pF(t),!i)throw new Error("invalid layout");s.MF()||s.wF(i)}get keyboard(){const t=pf.bF().keyboard;if(!t)throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first");return t}get SF(){const t=pf.bF().SF;if(!t)throw new Error("runtime.mouse used but Mouse object missing - add it to your project first");return t}get TF(){const t=pf.bF().TF;if(!t)throw new Error("runtime.touch used but Touch object missing - add it to your project first");return t}get vF(){const t=pf.bF().vF;if(!t)throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first");return t}get VG(){return pf.IF().xF()}CF(t,s){df.le(t),df.le(s),pf.GF(t,s)}NF(t){df.ne(t);const s=pf._F(t);return s?s.EF():null}DF(t,s){df.De(s);const i=pf.AF();for(const s of t){const t=pf.LF(s),i=t.OF();yf.push([i.RF().Tj(),i.kF()]),gf.push(t)}if(0===yf.length)return;yf.sort(cf),gf.sort((t,i)=>s(t.EF(),i.EF()));let e=!1;for(let t=0,s=yf.length;t<s;++t){const s=gf[t],r=i.jF(yf[t][0]),n=yf[t][1],h=r.PF();h[n]!==s&&(h[n]=s,s.OF().FF(r,!0),r.zF(s),e=!0)}e&&pf.BF(),ff.wh(yf),ff.wh(gf)}async UF(t,s){bf||(console.warn("IRuntime.createWorker() is deprecated. All modern browsers now support nested workers so this method is no longer needed."),bf=!0);const i=new MessageChannel,e=i.port1,r=i.port2;return await pf.WF("runtime","script-create-worker",{url:t,opts:s,port2:r},[r]),e}alert(t){return pf.WF("runtime","alert",{message:t+(pf.Jj()?" [via Web Worker]":"")})}QF(t){return df.ne(t),pf.JF(t)}VF(t){pf.YF(t)}async HF(t,s,i){df.ue(t),df.se(s),df.Fe(i,DOMRect),i||(i=new DOMRect(0,0,0,0));const e=pf.IF();if(!e)return;pf.BF();const r=await e.qF(t||"image/png",s,i.x,i.y,i.width,i.height);return await pf.ZF(ff.tz.$F.KF.XF,null),r}}}{const Tf=self.Cs;self.js;let vf=null;self.sz=class{constructor(t){vf=t,Object.defineProperties(this,{iz:{value:!0,writable:!1}})}ez(t){const s=self.nz.rz(t);if(!s)throw new Error("invalid IImageInfo");s.hz(vf.oz())}az(t){return vf.so(t)}lz(t){return vf.io(t)}uz(t){return vf.eo(t)}cz(t){return vf.ro(t)}fz(t){return vf.dz(t)}pz(t){return"flat"===vf.mz()&&Tf.Xh(t)&&(t=t.toLowerCase()),vf.yz(t)}get gz(){return vf.Mz()}async wz(t,s){throw new Error("decodeWebMOpus() is no longer supported - use Web Audio's decodeAudioData() directly as all supported platforms now support WebM Opus")}bz(...t){return vf.Sz(...t)}Tz(t){return vf.vz(t)}xz(t){return vf.Iz(t)}}}{const xf=self.Cs,If=self.js;let Cf=null;self.Cz=class{constructor(t){Cf=t,Object.defineProperties(this,{runtime:{value:Cf.oz(),writable:!1}})}Gz(t,s){const i=Cf.oz(),e=i.LF(t),r=i.LF(s);return Cf.Nz(e,r)}_z(t,s){const i=Cf.oz(),e=i.LF(t);for(const t of s){const s=i.LF(t);if(Cf.Nz(e,s))return t}return null}Ez(t){const s=Cf.oz().LF(t),i=Cf.Dz(s);return i?i.EF():null}Az(t,s){if(If.ne(t),If.ne(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");Cf.Lz(t,s)}Oz(){return Cf.Rz()}kz(t,s){const i=Cf.oz();let e;e=Array.isArray(t)?t.map(t=>i.jz(t)):[i.jz(t)];const r=xf.Rect.Za(s),n=[];return Cf.Pz(null,e,r,n),n.map(t=>t.EF())}}}{const Gf=self.Cs;self.js;let Nf=null;const _f=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),Ef=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),Df=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.tP=class{constructor(t){Nf=t,Object.defineProperties(this,{Fz:{value:Gf.Xs.hi,writable:!1},os:{value:_f.get(Gf.Xs.Ks)||"unknown",writable:!1},zz:{value:Gf.Xs.$s,writable:!1},browser:{value:Ef.get(Gf.Xs.ti)||"unknown",writable:!1},Bz:{value:Gf.Xs.si,writable:!1},Uz:{value:Df.get(Gf.Xs.ei)||"unknown",writable:!1}})}get Wz(){let t=Nf.Qz();return Nf.Jz()?t="nwjs":Nf.Vz()?t="windows-webview2":"cordova"===t?t="Android"===Gf.Xs.Ks?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get VG(){return Nf.IF().Yz()}get qz(){return Nf.IF().Zz()}get Xz(){return Nf.IF().Kz()}get $z(){return Nf.IF().tB()}get sB(){return Nf.IF().iB()}get eB(){return Nf.IF().rB()}get nB(){return Nf.IF().hB()}get oB(){return Nf.IF().aB()}get devicePixelRatio(){return Nf.lB()}}}{self.Cs;const Af=self.js;self.Wj=class{constructor(t){this.uB=t.cB()}getItem(t){return Af.le(t),this.uB.getItem(t)}setItem(t,s){return Af.le(t),this.uB.setItem(t,s)}removeItem(t){return Af.le(t),this.uB.removeItem(t)}clear(){return this.uB.clear()}keys(){return this.uB.keys()}}}{const Lf=self.Cs,Of=(self.js,Lf.Gs());self.fB=class{#t;constructor(){const t=Lf.pB.dB(Of);this.#t=t,Object.defineProperties(this,{runtime:{value:t.oz().mB(),writable:!1},id:{value:t.yB(),writable:!1},gB:{value:t.MB(),writable:!1},wB:{value:t.bB(),writable:!1},SB:{value:t.TB(),writable:!1},vB:{value:t.xB(),writable:!1},IB:{value:t.CB(),writable:!1},GB:{value:t.NB(),writable:!1},_B:{value:t.EB(),writable:!1},DB:{value:t.AB(),writable:!1}}),t.oz().LB(this,t)}static OB(t){if(!t)return null;const s=Lf.pB.RB(t);return s?s.kB():null}jB(){return this.#t.zB().PB()}BB(){return this.#t.UB().EF()}}}{const Rf=globalThis.Cs,kf=globalThis.js,jf=Rf.Gs();globalThis.WB=class{#t;constructor(){const t=Rf.pB.dB(jf);this.#t=t,Object.defineProperties(this,{name:{value:t._c(),writable:!1},runtime:{value:t.oz().mB(),writable:!1},QB:{value:t.JB().kB(),writable:!1}}),t.oz().LB(this,t)}addEventListener(t,s){kf.le(t),kf.De(s),this.#t.eP().addEventListener(t,s)}removeEventListener(t,s){kf.le(t),kf.De(s),this.#t.eP().removeEventListener(t,s)}VB(){return[...this.YB()]}HB(){return Rf.Fh(this.YB())}qB(){return[...this.ZB()]}XB(){return Rf.Fh(this.ZB())}KB(t){const s=this.#t,i=s.oz().$B(t),e=s.tU(i);return e?e.EF():null}*YB(){for(const t of this.#t.sU())yield t.EF()}*ZB(){for(const t of this.#t.eU().iU())yield t.EF()}}}{const Pf=globalThis.Cs,Ff=globalThis.js,zf=Pf.Gs();globalThis.rU=class extends globalThis.WB{#t;constructor(){super();const t=Pf.pB.dB(zf);this.#t=t}nU(t){Ff.De(t);const s=this.#t;if(s.hU()>0)throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.oU(t)}Ii(t,s,i,e,r){if(Ff.te(s),Ff.te(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const n=this.#t,h=n.oz(),o=h.uF().RF(t);if(!o)throw new Error("invalid layer");const a=h.aU(n,o,s,i,e,r);e&&o.lU(a);const l=h.oP();return l.uU(!0),a.cU(),l.uU(!1),l.fU()||h.dF().dU()||h.pU(),a.EF()}mU(){return this.#t.yU().map(t=>t.PB())}*gU(){for(const t of this.#t.yU())yield t.PB()}MU(t){return Ff.Pe(t,globalThis.wU),t.bU(this)}}}{const Bf=globalThis.Cs,Uf=globalThis.js,Wf=globalThis.rU,Qf=Bf.Gs();globalThis.wU=class extends globalThis.WB{#t;constructor(){super();const t=Bf.pB.dB(Qf);this.#t=t}SU(){return this.#t.TU().map(t=>t.PB())}*vU(){for(const t of this.#t.TU())yield t.PB()}bU(t){Uf.Pe(t,Wf);const s=this.#t,i=s.oz().jz(t);return s.xU(i)}}}{self.Cs;const Jf=self.js,Vf=["above","below","top-sublayer","bottom-sublayer"];self.IU=class{#t;constructor(t){this.#t=t;const s=[],i=t.CU(),e=i.GU().length;for(let t=0;t<e;++t)s.push(new self.NU(i,t));Object.defineProperties(this,{runtime:{value:t.oz().mB(),writable:!1},name:{value:t._c(),writable:!1},index:{value:t.Tj(),writable:!1},effects:{value:s,writable:!1}})}addEventListener(t,s){Jf.le(t),Jf.De(s),this.#t.eP().addEventListener(t,s)}removeEventListener(t,s){Jf.le(t),Jf.De(s),this.#t.eP().removeEventListener(t,s)}get width(){return this.#t.Yy()}set width(t){Jf.ne(t),this.#t.tg(t)}get height(){return this.#t.eg()}set height(t){Jf.ne(t),this.#t.Hy(t)}_U(t,s){Jf.ne(t),Jf.ne(s);const i=this.#t;i.tg(t),i.Hy(s)}getSize(){const t=this.#t;return[t.Yy(),t.eg()]}set scale(t){Jf.ne(t),this.#t.EU(t)}get scale(){return this.#t.DU()}set angle(t){Jf.ne(t),this.#t.AU(t)}get angle(){return this.#t.LU()}set scrollX(t){Jf.te(t),this.#t.OU(t)}get scrollX(){return this.#t.RU()}set scrollY(t){Jf.te(t),this.#t.kU(t)}get scrollY(){return this.#t.jU()}scrollTo(t,s){Jf.te(t),Jf.te(s);const i=this.#t;i.OU(t),i.kU(s)}PU(){const t=this.#t;return[t.RU(),t.jU()]}get FU(){return this.#t.zU()}BU(t){const s=this.#t;let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return i=s.RF(t),i?i.UU():null}WU(){return this.#t.QU().map(t=>t.UU())}*JU(){for(const t of this.#t.JU())yield t.UU()}VU(t,s,i){const e=this.#t,r=self.YU;Jf.le(t),Jf.Fe(s,r);const n=s?e.oz().HU(s):null,h=Vf.indexOf(i);if(h<0)throw new Error("invalid location");e.qU(t,n,h)}ZU(t,s,i){const e=this.#t,r=e.oz(),n=self.YU;Jf.Pe(t,n);const h=r.HU(t);if(!h)throw new Error("invalid layer");Jf.Fe(s,n);const o=s?r.HU(s):null,a=Vf.indexOf(i);if(a<0)throw new Error("invalid location");e.XU(h,o,a)}KU(t){const s=this.#t,i=self.YU;Jf.Pe(t,i);const e=s.oz().HU(t);if(!e)throw new Error("invalid layer");const r=e.oz();s.$U(e),r.oP().fU()||r.pU()}tW(){const t=this.#t,s=t.oz();t.sW(),s.oP().fU()||s.pU()}iW(t,s){Jf.ne(t),Jf.ne(s),this.#t.eW(t,s)}rW(){return this.#t.nW()}set W(t){Jf.le(t);const s=this.#t;if("perspective"===t)s.hW();else{if("orthographic"!==t)throw new Error("invalid projection");s.oW()}}get W(){return this.#t.aW()?"orthographic":"perspective"}}}{const Yf=self.Cs,Hf=self.js,qf=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Zf=new Map([...qf.entries()].map(t=>[t[1],t[0]])),Xf=new Set(["2d","3d"]),Kf=Yf.Jr(Yf.vo);self.YU=class{#t;constructor(t){this.#t=t;const s=[],i=t.CU(),e=i.GU().length;for(let t=0;t<e;++t)s.push(new self.NU(i,t));Object.defineProperties(this,{runtime:{value:t.oz().mB(),writable:!1},name:{value:t._c(),writable:!1},layout:{value:t.pF().cF(),writable:!1},effects:{value:s,writable:!1}}),t.oz().LB(this,t)}addEventListener(t,s){this.#t.eP().addEventListener(t,s)}removeEventListener(t,s){this.#t.eP().removeEventListener(t,s)}get lW(){const t=this.#t.uW();return t?t.UU():null}*cW(){for(const t of this.#t.cW())yield t.UU()}*fW(){for(const t of this.#t.dW())yield t.UU()}*pW(){for(const t of this.#t.dW())for(const s of t.mW())yield s.UU()}get index(){return this.#t.Tj()}get isVisible(){return this.#t.yW()}set isVisible(t){this.#t.gW(t)}get MW(){return this.#t.wW()}get bW(){return this.#t.SW()}set bW(t){this.#t.TW(t)}get vW(){return this.#t.xW()}set vW(t){this.#t.IW(!!t)}get GW(){return this.#t.NW()}get opacity(){return this.#t.ML()}set opacity(t){t=Yf.Xr(+t,0,1),isNaN(t)||this.#t.bL(t)}set scale(t){Hf.ne(t),this.#t._W(t)}get scale(){return this.#t.EW()}set DW(t){Hf.ne(t),this.#t.AW(t)}get DW(){return this.#t.LW()}set angle(t){Hf.ne(t),this.#t.AU(t)}get angle(){return this.#t.OW()}set RW(t){Hf.ne(t),this.#t.kW(t)}get RW(){return this.#t.jW()}set PW(t){Hf.ne(t),this.#t.FW(t)}get PW(){return this.#t.zW()}set BW(t){Hf.ne(t),this.#t.$T(t)}get BW(){return this.#t.KT()}set renderingMode(t){if(!Xf.has(t))throw TypeError("invalid rendering mode");this.#t.UW("3d"===t)}get renderingMode(){return this.#t.WW()?"3d":"2d"}set QW(t){this.#t.JW(t)}get QW(){return this.#t.VW()}set YW(t){this.#t.HW(t)}get YW(){return this.#t.qW()}set mk(t){Hf.le(t);const s=qf.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");this.#t.kT(s)}get mk(){return Zf.get(this.#t.ZW())}set backgroundColor(t){if(Hf.xe(t),t.length<3)throw new Error("expected 3 elements");Kf._o(t[0],t[1],t[2]);const s=this.#t,i=s.XW();i.Jo(Kf)||(i.ko(Kf),s.oz().BF())}get backgroundColor(){const t=this.#t.XW();return[t.jo(),t.Po(),t.Fo()]}set scrollX(t){Hf.te(t);const s=this.#t;s.KW(!0),s.OU(t)}get scrollX(){return this.#t.RU()}set scrollY(t){Hf.te(t);const s=this.#t;s.KW(!0),s.kU(t)}get scrollY(){return this.#t.jU()}scrollTo(t,s){Hf.te(t),Hf.te(s);const i=this.#t;i.KW(!0),i.OU(t),i.kU(s)}PU(){const t=this.#t;return[t.RU(),t.jU()]}$W(){this.#t.KW(!1)}getViewport(){return this.#t.tQ().il()}sQ(t,s,i=0){Hf.te(t),Hf.te(s),Hf.te(i);const e=this.#t,r=e.oz();return e.iQ(t-r.Kz(),s-r.tB(),i)}eQ(t,s,i=0){Hf.te(t),Hf.te(s),Hf.te(i);const e=this.#t,r=e.oz(),[n,h]=e.rQ(t,s,i);return[n+r.Kz(),h+r.tB()]}nQ(t,s,i=0){return Hf.te(t),Hf.te(s),Hf.te(i),this.#t.hQ(t,s,i)}oQ(t,s,i=0){return Hf.te(t),Hf.te(s),Hf.te(i),this.#t.aQ(t,s,i)}get lQ(){return this.#t.uQ()}}}{let $f=function(t){let s=id.get(t);return s||(s=td.Jr(td.Event.Mf),id.set(t,s),s)};0;const td=self.Cs,sd=self.js,id=new WeakMap,ed=td.Gs();self.cQ=class{#t;constructor(){const t=td.pB.dB(ed);this.#t=t;const s={runtime:{value:t.oz().mB(),writable:!1},objectType:{value:t.fQ().PB(),writable:!1},QB:{value:t.JB().kB(),writable:!1}};t.dQ(s),t.pQ(s),Object.defineProperties(this,s),t.oz().LB(this,t)}static mQ(){return td.pB.yQ()}gQ(){const t=id.get(this);t&&(t.Vr(),id.delete(this))}addEventListener(t,s,i){sd.le(t),sd.De(s),$f(this).addEventListener(t,s,i)}removeEventListener(t,s,i){sd.le(t),sd.De(s),$f(this).removeEventListener(t,s,i)}dispatchEvent(t){$f(this).dispatchEvent(t)}destroy(){const t=this.#t,s=t.oz();s.MQ(t),s.oP().fU()||s.dF().dU()||s.oP().wQ()||s.pU()}bQ(){const t=this.#t.SQ();return t?t.map(t=>t.EF()):[]}*TQ(){const t=this.#t;if(t.vQ())for(const s of t.xQ())yield s.EF()}get uid(){return this.#t.IQ()}get CQ(){return this.#t.GQ()}get NQ(){return this.#t._Q()}set FP(t){sd.ne(t),this.#t.BP(t)}get FP(){return this.#t.EQ()}DQ(){this.#t.AQ()}get _P(){const t=this.#t;return t.oz().EP(t)}LQ(...t){sd.xe(t);const s=new Set(t),i=this.#t.OQ();return s.isSubsetOf(i)}RQ(t){sd.Pe(t,Set),this.#t.kQ(t)}jQ(){return new Set(this.#t.OQ())}signal(t){sd.le(t);const s=this.#t;s.oz().oP().PQ(s,t)}xP(t){sd.le(t);const s=this.#t;return s.oz().oP().FQ(s,t)}}}{const rd=self.Cs,nd=self.js,hd=rd.Gs();self.zQ=class extends self.cQ{#t;#s=!1;#i=null;#e=!1;#r=null;#n;#h;constructor(t){super(),this.#t=rd.pB.dB(hd),this.#s=!1,this.#i=null,this.#e=!1,this.#r=null,this.#n=t?.BQ,this.#h=t?.UQ}gQ(){this.WQ(!1),this.QQ(!1),super.gQ()}JQ(){return rd.pB.VQ()}YQ(t){const s=this.#t;s.oz().HQ(t,s)}qQ(t){const s=this.#t;return s.oz().ZF(t,s)}ZQ(t,s){if(nd.le(t),nd.De(s),!this.#n)throw new Error("no DOM component id set");this.#t.oz().XQ(this.#n,t,s)}KQ(t){nd.xe(t);for(const[s,i]of t)this.ZQ(s,i)}$Q(t,s){if(nd.le(t),!this.#n)throw new Error("no DOM component id set");this.#t.oz().Bc(this.#n,t,s)}tJ(t,s){if(nd.le(t),!this.#n)throw new Error("no DOM component id set");return this.#t.oz().WF(this.#n,t,s)}sJ(t,s){if(!this.#t.oz().Jj())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#n,handler:t,data:s,responseId:null});this.$Q(t,s)}WQ(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=this.#t.oz();if(t){if(!this.#i)if(this.#t.oz().iJ()){const t=globalThis.eJ,s=this.QB;this.#i=()=>{const i=performance.now();this.rJ(),t.nJ(s,performance.now()-i)}}else this.#i=()=>this.rJ();s.Mf().addEventListener("tick",this.#i)}else s.Mf().removeEventListener("tick",this.#i)}hJ(){return this.#s}rJ(){}QQ(t){if(t=!!t,this.#e===t)return;this.#e=t;const s=this.#t.oz();if(t){if(!this.#r)if(this.#t.oz().iJ()){const t=globalThis.eJ,s=this.QB;this.#r=()=>{const i=performance.now();this.oJ(),t.nJ(s,performance.now()-i)}}else this.#r=()=>this.oJ();s.Mf().addEventListener("tick2",this.#r)}else s.Mf().removeEventListener("tick2",this.#r)}aJ(){return this.#e}oJ(){}lJ(){return[]}uJ(){return null}cJ(t){}fJ(){if(!this.#h)throw new Error("no wrapper component id set");return this.#t.oz().dJ(this.#h)}pJ(t,s){if(nd.le(t),nd.De(s),!this.#h)throw new Error("no wrapper component id set");this.#t.oz().mJ(this.#h,t,s)}yJ(t){nd.xe(t);for(const[s,i]of t)this.pJ(s,i)}gJ(t,s){if(!this.#h)throw new Error("no wrapper component id set");this.runtime.sP.MJ(this.#h,t,s)}wJ(t,s){if(!this.#h)throw new Error("no wrapper component id set");return this.runtime.sP.bJ(this.#h,t,s)}}}{let od=function(t){return class s extends t{#t;#s;constructor(t){super(t);const s=ad.pB.dB(pd),i=s.OF();this.#t=s,this.#s=i,dd.set(this,s);const e=[],r=i.SJ();if(r){const t=i.fQ().CU().GU().length;for(let s=0;s<t;++s)e.push(new self.NU(r,s))}const n={effects:{value:e,writable:!1}};Object.defineProperties(this,n)}get layout(){return this.#s.pF().cF()}get TJ(){return this.#s.RF().UU()}get x(){return this.#s.YT()}set x(t){t=+t;const s=this.#s;isNaN(t)||s.YT()===t||(s.HT(t),s.vJ())}get y(){return this.#s.ZT()}set y(t){t=+t;const s=this.#s;isNaN(t)||s.ZT()===t||(s.XT(t),s.vJ())}setPosition(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.YT()===t&&i.ZT()===s||(i.xJ(t,s),i.vJ())}IJ(){const t=this.#s;return[t.YT(),t.ZT()]}offsetPosition(t,s){if(t=+t,s=+s,isNaN(t)||isNaN(s)||0===t&&0===s)return;const i=this.#s;i.CJ(t,s),i.vJ()}set GJ(t){t=+t;const s=this.#s;isNaN(t)||s.NJ()===t||(s._J(t),s.vJ())}get GJ(){return this.#s.NJ()}set EJ(t){t=+t;const s=this.#s;isNaN(t)||s.DJ()===t||(s.AJ(t),s.vJ())}get EJ(){return this.#s.DJ()}LJ(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.NJ()===t&&i.DJ()===s||(i._J(t),i.AJ(s),i.vJ())}OJ(){const t=this.#s;return[t.NJ(),t.DJ()]}get BW(){return this.#s.KT()}set BW(t){t=+t;const s=this.#t,i=this.#s;isNaN(t)||i.KT()===t||(i.$T(t),s.oz().BF())}get RJ(){return this.#s.kJ()}get width(){return this.#s.Yy()}set width(t){t=+t;const s=this.#s;isNaN(t)||s.Yy()===t||(s.tg(t),s.vJ())}get height(){return this.#s.eg()}set height(t){t=+t;const s=this.#s;isNaN(t)||s.eg()===t||(s.Hy(t),s.vJ())}_U(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.Yy()===t&&i.eg()===s||(i.FE(t,s),i.vJ())}getSize(){const t=this.#s;return[t.Yy(),t.eg()]}get angle(){return this.#s.LU()}set angle(t){t=ad.Kr(+t);const s=this.#s;isNaN(t)||s.LU()===t||(s.AU(t),s.vJ())}get jJ(){return ad.tn(this.angle)}set jJ(t){this.angle=ad.$r(t)}Kl(t){return t?(this.#s.PJ(cd,fd,!1),cd.il()):this.#s.FJ().il()}zJ(t){return t?(this.#s.PJ(cd,fd,!1),fd.Vl()):this.#s.BJ().Vl()}UJ(){return this.#s.WJ()}get isVisible(){return this.#s.wW()}set isVisible(t){t=!!t;const s=this.#t,i=this.#s;i.wW()!==t&&(i.gW(t),s.oz().BF())}get opacity(){return this.#s.ML()}set opacity(t){t=ad.Xr(+t,0,1);const s=this.#t,i=this.#s;isNaN(t)||i.ML()===t||(i.bL(t),s.oz().BF())}set QJ(t){if(ld.xe(t),t.length<3)throw new Error("expected 3 elements");gd._o(t[0],t[1],t[2]);const s=this.#t,i=this.#s;i.JJ().Jo(gd)||(i.VJ(gd),s.oz().BF())}get QJ(){const t=this.#s.JJ();return[t.jo(),t.Po(),t.Fo()]}set mk(t){ld.le(t);const s=md.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#t;this.#s.kT(s),i.oz().BF()}get mk(){return yd.get(this.#s.ZW())}YJ(){this.#s.HJ()}qJ(){this.#s.ZJ()}XJ(t){ld.Pe(t,ud);const s=this.#t,i=s.oz().HU(t);if(!i)throw new Error("invalid layer");s.OF().KJ(i)}$J(t,i){ld.Pe(t,s),this.#s.tV(dd.get(t),i)}get zIndex(){return this.#s.kF()}get sV(){return this.#s.iV()}set sV(t){this.#s.eV(!!t)}xl(t,s){return ld.te(t),ld.te(s),this.#s.rV(+t,+s)}Gz(t){ld.Pe(t,s);const i=this.#t,e=dd.get(t);return i.oz().Ej().Nz(i,e)}Ez(){const t=this.#t,s=t.oz().Ej().Dz(t);return s?s.EF():null}getParent(){const t=this.#t.nV();return t?t.EF():null}hV(){const t=this.#t.oV();return t?t.EF():null}*aV(){for(const t of this.#t.aV())yield t.EF()}lV(){return this.#t.uV()}cV(t){const s=this.#t.fV(t);return s?s.EF():null}*children(){for(const t of this.#t.children())yield t.EF()}*dV(){for(const t of this.#t.dV())yield t.EF()}pV(t,i){ld.Pe(t,s),ld.ge(i),i||(i={});const e=this.#t,r=dd.get(t);e.mV(r,i)}removeChild(t){ld.Pe(t,s);const i=this.#t,e=dd.get(t);i.yV(e)}gV(){const t=this.#t;t.MV()&&t.nV().yV(t)}wV(){const t=this.#s;return{bV:t.SV(),TV:t.vV(),xV:t.IV(),CV:t.GV(),NV:t._V(),EV:t.DV(),AV:t.LV(),OV:t.RV(),kV:t.jV()}}PV(t,s){ld.ne(t),ld.ne(s),this.#s.FV(t,s)}zV(){const t=this.#s;t.BV(),t.vJ()}UV(t,s,i){ld.ne(t),ld.ne(s),ld.ye(i);const e=this.#s;e.WV(t,s,i)&&e.vJ()}QV(t,s){let i=NaN,e=NaN,r=NaN,n=NaN,h=NaN;const o=this.#s;if(o.JV()){const a=o.VV().jv(t,s);null!==a&&(i=a.YT(),e=a.ZT(),r=a.KT(),n=a.tv(),h=a.ev())}return{x:i,y:e,BW:r,YV:n,HV:h}}qV(){const t=this.#s;if(!t.JV())return[0,0];const s=t.VV();return[s.Cv(),s.Gv()]}}};0;const ad=self.Cs,ld=self.js,ud=(self.cQ,self.YU),cd=ad.Jr(ad.Rect),fd=ad.Jr(ad.Nl),dd=new WeakMap,pd=ad.Gs(),md=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),yd=new Map([...md.entries()].map(t=>[t[1],t[0]])),gd=ad.Jr(ad.vo);self.ZV=od(self.cQ),self.XV=od(self.zQ)}{self.Cs;const Md=self.js;self.KV=class extends self.ZV{#t;constructor(){super(),this.#t=self.cQ.mQ()}$V(){return this.#t.sY().tY()}focus(){this.#t.sY().iY()}blur(){this.#t.sY().eY()}rY(t,s){Md.le(t),this.#t.sY().nY(t,s)}}}{let wd=function(t){let s=Td.get(t);return s||(s=bd.Jr(bd.Event.Mf),Td.set(t,s),s)};0;const bd=self.Cs,Sd=self.js,Td=new WeakMap,vd=bd.Gs();self.hY=class{#t;constructor(){const t=bd.pB.dB(vd);this.#t=t;const s={runtime:{value:t.oz().mB(),writable:!1},behavior:{value:t.aY().oY(),writable:!1},lY:{value:t.cY().uY(),writable:!1}};Object.defineProperties(this,s),t.oz().LB(this,t)}static mQ(){return bd.pB.yQ()}get fY(){return this.#t.dY().EF()}gQ(){const t=Td.get(this);t&&(t.Vr(),Td.delete(this))}addEventListener(t,s,i){Sd.le(t),Sd.De(s),wd(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Sd.le(t),Sd.De(s),wd(this).removeEventListener(t,s,i)}dispatchEvent(t){wd(this).dispatchEvent(t)}}}{const xd=self.Cs,Id=(self.js,xd.Gs());self.pY=class{constructor(){const t=xd.pB.dB(Id),s={runtime:{value:t.oz().mB(),writable:!1},behavior:{value:t.aY().oY(),writable:!1},name:{value:t._c(),writable:!1}};Object.defineProperties(this,s)}}}{const Cd=self.Cs,Gd=(self.js,Cd.Gs());self.mY=class{#s;constructor(){const t=Cd.pB.dB(Gd);this.#s=t;const s={runtime:{value:t.oz().mB(),writable:!1},id:{value:t.yB(),writable:!1}};Object.defineProperties(this,s),t.oz().LB(this,t)}VB(){return this.#s.iU().map(t=>t.EF())}static OB(t){if(!t)return null;const s=Cd.pB.yY(t);return s?s.oY():null}}}{const Nd=self.Cs,_d=self.js,Ed=Nd.Jr(Nd.vo);self.NU=class{#t;constructor(t,s){this.#t=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){return this.#t.GU()[this.index]._c()}get isActive(){return this.#t.gY(this.index)}set isActive(t){t=!!t;const s=this.#t;s.gY(this.index)!==t&&(s.MY(this.index,t),s.wY(),s.oz().BF())}setParameter(t,s){_d.ne(t),t=Math.floor(+t);const i=this.#t,e=i.bY(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof Nd.vo){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");Ed._o(s[0],s[1],s[2]),s=Ed}else if("number"!=typeof s)throw new TypeError("expected number");i.SY(this.index,t,s)&&i.gY(this.index)&&i.oz().BF()}getParameter(t){_d.ne(t),t=Math.floor(+t);const s=this.#t.bY(this.index,t);if(null===s)throw new RangeError("invalid index");return s instanceof Nd.vo?[s.jo(),s.Po(),s.Fo()]:s}}}self.Cs,self.js;self.TY=class{#t;constructor(t){this.#t=t,Object.defineProperties(this,{name:{value:t._c(),writable:!1}})}get speed(){return this.#t.vY()}get xY(){return this.#t.IY()}get CY(){return this.#t.GY()}get NY(){return this.#t._Y()}get EY(){return this.#t.DY()}get frameCount(){return this.#t.AY()}LY(){return this.#t.OY().map(t=>t.RY())}*frames(){for(const t of this.#t.OY())yield t.RY()}};self.Cs,self.js;self.nz=class{#s;constructor(t){this.#s=t}static rz(t){return t.#s}get width(){return this.#s.Yy()}get height(){return this.#s.eg()}getSize(){const t=this.#s;return[t.Yy(),t.eg()]}kY(t){return t.jY(this)}PY(){return this.#s.yD().il()}};{self.Cs;const Dd=self.js;self.FY=class extends self.nz{#s;constructor(t){super(t.zY()),this.#s=t,Object.defineProperties(this,{duration:{value:t.BY(),writable:!1},GJ:{value:t.NJ(),writable:!1},EJ:{value:t.DJ(),writable:!1}})}OJ(){const t=this.#s;return[t.NJ(),t.DJ()]}UY(){return this.#s.WY()}QY(t){return this.JY(t)[0]}VY(t){return this.JY(t)[1]}JY(t){const s=this.#s;let i=null;if("number"==typeof t)i=s.YY(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.HY(t)}return i?[i.YT(),i.ZT()]:this.OJ()}qY(){const t=this.#s.ZY();return t?t.pu():0}XY(t){return this.KY(t)[0]}$Y(t){return this.KY(t)[1]}KY(t){Dd.ne(t),t=Math.floor(t);const s=this.#s.ZY();if(!s||t<0||t>=s.pu())return[0,0];const i=s.du();return[i[2*t],i[2*t+1]]}get tag(){return this.#s.tH()}}}{let Ad=function(t){const s=Od.get(t);if(s.sH())throw new Error("timeline/tween was released and is no longer valid");return s};0;self.Cs;const Ld=self.js,Od=new WeakMap;self.iH=class{constructor(t){Od.set(this,t),t.oz().LB(this,t)}pause(){Ad(this).eH()}resume(){Ad(this).rH()}stop(){Ad(this).Ff()}LQ(t){return Ad(this).nH(t)}set time(t){Ld.ne(t),Ad(this).hH(t)}get time(){return Ad(this).HO()}set totalTime(t){Ld.ne(t),Ad(this).oH(t)}get totalTime(){return Ad(this).aH()}set xY(t){Ad(this).lH(!!t)}get xY(){return Ad(this).uH()}set EY(t){Ad(this).cH(!!t)}get EY(){return Ad(this).fH()}set playbackRate(t){Ld.ne(t),Ad(this).dH(t)}get playbackRate(){return Ad(this).pH()}get progress(){const t=Ad(this);return t.HO()/t.aH()}get tags(){return Ad(this).mH()}get finished(){return Ad(this).yH()}get gH(){return Ad(this).IsPlaying()}get MH(){return Ad(this).wH()}get bH(){return Od.get(this).sH()}}}{let Rd=function(t){const s=kd.get(t);if(s.sH())throw new Error("timeline was released and is no longer valid");return s};0;self.Cs,self.js;const kd=new WeakMap;self.SH=class extends self.iH{constructor(t){super(t),kd.set(this,t);const s={name:{value:t._c(),writable:!1}};Object.defineProperties(this,s)}}}{let jd=function(t){const s=Fd.get(t);if(s.sH())throw new Error("tween was released and is no longer valid");return s};0;self.Cs;const Pd=self.js,Fd=new WeakMap,zd=new WeakMap;let Bd=null;self.TH=class extends self.iH{constructor(t,s,i){super(t),Bd||(Bd=i.vH),Fd.set(this,t),s&&zd.set(this,s)}stop(){const t=jd(this);zd.get(this).xH(t)}IH(t){Pd.le(t);const s=self.Uu.oc(Bd(t));jd(this).CH(s)}get fY(){const t=jd(this).GH();return t?t.EF():null}get NH(){return jd(this)._H()}set NH(t){jd(this).EH(!!t)}get value(){const t=jd(this);if("value"!==t.DH())throw new Error("not a value tween");return t.LH("value").AH()}}}self.Cs,self.js;self.OH=class extends self.fB{constructor(){super()}};{const Ud=self.Cs,Wd=self.js,Qd=Ud.Gs();self.RH=class extends self.OH{#t;#i;#s=0;#n=new Map;constructor(t){if(super(),this.#t=Ud.pB.dB(Qd),!t?.BQ)throw new Error("no DOM component ID specified");this.#i=t.BQ,this.kH("elem-focused",t=>t.jH()),this.kH("elem-blurred",t=>{t&&t.PH()})}FH(t){const s=this.#s++;return this.#n.set(s,t),s}zH(t){this.#n.delete(t)}kH(t,s){this.#t.oz().XQ(this.#i,t,t=>{const i=this.#n.get(t.elementId);s(i,t)})}BH(t){Wd.xe(t);for(const[s,i]of t)this.BH(s,i)}}}{const Jd=self.Cs,Vd=(self.js,Jd.Gs());self.UH=class extends self.rU{#t;constructor(){super(),this.#t=Jd.pB.dB(Vd)}WH(){}QH(){return this.#t.zY().JH()}VH(t){}YH(t){}HH(){}qH(t){}}}{const Yd=self.Cs,Hd=(self.js,Yd.Gs());self.ZH=class extends self.XV{#t;#r=null;#s=null;constructor(t){super(t),this.#t=Yd.pB.dB(Hd)}gQ(){if(super.gQ(),this.#r){const t=this.#t.oz().Mf();t.removeEventListener("renderercontextlost",this.#r),t.removeEventListener("renderercontextrestored",this.#s),this.#r=null,this.#s=null}}XH(){if(this.#r)return;this.#r=()=>this.KH(),this.#s=()=>this.$H();const t=this.#t.oz().Mf();t.addEventListener("renderercontextlost",this.#r),t.addEventListener("renderercontextrestored",this.#s)}KH(){}$H(){}tq(t){}sq(){return!0}sT(){return!1}}}{const qd=self.Cs,Zd=(self.js,qd.Jr(qd.Rect)),Xd=new WeakMap,Kd=qd.Gs();self.iq=class extends self.ZH{#t=-1;#s=!0;#n=!1;#e=!1;#i=-.2;#h=qd.Jr(qd.Rect,0,0,-1,-1);#o=0;#a=0;#l=-1;#u=-1;#c=!1;constructor(t){if(!t?.BQ)throw new Error("no DOM component ID specified");super(t);const s=qd.pB.dB(Kd);Xd.set(this,s),this.#t=this.QB.FH(this);const i=s.oz().IF();this.#o=i.eq(),this.#a=i.rq(),this.WQ(!0)}gQ(){super.gQ(),this.QB.zH(this.#t),this.nq("destroy"),this.#t=-1,Xd.delete(this)}hq(){if(Xd.get(this).oz().Jj())throw new Error("not valid in worker mode");return this.oq("get-element")}nq(t,s){s||(s={}),s.elementId=this.#t,this.$Q(t,s)}oq(t,s){return s||(s={}),s.elementId=this.#t,this.sJ(t,s)}aq(t,s){return s||(s={}),s.elementId=this.#t,this.tJ(t,s)}lq(t){t||(t={});const s=Xd.get(this).OF();t.elementId=this.#t,t.isVisible=s.wW(),t.htmlIndex=s.RF().uq(),t.htmlZIndex=s.cq(),Object.assign(t,this.fq()),this.#s=!!t.isVisible,this.sJ("create",t),this.pq(!0)}mq(t){t=!!t,this.#s!==t&&(this.#s=t,this.nq("set-visible",{isVisible:t}))}rJ(){this.pq(!1)}yq(){const t=Xd.get(this).oz().IF().gq();return"Android"===qd.Xs.Ks&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}pq(t){const s=Xd.get(this);if(s.Mq())return;const i=s.OF(),e=i.RF(),r=i.FJ();let[n,h]=e.rQ(r.Ka(),r.$a()),[o,a]=e.rQ(r.tl(),r.sl());const l=s.oz().IF(),u=l.iB(),c=l.rB();if(!i.wW()||!e.wW())return void this.mq(!1);if(!this.yq()&&(o<=0||a<=0||n>=u||h>=c))return void this.mq(!1);Zd.set(n,h,o,a);const f=l.eq(),d=l.rq(),p=e.uq(),m=i.cq();if(!t&&Zd.equals(this.#h)&&this.#o===f&&this.#a===d&&this.#l===p&&this.#u===m)return void this.mq(!0);this.#h.m(Zd),this.#o=f,this.#a=d,this.#l=p,this.#u=m,this.mq(!0);let y=null;this.#e&&(y=e.wq()+this.#i),this.nq("update-position",{left:Math.round(this.#h.Ka()),top:Math.round(this.#h.$a()),width:Math.round(this.#h.width()),height:Math.round(this.#h.height()),htmlIndex:p,htmlZIndex:m,fontSize:y})}bq(){this.oq("focus",{focus:!0})}Sq(){this.oq("focus",{focus:!1})}jH(){this.#n=!0}PH(){this.#n=!1}Tq(){return this.#n}vq(t,s){this.xq("set-css-style",{prop:qd.bo(t),val:s})}Iq(t,s){this.xq("set-attribute",{name:t,val:s})}Cq(t){this.xq("remove-attribute",{name:t})}Gq(){this.#c||(this.#c=!0,Promise.resolve().then(()=>{this.#c=!1,this.nq("update-state",this.fq())}))}fq(){}Nq(){return this.#t}}}self.Cs,self.js;self._q=class extends self.mY{constructor(){super()}};self.Cs,self.js;self.Eq=class extends globalThis.pY{constructor(){super()}WH(){}};{const $d=self.Cs,tp=(self.js,new WeakMap),sp=$d.Gs();self.Dq=class extends self.hY{#e=!1;#s=!1;#t=!1;constructor(){super(),tp.set(this,$d.pB.dB(sp))}gQ(){super.gQ(),this.WQ(!1),this.QQ(!1),this.Aq(!1),tp.delete(this)}JQ(){return $d.pB.VQ()}Lq(){}YQ(t){const s=tp.get(this);s.oz().HQ(t,s.dY(),s.cY())}qQ(t){const s=tp.get(this);return s.oz().ZF(t,s.dY(),s.cY())}WQ(t){if(t=!!t,this.#e===t)return;this.#e=t;const s=tp.get(this).oz();t?s.Oq(this):s.Rq(this)}hJ(){return this.#e}rJ(){}QQ(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=tp.get(this).oz();t?s.kq(this):s.jq(this)}aJ(){return this.#s}oJ(){}Aq(t){if(t=!!t,this.#t===t)return;this.#t=t;const s=tp.get(this).oz();t?s.Pq(this):s.Fq(this)}zq(){return this.#t}Bq(){}lJ(){return[]}uJ(){return null}cJ(t){}}}{self.Cs;const ip=self.js;let ep=null;self.iP=class{constructor(t){ep=t}VF(t){ep.YF(t)}MJ(t,s,i){ip.le(t),ip.le(s),ip.Ie(i),ep.Uq(t,s,i)}bJ(t,s,i){return ip.le(t),ip.le(s),ip.Ie(i),ep.Wq(t,s,i)}Qq(t){return ip.ue(t),new self.Jq(ep,t)}set Vq(t){ep.Yq(!!t)}get Vq(){return ep.Hq()}qq(t){ep.Zq(!!t)}Xq(t){ip.te(t);const s=ep.Kq(t);return s?s.PB():null}}}self.Cs,self.js;self.Jq=class{#t;#s;#h;#i;#n;#r;constructor(t,s){this.#t=t;const i=t.oP(),e=t.dP();this.#s=e,this.#h=e.$q();const r=t.bP();this.#i=r.tZ(),this.#n=r.sZ(e);const n=i.iZ().sZ();this.#r=n,s&&n.eZ(s),t.rZ(!1)}nZ(){const t=this.#t.oP(),s=this.#h,i=this.#r;t.hZ(s),this.#s.oZ(this.#i,this.#n),t.aZ(s),i.lZ(i.Tj()+1)}get uZ(){return this.#r.cZ()}release(){const t=this.#t,s=t.bP(),i=t.oP().iZ();t.rZ(!0),i.fZ(),s.fZ()}};{let rp=function(t){return t instanceof ImageBitmap||"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas};0;const np=self.Cs,hp=self.js;let op=null,ap=null;const lp=["none","back","front"],up=["cw","ccw"];self.dZ=class{constructor(t,s){ap=t,op=s}pZ(){op.GL()}mZ(t){op.IL(t)}yZ(){op.mb()}gZ(){op.ab()}MZ(){op.Tb()}setColor(t){op.wL(t[0],t[1],t[2],t[3])}wZ(t,s,i,e){op.wL(t,s,i,e)}bZ(){op.SL()}SZ(t){op.bL(t)}TZ(t){op.Qb(t)}vZ(){return op.Jb()}xZ(t){const s=lp.indexOf(t);if(-1===s)throw new Error("invalid cull mode");op.NS(s)}IZ(){return lp[op._L()]}CZ(t){const s=up.indexOf(t);if(-1===s)throw new Error("invalid front face winding");op._S(s)}GZ(){return op.EL()}rect(t){op.AL(t.left,t.top,t.right,t.bottom)}NZ(t,s,i,e){op.AL(t,s,i,e)}_Z(t){op.Nl(np.Nl.Yl(t))}EZ(t,s,i,e,r,n,h,o){op.DS(t,s,i,e,r,n,h,o)}DZ(t,s){op.sS(np.Nl.Yl(t),np.Rect.el(s))}AZ(t,s){op.RL(np.Nl.Yl(t),np.Nl.Yl(s))}LZ(t,s,i){op.kL(np.Nl.Yl(t),np.Nl.Yl(s),i)}OZ(t,s,i,e,r,n,h,o,a,l,u,c,f){op.jL(t,s,i,e,r,n,h,o,a,l,u,c,np.Rect.el(f))}RZ(t,s,i,e,r,n,h,o,a,l,u,c,f){op.Zb(t,s,i,e,r,n,h,o,a,l,u,c,np.Nl.Yl(f))}kZ(t,s,i,e,r,n,h,o,a,l,u,c,f,d){op.PL(t,s,i,e,r,n,h,o,a,l,u,c,np.Nl.Yl(f),d)}jZ(t,s,i,e){op.Jv(t,s,i,e)}PZ(t){op.ES(t)}line(t,s,i,e){op.ag(t,s,i,e)}FZ(t,s,i,e,r,n){op.Xb(t,s,i,e,r,n)}zZ(t,s,i,e){op.iS(t,s,i,e)}BZ(t){op.hS(np.Rect.el(t))}UZ(t){op.oS(np.Nl.Yl(t))}WZ(t){op.dS(t)}QZ(){op.pS()}JZ(t){op.MS(t)}VZ(){op.TS()}YZ(t){hp.Fe(t,self.HZ);const s=t?ap.HU(t):null;op.vL(s)}qZ(t,s){const i=self.nz.rz(t);if(!i)throw new Error("invalid IImageInfo");return i.ZZ(op,{tx:s?.tx??"clamp-to-edge",sx:s?.sx??"clamp-to-edge",ix:s?.ix??"trilinear",ox:s?.ox??!0})}XZ(t){const s=self.nz.rz(t);if(!s)throw new Error("invalid IImageInfo");s.oE()}jY(t){const s=self.nz.rz(t);if(!s)throw new Error("invalid IImageInfo");const i=s.vI();return self.HZ.KZ(ap,i)}$Z(t,s){if(!rp(t))throw new TypeError("invalid texture data");const i=op.aO(t,{tx:s?.tx??"clamp-to-edge",sx:s?.sx??"clamp-to-edge",ix:s?.ix??"trilinear",ox:s?.ox??!0});return self.HZ.KZ(ap,i)}tX(t,s,i){hp.ne(t),hp.ne(s);const e=op.dI(t,s,{tx:i?.tx??"clamp-to-edge",sx:i?.sx??"clamp-to-edge",ix:i?.ix??"trilinear",ox:i?.ox??!0});return self.HZ.KZ(ap,e)}sX(t,s,i){hp.Pe(s,self.HZ);const e=ap.HU(s);op.mD(t,e,{ux:i?.ux??!0})}deleteTexture(t){hp.Pe(t,self.HZ);const s=ap.HU(t);op.gI(s)}iX(){const t=op.JS();return new self.eX(ap,t)}rX(){ap.IF().nX(op)}hX(t){hp.Pe(t,globalThis.YU),ap.HU(t).oX(op)}}}{self.Cs,self.js;const cp=new WeakMap,fp=new WeakMap;self.HZ=class{constructor(t,s){cp.set(this,{runtime:t,texture:s}),fp.set(s,this),t.LB(this,s),Object.defineProperties(this,{width:{value:s.Yy(),writable:!1},height:{value:s.eg(),writable:!1}})}static KZ(t,s){if(!s)return null;return fp.get(s)||new self.HZ(t,s)}}}{let dp=function(t){return mp.get(t).aX};0;self.Cs;const pp=self.js,mp=new WeakMap;self.eX=class{constructor(t,s){mp.set(this,{runtime:t,aX:s}),t.LB(this,s)}release(){dp(this).Vr()}set lX(t){pp.le(t),dp(this).mE(t)}get lX(){return dp(this).g_()}set uX(t){pp.ne(t),dp(this).yE(t)}get uX(){return dp(this).gE()}set lineHeight(t){pp.ne(t),dp(this).wE(t)}get lineHeight(){return dp(this).bE()}set cX(t){dp(this).SE(t)}get cX(){return dp(this).TE()}set fX(t){dp(this).vE(t)}get fX(){return dp(this).xE()}setColor(t){pp.xe(t),this.dX(t[0],t[1],t[2])}dX(t,s,i){dp(this)._E(t,s,i)}pX(t){pp.le(t),dp(this).jT(t)}set mX(t){dp(this).EE(t)}get mX(){return dp(this).DE()}set verticalAlign(t){dp(this).AE(t)}get verticalAlign(){return dp(this).LE()}set yX(t){dp(this).OE(t)}get yX(){return dp(this).RE()}set gX(t){dp(this).kE(t)}get gX(){return dp(this).jE()}set text(t){pp.le(t),dp(this).Uc(t)}get text(){return dp(this).PE()}_U(t,s,i){pp.ne(t),pp.ne(s),pp.ne(i),dp(this).FE(t,s,i)}kY(){const{runtime:t,aX:s}=mp.get(this),i=s.vI();return self.HZ.KZ(t,i)}PY(){return dp(this).yD().il()}MX(t){pp.De(t),dp(this).lE=t}wX(){dp(this).oE()}get bX(){return dp(this).BE()}get SX(){return dp(this).WE()}}}{let yp=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return bp.get(i)||""},gp=function(t){return new Promise((s,i)=>{const e=document.createElement("script");e.onload=s,e.onerror=i,e.async=!1,e.type="module",e.src=t,document.head.appendChild(e)})};0;const Mp=self.Cs,wp=new Set(["local","remote"]),bp=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);Mp.TX=class extends Mp.Wr{constructor(t,s){super();const i=s.exportType;this.Pc=t,this.vX="folders",this.xX=new Map,this.IX="cordova"===i,this.CX=!!s.isiOSCordova,this.GX=!!s.isFileProtocol,this.NX=s.swClientId,this._X=s.supportedAudioFormats||{},this.EX=new Map,this.DX=!1,this.AX=s.scriptFolder,this.LX="",this.OX="",this.RX="",this.kX=s.fileMap||new Map,this.jX=new Map;const e="html5"===i||"scirra-arcade"===i||"instant-games"===i;this.PX=e?"remote":"local",this.FX=new Map,this.zX=[],this.BX=[],this.UX=!1,this.WX=0,this.QX=0,this.JX=0,this.VX=!1,this.YX=Mp.Jr(Mp.$d,()=>this.HX(),50),this.qX=Mp.Jr(Mp.Qd,Math.max(Mp.hardwareConcurrency,8)),this.ZX=Mp.Jr(Mp.Qd,20),this.XX=new self.sz(this)}Vr(){for(const t of this.FX.values())t.Vr();this.FX.clear(),Mp.wh(this.BX),this.Pc=null}oz(){return this.Pc}KX(t){this.vX=t}mz(){return this.vX}$X(){return this.AX}tK(t){this.LX=t}Mz(){return this.LX}sK(t){this.OX=t}iK(){return this.OX}eK(t){this.RX=t}rK(){return this.RX}nK(){return this.GX}eo(t,s){return s=s||this.PX,Mp.Xh(t)?("flat"===this.vX&&(t=t.toLowerCase()),this.IX&&this.GX?this.hK(t):"playable-ad-single-file"===this.Pc.Qz()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):"local"===s?this.qX.Fu(()=>Mp.eo(t)):this.ZX.Fu(()=>Mp.eo(t))):Mp.eo(t)}ro(t){return Mp.Xh(t)?("flat"===this.vX&&(t=t.toLowerCase()),this.IX&&this.GX?this.oK(t):"playable-ad-single-file"===this.Pc.Qz()?Mp.ho(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.PX?this.qX.Fu(()=>Mp.ro(t)):this.ZX.Fu(()=>Mp.ro(t))):Mp.ro(t)}so(t){return Mp.Xh(t)?("flat"===this.vX&&(t=t.toLowerCase()),this.IX&&this.GX?this.aK(t):"playable-ad-single-file"===this.Pc.Qz()?Mp.oo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.PX?this.qX.Fu(()=>Mp.so(t)):this.ZX.Fu(()=>Mp.so(t))):Mp.so(t)}async io(t){const s=await this.so(t);return JSON.parse(s)}lK(t,s){return"flat"===this.vX&&(t=t.toLowerCase()),this.Pc.WF("runtime","cordova-fetch-local-file",{filename:t,as:s})}aK(t){return this.lK(t,"text")}async hK(t){const s=await this.lK(t,"buffer"),i=yp(t);return new Blob([s],{type:i})}async uK(t){"flat"===this.vX&&(t=t.toLowerCase());let s=this.xX.get(t);if(s)return s;const i=await this.hK(t);return s=URL.createObjectURL(i),this.xX.set(t,s),s}oK(t){return this.lK(t,"buffer")}yz(t){"flat"===this.vX&&(t=t.toLowerCase());let s=this.LX+t;return"Gecko"===Mp.Xs.ei&&"preview"===this.Pc.Qz()&&(s=this.cK(s)),s}dz(t){return Mp.Zh(t)?Promise.resolve(t):this.IX&&this.GX?this.uK(t):"playable-ad-single-file"===this.Pc.Qz()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.vX&&(t=t.toLowerCase()),Promise.resolve(t))}fK(t){if(Mp.Zh(t)||"preview"!==this.Pc.Qz()||!this.NX||!t)return t;try{const s=new URL(t,location.href);return s.searchParams.set("__c3_client_id",this.NX),s.toString()}catch(s){return console.warn("Invalid iframe URL: "+t),t}}dK(t){return this.dz(t)}pK(t,s){return(s?"true":"false")+"|"+t}mK(t){const s=!!t.yK;if(t.gK&&!wp.has(t.gK))throw new Error("invalid load policy");const i=this.pK(t.url,s);let e=this.FX.get(i);return e||(e=Mp.Jr(Mp.MK,this,{url:t.url,size:t.size||0,gK:t.gK||this.PX,yK:s}),this.FX.set(i,e),this.UX||(this.WX+=e.Lu(),this.BX.push(e.wK().then(()=>this.bK(e.Lu())))),e)}SK(t){const s=this.pK(t.TK(),t.vK());this.FX.delete(s)}async xK(){try{await Promise.all(this.BX),this.JX=1}catch(t){console.error("Error loading: ",t),this.VX=!0,this.HX()}}IK(){this.UX=!0}CK(){return this.VX}bK(t){this.QX+=t,this.YX.pp()}HX(){const t=Mp.Jr(Mp.Event,"loadingprogress");this.JX=Mp.Xr(this.QX/this.WX,0,1),t.progress=this.JX,this.Pc.Mf().dispatchEvent(t),this.Pc.GK(Mp.Jr(Mp.Event,"loadingprogress"))}hF(){return this.JX}aF(){return this.Pc._K().NK()}EK(t){Mp.xh(this.zX,t),this.zX.length&&this.BX.push(this.DK())}async DK(){const t=[],s=[];for(const[i,e,r]of this.zX)this.WX+=r,t.push(this.AK(i,e,s).then(()=>this.bK(r)));await Promise.all(t),this.Pc.Jj()&&s.length>0&&await this.Pc.WF("runtime","load-webfonts",{webfonts:s})}async AK(t,s,i){try{let e=await this.dz(s);"Gecko"===Mp.Xs.ei&&(t=`'${t}'`),("Gecko"===Mp.Xs.ei&&"preview"===this.Pc.Qz()||"playable-ad-single-file"===this.Pc.Qz())&&(e=this.cK(e));const r=new FontFace(t,`url('${e}')`);this.Pc.Jj()?self.fonts.add(r):document.fonts.add(r),await r.load(),this.Pc.Jj()&&i.push({name:t,url:e})}catch(s){console.warn(`[C3 runtime] Failed to load web font '${t}': `,s)}}LK(t){return!!this._X[t]}RK(t,s){this.DX=!!s;for(const[s,i,e]of t)this.EX.set(s,{fileName:s,kK:i.map(t=>({type:t[0],jK:t[1],fullName:s+t[1],fileSize:t[2]})),PK:e})}FK(t){"flat"===this.vX&&(t=t.toLowerCase());const s=this.EX.get(t);if(!s)return null;let i=null;for(const t of s.kK)if(i||"audio/webm; codecs=opus"!==t.type||(i=t),this.LK(t.type))return t;return i}zK(t){const s=this.FK(t);return s?{url:this.yz(s.fullName),type:s.type}:null}BK(){if(this.DX){const t=[];for(const s of this.EX.values()){if(s.PK)continue;const i=this.FK(s.fileName);i&&t.push({UK:s.fileName,url:this.yz(i.fullName),type:i.type,fileSize:i.fileSize})}return t}return[]}WK(t){return"preview"===this.Pc.Qz()&&(t=new URL(t,location.href).toString()),this.kX.get(t)||null}cK(t){let s=this.jX.get(t);if(s)return s;const i=this.WK(t);return i?(s=URL.createObjectURL(i),this.jX.set(t,s),s):t}Cj(){return this.XX}async Sz(...t){const s=await Promise.all(t.map(t=>this.dz(t)));if(this.Pc.Jj())if(1===t.length){const s=t[0];await import((Mp.Xh(s)?"./":"")+s)}else{const s=t.map(t=>`import "${Mp.Xh(t)?"./":""}${t}";`).join("\n"),i=URL.createObjectURL(new Blob([s],{type:"application/javascript"}));await import(i)}else await Promise.all(s.map(t=>gp(t)))}async vz(t){if(WebAssembly.compileStreaming){const s=await this.dz(t);return await WebAssembly.compileStreaming(fetch(s))}{const s=await Mp.ro(t);return await WebAssembly.compile(s)}}async Iz(t){const s=await this.dz(t);return await this.Pc.WF("runtime","add-stylesheet",{url:s})}}}{const Sp=self.Cs;Sp.QK=class extends Sp.Wr{constructor(t,s){super(),this.JK=t,this.Pc=t.oz(),this.VK=s.url||"",this.YK=s.size,this.HK=s.gK,this.qK=s.blob||null,this.ZK=!!this.qK,this.MM=null}Vr(){this.MM=null,this.JK=null,this.Pc=null,this.qK=null}TK(){return this.VK}Lu(){return this.YK}wK(){return"local"===this.HK||this.qK?(this.ZK=!0,Promise.resolve()):(this.MM||(this.MM=this.JK.eo(this.VK,this.HK).then(t=>(this.ZK=!0,this.MM=null,this.qK=t,t)).catch(t=>{console.error("Error loading resource: ",t),this.MM=null})),this.MM)}XK(){return this.ZK}KK(){return this.qK?Promise.resolve(this.qK):this.MM?this.MM:this.JK.eo(this.VK,this.HK)}}}{const Tp=self.Cs,vp=new Tp.Qd,xp=new Set;Tp.MK=class extends Tp.QK{constructor(t,s){super(t,s),this.$K=null,this.t$=null,this.Qp=0,this.s$=-1,this.i$=-1,this.e$=!!s.yK,xp.add(this)}Vr(){if(0!==this.Qp)throw new Error("released image asset which still has texture references");this.JK.SK(this),this.$K=null,xp.delete(this),super.Vr()}static r$(){for(const t of xp)t.$K=null,t.t$=null,t.Qp=0}ZZ(t,s){return s=s||{},this.Qp++,this.t$?Promise.resolve(this.t$):(this.$K||(s.nx=this.Pc.IF().n$(),this.$K=this.h$(t,s)),this.$K)}async h$(t,s){try{const i=await this.KK();return 0===this.Qp?(this.$K=null,null):await vp.Fu(async()=>{const e=await t.lO(i,s);return this.$K=null,0===this.Qp?(t.gI(e),null):(this.t$=e,this.s$=e.Yy(),this.i$=e.eg(),this.t$)})}catch(t){throw console.error("Failed to load texture: ",t),t}}oE(){if(this.Qp<=0)throw new Error("texture released too many times");this.Qp--,0===this.Qp&&this.t$&&(this.t$.pT().gI(this.t$),this.t$=null)}o$(){return this.Qp}vI(){return this.t$}Yy(){return this.s$}eg(){return this.i$}vK(){return this.e$}async a$(){const t=await this.KK();return Tp.Ei.ImageBitmap?await createImageBitmap(t):await Tp.lo(t)}}}{let Ip=function(t,s){return t.OF().l$()-s.OF().l$()};0;const Cp=self.Cs;self.assert;Cp.u$=class extends Cp.Wr{constructor(t,s,i){super(),this.c$=t,this._a=s,this.Ea=i,this.f$=[],this.d$=!0,this.p$=new Set,this.m$=!1}Vr(){Cp.wh(this.f$),this.p$.clear(),this.c$=null}Ff(){Cp.wh(this.f$),this.d$=!0,this.p$.clear(),this.m$=!1}y$(){this.d$=!1}Eu(){return!this.f$.length||!(this.f$.length>this.p$.size)&&(this.g$(),!0)}M$(t){if(this.p$.has(t))return this.p$.delete(t),void(0===this.p$.size&&(this.m$=!1));this.f$.push(t),this.d$=1===this.f$.length}Xf(t){this.p$.add(t),this.m$=!0,this.p$.size>=50&&this.g$()}g$(){this.m$&&(this.f$.length!==this.p$.size?(Cp._h(this.f$,this.p$),this.p$.clear(),this.m$=!1):this.Ff())}w$(){this.d$||(this.f$.sort(Ip),this.d$=!0)}b$(t){this.g$(),this.w$(),this.f$.length&&t.push(this.f$)}}}{const Gp=self.Cs;Gp.S$=class extends Gp.Wr{constructor(t,s){super(),this.T$=t,this.v$=s,this.x$=Gp.Jr(Gp.Gu)}Vr(){this.x$.Vr(),this.x$=null}I$(t,s,i){let e=this.x$.Js(t,s);return e||(i?(e=Gp.Jr(Gp.u$,this,t,s),this.x$.Set(t,s,e),e):null)}C$(t){return Math.floor(t/this.T$)}G$(t){return Math.floor(t/this.v$)}N$(t,s,i){if(s)for(let e=s.Ka(),r=s.tl();e<=r;++e)for(let r=s.$a(),n=s.sl();r<=n;++r){if(i&&i.xl(e,r))continue;const s=this.I$(e,r,!1);s&&(s.Xf(t),s.Eu()&&this.x$.Du(e,r))}if(i)for(let e=i.Ka(),r=i.tl();e<=r;++e)for(let r=i.$a(),n=i.sl();r<=n;++r)s&&s.xl(e,r)||this.I$(e,r,!0).M$(t)}_$(t,s){let i=this.C$(t.Ka());const e=this.G$(t.$a()),r=this.C$(t.tl()),n=this.G$(t.sl());for(;i<=r;++i)for(let t=e;t<=n;++t){const e=this.I$(i,t,!1);e&&e.b$(s)}}E$(t){let s=t.Ka();const i=t.$a(),e=t.tl(),r=t.sl();for(;s<=e;++s)for(let t=i;t<=r;++t){const i=this.I$(s,t,!1);i&&i.y$()}}}}{let Np=function(t,s){return t.OF().l$()-s.OF().l$()},_p=function(t,s){return t.OF().KT()-s.OF().KT()};0;const Ep=self.Cs,Dp=(self.assert,new Ep.Rect),Ap=new Ep.Nl,Lp=[],Op=(new Ep.Rect,new Ep.Rect,self.hs),Rp=Op.gs,kp=Op.Ms,jp=Op.fs,Pp=jp.create(),Fp=Rp.create(),zp=kp.create(),Bp=Rp.create(),Up=Rp.create(),Wp=Rp.create(),Qp=Ep.Jr(Ep.Na),Jp=(Ep.Jr(Ep.Rect),[]),Vp=[],Yp=[],Hp={name:"",D$:-1,A$:!1,isVisible:!0,bW:!0,vW:!1,backgroundColor:[1,1,1,1],QW:!0,L$:[1,1],opacity:1,YW:!1,O$:!1,R$:!1,k$:!1,DW:1,mk:0,BW:0,j$:[],P$:[],F$:[]},qp=new Map,Zp=t=>{if(!t.fY.fQ().z$())return;const s=t.fY.IQ();qp.has(s)&&(qp.delete(s),qp.size||t.fY.oz().Mf().removeEventListener("instancedestroy",Zp))};Ep.B$=class extends Ep.Wr{constructor(t,s,i){super(),i=Object.assign({},Hp,i),this.U$=t,this.Pc=t.oz(),this.W$=s,this.qr=i.name,this.NM=-1,this.Q$=!!i.vW,this.J$=-1,this.V$=i.D$,this.Y$=!!i.A$,this.H$=!!i.isVisible,this.q$=!!i.bW,this.Z$=Ep.Jr(Ep.vo),this.Z$.Ma(i.backgroundColor),this.X$=!!i.QW,this.K$=i.L$[0],this.$$=i.L$[1],this.DT=Ep.Jr(Ep.vo,1,1,1,i.opacity),this.t0=Ep.Jr(Ep.vo),this.s0=!!i.YW,this.i0=!!i.O$,this.e0=!!i.R$,this.r0=!!i.k$,this.n0=i.DW,this.ET=i.mk,this.h0=null,this.o0=1,this.AT=i.BW,this.a0=0,this.l0=0,this.u0=0,this.c0=!1,this.sA=Ep.Jr(Ep.Rect),this.f0=Ep.Jr(Ep.Rect),this.d0=Ep.Jr(Ep.Rect),this.p0=!0,this.oI=jp.create(),this.m0=!0,this.KR=jp.create(),this.y0=!0,this.g0=Ep.Jr(Ep.RM.FM),this.M0=!0,this.w0=[],this.b0=i.j$,this.S0=[],this.T0=[],this.v0=new Map,this.f$=[],this.x0=!1,this.I0=!1,this.C0=!1;const e=this.Pc.IF();this.G0=Ep.Jr(Ep.N0,this,i.P$),this.Mj=Ep.Jr(Ep.RM.oR,e._0(),{ZO:(t,s)=>{const i=s.uj(),r=i.nO();t.jT(i.E0()),t.dO(r),t.pO(r),e.D0(r)},KO:t=>this.CU().A0(t)}),this.L0=!0,this.O0=!0,this.R0=null,this.k0=[],this.j0=!1,this.P0=Ep.Jr(Ep.Rect,0,0,-1,-1),this.F0=Ep.Jr(Ep.Rect,0,0,-1,-1),this.z0=new self.YU(this),this.B0=Ep.Jr(Ep.Event.Mf),this.U0(),this.W0()&&(this.R0=Ep.Jr(Ep.S$,this.Pc.Yj(),this.Pc.qj())),this.Q0=i.F$.map(t=>Ep.B$.J0(this.U$,this,t))}V0(){for(const t of this.b0){const s=this.Pc.Y0(t[1]);this.U$.H0(s),s.q0()||(s.Z0(t),s.X0(this.NM)),this.S0.push(t),this.v0.set(t[2],t)}Ep.xh(this.w0,this.S0),this.b0=null}static J0(t,s,i){return Ep.Jr(Ep.B$,t,s,{name:i[0],D$:i[2],isVisible:i[3],bW:i[13],vW:i[19],backgroundColor:i[4].map(t=>t/255),QW:i[5],L$:[i[6],i[7]],opacity:i[8],YW:i[9],O$:i[17],R$:i[18],k$:i[10],DW:i[11],mk:i[12],BW:i[16],j$:i[14],P$:i[15],F$:i[20]})}Vr(){for(const t of this.Q0)t.Vr();Ep.wh(this.Q0);for(const t of this.f$)this.Pc.MQ(t);Ep.wh(this.f$),this.G0.Vr(),this.G0=null,this.Mj.Vr(),this.Mj=null,this.z0=null,this.W$=null,this.U$=null,this.Pc=null}Yr(){return!this.U$}K0(t){return this.v0.get(t)}$0(t){const s=this.U$.t1(),i=this.S0;let e=0;for(let r=0,n=i.length;r<n;++r){const n=i[r],h=this.Pc.Y0(n[1]);let o=!0;if(!h.s1()||s)if(h.z$()&&qp.has(n[2]))o=!1;else{const s=this.Pc.i1(n,this,!0);t.push(s),h.z$()&&(qp.size||this.Pc.Mf().addEventListener("instancedestroy",Zp),qp.set(s.IQ(),s),o=!1,this.T0.push(s.IQ()))}o&&(i[e]=i[r],++e)}Ep.Mh(i,e),this.Pc.pU(),this.zF()}e1(t,s){if(!t.JB().bB())throw new Error("instance is not of world type");const i=t.OF();if(i.RF()!==this)throw new Error("instance added to wrong layer");this.f$.push(t),0!==i.KT()&&(this.C0=!0),s&&this.W0()&&t.OF().vJ(),this.zF(t)}n1(t){this.f$.includes(t)||(this.f$.push(t),0!==t.OF().KT()&&(this.C0=!0),this.zF(t))}h1(t,s){const i=t.OF();if(i.RF()!==this)throw new Error("instance added to wrong layer");this.f$.unshift(t),0!==i.KT()&&(this.C0=!0),this.zF(t),s&&this.W0()&&t.OF().vJ()}o1(t,s){const i=this.f$.indexOf(t);i<0||(s&&this.W0()&&t.OF().a1(),this.f$.splice(i,1),this.zF(t),this.l1())}u1(){this.C0=!0}l1(){0===this.f$.length&&(this.C0=!1)}c1(t){if(t){const t=new Set;for(const s of this.f$){const i=s.OF().l$();i>=0&&t.add(i)}let s=-1;for(const i of this.f$){const e=i.OF();if(!(e.l$()>=0)){for(++s;t.has(s);)++s;e.f1(s)}}}this.f$.sort(Np)}d1(){}m1(){for(const t of this.f$)t.fQ().z$()||this.Pc.MQ(t);this.Pc.pU(),Ep.wh(this.f$),this.C0=!1,this.zF()}g1(t,s,i,e,r,n){const h=this.Pc.oP(),o=this.Pc.M1(),a=t.w1(),l=[];for(const u of this.S0){const c=u[0],f=c[0],d=c[1];if(!s.xl(f,d))continue;const p=o[u[1]];if(p!==t){if(!a)continue;if(!t.xU(p))continue}let m=r;if(!m){const t=this.Pc.AF();this.pF()===t?m=this:(m=t.b1(this._c()),m||(m=t.jF(this.Tj())))}const y=this.Pc.i1(u,m,!1,void 0,void 0,!1,n,void 0,n);n&&m.lU(y);const g=y.OF();g.CJ(i,e),g.vJ(),h.uU(!0),y.cU(),h.uU(!1),l.push(y)}return l}hU(){return this.f$.length}pF(){return this.U$}_c(){return this.qr}S1(t){this.NM=t}Tj(){return this.NM}T1(t){this.J$=t}uq(){return this.J$}xW(){return this.Q$}IW(t){t=!!t,this.Q$!==t&&(this.Q$=t,this.U$.v1(),this.Pc.BF())}I1(){let t=-1;const s=this.uW();return t=s?s.dW().indexOf(this):this.pF().C1().indexOf(this),t}G1(){return this.V$}oz(){return this.Pc}N1(){return this.Y$}_1(){for(const t of this.cW())if(t.N1())return!0;return!1}lB(){return this.Pc.lB()}CU(){return this.G0}Sj(){return this.E1(),this.Mj}E1(){const t=this.D1();if(!this.L0&&t===this.O0&&!this.Mj.$R())return;const s=this.CU().A1();this.Mj.tk(s.map(t=>t.JC()),{tR:s.map(t=>t.Tj()),sR:!t,hR:!0}),this.L0=!1,this.O0=t}wY(){this.CU().wY(),this.L0=!0}W0(){return this.r0&&!this.e0}L1(){return this.R0}O1(){this.j0=!1}wW(){for(const t of this.R1())if(!t.yW())return!1;return!0}yW(){return this.H$}gW(t){t=!!t,this.H$!==t&&(this.H$=t,this.Pc.BF())}TW(t){this.q$=!!t}SW(){return this.q$}NW(){for(const t of this.R1())if(!t.SW())return!1;return!0}KW(t){if(t=!!t,this.c0!==t){if(this.c0=t,t){const t=this.pF();this.l0=t.RU(),this.u0=t.jU()}this.j1(),this.Pc.BF()}}P1(){return this.c0}OU(t){const s=this.pF(),i=s.F1(),e=s.z1();t>e&&(t=e),t<i&&(t=i),this.l0!==t&&(this.l0=t,this.P1()&&(this.j1(),this.Pc.BF()))}kU(t){const s=this.pF(),i=s.B1(),e=s.U1();t>e&&(t=e),t<i&&(t=i),this.u0!==t&&(this.u0=t,this.P1()&&(this.j1(),this.Pc.BF()))}RU(){return this.P1()?this.l0:this.pF().RU()}jU(){return this.P1()?this.u0:this.pF().jU()}tQ(){return this.W1(),this.sA}Q1(){return this.W1(),this.f0}J1(){return this.W1(),this.d0}V1(){return this.pF().nW()}zw(t){return this.Pc.zw(t)}Y1(t,s){const i=this.Q1();if(0===t)s.m(i);else{let e=i.hl(),r=i.ol();const n=this.H1(t),h=i.width()/n,o=i.height()/n,[a,l]=this.V1();if(.5!==a||.5!==l){const s=this.q1(),i=this.Pc,n=this.zw()/s;let h=(a-.5)*i.Z1()/n,o=(l-.5)*i.X1()/n;const u=this.LU();0!==u&&(Qp.set(h,o),Qp.rotate(u),h=Qp.La(),o=Qp.Ra());const c=Ep.mn(s,0,t);e+=Ep.Ct(h,0,c),r+=Ep.Ct(o,0,c)}s.set(e-h/2,r-o/2,e+h/2,r+o/2)}}ML(){return this.DT.zo()}bL(t){t=Ep.Xr(t,0,1),this.DT.zo()!==t&&(this.DT.Ro(t),this.U0(),this.Pc.BF())}U0(){this.t0.m(this.DT),this.t0.Xo()}E0(){return this.t0}D1(){return this.DT.Yo(1,1,1,1)}LW(){return this.n0}AW(t){this.n0!==t&&(this.n0=t,this.j1(),this.Pc.BF())}jW(){return this.K$}zW(){return this.$$}K1(t,s){this.K$===t&&this.$$===s||(this.K$=t,this.$$=s,this.j1(),this.Pc.BF())}kW(t){this.K1(t,this.zW())}FW(t){this.K1(this.jW(),t)}$T(t){this.AT!==t&&(this.AT=t,this.Pc.BF())}KT(){return this.AT}AU(t){t=Ep.Kr(t),this.a0!==t&&(this.a0=t,this.j1(),this.Pc.BF())}LU(){return Ep.Kr(this.U$.LU()+this.a0)}OW(){return this.a0}t2(){return this.f$.length>0}PF(){return this.f$}s2(){return this.i2()&&this.e0?(Ep.xh(Yp,this.PF()),Yp.sort((t,s)=>this.e2(t,s)),Yp):this.PF()}n2(t){Ep.Lr(t,this.s2());for(const s of this.Q0)s.wW()&&s.ML()>0&&s.n2(t)}e2(t,s){const i=this.pF().h2(),e=i[0],r=i[1],n=i[2],h=t.OF(),o=s.OF(),a=h.YT()-e,l=h.ZT()-r,u=h.KT()-n,c=o.YT()-e,f=o.ZT()-r,d=o.KT()-n;return c*c+f*f+d*d-(a*a+l*l+u*u)}XW(){return this.Z$}VW(){return this.X$}JW(t){t=!!t,this.X$!==t&&(this.X$=t,this.Pc.BF())}qW(){return this.s0}HW(t){t=!!t,this.s0!==t&&(this.s0=t,this.Pc.BF())}UW(t){t=!!t,this.i0!==t&&(this.i0=t,this.j1(),this.Pc.BF())}WW(){return this.i0}o2(){return!this.oz().a2()||!this.i0}i2(){return!this.o2()}l2(){return this.i2()&&this.pF().u2()}c2(){if(!this.l2())return!1;for(const t of this.Q0)if(!t.c2())return!1;return!0}kT(t){this.ET!==t&&(this.ET=t,this.Pc.BF())}ZW(){return this.ET}f2(){return!this.W$}uW(){return this.W$}d2(t){this.W$=t}dW(){return this.Q0}m2(){return this.Q0.length>0}g2(t,s=!0){s?this.Q0.push(t):this.Q0.unshift(t)}M2(t,s,i){let e=this.Q0.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.Q0.splice(e,0,t)}w2(t){const s=this.Q0.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.Q0.splice(s,1)}b2(){for(const t of this.Q0)if(t.S2())return!0;return!1}*mW(){for(const t of this.Q0)yield*t.mW();yield this}*cW(){let t=this.uW();for(;t;)yield t,t=t.uW()}*R1(){yield this,yield*this.cW()}T2(t){for(const s of this.cW())if(s===t)return!0;return!1}v2(t){return this===t||this.K$===t.K$&&this.$$===t.$$&&this.o0===t.o0&&this.n0===t.n0&&this.a0===t.a0&&this.RU()===t.RU()&&this.jU()===t.jU()}I2(){return{parallaxX:this.jW(),parallaxY:this.zW(),scale:this.EW(),scaleRate:this.LW(),angle:this.OW(),hasOwnScroll:this.P1(),scrollX:this.RU(),scrollY:this.jU()}}C2(t){this.K1(t.parallaxX,t.parallaxY),this._W(t.scale),this.AW(t.scaleRate),this.AU(t.angle),this.KW(t.hasOwnScroll),this.OU(t.scrollX),this.kU(t.scrollY),this.W1()}G2(t){0!==t.size&&Ep._h(this.f$,t)>0&&(this.l1(),this.zF())}zF(t){this.x0=!1,this.j0=!1,t&&!t.fQ().JB().TB()||(this.I0=!1)}N2(){if(!this.x0){if(this.f$.sort(_p),this.W0())for(let t=0,s=this.f$.length;t<s;++t){const s=this.f$[t].OF();s.f1(t),this.R0.E$(s._2())}else for(let t=0,s=this.f$.length;t<s;++t)this.f$[t].OF().f1(t);this.x0=!0}}E2(){if(this.I0)return;const t=this.U$.D2(this.uq()).map(t=>[...t.mW()]).flat();let s=0;for(const i of t){for(const t of i.PF())t.fQ().JB().TB()&&t.OF().A2(s++);i.L2()}}L2(){this.I0=!0}O2(){return{isVisible:this.wW(),opacity:this.ML(),isInteractive:this.SW()}}R2(t,s,i){const e=t.OF(),r=s.OF();if(e.RF()!==this||r.RF()!==this)throw new Error("can't arrange Z order unless both objects on this layer");const n=e.kF();let h=r.kF();return n!==h+(i?1:-1)&&(Ep.Ih(this.f$,n),n<h&&h--,i&&h++,h===this.f$.length?this.f$.push(t):this.f$.splice(h,0,t),this.zF(t),!0)}j2(t,s){const i=[];let e=0,r=0,n=t.length,h=s.length;for(;e<n&&r<h;){const n=t[e],h=s[r];n.OF().l$()<h.OF().l$()?(i.push(n),++e):(i.push(h),++r)}for(;e<n;++e)i.push(t[e]);for(;r<h;++r)i.push(s[r]);return i}P2(t){const s=[],i=t.length;for(let e=0;e<i-1;e+=2){const i=t[e],r=t[e+1];s.push(this.j2(i,r))}return i%2==1&&s.push(t[i-1]),s}F2(t){for(;t.length>1;)t=this.P2(t);return t[0]}z2(){return this.N2(),Ep.wh(Lp),this.R0._$(this.tQ(),Lp),Lp.length?1===Lp.length?Lp[0]:this.F2(Lp):[]}S2(){return this.wW()&&this.ML()>0&&this.B2()}B2(){if(this.t2()||!this.VW()||this.B0.vf("beforedraw")||this.B0.vf("afterdraw"))return!0;for(const t of this.Q0)if(t.B2())return!0;return!1}U2(){return this.qW()||!this.D1()||0!==this.ZW()||this.G0.W2()}Q2(){if(this.U2())return!0;for(const t of this.Q0)if(t.Q2())return!0;return!1}nO(){return this.h0}H1(t){if(this.U$.aW())return 1;{const s=this.J2();return s/(s-t)}}V2(t){const s=this.Pc.uQ();if(this.U$.aW())return s;{const i=this.J2();return this.zw()/Math.abs(i-t)*s}}j1(){this.y0=!0,this.M0=!0,this.p0=!0}Y2(t){return this.y0&&(this.H2(t,this.KR,0,0,null),this.y0=!1),this.KR}q1(t){return this.zw(t)/this.q2()}J2(){return this.l2()?this.pF().h2()[2]:this.q1()}Z2(){if(this.l2()){const t=this.pF().h2();return[t[0],t[1],t[2]]}return this.X2()}X2(t=0,s=0,i=0){const e=this.Pc,r=this.pF(),n=e.K2(),h=e.t3();let o=(this.RU()-n)*this.K$+n,a=(this.jU()-h)*this.$$+h;e.Kj()&&(o=Math.round(o),a=Math.round(a));let l=o+t,u=a+s;const c=r.aW()?this.zw(i):this.q1(i),[f,d]=this.V1();if(.5!==f||.5!==d){const t=this.zw(i)/c;let s=(f-.5)*e.Z1()/t,r=(d-.5)*e.X1()/t;const n=this.LU();0!==n&&(Qp.set(s,r),Qp.rotate(n),s=Qp.La(),r=Qp.Ra()),l+=s,u+=r}return[l,u,c]}H2(t,s,i,e,r){const n=this.Pc,h=this.pF();if(this.l2()){Rp.m(Bp,h.h2()),Rp.m(Up,h.s3()),Rp.m(Wp,h.i3());const t=n.K2(),s=n.t3(),i=Up[0]-Bp[0],e=Up[1]-Bp[1],r=Up[2]-Bp[2];Bp[0]=(Bp[0]-t)*this.K$+t,Bp[1]=(Bp[1]-s)*this.$$+s,Bp[2]*=Math.max(this.K$,this.$$),Up[0]=Bp[0]+i,Up[1]=Bp[1]+e,Up[2]=Bp[2]+r}else{const[t,s,n]=this.X2(i,e,r);Rp.set(Bp,t,s,n),Rp.set(Up,t,s,n-100);const h=this.LU();0===h?Rp.set(Wp,0,1,0):Rp.set(Wp,Math.sin(h),Math.cos(h),0)}t.ib(s,Bp,Up,Wp,r||n.X1())}e3(){this.m0=!0,this.M0=!0,this.p0=!0}r3(t){return this.m0&&(this.n3(t),this.m0=!1),this.oI}n3(t){const s=this.Pc.IF(),[i,e]=this.V1();if(this.U$.aW())t.sb(this.oI,s.h3(),s.o3());else if(.5===i&&.5===e)jp.m(this.oI,s.a3());else{const r=s.h3(),n=s.o3();t.$w(this.oI,r/n,i,e)}}oX(t,s=!0,i=0,e=0,r=0){s&&t.oL(this.r3(t));let n=null;0===i&&0===e&&0===r?n=this.Y2(t):(this.H2(t,Pp,i,e,r),n=Pp),t.dL(n)}l3(t){this.oX(t),t.Ub(this.KT())}u3(t){let s=null;if(t.zS()&&this.Pc.c3()){const i=this.Pc.IF().f3(this);i&&(s=i.UD(),t.bO(s))}return s}d3(t){if(t.tb()&&this.Pc.c3()){const s=2*(this.Tj()+1);t.m3(s,s+1)}}y3(t,s){if(this.B0.vf(s)){t.ab(),t.vL(null),t.GL(),t.GS(),t.wL(1,1,1,1),t.Ub(this.KT()),t.Qb(0);const i=new Ep.Event(s);i.VG=this.Pc.IF().xF(),this.GK(i)}}Qv(t,s,i){const e=this.Pc.IF(),r=this.U2();let n=null;const h=this.u3(t);if(this.d3(t),r){const s={ix:this.Pc.Zj(),qx:!0,g3:!!t.tb()&&this.Pc.M3()};"low"===e.w3()&&(s.width=e.h3(),s.height=e.o3()),n=this.Pc.b3(s),this.h0=n,t.cO(n),this.VW()&&t.KL(0,0,0,0)}else this.h0=s,t.cO(s);if(this.VW()||t._u(this.Z$),this.U$.S3(t,this.h0,this.Q0,r&&this.VW()),this.d3(t),this.oX(t),t.Ub(this.KT()),t.sO(this.i2()),this.y3(t,"beforedraw"),this.q2()>Number.EPSILON){this.N2();const s=this.W0()&&0===this.KT()&&!this.C0;this.l2()?this.T3(t):s?this.v3(t):this.x3(t,this.s2())}this.y3(t,"afterdraw"),t.Ub(0),t.Qb(0),r&&(t.sO(!1),this.I3(t,n,s,i)),h&&t.TO(h),this.h0=null}x3(t,s){const i=this.tQ(),e=this.h0,r=this.pF().aW(),n=this.pF().C3();let h=null;for(let o=0,a=s.length;o<a;++o){const a=s[o];if(a===h)continue;h=a;const l=a.OF();l.wW()&&l.G3(i,n,r)&&this.N3(a,l,t,e)}}T3(t){const s=this.h0,i=this._3(),e=Jp,r=Vp,n=this.s2();for(let h=0,o=n.length;h<o;){const a=n[h],l=a.OF();if(!l.wW()||!l.E3(i)){++h;continue}(!a.D3()||l.A3()>0)&&r.push(a);const u=a.OF().kJ();e.push(a);let c=h+1;for(;c<o;++c){const t=n[c],s=t.OF();if(s.wW()&&s.E3(i)){if(s.kJ()!==u)break;t.D3()?(s.A3()>0&&r.push(t),e.push(t)):r.push(t)}}if(1!==e.length||e[0].L3()){this.O3(t,e);for(let i=0,e=r.length;i<e;++i){const e=r[i],n=e.OF();n.R3(!0),this.N3(e,n,t,s),n.R3(!1)}}else{this.N3(a,l,t,s);for(let i=0,e=r.length;i<e;++i){const e=r[i];if(e===a)continue;const n=e.OF();n.RF().N3(e,n,t,s)}}h=c,Ep.wh(e),Ep.wh(r)}}O3(t,s){const i=this.h0;t.yO();for(let i=0,e=s.length;i<e;++i){const e=s[i],r=e.OF();r.j3(!0),this.P3(e,r,t)}t.gO();for(let e=0,r=s.length;e<r;++e){const r=s[e],n=r.OF();this.N3(r,n,t,i),n.j3(!1)}t.wO()}v3(t){const s=this.R0,i=this.F0,e=this.P0,r=this.tQ();let n;i.set(s.C$(r.Ka()),s.G$(r.$a()),s.C$(r.tl()),s.G$(r.sl())),this.j0&&i.equals(e)?n=this.k0:(n=this.z2(),this.j0=!0,e.m(i)),this.x3(t,n),n!==this.k0&&Ep.xh(this.k0,n)}N3(t,s,i,e){s.W2()?this.F3(t,s,i,e):this.P3(t,s,i)}P3(t,s,i){const e=s.z3();i.Ib()!==e&&e.RT(),t.Qv(i)}F3(t,s,i,e){this.B3(t,s,i,e,null)&&this.oX(i)}B3(t,s,i,e,r){const n=s.SJ().Sj();return n.ck(i,e,{dk:t,mk:s.ZW(),devicePixelRatio:this.Pc.U3(),time:t.W3(),yk:this.Pc.Q3()*this.q2(),gk:this.LU(),Uk:s.FJ(),Wk:n.aj()?null:this.J3(s),xk:r&&r.xk,Ik:r&&r.Ik,Ck:r&&r.Ck,Gk:r&&r.Gk,Nk:r&&r.Nk,_k:r&&r._k}),i.Ub(this.KT()),n.mL()}I3(t,s,i,e){const r=this.G0.A1(),n=this.Pc;0===r.length?(t.cO(i),t.ab(),e&&0===this.ET&&this.D1()?t.fO(s):(t.kT(this.ET),t.jT(this.t0),t.dO(s)),t.pO(s),n.D0(s)):this.Sj().ck(t,i,{dk:this,mk:this.ZW(),devicePixelRatio:n.U3(),yk:n.Q3()*this.q2(),gk:this.LU(),Uk:this.tQ(),Wk:null,$O:!0})}EW(){return this.o0}_W(t){this.o0!==t&&(this.o0=t,this.U$.V3(),this.j1(),this.Pc.BF())}uQ(){return this.q2()*this.Pc.uQ()}wq(){return this.q2()*this.Pc.wq()}q2(){return(this.o0*this.U$.DU()-1)*this.n0+1}W1(){if(!this.p0)return;this.p0=!1;const t=this.Pc.K2(),s=this.Pc.t3(),i=(this.RU()-t)*this.K$+t,e=(this.jU()-s)*this.$$+s,r=this.q2(),n=this.Pc.Z1()/r,h=this.Pc.X1()/r;let o=i-n/2,a=e-h/2;this.Pc.Kj()&&(o=Math.round(o),a=Math.round(a));const l=this.f0;l.set(o,a,o+n,a+h);const u=this.LU();0!==u&&(Dp.m(l),Dp.offset(-l.hl(),-l.ol()),Ap.Zl(Dp,u),Ap.Kl(Dp),Dp.offset(l.hl(),l.ol()),l.m(Dp));const c=this.AT;this.Y1(c,this.sA),this.l2()?this.Y3(c,this.d0):this.d0.m(this.sA)}Y3(t,s){const i=this.Pc.IF(),e=i.iB(),r=i.rB(),[n,h]=this.iQ(0,0,t),[o,a]=this.iQ(e,0,t),[l,u]=this.iQ(e,r,t),[c,f]=this.iQ(0,r,t);let d=Math.min(n,o,l,c),p=Math.min(h,a,u,f),m=Math.max(n,o,l,c),y=Math.max(h,a,u,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(y)||(y=1/0),s.set(d,p,m,y)}iQ(t,s,i=0){return this.H3(t,s,i,this.wq())}hQ(t,s,i=0){return this.H3(t,s,i,this.uQ()*this.lB())}H3(t,s,i,e){const r=this.Pc,n=r.pT(),h=this.q2(),o=r.Z1()/h,a=r.X1()/h,l=zp;kp.set(l,0,0,o,a),t/=e,s=l[3]-s/e;const u=this.r3(n),c=this.Y2(n),f=Fp;return Ep.RM.PM(t,s,i,c,u,l,f)?[f[0],f[1]]:[NaN,NaN]}q3(t,s){const i=this.o0,e=this.n0,r=this.K$,n=this.$$,h=this.a0,o=this.l2();o&&this.pF().Z3(!1),this.o0=1,this.n0=1,this.K$=1,this.$$=1,this.a0=0,this.j1();const a=this.iQ(t,s);return this.o0=i,this.n0=e,this.K$=r,this.$$=n,this.a0=h,this.j1(),o&&this.pF().Z3(!0),a}rQ(t,s,i=0){return this.X3(t,s,i,this.wq())}aQ(t,s,i=0){return this.X3(t,s,i,this.uQ()*this.lB())}X3(t,s,i,e){const r=this.Pc,n=r.pT(),h=this.q2(),o=r.Z1()/h,a=r.X1()/h,l=zp;kp.set(l,0,0,o,a);const u=this.r3(n),c=this.Y2(n),f=Fp;return Ep.RM.kM(t,s,i,c,u,l,f)?[f[0]*e,(l[3]-f[1])*e]:[NaN,NaN]}K3(t,s){return t*=this.uQ()*this.lB(),0!==s&&(t*=this.H1(s)),t}J3(t){const s=t.FJ(),i=t.kJ(),e=t.A3(),r=i+e,n=s.Ka(),h=s.$a(),o=s.tl(),a=s.sl();if(this.l2()){if(this.t4(n,h,i)||this.t4(o,h,i)||this.t4(o,a,i)||this.t4(n,a,i))return null;if(e>0&&(this.t4(n,h,r)||this.t4(o,h,r)||this.t4(o,a,r)||this.t4(n,a,r)))return null}else if(r>=this.q1())return null;let[l,u]=this.aQ(n,h,i),[c,f]=this.aQ(o,a,i);if(0!==this.LU()||e>0||this.l2()){const[t,s]=this.aQ(o,h,i),[d,p]=this.aQ(n,a,i);if(e>0){const[i,e]=this.aQ(n,h,r),[m,y]=this.aQ(o,h,r),[g,M]=this.aQ(o,a,r),[w,b]=this.aQ(n,a,r);let S=Math.min(l,c,t,d,i,m,g,w);c=Math.max(l,c,t,d,i,m,g,w),l=S,S=Math.min(u,f,s,p,e,y,M,b),f=Math.max(u,f,s,p,e,y,M,b),u=S}else{let i=Math.min(l,c,t,d);c=Math.max(l,c,t,d),l=i,i=Math.min(u,f,s,p),f=Math.max(u,f,s,p),u=i}}return Dp.set(l,u,c,f),Dp}_3(){return this.M0&&(this.s4(),this.M0=!1),this.g0}s4(){const t=this.Pc.pT(),s=this.r3(t),i=this.Y2(t);this.g0.VM(i,s)}t4(t,s,i){return this._3().HM(t,s,i)}i4(){return{d:this.N1(),s:this.EW(),a:this.OW(),v:this.yW(),i:this.SW(),html:this.xW(),bc:this.Z$.toJSON(),t:this.VW(),sx:this.l0,sy:this.u0,hosp:this.c0,px:this.jW(),py:this.zW(),c:this.DT.toJSON(),sr:this.LW(),fx:this.G0.ov(),cg:this.T0}}e4(t){this.Y$=!!t.d,this.o0=t.s,this.a0=t.a,this.H$=!!t.v,this.q$=!t.hasOwnProperty("i")||t.i,this.Q$=!!t.html,this.Z$.Ma(t.bc),this.X$=!!t.t,t.hasOwnProperty("sx")&&(this.l0=t.sx),t.hasOwnProperty("sy")&&(this.u0=t.sy),t.hasOwnProperty("hosp")&&(this.c0=!!t.hosp),this.K$=t.px,this.$$=t.py,this.DT.Ma(t.c),this.U0(),this.n0=t.sr,Ep.xh(this.T0,t.cg),Ep.xh(this.S0,this.w0);const s=new Set(this.T0);let i=0;for(let t=0,e=this.S0.length;t<e;++t)s.has(this.S0[t][2])||(this.S0[i]=this.S0[t],++i);Ep.Mh(this.S0,i),this.G0.av(t.fx),this.L0=!0}r4(){this.c1(!1),this.zF(),this.j1(),this.e3()}UU(){return this.z0}eP(){return this.B0}GK(t){t.TJ=this.UU(),this.B0.dispatchEvent(t)}lU(t,s=!1,i=!1){if(this.f$.includes(t))return s&&this.f$.sort((t,s)=>(t.OF().n4()??0)-(s.OF().n4()??0)),void(i&&this.f$.forEach((t,s)=>t.OF().f1(s)));if(t.h4()){const s=[...t.dV()];s.push(t),s.sort((t,s)=>(t.OF().n4()??0)-(s.OF().n4()??0));for(const t of s)if(t.vQ())for(const i of t.xQ()){if(s.includes(i))continue;const t=[...i.dV()];t.push(i),t.sort((t,s)=>(t.OF().n4()??0)-(s.OF().n4()??0)),t&&t.length&&s.splice(s.length,0,...t)}for(const t of s)t.JB().bB()&&this.e1(t,!0);i&&this.f$.forEach((t,s)=>t.OF().f1(s))}else{if(t.JB().bB()&&this.e1(t,!0),!t.vQ())return void(i&&this.f$.forEach((t,s)=>t.OF().f1(s)));for(const s of t.xQ()){const t=[...s.dV()];if(t.push(s),t.sort((t,s)=>(t.OF().n4()??0)-(s.OF().n4()??0)),t&&t.length)for(const s of t)s.JB().bB()&&this.e1(s,!0)}i&&this.f$.forEach((t,s)=>t.OF().f1(s))}}}}{let Xp=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},Kp=function(t,s){am!==t&&(t.l3(s),am=t)};0;const $p=self.Cs,tm=self.eJ,sm=(self.assert,$p.Jr($p.Rect),$p.Jr($p.Rect),$p.Jr($p.Rect)),im=$p.Jr($p.vo),em=self.hs.gs,rm=[],nm=[],hm=[],om=[];let am=null;$p.o4=class extends $p.Wr{constructor(t,s,i){super(),this.a4=t,this.Pc=t.oz(),this.qr=i[0],this.l4=i[1],this.u4=i[2],this._g=i[1],this.Eg=i[2],this.c4=!!i[3],this.f4=!!i[4],this.d4=i[5],this.m4=i[6],this.y4=i[7],this.g4=null,this.V$=i[8],this.NM=s,this.l0=0,this.u0=0,this.o0=1,this.a0=0,this.M4=new Set,this.w4=new Set,this.b4=new Set,this.S4=[],this.T4=[],this.v4=new Map,this.x4=new Map,this.I4=[],this.C4=!1,this.G4=em.create(),this.N4=em.create(),this._4=em.create(),this.E4=[],this.D4=[],this.A4=new Map,this.L4=new Map,this.O4=-1;const e=this.Pc.IF();this.G0=$p.Jr($p.N0,this,i[11]),this.Mj=$p.Jr($p.RM.oR,e._0(),{ZO:(t,s)=>{const i=s.uj().nO();t.SL(),t.dO(i),t.pO(i),e.D0(i)},KO:t=>this.CU().A0(t)}),this.L0=!0,this.R4=!1,this.h0=null,this.j4={},this.P4=new Map,this.F4=!0,this.z4=new self.IU(this),this.B0=$p.Jr($p.Event.Mf);for(const t of i[9])this.E4.push($p.B$.J0(this,null,t));this.B4();for(const t of this.JU())t.V0();for(const t of i[10]){const s=this.Pc.Y0(t[1]);if(!s)throw new Error("missing nonworld object class");s.q0()||s.Z0(t),this.I4.push(t),this.H0(s)}}Vr(){for(const t of this.D4)t.Vr();$p.wh(this.D4),this.b4.clear(),this.g4=null,this.a4=null,this.Pc=null}oz(){return this.Pc}_c(){return this.qr}G1(){return this.V$}Tj(){return this.NM}CU(){return this.G0}Sj(){return this.E1(),this.Mj}E1(){const t="low"===this.Pc.IF().w3();if(!this.L0&&this.R4===t&&!this.Mj.$R())return;const s=this.CU().A1();this.Mj.tk(s.map(t=>t.JC()),{tR:s.map(t=>t.Tj()),iR:t,hR:!0}),this.L0=!1,this.R4=t}wY(){this.CU().wY(),this.L0=!0}U4(){let t=this.D4[0].q2();for(let s=1,i=this.D4.length;s<i;++s){const i=this.D4[s];0===i.jW()&&0===i.zW()||(t=Math.min(t,i.q2()))}return t}W4(){return.5*this.Pc.Z1()/this.U4()}Q4(){return.5*this.Pc.X1()/this.U4()}F1(){return this.zU()?-1/0:this.W4()}z1(){return this.zU()?1/0:this.Yy()-this.W4()}B1(){return this.zU()?-1/0:this.Q4()}U1(){return this.zU()?1/0:this.eg()-this.Q4()}OU(t){const s=this.F1(),i=this.z1();t>i&&(t=i),t<s&&(t=s),this.l0!==t&&(this.l0=t,this.J4(),this.Pc.BF())}RU(){return this.l0}kU(t){const s=this.B1(),i=this.U1();t>i&&(t=i),t<s&&(t=s),this.u0!==t&&(this.u0=t,this.J4(),this.Pc.BF())}jU(){return this.u0}zU(){return this.c4}V3(){this.OU(this.RU()),this.kU(this.jU());for(const t of this.D4)t.P1()&&(t.OU(t.RU()),t.kU(t.jU()))}eW(t,s){this.d4===t&&this.m4===s||(this.d4=t,this.m4=s,this.V4()&&(this.Y4(),this.J4(),this.Pc.BF()))}H4(){return this.aW()?.5:this.d4}q4(){return this.aW()?.5:this.m4}nW(){return[this.H4(),this.q4()]}C3(){const t=this.H4(),s=this.q4();return t<0||t>1||s<0||s>1}hW(){this.f4&&(this.f4=!1,this.Y4(),this.J4(),this.Pc.BF())}oW(){this.f4||(this.f4=!0,this.Y4(),this.J4(),this.Pc.BF())}aW(){return this.f4}V4(){return!this.aW()}Z3(t){t=!!t,this.C4!==t&&(this.C4=t,this.J4(),this.Pc.BF())}u2(){return this.C4}Z4(t,s,i,e,r,n,h,o,a){Xp(this.G4,t,s,i)&&Xp(this.N4,e,r,n)&&Xp(this._4,h,o,a)||(em.set(this.G4,t,s,i),em.set(this.N4,e,r,n),em.set(this._4,h,o,a),this.X4())}X4(){this.J4(),this.Pc.BF()}h2(){return this.G4}s3(){return this.N4}i3(){return this._4}DU(){return this.o0}EU(t){this.o0!==t&&(this.o0=t,this.J4(),this.V3(),this.Pc.BF())}AU(t){t=$p.Kr(t),this.a0!==t&&(this.a0=t,this.J4(),this.Pc.BF())}LU(){return this.a0}Yy(){return this._g}tg(t){!isFinite(t)||t<1||(this._g=t)}eg(){return this.Eg}Hy(t){!isFinite(t)||t<1||(this.Eg=t)}K4(){return this.g4}C1(){return this.E4}*JU(){for(const t of this.E4)yield*t.mW()}QU(){return this.D4}t5(){return this.D4.length}RF(t){return"number"==typeof t?this.jF(t):this.b1(t.toString())}jF(t){return t=$p.Xr(Math.floor(t),0,this.D4.length-1),this.D4[t]}b1(t){return this.A4.get(t.toLowerCase())||null}s5(t){return!!this.b1(t)}i5(t){return this.L4.get(t)||null}Y4(){for(const t of this.D4)t.e3()}J4(){for(const t of this.D4)t.j1()}qU(t,s,i){if(this.s5(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=i>=2?s:s.uW(),r=$p.Jr($p.B$,this,e,{name:t,D$:Math.floor(1e15*Math.random()),A$:!0});this.e5(r,s,i),this.oz().BF(),this.v1()}XU(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.r5(t),this.e5(t,s,i),this.oz().BF(),this.v1())}$U(t){if(this.r5(t)){const s=this.Pc.oP();s.uU(!0),t.Vr(),s.uU(!1),this.oz().BF(),this.v1()}}sW(){const t=new Set;for(const s of this.JU())s.N1()&&!s._1()&&t.add(s);if(0===t.size)return;const s=this.Pc.oP();s.uU(!0);for(const s of t)this.r5(s),s.Vr();s.uU(!1),this.oz().BF(),this.v1()}e5(t,s,i){if(i>=2)if(s){if(s===t||s.T2(t))throw new Error(`cannot move layer '${t._c()}' to sub-layer of itself`);s.g2(t,2===i),t.d2(s)}else 2===i?this.E4.push(t):this.E4.unshift(t),t.d2(null);else{const e=s.uW();if(e){if(s.T2(t))throw new Error(`cannot move layer '${t._c()}' to sub-layer of itself`);e.M2(t,s,0===i),t.d2(e)}else{let e=this.E4.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");0===i&&++e,this.E4.splice(e,0,t),t.d2(null)}}}r5(t){const s=t.uW();if(s)return s.w2(t),!0;if(this.E4.length>1){const s=this.E4.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");return this.E4.splice(s,1),!0}return!1}B4(){this.D4=[...this.JU()],this.A4.clear(),this.L4.clear();for(let t=0,s=this.D4.length;t<s;++t){const s=this.D4[t];s.S1(t),this.A4.set(s._c().toLowerCase(),s),this.L4.set(s.G1(),s)}}n5(){let t=0;for(const s of this.E4){for(const i of s.mW())i.T1(t);s.xW()&&t++}}h5(){return this.E4.at(-1).uq()+1}async v1(){this.B4(),this.n5(),this.O4=this.h5()}o5(){return this.O4}a5(){this.O4=-1}D2(t){const s=[];for(const i of this.E4){const e=i.uq();if(e===t)s.push(i);else if(e>t)break}return s}I2(){return{scrollX:this.RU(),scrollY:this.jU(),scale:this.DU(),angle:this.LU(),vpX:this.H4(),vpY:this.q4()}}C2(t){this.OU(t.scrollX),this.kU(t.scrollY),this.EU(t.scale),this.AU(t.angle),this.eW(t.vpX,t.vpY)}l5(){let t=this.E4.filter(t=>t.S2())[0];for(;t;){if(!t.VW())return im.ko(t.XW()),im.Ro(1),im;if(t.U2())return im.No(0,0,0,0),im;t=t.dW().filter(t=>t.S2())[0]}return im.No(0,0,0,0),im}t1(){return this.F4}u5(){return[...this.M4]}H0(t){if(t.vQ())for(const s of t.f5().c5())this.M4.add(s);else this.M4.add(t)}d5(){return[...this.w4]}p5(t,s){if(t===this||!s)return Promise.resolve();t&&($p.po(this.w4,t.w4),t.w4.clear());const i=[];for(const t of this.M4)this.w4.has(t)||(i.push(t.m5(s)),this.w4.add(t));return Promise.all(i)}async y5(t){if(t.w1())throw new Error("cannot load textures for family");const s=this.Pc.pT();if(!s||s.pD()||this.w4.has(t))return;this.w4.add(t);const i=t.m5(s);this.g5(i),await i,t.M5(),this.Pc.BF()}g5(t){this.b4.add(t),t.then(()=>this.b4.delete(t)).catch(()=>this.b4.delete(t))}w5(){return Promise.all([...this.b4])}b5(t){if(t.w1()||t.hU()>0)throw new Error("cannot unload textures");const s=this.Pc.pT();s&&this.w4.has(t)&&(this.w4.delete(t),t.S5(s))}T5(t,s){if(t!==this&&s)for(const s of this.w4)s.z$()||t.M4.has(s)||(s.S5(),this.w4.delete(s))}v5(){this.w4.clear()}async x5(t){const s=this.Pc,i=this.a4,e=s.oP();this.y4&&(this.g4=e.I5(this.y4),this.g4.C5()),i.G5(this),this._g=this.l4,this.Eg=this.u4,this.l0=s.Yj()/2,this.u0=s.qj()/2,this.V3(),this.Y4(),this.J4(),this.n5(),await this.Pc.IF().N5(this.h5(),!0),this._5(t),this.Pc.E5(!0),this.D5(),this.F4||this.A5(),this.L5(this.S4),this.L5(this.T4),this.O5(),i.R5(),s.pU(),this.Pc.E5(!1);const r=this.Pc.k5();if(await Promise.all(r),$p.wh(r),!s.j5()){for(const t of this.S4)t.P5();for(const t of this.T4)t.F5(this.v4,this.x4);for(const[t,s]of Object.entries(this.j4)){const i=this.Pc.Kq(parseInt(t,10));i&&!i.w1()&&i.s1()&&$p.wh(s)}for(const t of this.S4)t.z5();for(const t of this.T4)t.z5();for(const t of this.S4)t.MV()||t.B5();for(const t of this.T4)t.MV()||t.B5()}$p.wh(this.S4),$p.wh(this.T4),this.v4.clear(),this.x4.clear(),await Promise.all([...this.M4].map(t=>t.U5(this.Pc.pT()))),t&&(s.Mf().dispatchEvent(new $p.Event("beforefirstlayoutstart")),await s.W5(new $p.Event("beforeprojectstart"))),await this.Q5(new $p.Event("beforeanylayoutstart")),s.Mf().dispatchEvent(new $p.Event("beforelayoutstart")),await this.W5(new $p.Event("beforelayoutstart")),s.j5()||await s.ZF($p.tz.$F.KF.J5,null,null),s.Mf().dispatchEvent(new $p.Event("afterlayoutstart")),await this.W5(new $p.Event("afterlayoutstart")),await this.Q5(new $p.Event("afteranylayoutstart")),t&&(s.Mf().dispatchEvent(new $p.Event("afterfirstlayoutstart")),await s.W5(new $p.Event("afterprojectstart"))),e.V5(i),await this.w5(),this.F4=!1}_5(t){for(const t of this.Pc.M1())if(!t.w1()&&t.bB())for(const s of t.iU()){const t=s.OF(),i=t.RF(),e=$p.Xr(i.Tj(),0,this.D4.length-1),r=this.D4[e];t.FF(r,!0),r.n1(s)}if(!t)for(const t of this.D4)t.c1(!1)}D5(){for(const t of this.D4)t.$0(this.S4),t.d1()}A5(){let t=!1;for(const[s,i]of Object.entries(this.j4)){const e=this.Pc.Kq(parseInt(s,10));if(e&&!e.w1()&&e.s1())for(const s of i){let i=null;if(e.bB()&&(i=s.hasOwnProperty("instJson")?this.i5(s.instJson.w.l):this.i5(s.w.l),!i))continue;const r=this.Pc.i1(e,i,!1,0,0,!0);s.hasOwnProperty("instJson")?r.av(s.instJson):r.av(s),t=!0,this.T4.push(r),s.hasOwnProperty("instJson")&&(this.v4.set(r,s),this.x4.set(s.index,r))}}for(const t of this.D4)t.c1(!0),t.zF();t&&(this.Pc.pU(),this.Pc.Y5())}L5(t){for(const s of t){if(!s.vQ())continue;const i=s.OF(),e=s.GQ();for(const r of s.fQ().f5().vU()){if(r===s.fQ())continue;const n=r.iU();if(n.length>e)s.H5(n[e]);else{let e;e=i?this.Pc.i1(r,i.RF(),!0,i.YT(),i.ZT(),!0):this.Pc.i1(r,null,!0,0,0,!0),this.Pc.pU(),r.q5(),s.H5(e),t.push(e)}}}}O5(){for(const t of this.I4)this.Pc.Y0(t[1]).vQ()||this.Pc.i1(t,null,!0)}Z5(){const t=[],s=this.I4;let i=0;for(let e=0,r=s.length;e<r;++e){const r=s[e],n=this.Pc.Y0(r[1]);n.z$()?n.vQ()&&n.f5().X5()||t.push(this.Pc.i1(r,null,!0)):(s[i]=r,++i)}$p.Mh(s,i),this.Pc.pU(),this.L5(t)}g1(t,s,i,e,r,n,h){if(i)return i.g1(t,s,r,n,e,h);{const i=[];for(const o of this.D4)i.push(o.g1(t,s,r,n,e,h));return i.flat()}}async K5(){const t=this.a4;this.Pc.j5()||(await this.Q5(new $p.Event("beforeanylayoutend")),await this.W5(new $p.Event("beforelayoutend")),await this.Pc.ZF($p.tz.$F.KF.t6,null,null),await this.W5(new $p.Event("afterlayoutend")),await this.Q5(new $p.Event("afteranylayoutend"))),t.s6(!0),this.Pc.oP().i6(),this.F4||this.e6();for(const t of this.D4)t.m1();for(const t of this.Pc.M1())if(!(t.z$()||t.bB()||t.JB().MB()||t.w1())){for(const s of t.iU())this.Pc.MQ(s);this.Pc.pU()}t.s6(!1),t.uF()===this&&t.G5(null)}r6(t,s){const i=t.fQ().G1().toString();this.j4.hasOwnProperty(i)||(this.j4[i]=[]);const e=this.j4[i],r={index:s,instJson:t.ov(),sceneGraphJson:{children:[]}};e.push(r),this.P4.set(t,r)}n6(t){const s=this.P4.get(t);for(const i of t.h6()){const t=this.P4.get(i);t&&s.sceneGraphJson.children.push({index:t.index,flags:$p.a6.o6(i.OF())})}}e6(){this.P4.clear();let t=0;for(const s of this.D4){s.N2();for(const i of s.PF()){const s=i.fQ();!s.z$()&&s.s1()&&(this.r6(i,t),t++)}}for(const t of this.D4)for(const s of t.PF()){const t=s.fQ();!t.z$()&&t.s1()&&this.n6(s)}this.P4.clear()}l6(){this.j4={},this.F4=!0}nO(){return this.h0}U2(){const t=this.Pc,s=t.pT().zS();return"low"===t.IF().w3()||s&&t.M3()||this.G0.W2()||s&&t.a2()}u6(t){const s=this.Pc.IF();if(this.U2()){t.cO(null),t.KL(0,0,0,0);const i={ix:this.Pc.Zj(),qx:t.tb()||this.Pc.M3()||this.G0.W2(),g3:!!t.tb()&&this.Pc.M3()};"low"===s.w3()&&(i.width=s.h3(),i.height=s.o3()),this.h0=this.Pc.b3(i)}else this.h0=null}c6(t){this.Pc.f6(t)&&(t.sO(!1),t.cO(null),t.ab(),t.fO(this.h0))}d6(t){this.U2()&&(t.sO(!1),this.p6(t,this.h0))}m6(t){t.cO(this.h0),t._u(this.l5()),this.Pc.a2()&&t.tO();const s=this.D2(0);this.S3(t,this.h0,s,!0),t.tb()&&t.m3(0,1),this.d6(t),this.h0=null}y6(t,s){let i=null;this.Pc.f6(t)&&(i=this.h0),t.cO(i),t.KL(0,0,0,0),this.Pc.a2()&&t.tO();const e=this.D2(s);this.S3(t,i,e,!0),this.c6(t),t.LS(),this.Pc.IF().g6(s)}S3(t,s,i,e){const r=i.filter(t=>t.S2());for(let i=0,n=r.length;i<n;){const h=r[i];if(h.c2()&&!h.Q2()){rm.push(h);for(let t=i+1;t<n;++t){const s=r[t];if(!s.c2()||s.Q2())break;rm.push(r[t])}if(rm.length>=2||1===rm.length&&rm[0].b2()){this.M6(t,s,rm),i+=rm.length,$p.wh(rm);continue}$p.wh(rm)}h.Qv(t,s,e&&0===i),++i}}p6(t,s){const i=this.G0.A1(),e=this.Pc;0===i.length?(t.cO(null),t.ab(),t.fO(s),t.pO(s),e.D0(s)):(sm.set(0,0,e.Z1(),e.X1()),this.Sj().ck(t,null,{dk:this,mk:3,devicePixelRatio:this.Pc.U3(),yk:this.Pc.Q3()*this.DU(),gk:this.LU(),Uk:sm,Wk:null,$O:!0}))}M6(t,s,i){const e=i[0],r=e.u3(t);e.d3(t),i[0].VW()||(im.ko(i[0].XW()),im.Ro(1),t._u(im)),t.sO(!0);const n=nm,h=hm,o=om;for(const s of i)s.N2(),s.n2(n),s.y3(t,"beforedraw");for(let i=0,e=n.length;i<e;){const r=n[i],a=r.OF(),l=a.RF();if(!a.wW()||!a.E3(l._3())){++i;continue}(!r.D3()||a.A3()>0)&&o.push(r);const u=r.OF().kJ();h.push(r);let c=i+1;for(;c<e;++c){const t=n[c],s=t.OF();if(s.wW()&&s.E3(s.RF()._3())){if(s.kJ()!==u)break;t.D3()?(s.A3()>0&&o.push(t),h.push(t)):o.push(t)}}if(1!==h.length||h[0].L3()){this.w6(t,s,h);for(let i=0,e=o.length;i<e;++i){const e=o[i],r=e.OF(),n=r.RF();r.R3(!0),Kp(n,t),n.N3(e,r,t,s),r.R3(!1)}}else{Kp(l,t),l.N3(r,a,t,s);for(let i=0,e=o.length;i<e;++i){const e=o[i];if(e===r)continue;const n=e.OF(),h=n.RF();Kp(h,t),h.N3(e,n,t,s)}}i=c,$p.wh(h),$p.wh(o)}for(const s of i)s.y3(t,"afterdraw");r&&t.TO(r),$p.wh(n),am=null}w6(t,s,i){t.yO();for(let s=0,e=i.length;s<e;++s){const e=i[s],r=e.OF(),n=r.RF();r.j3(!0),Kp(n,t),n.P3(e,r,t)}t.gO();for(let e=0,r=i.length;e<r;++e){const r=i[e],n=r.OF(),h=n.RF();Kp(h,t),h.N3(r,n,t,s),n.j3(!1)}t.wO()}i4(){const t={sx:this.RU(),sy:this.jU(),s:this.DU(),a:this.LU(),w:this.Yy(),h:this.eg(),ortho:this.aW(),vpX:this.H4(),vpY:this.q4(),fv:this.F4,persist:this.j4,fx:this.G0.ov(),layers:{},dynamicLayers:[]};for(const s of this.D4)if(s.N1()){const i=s.uW();t.dynamicLayers.push({sid:s.G1(),name:s._c(),parentSid:i?i.G1():null,siblingIndex:s.I1(),data:s.i4()})}else t.layers[s.G1().toString()]=s.i4();return t}e4(t){this.l0=t.sx,this.u0=t.sy,this.o0=t.s,this.a0=t.a,this._g=t.w,this.Eg=t.h,this.f4=!!t.ortho,t.hasOwnProperty("vpX")&&(this.d4=t.vpX),t.hasOwnProperty("vpY")&&(this.m4=t.vpY),this.F4=!!t.fv,this.j4=t.persist,this.G0.av(t.fx),this.L0=!0;for(const[s,i]of Object.entries(t.layers)){const t=parseInt(s,10),e=this.i5(t);e&&e.e4(i)}if(t.hasOwnProperty("dynamicLayers")){this.sW(),this.Pc.pU();const s=new Map,i=t.dynamicLayers;for(let t=i.length-1;t>=0;--t){const e=i[t],r=e.sid,n=e.name,h=e.parentSid,o=e.siblingIndex,a=e.data;if(this.B4(),this.s5(n)||this.i5(r))continue;let l,u;if(null===h)l=null,u=this.E4;else{if(l=this.i5(h),!l)continue;u=l.dW()}const c=$p.Jr($p.B$,this,l,{name:n,D$:r,A$:!0});u.push(c);let f=s.get(u);f||(f=[],s.set(u,f)),f.push({TJ:c,b6:o}),c.e4(a)}for(const[t,i]of s){i.sort((t,s)=>t.b6-s.b6);for(const s of i){const i=s.TJ,e=s.b6;let r=t.indexOf(i);t.splice(r,1),t.splice(e,0,i)}}}this.v1(),this.Y4(),this.J4()}cF(){return this.z4}eP(){return this.B0}GK(t){t.layout=this.cF();const s=this.Pc,i=s.iJ()&&!s.oP().fU();i&&tm.S6(),this.B0.dispatchEvent(t),i&&tm.T6()}W5(t){return t.layout=this.cF(),this.B0.Cf(t)}Q5(t){return t.layout=this.cF(),this.Pc.W5(t)}v6(){this.x6(this.E4)}x6(t,s=0){const i=t.slice(0);i.reverse();for(const t of i)console.log(`${"\t".repeat(s)}- ${t._c()}`),this.x6(t.dW(),s+1)}}}{const lm=self.Cs;lm.I6=class extends lm.Wr{#s;#i=[];#f=new Map;#a=new Map;#e=null;#t=[];#n=null;#h=0;#d=null;constructor(t){super(),this.#s=t}Vr(){this.#s=null,this.#e=null,this.#n=null,this.#d=null,lm.wh(this.#i),this.#f.clear(),this.#a.clear(),lm.wh(this.#t)}QI(t){const s=lm.Jr(lm.o4,this,this.#i.length,t);this.#i.push(s),this.#f.set(s._c().toLowerCase(),s),this.#a.set(s.G1(),s)}oz(){return this.#s}C6(t){this.#n=t}G6(){if(this.#n)return this.#n;if(this.#i.length)return this.#i[0];throw new Error("no first layout")}N6(t){return this.#f.get(t.toLowerCase())||null}_6(t){return this.#a.get(t)||null}E6(t){return t=lm.Xr(Math.floor(t),0,this.#i.length-1),this.#i[t]}pF(t){return"number"==typeof t?this.E6(t):this.N6(t.toString())}yF(){return this.#i}G5(t){this.#e=t}uF(){return this.#e}D6(t){if(this.#t.includes(t))throw new Error("layout already running");this.#t.push(t)}A6(t){const s=this.#t.indexOf(t);if(-1===s)throw new Error("layout not running");this.#t.splice(s,1)}*L6(){this.#e&&(yield this.#e),this.#t.length&&(yield*this.#t)}O6(t){return this.#e===t||this.#t.includes(t)}s6(t){if(t)this.#h++;else{if(this.#h<=0)throw new Error("already unset");this.#h--}}dU(){return this.#h>0}wF(t){this.#d=t}R5(){this.#d=null}MF(){return!!this.#d}R6(){return this.#d}k6(){const t=this.uF();t&&t.Y4()}j6(){const t=this.uF();t&&t.J4()}}}{const um=self.Cs,cm=new RegExp("<(.+?)>","g");um.P6=class extends um.Wr{constructor(t){super(),this.Pc=t,this.F6=um.Jr(um.z6),this.B6=null,this.U6=[],this.W6=new Map,this.Q6=new Map,this.J6=new Map,this.V6=[],this.Y6=[],this.H6=[],this.q6=!1,this.Z6=!1,this.X6=!1,this.K6=()=>this.t8(),this.s8=()=>this.i8(),this.e8=()=>this.r8(),this.n8=()=>this.h8(),this.o8=t=>this.a8(t.fY),this.l8=t=>this.u8(),this.c8=t=>this.f8(),this.d8=t=>this.p8(),this.m8=[],this.y8=0}Vr(){this.g8(),this.K6=null,this.s8=null,this.e8=null,this.n8=null,this.o8=null,this.c8=null;for(const t of this.U6)t.eH(),t.Vr();um.wh(this.U6),this.U6=null,this.F6.Vr(),this.F6=null,um.wh(this.V6),this.V6=null,um.wh(this.Y6),this.Y6=null,um.wh(this.H6),this.H6=null,this.W6.clear(),this.W6=null,this.Q6.clear(),this.Q6=null,this.J6.clear(),this.J6=null,um.wh(this.m8),this.m8=null,this.Pc=null}M8(){const t=this.Pc.Mf();t.addEventListener("pretick",this.K6),t.addEventListener("tick2",this.s8),t.addEventListener("beforelayoutchange",this.e8),t.addEventListener("layoutchange",this.n8),t.addEventListener("instancedestroy",this.o8),t.addEventListener("beforeload",this.l8),t.addEventListener("afterload",this.c8),t.addEventListener("afterlayoutstart",this.d8)}g8(){const t=this.Pc.Mf();t.removeEventListener("pretick",this.K6),t.removeEventListener("tick2",this.s8),t.removeEventListener("beforelayoutchange",this.e8),t.removeEventListener("layoutchange",this.n8),t.removeEventListener("instancedestroy",this.o8),t.removeEventListener("beforeload",this.l8),t.removeEventListener("afterload",this.c8),t.removeEventListener("afterlayoutstart",this.d8)}QI(t){this.F6.Fu(t);const s=um.b8.w8(t,this);this.Fu(s),this.S8(s),this.J6.set(s._c(),0)}T8(t){const s=this.v8(),i=t._Q(),e=s.Js(i),r=um.b8.T8(`${i}:${this.J6.get(i)}`,e,this);return this.x8(i),this.Fu(r),r}x8(t){this.J6.set(t,this.J6.get(t)+1)}I8(){for(const t of this.U6){if(t.C8())continue;const s=t._Q();this.x8(s)}}G8(){for(const t of this.J6.keys())this.J6.set(t,0)}Fu(t){this.U6.push(t),this.W6.set(t._c().toLowerCase(),t)}Xf(t){t.N8(),t.C8()||(um.Ch(this.U6,t),um.Ch(this.V6,t),um.Ch(this.Y6,t),um.Ch(this.H6,t),this.W6.delete(t._c().toLowerCase()),this._8(t),t.sH()||t.Vr())}HQ(t){this.Pc.HQ(t,this.B6,null)}oz(){return this.Pc}v8(){return this.F6}E8(t){this.B6=t}D8(){return this.B6}*A8(){for(const t of this.U6)yield t}*L8(){for(const t of this.Y6)yield t}O8(t,s){this.Q6.has(t)||this.Q6.set(t,new Set),this.Q6.get(t).add(s)}S8(t){for(const s of t.k8())this.O8(s,t)}_8(t){for(const[s,i]of this.Q6.entries())i.has(t)&&(i.delete(t),0===i.size&&this.Q6.delete(s))}j8(t){if(this.Q6.has(t))return this.Q6.get(t)}P8(t,s){if(s)for(const i of this.U6)if(s.every(t=>i.F8(t.fY,t.trackId))&&i._c().includes(t._c()))return i}z8(t){return this.W6.get(t.toLowerCase())||null}B8(t){for(const s of this.V6)if(s._c()===t)return s;for(const s of this.Y6)if(s._c()===t)return s;return null}*U8(t){if(cm.test(t)){let s;cm.lastIndex=0;const i=new Set;do{if(s=cm.exec(t),s){const t=s[1].split(",");for(const s of t)i.add(s)}}while(s);for(const t of i.values()){const s=this.z8(t);s&&(yield s)}i.clear()}else{const s=this.z8(t);s&&(yield s)}}*W8(t){for(const s of this.U6)s.nH(t)&&(yield s)}Q8(t){this.V6.includes(t)||this.V6.push(t),this.J8()}V8(t){um.Ch(this.Y6,t),this.Y8()}H8(t){this.Y6.includes(t)?(t.q8(!0),t.Z8(!1),t.X8(!1)):(t.q8(!1),t.Z8(!0),t.X8(!1),this.V6.includes(t)||this.V6.push(t)),this.J8()}K8(t){t.q8(!1),t.Z8(!1),t.t7(),um.Ch(this.V6,t),this.Y8()}s7(t){t.q8(!1),t.Z8(!1),this.Y6.includes(t)&&(t.X8(!0),this.H6.push(t),um.Ch(this.Y6,t)),this.V6.includes(t)&&t.X8(!0)}i7(t){t.q8(!1),t.Z8(!1),t.X8(!1),t.dH(1),um.Ch(this.Y6,t)}e7(t){this.s7(t),t.t7()}t8(){const t=this.oz();if(t.j5())return;if(!this.q6)return;if(this.Z6)return;let s=0;for(t.iJ()&&(s=performance.now()),this.X6=!0;this.V6.length;){const t=this.V6.pop();t.r7()?(t.n7(),this.H6.push(t)):(t.h7(),this.Y6.push(t)),0!==t.o7()&&(this.y8=1)}const i=this.Pc.a7(),e=this.Pc.l7(),r=this.Pc.zP();for(let t=this.Y6.length-1;t>=0;t--){const s=this.Y6[t];s&&s.u7(i,r,e)}this.X6=!1,t.iJ()&&globalThis.eJ.c7(performance.now()-s),0!==this.y8&&t.BF()}i8(){const t=this.oz();if(t.j5())return;if(!this.q6)return;if(this.Z6)return;let s,i=0;t.iJ()&&(i=performance.now());for(let t=0,i=this.H6.length;t<i;t++){const i=this.H6[t];s||(s=new Set),i.N8(),this.f7(i),s.add(i)}if(s){um._h(this.H6,s),this.y8=0;for(let t=0,s=this.Y6.length;t<s;t++)if(0!==this.Y6[t].o7()){this.y8=1;break}}this.Y8(),t.iJ()&&globalThis.eJ.c7(performance.now()-i)}f7(t){t.sH()||t.d7()&&t.p7()&&t.m7()&&t.y7()}J8(){this.q6||(this.q6=!0)}Y8(){this.H6.length||this.Y6.length||this.V6.length||this.X6||(this.q6=!1)}r8(){for(this.Z6=!0;this.V6.length;)this.K8(this.V6.pop());const t=new Set;for(const s of this.Y6)s.r8()&&(s.N8(),t.add(s));um._h(this.Y6,t),t.clear();for(const s of this.H6)s.r8()&&(s.N8(),t.add(s));um._h(this.H6,t),this.Y8();for(const t of this.U6)t.g7()}h8(){this.Z6=!1}a8(t){const s=t.fQ(),i=this.j8(s);if(i)if(this.Pc.j5())this.m8.push(t);else for(const t of i)t.C8()||(t.sH()?this.Xf(t):t.d7()||(this.f7(t),this.Xf(t)))}u8(){for(const t of this.V6.map(t=>t))this.f7(t),this.Xf(t);for(const t of this.Y6.map(t=>t))this.f7(t),this.Xf(t)}f8(){for(const t of this.m8)this.a8(t);um.wh(this.m8);for(const t of this.U6)t.f8()}p8(){const t=this.Pc.dF().uF();if(t)for(const s of this.U6){const i=s.M7();i&&t._c()===i&&this.H8(s)}}i4(){return{timelinesJson:this.w7(),scheduledTimelinesJson:this.b7(),playingTimelinesJson:this.S7(),markedForRemovalTimelinesJson:this.T7(),hasRuntimeListeners:this.q6,changingLayout:this.Z6,isTickingTimelines:this.X6}}e4(t){t&&(this.G8(),this.v7(t.timelinesJson),this.x7(t.scheduledTimelinesJson),this.I7(t.playingTimelinesJson),this.C7(t.markedForRemovalTimelinesJson),this.q6=!t.hasRuntimeListeners,this.Z6=!!t.changingLayout,this.X6=!!t.isTickingTimelines,this.I8(),this.J8(),this.Y8())}w7(){return this.U6.map(t=>t.i4())}v7(t){for(const s of t){let t=this.z8(s.name);if(t)t.e4(s);else{const i=this.G7(s);if(!i)continue;const e=this.z8(i);t=this.T8(e),t.e4(s)}t.N7()||this.Xf(t)}}G7(t){const s=t.name.split(":");return s&&2===s.length?s[0]:null}b7(){return this._7(this.V6)}x7(t){this.E7(t,this.V6)}S7(){return this._7(this.Y6)}I7(t){this.E7(t,this.Y6)}T7(){return this._7(this.H6)}C7(t){this.E7(t,this.H6)}D7(t,s){if(!s)return!1;for(const i of s)if(i===t._c())return!0;return!1}_7(t){return t.map(t=>t._c())}E7(t,s){const i=new Set;for(const e of s)this.D7(e,t)||i.add(e);if(um._h(s,i),t){const i=t=>s=>s._c()===t;for(const e of t){const t=this.z8(e);t&&(s.find(i(e))||s.push(t))}}}}}{const fm=self.Cs,dm=[0,0],pm=[0,0],mm=[0,0],ym=[0,0,0,0,0],gm=new Array(4),Mm=[{x:0,y:0,t:0,bt:0},{x:0,y:0,t:0,bt:0},{x:0,y:0,t:0,bt:0}],wm={x:0,y:0,t:0,bt:0};fm.A7=class{constructor(t,s){this.L7=!1,this.O7=t,this.R7=[];let i=null;if(i=s?this.O7.k7(s):fm.Fh(this.O7.j7()),!i)return;const e=i.LH("offsetX"),r=i.LH("offsetY");if(!e||!r)return;this.P7=e,this.F7=r;const n=e.z7(),h=r.z7();for(let t=1,s=Math.min(n.length,h.length);t<s;++t){const s=n[t],i=(s.B7(),s.U7()),e=h[t],r=(e.B7(),e.U7());i&&"cubic-bezier"===i.W7()&&r&&"cubic-bezier"===r.W7()?this.R7.push(fm.Jr(fm.Q7,i,r,s,e,this.R7.length)):(i&&"line"===i.W7()&&r&&r.W7(),this.R7.push(fm.Jr(fm.J7,s,e,this.R7.length)))}this.L7=!0}Vr(){for(const t of this.R7)t.Vr();fm.wh(this.R7),this.R7=null,this.O7=null,this.P7=null,this.F7=null}V7(){return this.L7}Y7(){return this.R7}H7(t){const s="relative"===this.P7.q7()?t.YT():0,i="relative"===this.F7.q7()?t.ZT():0;for(const t of this.R7)t.H7(s,i)}kM(t,s,i){let e=NaN,r=this.R7.length;for(let i=0;i<r;i++){const r=this.R7[i];if("cubic-bezier"===r.HC()){const i=r.kM(t,s);(isNaN(e)||i[3]<e)&&(e=i[3],mm[0]=i[2],mm[1]=r.Tj())}}return mm}Z7(t,s,i){const e=i.X7;fm.$i(e[0])||(e[0]=0),fm.$i(e[1])||(e[1]=1);let r=NaN,n=this.R7.length;for(let i=0;i<n;i++){const n=this.R7[i];if("cubic-bezier"===n.HC()){const i=n.K7(t,s,e);(isNaN(r)||i[3]<r)&&(r=i[3],mm[0]=i[2],mm[1]=n.Tj())}}return mm}t9(t,s){return this.R7[s].t9(t)}s9(t,s){return this.R7[s].s9(t)}},fm.Q7=class{constructor(t,s,i,e,r){this.NM=r;const n=t.i9("cubic-bezier"),h=i.i9("cubic-bezier"),o=s.i9("cubic-bezier"),a=e.i9("cubic-bezier");this.e9=t.r9(),this.n9=s.r9(),this.h9=t.r9()+n.o9(),this.a9=s.r9()+o.o9(),this.l9=i.r9()+h.u9(),this.c9=e.r9()+a.u9(),this.f9=i.r9(),this.d9=e.r9(),this.p9=0,this.m9=0,this.y9=0,this.g9=0,this.M9=0,this.w9=0,this.b9=0,this.S9=0,this.T9=0,this.v9=0,this.x9=0,this.I9=0,this.C9=0,this.G9=0,this.N9=0,this._9=0,this.E9=0,this.D9=0,this.A9=0,this.L9=0,this.O9=NaN,this.L7=!1,this.R9=100,this.k9=new Array(this.R9+1),this.k9[0]=0,this.j9=0,this.P9=[],this.F9=[];for(let t=0;t<100;t++)this.F9.push({x:0,y:0,t:0,bt:0});this.z9()}Vr(){fm.wh(this.k9),this.k9=null,fm.wh(this.P9),this.P9=null,fm.wh(this.F9),this.F9=null}HC(){return"cubic-bezier"}Tj(){return this.NM}B9(){return Math.floor(this.j9/25)}U9(){return 1/this.B9()}H7(t,s){this.W9=t,this.Q9=s,this.k9=new Array(this.R9+1),this.k9[0]=0,this.z9(),this.p9=this.e9+this.W9,this.m9=this.n9+this.Q9,this.y9=this.h9+this.W9,this.g9=this.a9+this.Q9,this.M9=this.l9+this.W9,this.w9=this.c9+this.Q9,this.b9=this.f9+this.W9,this.S9=this.d9+this.Q9,this.T9=3*(this.y9-this.p9),this.v9=3*(this.g9-this.m9),this.x9=3*(this.M9-this.y9),this.I9=3*(this.w9-this.g9),this.C9=3*(this.b9-this.M9),this.G9=3*(this.S9-this.w9),this.N9=3*(this.y9-this.p9),this._9=3*(this.p9+this.M9-2*this.y9),this.E9=this.b9-this.p9+3*(this.y9-this.M9),this.D9=3*(this.g9-this.m9),this.A9=3*(this.m9+this.w9-2*this.g9),this.L9=this.S9-this.m9+3*(this.g9-this.w9)}Map(t){if(!this.L7)return NaN;const s=this.J9(t);return pm[0]=this.V9(s),pm[1]=this.Y9(s),pm}kM(t,s){const i=this.H9(100),e=this.q9(t,s,i),r=this.Z9(t,s,i,e);return ym[0]=r.x,ym[1]=r.y,ym[2]=r.t,ym[3]=r.bt,ym}K7(t,s,i){const e=this.H9(100),r=this.X9(t,s,e,i),n=this.Z9(t,s,e,r);return ym[0]=n.x,ym[1]=n.y,ym[2]=n.t,ym[3]=n.bt,ym}t9(t){const s=1-t,i=s*s,e=2*s*t,r=t*t,n=i*this.T9+e*this.x9+r*this.C9,h=i*this.v9+e*this.I9+r*this.G9,o=fm.sn(n,h);return dm[0]=n/o,dm[1]=h/o,dm}s9(t){const s=1-t,i=s*s,e=2*s*t,r=t*t,n=i*this.T9+e*this.x9+r*this.C9,h=i*this.v9+e*this.I9+r*this.G9;return Math.atan2(h,n)}J9(t){if(!this.L7)return;let s=t*this.k9[this.R9],i=0,e=this.R9,r=0;for(;i<e;)r=i+((e-i)/2|0),this.k9[r]<s?i=r+1:e=r;this.k9[r]>s&&r--;const n=this.k9[r];return n===s?r/this.R9:(r+(s-n)/(this.k9[r+1]-n))/this.R9}V9(t){return this.L7?self.Uu.nc("cubicbezier")(t,this.e9+this.W9,this.h9+this.W9,this.l9+this.W9,this.f9+this.W9):NaN}Y9(t){return this.L7?self.Uu.nc("cubicbezier")(t,this.n9+this.Q9,this.a9+this.Q9,this.c9+this.Q9,this.d9+this.Q9):NaN}H9(t){if(t=t||100,this.P9.length>=t)return this.P9;this.P9=new Array(t),t++;for(let s=0;s<t-1;s++){const i=s/(t-1),e=i**2,r=i**3,n=this.N9*i,h=this._9*e,o=this.E9*r,a=this.D9*i,l=this.A9*e,u=this.L9*r,c=this.p9+n+h+o,f=this.m9+a+l+u;this.F9[s].x=c,this.F9[s].y=f,this.F9[s].t=i,this.F9[s].bt=0,this.P9[s]=this.F9[s]}return this.P9}q9(t,s,i,e=null,r=Number.MAX_SAFE_INTEGER){let n=0;if(isNaN(this.O9))for(let e=0;e<100;e++){const h=i[e],o=h.x-t,a=h.y-s;h.bt=o*o+a*a,h.bt<r&&(r=h.bt,n=e)}else{for(let e=this.O9;e<this.O9+5&&!(e>=i.length);e++){const h=i[e],o=h.x-t,a=h.y-s;h.bt=o*o+a*a,h.bt<r&&(r=h.bt,n=e)}for(let e=this.O9;e>this.O9-5&&!(e<0);e--){const h=i[e],o=h.x-t,a=h.y-s;h.bt=o*o+a*a,h.bt<r&&(r=h.bt,n=e)}}return this.O9=n,n}X9(t,s,i,e,r=Number.MAX_SAFE_INTEGER){let n=0;if(isNaN(this.O9))for(let h=0;h<100;h++){const o=i[h],a=o.x-t,l=o.y-s;o.bt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.bt<r&&(r=o.bt,n=h)}else{for(let h=this.O9;h<this.O9+5&&!(h>=i.length);h++){const o=i[h],a=o.x-t,l=o.y-s;o.bt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.bt<r&&(r=o.bt,n=h)}for(let h=this.O9;h>this.O9-5&&!(h<0);h--){const o=i[h],a=o.x-t,l=o.y-s;o.bt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.bt<r&&(r=o.bt,n=h)}}return this.O9=n,n}Z9(t,s,i,e){let r=i[e],n=1,h=Number.MAX_SAFE_INTEGER;t:do{const n=i.length;let o=0===e?0:e-1,a=e===n-1?n-1:e+1,l=i[o].t,u=(i[a].t-l)/4;if(u<.001)break;gm[0]=i[o];for(let i=1;i<=2;i++){const n=l+i*u,o=n**2,a=n**3,c=this.N9*n,f=this._9*o,d=this.E9*a,p=this.D9*n,m=this.A9*o,y=this.L9*a,g=this.p9+c+f+d,M=this.m9+p+m+y,w=g-t,b=M-s,S=w*w+b*b;if(S<h){h=S,e=i,wm.x=g,wm.y=M,wm.t=n,wm.bt=S,r=wm;break t}const T=Mm[i-1];T.x=g,T.y=M,T.t=n,T.bt=S,gm[i]=T}gm[3]=i[a],i=gm}while(n++<20);return r}z9(){this.L7=!0;let t=this.V9(0),s=this.Y9(0),i=0;for(let e=1;e<=this.R9;e++){const r=this.V9(.01*e),n=this.Y9(.01*e),h=t-r,o=s-n;i+=fm.sn(h,o),this.k9[e]=i,t=r,s=n}this.j9=i}},fm.J7=class{constructor(t,s,i){this.NM=i,this.K9=t.r9(),this.ttt=s.r9(),this.W9=0,this.Q9=0}Vr(){}HC(){return"line"}Tj(){return this.NM}H7(t,s){this.W9=t,this.Q9=s}YT(){return this.K9+this.W9}ZT(){return this.ttt+this.Q9}}}{const bm=self.Cs;bm.b8=class extends bm.Wr{constructor(t,s,i){super(),this.Pc=i.oz(),this.stt=i,this.itt=s,this.qr=t,this.ett=[],this.ntt=0,this.htt=null,this.ott=0,this.att(),this.ltt=null,this.utt=null,this.ctt=0,this.ftt=0,this.dtt=1,this.ptt=0,this.mtt=-1,this.ytt=1,this.gtt=!1,this.Mtt=!1,this.wtt=!1,this.btt=!0,this.Stt=!1,this.Ttt=!1,this.vtt=-1,this.xtt=!1,this.Itt=!1,this.Ctt=!1,this.Gtt=!1,this.Ntt=NaN,this._tt=[""],this.Ett="",this.Dtt=!1,this.y8=0,this.Att=0,this.Ltt=null,this.Ott=null}static w8(t,s){const i=s.v8(),e=i.Rtt(),r=i.Js(t[e]),n=bm.Jr(bm.b8,t[e],r,s);return n.ktt(!0),n}static T8(t,s,i){return bm.Jr(bm.b8,t,s,i)}Vr(){if(this.sH())return;const t=this.Pc.Mf();this.stt.K8(this),this.stt.e7(this);for(const t of this.ett)t.Vr();bm.wh(this.ett),this.ett=null,this.Pc=null,this.stt=null,this.itt=null,this.Stt=!0,this.ltt=null,this.utt=null,this.jtt(t)}jtt(t){const s=bm.Jr(bm.Event,"timelinestatereleased");s.Ptt=this,t.dispatchEvent(s)}HC(){return 0}att(){for(const t of this.itt.ztt().Ftt())this.ntt=this.ett.push(bm.Btt.QI(this,t))}Utt(){return this.stt}oz(){return this.Pc}j7(){return this.ett}Wtt(t,s,i,e){if(!this.Att)return;let r;for(let n=0;n<this.ett.length;n++){let h=this.ett[n];if(t!==h.GH())continue;const o=h.LH(i);o&&s.constructor===o.Qtt().constructor&&o.q7()===e.q7()&&(r||(r=[]),r.push(o))}return r}N7(){return!!this.ett.length}k7(t){for(const s of this.ett)if(bm.Xe(s.DH(),t))return s;return null}Jtt(t){for(const s of this.ett)if(!s.Vtt()&&bm.Xe(s._c(),t))return s;return null}eZ(t){this.qr=t}_c(){return this.qr}Ytt(){return this.itt}_Q(){return this.itt._c()}aH(){return this.itt.aH()}oH(t){this.itt.oH(t)}Htt(){return this.itt.Htt()}qtt(t){this.itt.qtt(t)}Ztt(){return this.itt.Ztt()}Xtt(t){this.itt.Xtt(t)}q7(){return this.itt.q7()}Ktt(t){this.itt.q7(t)}CH(t){for(const s of this.j7())s.CH(t)}uH(){return this.itt.uH()}lH(t){return this.itt.lH(t)}fH(){return this.itt.fH()}cH(t){return this.itt.cH(t)}GY(){return this.itt.GY()}$tt(t){return this.itt.$tt(t)}dH(t){return this.dtt=t}pH(){return this.dtt}M7(){return this.itt.M7()}tst(){return this.itt.tst()}sst(){return this.itt.sst()}ist(){return this.ptt}est(){return!this.IsPlaying()||this.dtt>0}yH(){return this.ltt||(this.ltt=new Promise(t=>{this.utt=t})),this.ltt}t7(){this.ltt&&(this.utt(),this.ltt=null,this.utt=null)}rst(t){this._tt=bm.b8.nst(t),this.Dtt=!0}mH(){return this._tt}hst(){return this.Dtt&&(this.Ett=this._tt.join(" ")),this.Dtt=!1,this.Ett}nH(t){if(!this._tt)return!1;if(!this._tt.length)return!1;const s=bm.b8.nst(t);return!!s&&!!s.length&&s.every(bm.b8.ost,this)}ast(){bm.tz.lst&&this.constructor===bm.b8&&(bm.tz.lst.KF.ust(this),this.stt.HQ(bm.tz.lst.KF.cst),this.stt.HQ(bm.tz.lst.KF.fst),this.stt.HQ(bm.tz.lst.KF.dst),this.stt.HQ(bm.tz.lst.KF.pst),bm.tz.lst.KF.mst())}yst(){this.vtt=this.Pc.kP()}y7(){this.Ctt||(this.Ctt=!0,bm.tz.lst&&this.constructor===bm.b8&&(bm.tz.lst.KF.ust(this),this.stt.HQ(bm.tz.lst.KF.gst),this.stt.HQ(bm.tz.lst.KF.Mst),this.stt.HQ(bm.tz.lst.KF.wst),this.stt.HQ(bm.tz.lst.KF.bst),bm.tz.lst.KF.mst()))}q8(t){this.gtt=t}Sst(){return this.vtt===this.Pc.kP()}IsPlaying(t=!1){return!!this.Sst()||!(!this.Tst()||t)||this.gtt}vst(){return this.IsPlaying(!0)}wH(){return this.xst()}xst(){return!(this.sH()||this.Tst()||this.vst()||this.p7())}Z8(t){this.Mtt=t}Tst(){return this.Mtt}Ist(t){this.btt=t;const s=this.uH(),i=this.fH();if(s||i){if(s&&!i);else if(!s&&i){const t=this.HO();1===this.ptt&&(t<=0||t>=this.aH())&&(this.btt=!0)}}else{const t=this.HO();(t<=0||t>=this.aH())&&(this.btt=!0)}}p7(){return this.btt}sH(){return this.Stt}X8(t){this.Ttt=t}r7(){return this.Ttt}Cst(t){this.xtt=t}Gst(){return this.xtt}ktt(t){this.Itt=!!t}C8(){return this.Itt}m7(){return this.wtt}HO(){return this.ctt}hH(t){const s=this.HO();this.Nst(t),this.Ist(!1),this.p7()||this.Cst(!0),(this.vst()||this.Tst()||!this.wtt)&&(this.vst()||this.Tst()||this.wtt?this.vst()?this.eH():this.Tst()&&(this.stt.K8(this),this._st()):this._st()),this.Est(),this.Dst(this.HO(),!1,!0,!0,s),this.Ast(),this.y8&&this.oz().BF(),this.Lst()}Nst(t){bm.$i(t)||(t=this.aH()),t<0?this.ctt=0:t>=this.aH()?this.ctt=this.aH():this.ctt=t}Ost(t){bm.$i(t)||(t=this.aH()),t<0?this.ctt=0:t>=this.aH()?this.ctt=this.aH():this.ctt=t;for(const t of this.ett)t.Rst()}Lst(){bm.tz.lst&&this.constructor===bm.b8&&(bm.tz.lst.KF.ust(this),this.stt.HQ(bm.tz.lst.KF.kst),this.stt.HQ(bm.tz.lst.KF.jst),this.stt.HQ(bm.tz.lst.KF.Pst),bm.tz.lst.KF.mst())}Fst(){if(this.uH())return!0;if(this.fH()&&1===this.ptt){if(this.est()){if(this.HO()>=this.aH())return!1}else if(this.HO()<=0)return!1}else if(!this.uH()&&!this.fH())if(this.est()){if(this.HO()>=this.aH())return!1}else if(this.HO()<=0)return!1;return!0}rH(){this.sH()||this.Fst()&&this.Play(!0)}Play(t=!1){return!this.sH()&&!this.Tst()&&(this.vst()&&this.Sst()?this.zst():!this.vst()&&!!(this.p7()||t||this.Gst())&&this.Bst())}zst(){return this.Cst(!1),this.stt.V8(this),this.stt.H8(this),this.yH(),!0}Bst(){return this.Cst(!1),this.stt.H8(this),this.yH(),!0}eH(t=!1){this.sH()||(this.Ist(t),this.stt.s7(this),this.p7()&&this.t7())}Ff(t=!0,s=!1){if(this.sH())return;if(!this.vst()&&this.Tst())return this.stt.K8(this);if(this.p7())return;this.eH(!0),this.est()?this.Nst(0):this.Nst(this.aH());const i=this.HO();this.Est(),s?this.Ust(i):this.Dst(i,!1,!1,!0),t&&this.Lst(),this.Ast(),this.y8&&t&&this.oz().BF()}Wst(){this.Ff(!1,!0)}Ust(t){this.Dst(t,!1,!1,!0,NaN,!1,!0)}r8(){return!!this.sH()||!(!this.oz().j5()&&this.Qst())&&(this.stt.i7(this),this.oz().j5()||this.Wst(),!0)}_st(){this.h7(!0)}n7(){this.h7(!1,!0),this.q8(!1),this.Z8(!1)}h7(t=!1,s=!1){if(!this.r7()||s)if(t){this.Ctt=!1,this.wtt=!0,this.Gtt=!0,this.Est();for(const t of this.ett)t.h7();this.Ast()}else if(this.q8(!0),this.Z8(!1),this.ast(),this.p7()){this.vtt=-1,0!==this.ptt&&(this.dtt=Math.abs(this.dtt)),this.ptt=0,this.mtt=-1,this.ytt=1,this.btt=!1,this.Ctt=!1,this.wtt=!0,this.Gtt=!0,this.est()?this.Nst(0):this.Nst(this.aH()),this.Est();for(const t of this.ett)t.h7();this.Ast()}else{-1!==this.mtt&&(this.ptt=this.mtt),this.Gtt=!0,this.Ctt=!1,this.Est();for(const t of this.ett)t.Jst();this.Ast()}}o7(){return this.y8}Est(){this.Att=0;for(const t of this.ett)t.kD()&&(this.Att=1)}Ast(){this.y8=0;for(const t of this.ett)t.Vst(),0===this.y8&&1===t.o7()&&(this.y8=1),this.htt||1!==t.Yst()||(this.htt||(this.htt=[]),this.ott=this.htt.push(t))}u7(t,s,i){if(this.sst()){if(0===t&&0===this.Ntt)return;this.Ntt=t,t=i}else{if(0===i&&0===this.Ntt)return;this.Ntt=i,t=i,s=1}const e=this.ctt+this.ftt,r=e+t*s*this.dtt,n=this.itt.Hst;r<0?(this.ctt=0,this.ftt=-r):r>=n?(this.ctt=n,this.ftt=this.ctt-r):(this.ctt=r,this.ftt=0);let h=!1,o=!1;const a=this.uH(),l=this.fH();let u;a||l?a&&!l?this.dtt>0?this.ctt>=n&&(this.Ost(0),o=!0):this.ctt<=0&&(this.Ost(n),o=!0):!a&&l?this.dtt>0?this.ctt>=n&&(this.Nst(n),this.dH(-1*this.pH()),o=!0,1===this.ptt?this.ytt<this.GY()?(this.ytt++,this.ptt=0):h=!0:0===this.ptt&&(this.ptt=1)):this.ctt<=0&&(this.Nst(0),this.dH(-1*this.pH()),o=!0,1===this.ptt?this.ytt<this.GY()?(this.ytt++,this.ptt=0):h=!0:0===this.ptt&&(this.ptt=1)):a&&l&&(this.dtt>0?this.ctt>=n&&(this.Nst(n),this.dH(-1*this.pH()),o=!0,this.ptt++,bm.wrap(this.ptt,0,2)):this.ctt<=0&&(this.Nst(0),this.dH(-1*this.pH()),o=!0,this.ptt++,bm.wrap(this.ptt,0,2))):this.dtt>0?this.ctt>=n&&(this.ytt<this.GY()?(this.ytt++,this.Ost(0),o=!0):(this.Nst(n),h=!0)):this.ctt<=0&&(this.ytt<this.GY()?(this.ytt++,this.Ost(n),o=!0):(this.Nst(0),h=!0));const c=this.ntt;if(h){for(u=0;u<c;u++)this.ett[u].qst();return this.eH(!0),void this.yst()}const f=this.ott;for(u=0;u<f;u++)this.htt[u].Zst();if(1===this.Att)for(u=0;u<c;u++){const t=this.ett[u],s=t.Xst();this.ctt-s<0&&e-s>0?(this.ctt=s<0?0:s>=n?n:s,t.wc(s,!0,!1,o,this.Gtt,!1)):t.wc(this.ctt,!0,!1,o,this.Gtt,!1)}else for(u=0;u<c;u++)this.ett[u].wc(this.ctt,!0,!1,o,this.Gtt,!1);if(!this.IsPlaying()&&this.Ltt){const t=this.Ltt.HO()+this.Ltt.$st().Kst().Xst(),s=this.ctt-t;this.ctt-=s,0!==this.ftt&&(this.ftt-=s),this.Ltt=null}for(u=0;u<f;u++)this.htt[u].tit();this.Gtt&&(this.Gtt=!1)}sit(t){this.Ltt=t}iit(){return this.Ltt}Dst(t,s=!1,i=!1,e=!1,r=NaN,n=!1,h=!1){for(const t of this.ett)t.Zst();for(const n of this.ett){let o=t;if("number"==typeof r&&!isNaN(r)){const t=this.HO()-n.Xst(),s=r-n.Xst();t<0&&s>0&&(o=n.Xst(),this.Nst(o))}n.wc(o,s,i,e,this.Gtt,h)}for(const t of this.ett)t.tit();this.Gtt&&n&&(this.Gtt=!1)}eit(){const t=this.itt.ztt().rit(),s=bm.Btt.QI(this,t);return this.ntt=this.ett.push(s),s}N8(){if(!this.sH())for(const t of this.ett)t.nit()}g7(){for(const t of this.ett)t.g7()}hit(){for(const t of this.ett)t.oit()}ait(t,s,i){if(s){if("number"==typeof i&&i>=0){const t=this.ett[i];if(!t)return;return t.lit(s),void this.stt.O8(s.fQ(),this)}for(const i of this.ett)if(i.Vtt()){if(t){if(i.DH()!==t)continue;i.lit(s),this.stt.O8(s.fQ(),this);break}if(!i.uit()){i.lit(s),this.stt.O8(s.fQ(),this);break}}}}F8(t,s){for(const i of this.ett)if(i.Vtt())if(s){if(s===i.DH()&&t===i.GH())return!0}else if(t===i.GH())return!0;return!1}d7(){return this.ett.some(t=>!t.Vtt()||t.cit())}Qst(){return this.ett.some(t=>{if(t.Vtt()){if(!t.cit())return!1;const s=t.fQ();return!!s&&s.z$()}return!1})}LH(t){for(const s of this.j7())for(const i of s.fit())if(i.dit()===t)return i}pit(t){for(const s of this.ett)if(t===s.GH())return s;return null}mit(t){let s=t?t.split(" "):[];const i=new Set(s.map(t=>t.toLowerCase().trim()));s=[...i.values()];for(const t of this.j7())for(const i of t.yit())if(s.every(t=>i.git(t)))return i}k8(){const t=[];for(const s of this.j7())t.push(s.fQ());return t.filter(t=>t)}f8(){for(const t of this.j7())t.f8()}i4(){return{tracksJson:this.Mit(),name:this.qr,playheadTime:this.HO(),playbackRate:this.dtt,pingPongState:this.ptt,resumePingPongState:this.mtt,currentRepeatCount:this.ytt,isPlaying:this.gtt,isScheduled:this.Mtt,initialStateSet:this.wtt,finishedTriggers:this.Ctt,complete:this.btt,released:this.Stt,markedForRemoval:this.Ttt,completedTick:this.vtt,implicitPause:this.xtt,isTemplate:this.Itt,tags:this._tt.join(" "),stringTags:this.Ett,tagsChanged:this.Dtt,firstTick:this.Gtt}}e4(t){t&&(this.wit(t.tracksJson),this.qr=t.name,this.ctt=t.playheadTime,this.dtt=t.playbackRate,this.ptt=t.pingPongState,this.mtt=t.hasOwnProperty("resumePingPongState")?t.resumePingPongState:-1,this.ytt=t.currentRepeatCount,this.gtt=!!t.isPlaying,this.Mtt=!!t.isScheduled,this.wtt=!!t.initialStateSet,this.Ctt=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.btt=!!t.complete,this.Stt=!!t.released,this.Ttt=!!t.markedForRemoval,this.vtt=t.completedTick,this.xtt=!!t.implicitPause,this.Itt=!!t.isTemplate,this._tt=t.tags.split(" "),this.Ett=t.stringTags,this.Dtt=!!t.tagsChanged,this.Gtt=!!t.firstTick)}Mit(){return this.ett.map(t=>t.i4())}wit(t){this.hit(),t.forEach((t,s)=>{this.ett[s].e4(t)}),this.ett.filter(t=>t.cit())}static ost(t){const s=this.mH();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static nst(t){if(bm.ve(t))return t.slice(0);if(bm.ae(t))return t.split(" ");throw new Error("invalid tags")}bit(){return this.Ott||(this.Ott=bm.Jr(self.SH,this)),this.Ott}}}{const Sm=self.Cs;Sm.Btt=class extends Sm.Wr{constructor(t,s){super(),this.O7=t,this.Sit=s,this.Tit=s.ztt(),this.vit=NaN,this.xit=NaN,this.Iit=null,this.Cit=null,this.Git=!1,this.ED=s.Xst()>0,this.Nit=!1,this._it=!1,this.Eit=NaN,this.Dit=null,this.Ait=this.Sit.$st().Lit(),this.Oit=[],this.Rit(),this.kit=0,this.y8=0,this.jit=0}static QI(t,s){return Sm.Jr(Sm.Btt,t,s)}Vr(){this.Ait=null;for(const t of this.Oit)t.Vr();Sm.wh(this.Oit),this.Oit=null,this.O7=null,this.Iit=null,this.Cit=null,this.Sit=null,this.Dit=null}Rit(){for(const t of this.Sit.Fit().Pit())this.Oit.push(Sm.zit.QI(this,t))}nit(){for(const t of this.Oit)t.nit()}g7(){for(const t of this.Oit)t.g7();this.Iit=null,this.Cit=null}Bit(){return this.O7}oz(){return this.O7.oz()}yit(){return this.Ait||(this.Ait=this.Sit.$st().Lit()),this.Ait}fit(){return this.Oit}LH(t){for(let s=0;s<this.Oit.length;s++){const i=this.Oit[s];if(i.dit()===t)return i}}Uit(){this.Iit||this.GH()}Wit(){return!!this.Iit&&!this.Iit.Mq()}cit(){if(!this.Vtt())return!1;const t=this.Qit(),s=this.oz()._F(t);return!!s&&!s.Mq()}fQ(){if(!this.Vtt())return;const t=this.Jit();return-1!==t?this.oz().Y0(t):void 0}Vit(){return this.O7.j7().indexOf(this)}oit(){this.Iit=null,this.vit=NaN,this.Cit=null,this.xit=NaN,this.Git=!0}uit(){return!!this.Iit}GH(){if(this.Git)return;if(this.Iit&&this.Wit())return this.Iit;const t=this.Qit();return this.Iit=this.oz()._F(t),this.Iit}lit(t){if(this.Git=!1,this.Iit!==t){this.g7(),this.Iit=t,this.xit=t.fQ().Tj(),this.vit=t.IQ(),this.Cit=t.OF();for(const s of this.Yit()){const i=s.Hit,e=s.qit;switch(i.Zit()){case"instance-variable":{e.Xit();const i=t.fQ(),r=i.Kit(s.name),n=i.$it(r),h=i.tet(r);n===s.name&&h===s.type&&e.iet(r);break}case"behavior":{const i=s.lY,r=this.fQ(),n=t.fQ(),h=e.cY(n);if(i&&h){const t=i._c();r.eet(t),n.eet(t),e.Xit(),e.ret(h.G1())}break}}}}}*Yit(){for(const t of this.Oit){const s=t.Qtt(),i=this.fQ(),e={Hit:t,qit:s};switch(t.Zit()){case"world-instance":e.net=t.dit();break;case"instance-variable":{const t=s.Xit();e.name=i.$it(t),e.type=i.tet(t);break}case"effect":{const t=i.CU(),r=s.het(t);e.oet=r;break}case"behavior":{const t=s.cY(i);e.lY=t;break}case"plugin":e.QB=i.JB()}yield e}}OF(){if(this.Cit&&this.Wit())return this.Cit;const t=this.GH();return t&&(this.Cit=t.OF()),this.Cit}Kst(){return this.Sit}Qit(){return isNaN(this.vit)?this.Sit.Qit():this.vit}aet(t){this.Sit.aet(t)}Ztt(){return this.Sit.Ztt()}Xtt(t){this.Sit.Xtt(t)}q7(){return this.Sit.q7()}DH(){return this.Sit.DH()}Xst(){return this.Sit.Xst()}let(){return this.Sit.let()}uet(t){this.Sit.uet(t)}Ktt(t){this.Sit.Ktt(t)}CH(t){for(const s of this.yit())s.CH(t);for(const s of this.fit())s.CH(t)}cet(){return this.Sit.cet()}fet(t){this.Sit.fet(t)}Jit(){return isNaN(this.xit)?this.Sit.Jit():this.xit}det(t){this.Sit.det(t)}pet(t){this.Sit.pet(t)}met(){const t=this.GH();return t&&t.sY().yet()?t.sY().met():this.Sit.met()}Met(t){this.Sit.Met(t)}wet(){const t=this.GH();return t&&t.sY().yet()?t.sY().wet():this.Sit.wet()}HC(){return this.Sit.HC()}_c(){return this.Sit._c()}Vtt(){return 0===this.HC()}bet(){return 1===this.HC()}Tet(){return 2===this.HC()}vet(){return this.kit}o7(){return this.y8}Yst(){return this.jit}kD(){return this.ED}Rst(){for(const t of this.Oit)t.Rst()}h7(){if(this.Uit(),!this.Wit()&&this.Vtt())return;const t=this.Bit().est(),s=t?0:this.let();for(const t of this.Oit)t.h7(s),0===this.kit&&1===t.vet()&&(this.kit=1),0===this.y8&&1===t.o7()&&(this.y8=1);this.jit=0,this.Oit.some(t=>t.Yst())&&(this.jit=1),this.Dit=t?this.xet(s):this.Iet(s),this.Nit=!1,this._it=!1,this.wc(s),this.Cet(this.Dit)}Jst(){if(this.Uit(),!this.Wit()&&this.Vtt())return;const t=this.O7.est(),s=this.O7.HO()-this.Xst();this.Dit=t?this.xet(s):this.Iet(s);for(const t of this.Oit)t.Jst(s)}qst(){if(!this.Bit().p7()&&(this.Uit(),(this.Wit()||!this.Vtt())&&!this.ED)){const t=this.O7.HO();t>=this.Xst()+this.let()?this.wc(this.let(),!0,!1,!0,!1,!1,!0):t<=0&&this.wc(0,!0,!1,!0,!1,!1,!0)}}Vst(){for(let t=0,s=this.Oit.length;t<s;t++){const s=this.Oit[t];s.Vst(),0===this.kit&&1===s.vet()&&(this.kit=1),0===this.y8&&1===s.o7()&&(this.y8=1)}}Zst(){const t=this.Oit.length;for(let s=0;s<t;s++)this.Oit[s].Zst()}wc(t,s=!1,i=!1,e=!1,r=!1,n=!1,h=!1){this.Iit||this.GH();const o=this.Iit&&!this.Iit.Mq(),a=0===this.Sit.Vc;if((o||!a)&&!(n&&a&&this.fQ().z$()||(t-=this.Xst())<0)){this.Get(t,s),this.Net(t,s,r),!this.Bit().IsPlaying()&&this.Bit().iit()&&(t=this.Bit().iit().HO());for(let s=0,r=this.Oit.length;s<r;s++)this.Oit[s].wc(t,i,e,h);this._et(t,s),0!==this.kit&&(this.Cit||(this.Cit=this.Iit.OF()),this.Cit&&this.Cit.vJ())}}tit(){const t=this.Oit.length;for(let s=0;s<t;s++)this.Oit[s].tit()}Get(t,s){if(s&&this.ED&&!this.Nit){if(this.Bit().est()){if(t<0)return}else if(t>this.let())return;for(const t of this.Oit)t.h7();this.Nit=!0}}_et(t,s){if(s&&this.ED&&!this._it)if(this.Bit().est()){if(t>=this.let()){for(const t of this.Oit)t.wc(this.let(),!1,!0);this._it=!0}}else if(t<=0){for(const t of this.Oit)t.wc(0,!1,!0);this._it=!0}}Net(t,s,i){if(i)return;if(!s)return;if(!Sm.tz.lst)return;const e=this.Bit();if(e.est()){const s=this.Dit.B7(),i=this.Dit.HO(),r=s?s.HO():e.aH();(t<=i||t>=r)&&(this.Dit=this.Tit.Eet(t,this.Sit),s&&this.Det(this.Dit))}else{if(!this.Tit.Aet(t,this.Sit))return;this.Dit||(this.Dit=this.Tit.Aet(t,this.Sit));const s=this.Dit.Let(),i=this.Dit.HO(),e=s?s.HO():0;(t>=i||t<=e)&&(this.Dit=this.Tit.Aet(t,this.Sit),this.Dit&&this.Det(this.Dit))}}xet(t){return this.Tit.Oet(t,this.Sit)||this.Tit.Eet(t,this.Sit)}Iet(t){return this.Tit.Oet(t,this.Sit)||this.Tit.Aet(t,this.Sit)}Det(t,s=!1){if(!Sm.tz.lst)return;const i=this.Bit(),e=i.Utt();Sm.tz.lst.KF.ust(i),Sm.tz.lst.KF.Ret(t),e.HQ(Sm.tz.lst.KF.ket),e.HQ(Sm.tz.lst.KF.Det),i.IsPlaying()||s||i.sit(t),Sm.tz.lst.KF.mst(i),Sm.tz.lst.KF.jet(t)}Cet(t){this.Det(t,!0)}Pet(){return this.Sit.$st().Fet()}zet(){const t=this.Sit.Fit().Bet(),s=Sm.zit.QI(this,t);return this.Oit.push(s),s}Uet(t){this.Sit.$st().Wet(t)}Qet(t){for(const s of this.Oit)s.Qet(t)}Jet(){for(const t of this.Oit)t.Jet()}Vet(){if(this.Uit(),this.Wit()||!this.Vtt())for(const t of this.Oit)t.Vet()}Yet(){if(this.Uit(),!this.Wit()&&this.Vtt())return;let t=!1;for(const s of this.Oit){const i=s.Yet();!t&&i&&(t=!0)}if(t){const t=this.Pet();t.hH(this.Bit().HO()),t.CH("noease"),t.fet(!0),t.rst("")}}f8(){isNaN(this.Eit)||this.Het(this.Eit),this.Eit=NaN}i4(){const t=this.GH(),s=t?t.IQ():this.Qit();return{propertyTracksJson:this.qet(),lastKeyframeDataItemJson:this.Zet(),initialStateOfNestedSet:this.Nit,endStateOfNestedSet:this._it,instanceUid:s,cleared:this.Git}}e4(t){if(t){this.Xet(t.propertyTracksJson),this.Ket(t.lastKeyframeDataItemJson),this.Eit=t.instanceUid,this.Nit=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.Nit=t.initialStateOfNestedSet),this._it=!1,t.hasOwnProperty.endStateOfNestedSet&&(this._it=t.endStateOfNestedSet),this.Git=!!t.hasOwnProperty("cleared")&&t.cleared;for(const t of this.Oit)0===this.kit&&1===t.vet()&&(this.kit=1),0===this.y8&&1===t.o7()&&(this.y8=1);this.jit=0,this.Oit.some(t=>t.Yst())&&(this.jit=1)}}Zet(){return this.Sit.$st().$et(this.Dit)}qet(){return this.Oit.map(t=>t.i4())}Xet(t){t.forEach((t,s)=>{this.Oit[s].e4(t)})}Het(t){if(!Sm.$i(t))return;const s=this.oz()._F(t);s&&this.Bit().ait(this.Sit.DH(),s,this.Vit())}Ket(t){const s=this.Sit.$st();this.Dit=s.trt(t)}}}{const Tm=self.Cs;Tm.zit=class extends Tm.Wr{constructor(t,s){super(),this.srt=t,this.irt=s,this.ert=s.Fit(),this.kit=0,this.y8=0,this.jit=0,this.rrt=this.Qtt(),this.nrt=this.irt.ort().hrt(),this.art=null,this.lrt=null}static QI(t,s){return Tm.Jr(Tm.zit,t,s)}Vr(){this.srt=null,this.rrt&&(this.rrt.Vr(),this.rrt=null),this.nrt=null,this.irt=null,this.ert=null}vet(){return this.kit}o7(){return this.y8}Yst(){return this.jit}urt(){return!!this.lrt}crt(t){this.lrt=t}frt(){return this.lrt}drt(){return this.srt}prt(){return this.irt}Fit(){return this.ert}Bit(){return this.srt.Bit()}oz(){return this.srt.oz()}GH(){return this.srt.GH()}Qtt(){if(this.rrt)return this.rrt;let t;switch(this.irt.Zit()){case"behavior":t=new Tm.zit.mrt(this);break;case"effect":t=new Tm.zit.yrt(this),this.y8=1;break;case"instance-variable":t=new Tm.zit.grt(this);break;case"plugin":t=new Tm.zit.Mrt(this),this.y8=1;break;case"world-instance":t=new Tm.zit.wrt(this),this.y8=1,this.kit=1;break;case"value":t=new Tm.zit.brt(this);break;case"audio":t=new Tm.zit.Srt(this)}return this.rrt=t,this.rrt}Zit(){return this.irt.Zit()}Trt(t){this.irt.Trt(t)}vrt(){return this.irt.xrt()}Irt(t){this.irt.Crt(t)}AH(){return this.Qtt().Grt()}dit(){return this.irt.Nrt()}_rt(t){this.irt.Ert(t)}Drt(){return this.irt.HC()}Art(t){this.irt.Lrt(t)}Ort(){return this.Fit().Rrt(this.irt).HC()}krt(){return this.irt.krt()}jrt(t){this.irt.jrt(t)}Prt(){return this.irt.Prt()}Frt(t){this.irt.Frt(t)}cet(){return this.irt.cet()}fet(t){this.irt.fet(t)}Ztt(){return this.irt.Ztt()}Xtt(t){this.irt.Xtt(t)}q7(){return this.irt.q7()}Ktt(t){this.irt.Ktt(t)}CH(t){for(const s of this.zrt())s.CH(t)}Brt(){return this.irt.Brt()}zrt(){return this.nrt||(this.nrt=this.irt.ort().hrt()),this.nrt}z7(){return this.irt.ort().z7()}Urt(t){return this.ert.Urt(t,this.irt)}Wrt(t){return this.ert.Wrt(t,this.irt)}Qrt(t){let s,i=this.ert.Urt(t,this.irt);return i?s=this.ert.Jrt(t,this.irt):(i=this.ert.Wrt(t,this.irt),s=this.ert.Vrt(t,this.irt)),{start:i,end:s}}*Yrt(){for(const t of this.zrt())yield t.r9()}*Hrt(){for(const t of this.zrt())yield t.HO()}nit(){this.Qtt().nit()}g7(){this.Qtt().g7()}qrt(){return this.Qtt().qrt()}Rst(){this.Qtt().Rst()}h7(t){this.Qtt().h7(),this.art=this.Zrt(t),this.Vst()}Jst(t){this.Qtt().Jst(),this.art=this.Zrt(t)}Vst(){const t=this.drt();if(this.jit=0,t.Vtt()){const s=this.Bit(),i=t.GH(),e=this.Qtt(),r=this.dit();if(e.Xrt()){const t=s.Wtt(i,e,r,this);t&&t.length&&(this.jit=1)}else this.jit=0}}Zrt(t){const s=this.Bit();return this.ert.Urt(t,this.irt)||(s.est()?this.ert.Wrt(t,this.irt):this.ert.Vrt(t,this.irt))}Zst(){this.rrt.Zst()}wc(t,s=!1,i=!1,e=!1){let r,n,h=!1;if(s)r=this.ert.Wrt(t,this.irt);else{if(this.art){const s=this.Bit(),i=this.art.B7(),e=this.art.HO(),r=i?i.HO():s.aH();(t<=e||t>=r)&&(this.art=this.ert.Wrt(t,this.irt),h=!0)}else this.art=this.ert.Wrt(t,this.irt),h=!0;r=this.art}r&&(n=r.B7()),this.rrt.wc(t,r,n,s,i,e,h)}Krt(t){if(this.art){const s=this.Bit(),i=this.art.B7(),e=this.art.HO(),r=i?i.HO():s.aH();(t<=e||t>=r)&&(this.art=this.ert.Wrt(t,this.irt))}else this.art=this.ert.Wrt(t,this.irt);const s=this.art,i=s.B7();return this.rrt.Krt(t,s,i)}$rt(t,s,i){return this.rrt.Krt(t,s,i)}tit(){this.rrt.tit()}static tnt(t,s){const i=s.prt();return s.ert.Wrt(t,i)}static snt(t,s){const i=s.prt();return s.ert.Vrt(t,i)}int(){const t=this.irt.ort().ent();return this.art=null,t}Qet(t){this.art=null,this.irt.ort().rnt(t)}Jet(){this.Qtt().Jet()}Vet(){if(this.Qtt().Vet()){const t=this.ert.Rrt(this.irt),s=this.Qtt().qrt();t.nnt(s)}}Yet(){const t=this.Qtt().Yet();return t&&this.hnt(),this.Qtt().ont(),t}hnt(){const t=this.Bit().HO(),s=this.Qtt(),i=Tm.zit.tnt(t,this),e=this.int();e.Lrt(i.HC()),e.hH(t),e.CH(i.ant()),e.fet(!0),e.lnt(s.unt()),e.nnt(s.qrt())}i4(){return{sourceAdapterJson:this.Qtt().i4()}}e4(t){t&&this.Qtt().e4(t.sourceAdapterJson)}}}{const vm=self.Cs.zit;vm.wrt=class{constructor(t){this.cnt=t,this.fnt=null,this.dnt()}Vr(){this.fnt&&(this.fnt.Vr(),this.fnt=null),this.cnt=null}Xrt(){return this.fnt.Xrt()}LH(){return this.cnt}nit(){this.fnt&&this.fnt.nit()}g7(){this.fnt&&this.fnt.g7()}dnt(){return this.fnt||(this.fnt=this.pnt()),this.fnt}Xit(){}Tj(){return this.Xit()}mnt(){}Rst(){this.dnt().Rst()}h7(){this.dnt().h7()}Jst(){this.dnt().Jst()}Zst(){this.fnt.ynt()}wc(t,s,i,e,r,n,h){let o;switch(this.cnt.Ort()){case"numeric":o=vm.gnt.wc(t,s,i,this.cnt);break;case"angle":o=vm.Mnt.wc(t,s,i,this.cnt);break;case"boolean":o=vm.wnt.wc(t,s,i,this.cnt);break;case"color":o=vm.bnt.wc(t,s,i,this.cnt);break;case"text":o=vm.Snt.wc(t,s,i,this.cnt)}this.fnt.Tnt(t,o,s,i,e,r,n,h)}Krt(t,s,i){switch(this.cnt.Ort()){case"numeric":return vm.gnt.wc(t,s,i,this.cnt);case"angle":return vm.Mnt.wc(t,s,i,this.cnt);case"boolean":return vm.wnt.wc(t,s,i,this.cnt);case"color":return vm.bnt.wc(t,s,i,this.cnt);case"text":return vm.Snt.wc(t,s,i,this.cnt)}}tit(){this.fnt.vnt()}Jet(){this.dnt().xnt()}ont(){this.dnt().ont()}qrt(){return this.dnt().qrt()}Vet(){return this.dnt().Vet()}Yet(){return this.dnt().Yet()}unt(){const t=this.cnt,s=t.drt().Bit().HO(),i=vm.tnt(s,t),e=i.B7();switch(t.Ort()){case"numeric":return vm.gnt.wc(s,i,e,t);case"angle":return vm.Mnt.wc(s,i,e,t);case"boolean":return vm.wnt.wc(s,i,e,t);case"color":return vm.bnt.wc(s,i,e,t);case"text":return vm.Snt.wc(s,i,e,t)}}pnt(){const t=this.cnt;switch(t.Brt()?t.Ort():""){case"combo":case"boolean":case"text":case"string":return new vm.Cnt.Int(this);case"numeric":case"number":case"angle":return"combo"===this.cnt.Drt()?new vm.Cnt.Int(this):new vm.Cnt.Gnt(this);case"color":case"offsetColor":return new vm.Cnt.Nnt(this);default:return new vm.Cnt.Gnt(this)}}i4(){return{propertyAdapterJson:this.dnt().i4()}}e4(t){t&&this.dnt().e4(t.propertyAdapterJson)}}}{const xm=self.Cs;class Im extends xm.zit.wrt{constructor(t){super(t),this._nt=NaN}Xit(){return this.cnt.prt().xrt()[0]}Tj(){return this._nt?this._nt:super.Tj()}mnt(){return this.cnt.drt().GH()}iet(t){this.cnt.prt().xrt()[0]!==t&&(this._nt=t)}wc(t,s,i,e,r,n,h){this.dnt().Ent(s.Grt())&&super.wc(t,s,i,e,r,n,h)}Krt(t,s,i){if(this.dnt().Ent(s.Grt()))return super.Krt(t,s,i)}i4(){return Object.assign(super.i4(),{index:this._nt})}e4(t){t&&(super.e4(t),this._nt=t.index)}}xm.zit.grt=Im}{const Cm=self.Cs;class Gm extends Cm.zit.wrt{constructor(t){super(t),this.V$=NaN}Xit(){return this.cnt.prt().xrt()[1]}mnt(){const t=this.cnt.prt(),s=this.cnt.drt(),i=this.V$?this.V$:t.xrt()[0],e=s.GH(),r=e.Dnt(i);return e.Ant()[r].sY()}cY(t){const s=this.cnt.prt().xrt()[2];return t.Lnt(s)}ret(t){this.cnt.prt().xrt()[0]!==t&&(this.V$=t)}wc(t,s,i,e,r,n,h){const o=this.cnt.drt().GH();this.cY(o.fQ())&&super.wc(t,s,i,e,r,n,h)}Krt(t,s,i){const e=this.cnt.drt().GH();if(this.cY(e.fQ()))return super.Krt(t,s,i)}i4(){return Object.assign(super.i4(),{sid:this.V$})}e4(t){t&&(super.e4(t),this.V$=t.sid)}}Cm.zit.mrt=Gm}{const Nm=self.Cs;class _m extends Nm.zit.wrt{constructor(t){super(t)}Xit(){return this.cnt.prt().xrt()[1]}mnt(){const t=this.cnt.drt().OF().SJ(),s=t.CU(),i=this.het(s).Tj();return t.gY(i)?t.Ont(i):null}het(t){const s=this.cnt.prt().xrt()[0];return t.Rnt(s)}wc(t,s,i,e,r,n,h){this.knt()&&super.wc(t,s,i,e,r,n,h)}Krt(t,s,i){if(this.knt())return super.Krt(t,s,i)}knt(){const t=this.cnt.drt().OF().SJ(),s=t.CU(),i=this.het(s);if(!i)return;const e=i.Tj();return t.gY(e)}}Nm.zit.yrt=_m}{const Em=self.Cs;class Dm extends Em.zit.wrt{constructor(t){super(t)}Xit(){return this.cnt.prt().xrt()[0]}mnt(){return this.cnt.drt().GH().sY()}wc(t,s,i,e,r,n,h){const o=this.cnt.drt();o.fQ().JB()===o.GH().fQ().JB()&&super.wc(t,s,i,e,r,n,h)}Krt(t,s,i){const e=this.cnt.drt();if(e.fQ().JB()===e.GH().fQ().JB())return super.Krt(t,s,i)}jnt(){const t=this.cnt.drt(),s=t.fQ().JB();if(Em.tz.Pnt&&s instanceof Em.tz.Pnt&&("initial-frame"===this.cnt.dit()||"initial-animation"===this.cnt.dit()))switch(this.cnt.q7()){case"relative":return{Fnt:(s,i,e,r,n)=>{if(i!==r){const e=r/i,n=t.LH("offsetWidth"),h=t.LH("offsetScaleX");if(n||h){const o=n?.Qtt()?.dnt(),a=h?.Qtt()?.dnt();if(s.MV()&&s.IV())a&&a.znt(r),s.tg(this.Bnt(r,i,s,t,o,a));else{const i=r*((s.Wnt()?.Unt()??this.Qnt(s,t))/this.Qnt(s,t));a&&a.znt(r);const n=o?.Jnt()??0,h=a?.Jnt()??0;s.tg(i+(n+h*e))}}else s.tg(s.Yy()*e)}if(e!==n){const i=n/e,r=t.LH("offsetHeight"),h=t.LH("offsetScaleY");if(r||h){const o=r?.Qtt()?.dnt(),a=h?.Qtt()?.dnt();if(s.MV()&&s.GV())a&&a.znt(n),s.Hy(this.Vnt(n,e,s,t,o,a));else{const e=n*((s.Wnt()?.Ynt()??this.Hnt(s,t))/this.Hnt(s,t));a&&a.znt(n);const r=o?.Jnt()??0,h=a?.Jnt()??0;s.Hy(e+(r+h*i))}}else s.Hy(s.eg()*i)}}};case"absolute":return null}}qnt(t,s,i,e=0){const r=s.Bit().pit(t.GH());if(!r)return e;const n=r.LH(i);if(!n)return e;const h=n.prt().ort();if(!h)return e;const o=h.Znt();return o?o.Grt():e}Qnt(t,s){const i=s.Bit().pit(t.GH());if(i)return i.met();const e=t.GH().sY();return e.yet()?e.met():t.Wnt().Unt()}Hnt(t,s){const i=s.Bit().pit(t.GH());if(i)return i.wet();const e=t.GH().sY();return e.yet()?e.wet():t.Wnt().Ynt()}Bnt(t,s,i,e,r,n){const h=i.Wnt().Unt(),o=h/i.nV().Wnt().Unt();let a=1;const l=n?.Xnt()??0;if(0!==l){const t=h/this.Qnt(i,e);a=(t+l)/(0===t?Number.EPSILON:t)}const u=h*(t/s);let c=r?.Knt()??0;c+=u-h;const f=(h+c)/(0===h?Number.EPSILON:h);return i.nV().Yy()*o*a*f}Vnt(t,s,i,e,r,n){const h=i.Wnt().Ynt(),o=h/i.nV().Wnt().Ynt();let a=1;const l=n?.$nt()??0;if(0!==l){const t=h/this.Hnt(i,e);a=(t+l)/(0===t?Number.EPSILON:t)}const u=h*(t/s);let c=r?.tht()??0;c+=u-h;const f=(h+c)/(0===h?Number.EPSILON:h);return i.nV().eg()*o*a*f}}Em.zit.Mrt=Dm}{const Am=self.Cs;class Lm extends Am.zit.wrt{constructor(t){super(t),this.sht=0,this.iht=!1}Xrt(){return!1}h7(){const t=this.cnt.Fit();let s=this.cnt.prt();s=t.Rrt(s),this.sht=s.r9()}Jst(){}Grt(){return this.iht||this.cnt.wc(0),this.sht}wc(t,s,i,e,r,n,h){this.sht=Am.zit.gnt.wc(t,s,i,this.cnt),this.iht=!0}Jet(){}ont(){}qrt(){return this.sht}Vet(){return!1}Yet(){return!1}i4(){return{value:this.sht,init:this.iht}}e4(t){t&&(this.sht=t.value,this.iht=!t.hasOwnProperty("init")||t.init)}}Am.zit.brt=Lm}{const Om=self.Cs;class Rm extends Om.zit.wrt{constructor(t){super(t),this.eht=!1,this.rht=null,this.nht=null,this.hht=null,this.O7=this.cnt.Bit(),this.srt=this.cnt.drt(),this.oht=this.cnt.vrt(),this.aht=this.oht[0],this.lht=this.oht[1],this.oht[3]?this.uht=this.oht[3]:this.uht=Math.random().toString(36).slice(2),this.cht=NaN,this.fht=NaN,this.dht=NaN,this.pht=null,this.mht()}Vr(){super.Vr(),this.rht=null,this.nht=null,this.hht=null,this.O7=null,this.srt=null,this.oht=null,this.aht=null,this.pht=null}mht(){if(!self.Cs.tz.Audio)return;const t=this.cnt.oz().yht(self.Cs.tz.Audio);t&&(this.rht=t.UB().sY()),this.nht=self.Cs.tz.Audio.ght,this.hht=self.Cs.tz.Audio.Mht}wht(){if(this.pht)return;const t=this.cnt.drt().LH("audioSource");t&&(this.pht=t.Qtt())}bht(){const t=this.cnt.drt().LH("volume");return t?t.Qtt().fht:this.fht}nit(){super.nit(),this.eht=!1,this.rht&&(this.hht&&(this.cht=this.hht.Sht.call(this.rht,this.uht),this.fht=this.hht.Tht.call(this.rht,this.uht)),this.nht&&this.nht.eH.call(this.rht,this.uht))}vht(){return this.uht}xht(){return this.dht}Iht(t){this.dht=t}h7(){super.h7(),this.cht=NaN,this.eht=!1}Jst(){super.Jst();const t=this.cnt.Bit().HO();switch(this.cht=t-this.lht,this.cnt.dit()){case"audioSource":break;case"volume":this.fht=this.cnt.Krt(t)}this.eht=!1}wc(t,s,i,e,r,n,h){if(this.rht)switch(this.cnt.dit()){case"audioSource":{if(!this.O7.est())return;if(e)return void(this.nht&&this.nht.eH.call(this.rht,this.uht));if(t<this.lht)return void(this.eht=!1);const s=this.hht.Cht.call(this.rht,this.uht),i=this.O7.pH();if(i!==s&&this.nht.dH.call(this.rht,this.uht,i),this.eht)return;if(!this.cnt.Bit().IsPlaying())return;if(this.eht=!0,isNaN(this.cht)){const s=self.performance.now(),i=t-this.lht;if("suspended"===this.rht.Ght())return void(this.eht=!1);const e=i+(self.performance.now()-s)/1e3;if(this.nht){let t=this.xht();isNaN(t)?(this.Iht(0),t=0):this.Iht(t),this.nht.Nht.call(this.rht,this.aht,t,this.uht,e)}}else{const t=this.cht;this.cht=NaN;const s=this.bht();if(this.fht=NaN,"suspended"===this.rht.Ght())return void(this.eht=!1);this.nht&&(this.Iht(s),this.nht.Nht.call(this.rht,this.aht,s,this.uht,t))}break}case"volume":this.wht(),super.wc(t,s,i,e,r,n,h)}}Krt(t,s,i){if(this.rht)switch(this.cnt.dit()){case"audioSource":return;case"volume":return this.wht(),super.Krt(t,s,i)}}_ht(t,s){return this.pht?this.pht.xht():0}Eht(t,s,i,e){this.pht&&this.pht.Iht(this._ht()+s),this.nht&&this.pht&&this.nht.Iht.call(this.rht,this.pht.vht(),this.pht.xht())}Dht(t,s,i){this.pht&&this.pht.Iht(s),this.nht&&this.pht&&this.nht.Iht.call(this.rht,this.pht.vht(),this.pht.xht())}Aht(){return!0}i4(){return{audioPlaybackStarted:this.eht,audioTag:this.uht,pauseTime:this.cht,pauseVolume:this.fht,volume:this.dht}}e4(t){t&&(this.eht=t.audioPlaybackStarted,this.uht=t.audioTag,this.cht=t.pauseTime,this.fht=t.pauseVolume,this.dht=t.volume,this.mht())}}Om.zit.Srt=Rm}self.Cs.zit.Cnt=class{constructor(t){this.rrt=t,this.cnt=t.LH(),this.Cit=this.cnt.drt().OF(),this.Lht=this.cnt.dit(),this.Oht=!1,this.Rht=null,this.kht=null}Vr(){this.rrt=null,this.cnt=null,this.Cit=null,this.Rht=null,this.kht=null}Xrt(){return!1}nit(){}g7(){this.Cit=null,this.Rht=null,this.kht=null}Qtt(){return this.rrt}LH(){return this.cnt}OF(){return this.Cit||(this.Cit=this.cnt.drt().OF()),this.Cit}jht(t){this.Oht=!!t}Pht(){return this.Oht}Rst(){}h7(){}Jst(){}xnt(){this.Rht=this.qrt()}ont(){this.Rht=null}qrt(){}Vet(){}Yet(){}Ent(t){return typeof this.Fht()==typeof t}ynt(){}Tnt(t,s,i,e,r,n,h,o){}vnt(){}zht(){return this.Uht(()=>{const t=this.cnt.prt();return this.cnt.Fit().Rrt(t)},()=>{const t=this.cnt.prt();return this.cnt.Fit().Znt(t)}).Bht()}Wht(){const t=this.cnt.Bit().HO()-this.cnt.drt().Xst();return this.Uht(()=>{const s=this.cnt.prt();return this.cnt.Fit().Wrt(t,s)},()=>{const s=this.cnt.prt(),i=this.cnt.Fit();return i.Vrt(t,s)||i.Znt(s)}).Bht()}Uht(t,s){return this.cnt.Bit().est()?t():s()}Qht(t,s){return"relative"===this.cnt.q7()?t():s()}Jht(t,s){return this.Pht()?(this.jht(!1),t()):s()}Vht(t){}Yht(){return this.rrt.Tj()}Hht(){return this.kht||(this.kht=this.rrt.mnt()),this.kht}qht(t,s,i,e,r,n){switch(this.cnt.Zit()){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return r();case"audio":return n()}}i4(){return{firstAbsoluteUpdate:this.Oht,saveState:this.Rht}}e4(t){t&&(this.Oht=t.firstAbsoluteUpdate,this.Rht=t.saveState)}Zht(t,s=!1){const i=[];for(const e of t){const t=e.drt().Xst();for(const r of e.zrt())s&&0===r.HO()?i.push({time:t+r.HO(),value:r.Bht()}):s||i.push({time:t+r.HO(),value:r.Bht()})}return i.sort((t,s)=>t.time-s.time)}Xht(t,s,i){return this.Kht(s,i)}Kht(t,s){for(let i=s.length-1;i>=0;i--)if(s[i].time<=t)return s[i];return null}};{const km=self.Cs,jm=new Map,Pm=[0,0,0];class Fm extends km.zit.Cnt{constructor(t){super(t)}Rst(){}h7(){}Jst(){}qrt(){const t=this.cnt.Zit(),s=this.Hht(),i=this.Yht();switch(t){case"behavior":case"plugin":return this.$ht(s.tot(i));case"effect":return this.$ht(s[i]);case"world-instance":return this.$ht(this.Fht())}}Vet(){const t=this.zht();return!this.sot(t,this.Fht())}Yet(){return!km.ie(this.Rht)&&!this.sot(this.Rht,this.Fht())}sot(t,s){return t=this.iot(t),s=this.iot(s),t.Jo(s)}zht(){const t=super.zht();return this.iot(t)}Wht(){const t=super.Wht();return this.iot(t)}Vht(t){}$ht(t){return km.ke(t,km.vo)?t.toArray().slice(0,3):t.slice(0,3)}iot(t){return km.ke(t,km.vo)?t:new km.vo(t[0],t[1],t[2],1)}Ent(t){return!0}Xrt(){return!0}ynt(){const t=this.cnt.Bit(),s=this.cnt.GH(),i=this.cnt.Qtt(),e=t.Wtt(s,i,this.Lht,this.cnt);if(e&&e.length>1){jm.has(s)||jm.set(s,new Map);const t=jm.get(s),i=this.cnt.Zit();t.has(i)||t.set(i,new Map);const e=t.get(i);e.has(this.Lht)||e.set(this.Lht,{eot:!1,color:new km.vo(0,0,0,1)})}}rot(t,s,i){const e=jm.get(t).get(s).get(i);return e.eot=!0,e.color}Tnt(t,s,i,e,r,n,h,o){const a=this.cnt.Bit(),l=this.cnt.drt(),u=this.cnt.GH(),c=this.cnt.Qtt(),f=this.cnt.Zit(),d=this.Lht,p=a.Wtt(u,c,d,this.cnt);if(p&&p.length>1){const t=this.Zht(p,!0),i=this.Xht(a,a.HO(),t);if(i){const t=l.Xst(),e=i.time-t;if(0===e)this.rot(u,f,this.Lht).Eo(s[0],s[1],s[2]);else{if(e<0)return;const t=s[0],i=s[1],r=s[2],n=this.cnt.wc(e,!1,!0),h=km.vo.Ta(t,n[0]),o=km.vo.Ta(i,n[1]),a=km.vo.Ta(r,n[2]);this.rot(u,f,this.Lht).Eo(h,o,a)}}}else this.not(s[0],s[1],s[2])}vnt(){const t=this.cnt.GH();if(!jm.has(t))return;const s=jm.get(t),i=this.cnt.Zit();if(!s.has(i))return;const e=s.get(i);if(!e.has(this.Lht))return;const r=e.get(this.Lht),n=r.eot,h=r.color;n&&this.not(h.jo(),h.Po(),h.Fo()),0===e.size&&s.delete(i),0===s.size&&jm.delete(t)}Fht(){const t=this.cnt.Zit(),s=this.Hht(),i=this.Yht();switch(t){case"behavior":case"plugin":return this.iot(s.tot(i));case"effect":return s[i].clone();case"world-instance":return this.OF().JJ().clone()}}not(t,s,i){const e=this.cnt.Zit(),r=this.Hht(),n=this.Yht();switch(e){case"behavior":case"plugin":Pm[0]=t,Pm[1]=s,Pm[2]=i,r.hot(n,Pm);break;case"effect":r[n]._o(t,s,i);break;case"world-instance":this.OF().oot(t,s,i)}}i4(){}e4(t){}}km.zit.Cnt.Nnt=Fm}{const zm=self.Cs,Bm=zm.zit;class Um extends zm.zit.Cnt{constructor(t){super(t)}Rst(){}h7(){}Jst(){}qrt(){return this.Fht()}Vet(){return this.zht()!==this.qrt()}Yet(){return!zm.ie(this.Rht)&&this.Rht!==this.qrt()}Xrt(){return!1}Tnt(t,s,i,e,r,n,h,o){const a=this.cnt,l=a.drt(),u=a.Zit(),c=a.Bit(),f=l.GH(),d=a.Qtt(),p=this.Lht,m=c.Wtt(f,d,p,a);if(m&&m.length>1){const i=this.Zht(m),e=t+l.Xst(),r=this.Xht(c,e,i);r&&(s=r.value)}switch(a.Ort()){case"numeric":if(!Bm.gnt.aot(this.Yht(),this.Hht(),s,u))return;break;case"angle":if(!Bm.Mnt.aot(this.Yht(),this.Hht(),s,u))return;break;case"boolean":if(!Bm.wnt.aot(this.Yht(),this.Hht(),s,u))return;break;case"color":if(!Bm.bnt.aot(this.Yht(),this.Hht(),s,u))return;break;case"text":if(!Bm.Snt.aot(this.Yht(),this.Hht(),s,u))return}this.not(s)}Fht(){const t=this.cnt.Zit(),s=this.Hht(),i=this.Yht();switch(t){case"behavior":case"plugin":return s.tot(i);case"effect":return s[i];case"instance-variable":return s.lot(i)}}not(t){const s=this.cnt.Zit(),i=this.Hht(),e=this.Yht();switch(s){case"behavior":case"plugin":i.hot(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.uot(e,t)}}}zm.zit.Cnt.Int=Um}{const Wm=self.Cs,Qm=(Wm.zit.Cnt,new Map),Jm=(t,s,i,e,r,n=!1,h=null,o=null)=>{Qm.set(t,{cot:s,fot:i,dot:e,round:r,pot:n,init:h,reset:o})},Vm=(t,s,i,e=0)=>{const r=s.Bit().pit(t.GH());if(!r)return e;const n=r.LH(i);if(!n)return e;const h=n.prt().ort();if(!h)return e;const o=h.Znt();return o?o.Grt():e},Ym=t=>{const s=[];let i=t.nV();for(;i;)s.push(i),i=i.nV();return s.reverse(),s};Jm("offsetX",(t,s,i,e)=>{"relative"===e.cnt.q7()?t.mot(s,i.Bit().tst()):t.mot(s)},(t,s)=>t.HT(s),t=>t.YT(),!0),Jm("offsetY",(t,s,i,e)=>{"relative"===e.cnt.q7()?t.yot(s,i.Bit().tst()):t.yot(s)},(t,s)=>t.XT(s),t=>t.ZT(),!0),Jm("offsetWidth",(t,s,i,e,r=!1,n=!0)=>{if(0===s)return;const h="relative"===e.cnt.q7(),o=1===e.got.HC();if((h||o)&&t.MV()&&t.IV()){if(isNaN(e.Mot)){const s=Ym(t);let i;i=o?s[s.length-1].Yy():s[s.length-1].Wnt().Unt(),e.Mot=0===i?Number.EPSILON:i}if(r)return;e.wot+=s;const i=s/e.Mot;t.Ig(i,n),e.bot+=i}else t.Ig(s),e.bot+=s},(t,s)=>t.tg(s),t=>t.Yy(),!0,!1,null,t=>{t.bot=0,t.wot=0}),Jm("offsetHeight",(t,s,i,e,r=!1,n=!0)=>{if(0===s)return;const h="relative"===e.cnt.q7(),o=1===e.got.HC();if((h||o)&&t.MV()&&t.GV()){if(isNaN(e.Mot)){const s=Ym(t);let i;i=o?s[s.length-1].eg():s[s.length-1].Wnt().Ynt(),e.Mot=0===i?Number.EPSILON:i}if(r)return;e.Sot+=s;const i=s/e.Mot;t.Tot(i,n),e.bot+=i}else t.Tot(s),e.bot+=s},(t,s)=>t.Hy(s),t=>t.eg(),!0,!1,null,t=>{t.bot=0,t.Sot=0}),Jm("offsetAngle",(t,s,i,e,r)=>{t.vot(s)},(t,s)=>t.AU(s),t=>t.LU(),!1,!0),Jm("offsetOpacity",(t,s,i,e,r)=>{s/=e.xot?e.xot:1;const n=t.ML()+s;if(0===e.Iot)n>1?e.Iot+=n-1:n<0&&(e.Iot+=n),t.Cot(s);else{const i=t.ML()+s;s>0&&e.Iot>0?i>1&&(e.Iot+=i-1):s>0&&e.Iot<0?(e.Iot+=s,e.Iot>0&&(t.Cot(e.Iot),e.Iot=0)):s<0&&e.Iot>0?(e.Iot+=s,e.Iot<0&&(t.Cot(e.Iot),e.Iot=0)):s<0&&e.Iot<0&&i<0&&(e.Iot+=i)}},(t,s)=>{t.bL(s)},t=>t.ML(),!1,!0,(t,s,i)=>{switch(t.Iot=0,t.cnt.q7()){case"relative":{t.cnt.Fit();const s=t.cnt.prt().ort().hrt();let i=t.OF().ML(),e=i;for(const r of s){const s=r.HO();e=i+t.cnt.Krt(s),e=Wm.Xr(e,0,1)}t.Got=i-e,t.Got=Math.round(100*(t.Got+Number.EPSILON))/100,e=i;for(let i=s.length-1;i>=0;i--){const r=s[i].HO();e-=t.cnt.Krt(r),e=Wm.Xr(e,0,1)}t.Not=e,t.Not=Math.round(100*(t.Not+Number.EPSILON))/100;break}}const e="relative"===t.cnt.q7(),r=1===t.got.HC();if((e||r)&&s.MV()&&s.LV()){const e=Ym(s);let r=e[0].Wnt()._ot();r+=Vm(e[0],i,"offsetOpacity");for(let t=1;t<e.length;t++)r+=Vm(e[t],i,"offsetOpacity");t.xot=0===r?1:r}},t=>{switch(t.cnt.q7()){case"relative":{t.Iot=0;const s=t.OF();let i=s.ML();i=Math.round(100*(i+Number.EPSILON))/100,t.cnt.Bit().est()?(s.bL(i+t.Got),t.PG=0):(s.bL(i-t.Not),t.PG=t.Qtt().unt());break}}}),Jm("offsetOriginX",(t,s)=>t.Eot(s),(t,s)=>t._J(s),t=>t.NJ(),!1),Jm("offsetOriginY",(t,s)=>t.Dot(s),(t,s)=>t.AJ(s),t=>t.DJ(),!1),Jm("offsetZElevation",(t,s)=>t.Aot(s),(t,s)=>t.$T(s),t=>t.KT(),!0),Jm("offsetScaleX",(t,s,i,e)=>{if(0===s)return;const r=t.Yy()<0?-1:1;if(e.Lot+=s,"relative"===e.cnt.q7()&&t.MV()&&t.IV()){const n=Vm(t,i,"offsetWidth"),h=isNaN(e.Oot)?i.met():e.Oot,o=(h+n/(t.Wnt().Unt()/h))*r*s;isNaN(e.Mot)&&Qm.get("offsetWidth").cot(t,1,i,e,!0);const a=o/e.Mot;t.Ig(a,!0),e.bot+=a}else{const n=(isNaN(e.Oot)?i.met():e.Oot)*r*s;t.Ig(n),e.bot+=n}},(t,s,i)=>{t.tg(i.met()*s)},(t,s)=>{const i=t.Yy()<0?-1:1;if(t.IV()){const e=t.nV(),r=s.Bit().pit(e.GH());let n=NaN;if(r)n=e.Yy()/r.met();else{const t=e.GH().sY();n=t.yet()?e.Yy()/t.met():1}return t.Yy()*i/(s.met()*n)}return t.Yy()*i/s.met()},!1,!1,null,t=>{t.bot=0,t.Oot=NaN,t.Lot=0}),Jm("offsetScaleY",(t,s,i,e)=>{if(0===s)return;const r=t.eg()<0?-1:1;if(e.Rot+=s,"relative"===e.cnt.q7()&&t.MV()&&t.GV()){const n=Vm(t,i,"offsetHeight"),h=isNaN(e.Oot)?i.wet():e.Oot,o=(h+n/(t.Wnt().Ynt()/h))*r*s;isNaN(e.Mot)&&Qm.get("offsetHeight").cot(t,1,i,e,!0);const a=o/e.Mot;t.Tot(a,!0),e.bot+=a}else{const n=(isNaN(e.Oot)?i.wet():e.Oot)*r*s;t.Tot(n),e.bot+=n}},(t,s,i)=>{t.Hy(i.wet()*s)},(t,s)=>{const i=t.eg()<0?-1:1;if(t.GV()){const e=t.nV(),r=s.Bit().pit(e.GH());let n=NaN;if(r)n=e.eg()/r.wet();else{const t=e.GH().sY();n=t.yet()?e.eg()/t.wet():1}return t.eg()*i/(s.wet()*n)}return t.eg()*i/s.wet()},!1,!1,null,t=>{t.bot=0,t.Oot=NaN,t.Rot=0});class Hm extends Wm.zit.Cnt{constructor(t){super(t),this.PG=0,this.Iot=0,this.Got=0,this.Not=0,this.xot=NaN,this.Mot=NaN,this.bot=0,this.Oot=NaN,this.wot=0,this.Lot=0,this.Sot=0,this.Rot=0,this.kot=void 0,this.jot=void 0,this.Pot=null,this.Fot=null,this.zot=null,this.Bot=null,this.Uot=null,this.Wot=null,this.Qot=null,this.Jot=null,this.Vot=!1,this.Yot=!1,Wm.ke(this.cnt.Bit(),Wm.Hot)?this.got=new Wm.zit.Cnt.qot(this):this.got=new Wm.zit.Cnt.Zot(this);const s=this.cnt.dit();switch(this.cnt.Zit()){case"world-instance":{const t=Qm.get(s);this.Pot=t.dot,this.Fot=t.cot,this.zot=t.fot,this.Vot=t.round,this.Yot=t.pot,this.Uot=t.init,this.Bot=t.reset;break}case"audio":this.Wot=t._ht,this.Qot=t.Eht,this.Jot=t.Dht,this.Vot=!!t.Aht(),this.Yot=!1}}Vr(){this.got=null,this.Pot=null,this.Fot=null,this.zot=null,this.Bot=null,this.Uot=null,this.Wot=null,this.Qot=null,this.Jot=null,super.Vr()}Xrt(){return this.got.Xrt()}Xot(){return this.PG}Kot(t){this.PG=t}Rst(){this.Bot&&this.Bot(this)}h7(){const t=this.got.h7();if("number"==typeof t&&(this.PG=t),this.Uot){const t=this.OF(),s=this.cnt.drt();this.Uot(this,t,s)}}Jst(){const t=this.got.Jst();"number"==typeof t&&(this.PG=t)}qrt(){return this.Fht()}Vet(){return this.zht()!==this.qrt()}Yet(){return!Wm.ie(this.Rht)&&this.Rht!==this.qrt()}ynt(){this.got.ynt()}Tnt(t,s,i,e,r,n,h,o){return this.got.Tnt(t,s,i,e,r,n,h,o)}vnt(){this.got.vnt()}Fht(){const t=this.Hht(),s=this.Yht(),i=this.OF(),e=this.cnt.drt();switch(this.cnt.Zit()){case"behavior":case"plugin":return t.tot(s);case"effect":return t[s];case"instance-variable":return t.lot(s);case"world-instance":return this.Pot(i,e);case"audio":return this.Wot.call(this.Qtt(),i,e)}}not(t,s,i,e=!0){const r=this.Hht(),n=this.Yht(),h=this.OF(),o=this.cnt.drt();switch(this.cnt.Zit()){case"behavior":r.$ot(n,t);break;case"effect":r[n]+=t;break;case"instance-variable":r.tat(n,t);break;case"plugin":r.$ot(n,t,this.Qtt().jnt());break;case"world-instance":this.Fot(h,t,o,this,!1,e);break;case"audio":this.Qot.call(this.Qtt(),h,t,o,this)}}sat(t,s,i){let e=this.cnt.Ztt();if(e="default"===e?"continuous":e,"discrete"===e&&!s)return;if("discrete"===e&&i){const t=this.cnt.Bit().HO();if(!this.cnt.Urt(t))return}const r=this.Hht(),n=this.Yht(),h=this.OF(),o=this.cnt.drt();switch(this.cnt.Zit()){case"behavior":r.hot(n,t);break;case"effect":r[n]=t;break;case"instance-variable":r.uot(n,t);break;case"plugin":r.hot(n,t,this.Qtt().jnt());break;case"world-instance":this.zot(h,t,o);break;case"audio":this.Jot.call(this.Qtt(),h,t,o)}}iat(t,s,i,e,r,n,h,o){this.got.iat(t,s,i,e,r,n,h,o)}eat(t,s,i,e,r){"angle"===this.cnt.Drt()&&(t=Wm.tn(t));const n=(t.toString().split(".")[1]||"").length,h=this.Fht();let o;switch(o=0===n?this.Vot?Math.round(h):this.Yot?"angle"===this.cnt.Drt()?Wm.$r(Math.round(Wm.tn(h))):Number(Wm.toFixed(h,2)):h:this.Vot?Number(Wm.toFixed(h,n)):(this.Yot,h),this.not(o-h,s,i,!1),this.cnt.dit()){case"offsetWidth":case"offsetScaleX":{const t=this.OF(),s=t.Yy(),i=Number(Wm.toFixed(s,2));t.Ig(i-s);break}case"offsetHeight":case"offsetScaleY":{const t=this.OF(),s=t.eg(),i=Number(Wm.toFixed(s,2));t.Tot(i-s);break}}}i4(){return Object.assign(super.i4(),{v:this.PG,a:this.Iot,fod:this.Got,bod:this.Not,of:this.xot,sf:this.Mot,armorf:this.kot,armandf:this.jot,ca:this.bot,os:this.Oot,awo:this.wot,aho:this.Sot,asxo:this.Lot,asyo:this.Rot})}e4(t){t&&(super.e4(t),this.PG=t.v,this.Iot=t.a,this.Got=Wm.$i(t.fod)?t.fod:0,this.Not=Wm.$i(t.bod)?t.bod:0,this.xot=Wm.$i(t.of)?t.of:NaN,this.Mot=Wm.$i(t.sf)?t.sf:NaN,this.kot=Wm.$i(t.armorf)?t.armorf:void 0,this.jot=Wm.$i(t.armandf)?t.armandf:void 0,this.bot=Wm.$i(t.ca)?t.ca:0,this.Oot=Wm.$i(t.os)?t.os:NaN,this.wot=Wm.$i(t.awo)?t.awo:0,this.Sot=Wm.$i(t.aho)?t.aho:0,this.Lot=Wm.$i(t.asxo)?t.asxo:0,this.Rot=Wm.$i(t.asyo)?t.asyo:0)}znt(t){this.Oot=t}Jnt(){return this.bot}Knt(){return this.wot}tht(){return this.Sot}Xnt(){return this.Lot}$nt(){return this.Rot}}Wm.zit.Cnt.Gnt=Hm}{const qm=self.Cs;class Zm{constructor(t){this.rat=!1,this.sht=0,this.nat=!1,this.hat=!1,this.Oit=t;for(let t=0,s=this.Oit.length;t<s;t++)this.Oit[t].crt(this)}fit(){return this.Oit}oat(){this.rat=!0}aat(){return this.rat}lnt(t){this.sht=t}Grt(){return this.sht}lat(t){this.nat=t}uat(){return this.nat}qst(t){this.hat=t}cat(){return this.hat}Ff(){this.rat=!1,this.sht=0,this.nat=!1,this.hat=!1}}class Xm{constructor(t){this.fat=t}Vr(){this.fat=null}HC(){return 0}h7(){const t=this.fat;return this.fat.LH(),t.Qht(()=>t.Uht(()=>0,()=>t.Qtt().unt()),()=>{})}Jst(){}Xrt(){switch(this.fat,this.fat.LH().q7()){case"relative":return!1;case"absolute":return!0}}ynt(){this.fat;const t=this.fat.LH(),s=t.dit();switch(t.q7()){case"relative":break;case"absolute":if(t.urt())t.frt().Ff();else{const i=t.Bit(),e=t.GH(),r=t.Qtt(),n=i.Wtt(e,r,s,t);n&&n.length>1&&new Zm(n)}}}Tnt(t,s,i,e,r,n,h,o){const a=this.fat,l=this.fat.LH();switch(l.q7()){case"relative":{const h=a.Xot();a.not(s-h,i,e),n&&this.iat(t,i,e,r,h,s),a.Kot(s);break}case"absolute":{const t=l.Bit(),i=l.drt();if(l.GH(),l.Qtt(),l.urt()){const e=l.frt(),r=e.fit(),n=a.Zht(r,!0),u=a.Xht(t,t.HO(),n);if(u){const t=i.Xst(),r=u.time-t;if(0===r)e.qst(h),e.lat(o),e.oat(),e.lnt(e.Grt()+s);else{if(r<0)return;const t=l.Krt(r);e.qst(h),e.lat(o),e.oat(),e.lnt(e.Grt()+(s-t))}}}else a.sat(s,o,h);break}}}vnt(){const t=this.fat,s=this.fat.LH();switch(s.q7()){case"relative":break;case"absolute":if(s.urt()){const i=s.frt();i.aat()&&t.sat(i.Grt(),i.uat(),i.cat())}}}iat(t,s,i,e,r,n){const h=this.fat;e||(s&&t===s.HO()?h.eat(s.r9(),s,i):i&&t===i.HO()?h.eat(i.r9(),s,i):n-r===0&&h.eat(s.r9(),s,i))}}qm.zit.Cnt.Zot=Xm}{const Km=self.Cs;class $m{constructor(t){this.fat=t}Vr(){this.fat=null}HC(){return 1}h7(){const t=this.fat;return t.jht(!0),this.Vht(t.zht())}Jst(){const t=this.fat;if(t.zht()!==t.Wht())return t.jht(!0),this.Vht(t.Wht())}Xrt(){return!1}ynt(){}Tnt(t,s,i,e,r,n,h,o){const a=this.fat,l=a.Xot();switch(a.LH().q7()){case"relative":a.not(s-l,i,e),n&&this.iat(t,i,e,r,l,s,!1,h);break;case"absolute":a.Pht()?(a.jht(!1),a.not(l,i,e)):0===t&&0===a.LH().Bit().aH()?a.sat(s,!0,!1):(a.not(s-l,i,e),n&&this.iat(t,i,e,r,l,s,this.dat(),h))}a.Kot(s)}vnt(){}Vht(t){return t-this.fat.qrt()}dat(){const t=this.fat,s=t.OF().GH(),i=t.LH().oz().Utt();let e=0;for(const t of i.L8())0===t.HC()?t.F8(s)&&e++:1===t.HC()&&t.GH()===s&&e++;return e<=1}iat(t,s,i,e,r,n,h,o){const a=this.fat;e?s&&t===s.HO()?a.eat(s.r9(),s,i,h,o):i&&t===i.HO()?a.eat(i.r9(),s,i,h,o):i||a.eat(s.r9(),s,i,h,o):s&&t===s.HO()?a.eat(s.r9(),s,i,h,o):i&&t===i.HO()?a.eat(i.r9(),s,i,h,o):n-r===0&&a.eat(s.r9(),s,i,h,o)}}Km.zit.Cnt.qot=$m}{const ty=self.Cs,sy=self.Uu;ty.zit.gnt=class{constructor(){}static aot(t,s,i,e){let r;switch(e){case"behavior":case"plugin":r=s.tot(t);break;case"effect":r=s[t];break;case"instance-variable":r=s.lot(t)}return r!==i}static wc(t,s,i,e){if(!i){let t=e.prt();return t=e.Fit().Znt(t),t.r9()}let r=e.Ztt();if("default"===r&&(r="continuous"),"combo"===e.Drt()&&(r="discrete"),"discrete"===r)return s.r9();if("continuous"===r||"step"===r){const n=e.Bit().Htt();if("step"===r&&0!==n){const s=1/n;t=Math.floor(t*s)/s}const h=s.r9(),o=i.r9(),a=s.i9("cubic-bezier"),l=i.i9("cubic-bezier"),u=a&&a.pat()&&l&&l.mat();if(!u&&h===o)return h;const c=s.HO(),f=i.HO();"step"===r&&0!==n&&(t=ty.Xr(t,c,f));const d=ty.normalize(t,c,f),p=s.ant();let m;if(u){const t=f-c;m=sy.nc(p)(t*d,0,1,t),m=sy.nc("cubicbezier")(m,h,h+a.o9(),o+l.u9(),o)}else m=sy.nc(p)((f-c)*d,h,o-h,f-c);return"integer"===e.Drt()?Math.floor(m):m}}}}{const iy=self.Cs;iy.zit.Mnt=class{constructor(){}static aot(t,s,i,e){let r;switch(e){case"behavior":case"plugin":r=s.tot(t);break;case"effect":r=s[t];break;case"instance-variable":r=s.lot(t)}return r!==i}static wc(t,s,i,e){if(!i){let t=e.prt();return t=e.Fit().Znt(t),t.r9()}let r=e.Ztt();if("default"===r&&(r="continuous"),"combo"===e.Drt()&&(r="discrete"),"discrete"===r)return s.r9();if("continuous"===r||"step"===r){const n=e.Bit().Htt();if("step"===r&&0!==n){const s=1/n;t=Math.floor(t*s)/s}const h=s.HO(),o=i.HO(),a=s.r9(),l=i.r9();"step"===r&&0!==n&&(t=iy.Xr(t,h,o));const u=s.i9("angle");if(!u){if(a===l)return a;const i=iy.normalize(t,h,o),e=self.Uu.nc(s.ant());return iy.cn(a,l,e(i,0,1,1))}{const i=u.yat();if(a===l&&0===i)return a;const e=iy.normalize(t,h,o),r=self.Uu.nc(s.ant())(e,0,1,1);switch(u.gat()){case"closest":return iy.cn(a,l,r,i);case"clockwise":return iy.fn(a,l,r,i);case"anti-clockwise":return iy.dn(a,l,r,i)}}}}}}self.Cs.zit.wnt=class{constructor(){}static aot(t,s,i,e){let r;switch(e){case"behavior":case"plugin":r=s.tot(t);break;case"effect":r=s[t];break;case"instance-variable":r=s.lot(t)}return!!r!=!!i}static wc(t,s,i,e){if(!i){let t=e.prt();return t=e.Fit().Znt(t),t.r9()?1:0}return s.r9()?1:0}};{const ey=self.Cs,ry=[0,0,0],ny=[0,0,0],hy=[0,0,0];ey.zit.bnt=class{constructor(){}static aot(t,s,i,e){let r;switch(e){case"behavior":case"plugin":r=s.tot(t);break;case"effect":r=s[t];break;case"instance-variable":r=s.lot(t)}return Array.isArray(i)?(ry[0]=i[0],ry[1]=i[1],ry[2]=i[2]):(hy.ha(i),ry[0]=Math.floor(255*hy.jo()),ry[1]=Math.floor(255*hy.Po()),ry[2]=Math.floor(255*hy.Fo())),Array.isArray(r)?(ny[0]=r[0],ny[1]=r[1],ny[2]=r[2]):(hy.ha(r),ny[0]=Math.floor(255*hy.jo()),ny[1]=Math.floor(255*hy.Po()),ny[2]=Math.floor(255*hy.Fo())),ry[0]!==ny[0]||ry[1]!==ny[1]||ry[2]!==ny[2]}static wc(t,s,i,e){if(!i){let t=e.prt();t=e.Fit().Znt(t);const s=t.r9();return ry[0]=s[0],ry[1]=s[1],ry[2]=s[2],ry}let r=e.Ztt();if("default"===r&&(r="continuous"),"discrete"===r){const t=s.r9();return ry[0]=t[0],ry[1]=t[1],ry[2]=t[2],ry}if("continuous"===r||"step"===r){const n=e.Bit().Htt();if("step"===r&&0!==n){const s=1/n;t=Math.floor(t*s)/s}const h=s.HO(),o=i.HO(),a=s.r9(),l=i.r9();"step"===r&&0!==n&&(t=ey.Xr(t,h,o));const u=ey.normalize(t,h,o),c=s.ant(),f=a[0],d=a[1],p=a[2],m=l[0],y=l[1],g=l[2],M=self.Uu.nc(c),w=o-h,b=w*u;return ry[0]=f===m?f:M(b,f,m-f,w),ry[1]=d===y?d:M(b,d,y-d,w),ry[2]=p===g?p:M(b,p,g-p,w),ry}}}}self.Cs.zit.Snt=class{constructor(){}static aot(t,s,i,e){let r;switch(e){case"behavior":case"plugin":r=s.tot(t);break;case"effect":r=s[t];break;case"instance-variable":r=s.lot(t)}return r!==i}static wc(t,s,i,e){if(!i){let t=e.prt();return t=e.Fit().Znt(t),t.r9()}return s.r9()}};{const oy=self.Cs;oy.z6=class{constructor(){this.Mat=new Map}Vr(){for(const t of this.Mat.values())t.Vr();this.Mat.clear(),this.Mat=null}Fu(t){const s=new oy.wat(t),i=s._c();this.Mat.set(i,s)}Js(t){return this.Mat.get(t)}Rtt(){return 0}static bat(t,s,i,e){if(s)for(const r of s)oy.z6.Sat("create",r,t,i,e)}static Tat(t,s,i,e){if(s)for(const r of s)oy.z6.Sat("create-including-disabled",r,t,i,e)}static vat(t,s,i,e){t.length?s.forEach((s,i)=>{t[i].e4(s)}):s.forEach(s=>{oy.z6.Sat("load",s,t,i,e)})}static Sat(t,s,i,e,r){let n;if("function"==typeof e)switch(t){case"load":n=new e(null,r);break;case"create":case"create-including-disabled":n=new e(s,r)}else if("object"==typeof e){const i=s[e.xat],h=e.map.get(i);switch(t){case"load":n=new h(null,r);break;case"create":case"create-including-disabled":n=new h(s,r)}}switch(t){case"load":n.e4(s),i.push(n);break;case"create":if("function"==typeof n.cet&&!n.cet())return n.Vr();i.push(n);break;case"create-including-disabled":i.push(n)}}}}{const ay=self.Cs;ay.wat=class{constructor(t){this.qr="",this.Hst=NaN,this.Iat=0,this.Cat="default",this.Gat="default",this.Nat=!1,this._at=!1,this.Eat=1,this.Tit=null,this.Dat="",this.Aat=!1,this.Lat=!0,t&&(this.qr=t[0],this.Hst=t[1],this.Iat=t[2],this.Cat=t[3],this.Gat=t[4],this.Nat=!!t[6],this._at=!!t[7],this.Eat=t[8],this.Dat=t[9],this.Aat=!!t[10],this.Lat=!!t[11],this.Tit=new ay.Oat(t[5],this))}Vr(){this.Tit.Vr(),this.Tit=null}ztt(){return this.Tit||(this.Tit=new ay.Oat(null,this)),this.Tit}_c(){return this.qr}eZ(t){this.qr=t}aH(){return this.Hst}oH(t){this.Hst=t}Htt(){return this.Iat}qtt(t){this.Iat=t}Ztt(){return this.Cat}Xtt(t){this.Cat=t}q7(){return this.Gat}Ktt(t){this.Gat=t}uH(){return this.Nat}lH(t){this.Nat=t}fH(){return this._at}cH(t){this._at=t}GY(){return this.Eat}$tt(t){this.Eat=t}M7(){return this.Dat}tst(){return this.Aat}sst(){return this.Lat}i4(){return{trackDataJson:this.Tit.i4(),name:this.qr,totalTime:this.Hst,step:this.Iat,interpolationMode:this.Cat,resultMode:this.Gat,loop:this.Nat,pingPong:this._at,repeatCount:this.Eat,startOnLayout:this.Dat,transformWithSceneGraph:!!this.Aat,useSystemTimescale:this.Lat}}e4(t){t&&(this.ztt().e4(t.trackDataJson),this.qr=t.name,this.Hst=t.totalTime,this.Iat=t.step,this.Cat=t.interpolationMode,this.Gat=t.resultMode,this.Nat=t.loop,this._at=t.pingPong,this.Eat=t.repeatCount,this.Dat=t.startOnLayout,this.Aat=!!t.transformWithSceneGraph,this.Lat=!!t.useSystemTimescale)}}}{const ly=self.Cs;class uy{constructor(t,s){this.Tit=s,this.Rat=null,this.kat=null,this.vit=NaN,this.xit=NaN,this.Cat="default",this.Gat="default",this.fu=!1,this.jat=null,this.ert=null,this.zc="",this.Pat=null,this.Fat=0,this.zat=this.Tit.Ytt().aH(),this.Vc=0,this.qr="",t&&(t[0]&&(this.Rat=t[0],this.vit=t[0][2],this.xit=t[0][1]),this.Cat=t[1],this.Gat=t[2],this.fu=!!t[3],t[6]&&(this.zc=t[6]),t[7]&&(this.Pat=t[7],this.Fat=t[7][0],this.zat=t[7][1]),t[8]&&(this.kat=t[8]),t[8]&&(this.kat=t[8]),t[9]&&(this.Vc=t[9]),t[10]&&(this.qr=t[10]),this.jat=new ly.Bat(t[4],this),this.ert=new ly.Uat(t[5],this))}Vr(){this.Rat=null,this.Tit=null,this.jat&&(this.jat.Vr(),this.jat=null),this.ert&&(this.ert.Vr(),this.ert=null),this.Pat=null}ztt(){return this.Tit}$st(){return this.jat||(this.jat=new ly.Bat(null,this)),this.jat}Fit(){return this.ert||(this.ert=new ly.Uat(null,this)),this.ert}Wat(){return this.Rat}Jit(){return this.xit}det(t){this.xit=t}Qit(){return this.vit}aet(t){this.vit=t}Ztt(){return this.Cat}Xtt(t){this.Cat=t}q7(){return this.Gat}Ktt(t){this.Gat=t}cet(){return this.fu}fet(t){this.fu=!!t}DH(){return this.zc}Xst(){return this.Fat}let(){return this.zat}uet(t){this.zat=t}met(){return this.kat[0]}pet(t){this.kat||(this.kat=[]),this.kat[0]=t}wet(){return this.kat||(this.kat=[]),this.kat[1]}Met(t){this.kat||(this.kat=[]),this.kat[1]=t}HC(){return this.Vc}_c(){return this.qr}i4(){return{keyframeDataJson:this.jat.i4(),propertyTrackDataJson:this.ert.i4(),instanceData:this.Rat,additionalInstanceData:this.kat,instanceUid:this.vit,objectClassIndex:this.xit,interpolationMode:this.Cat,resultMode:this.Gat,enabled:this.fu,id:this.zc,nestedData:this.Pat,type:this.Vc,name:this.qr}}e4(t){t&&(this.Rat=t.instanceData,this.vit=t.instanceUid,this.xit=t.objectClassIndex,this.Cat=t.interpolationMode,this.Gat=t.resultMode,this.fu=t.enabled,this.zc=t.id,this.Vc=t.type?t.type:0,this.qr=t.name?t.name:"",this.zat=this.Tit.Ytt().aH(),t.nestedData&&(this.Pat=t.nestedData,this.Fat=this.Pat[0],this.zat=this.Pat[1]),t.additionalInstanceData&&(this.kat=t.additionalInstanceData),this.$st().e4(t.keyframeDataJson),this.Fit().e4(t.propertyTrackDataJson))}}ly.Oat=class{constructor(t,s){this.itt=s,this.Qat=[],ly.z6.bat(this.Qat,t,uy,this)}Vr(){this.itt=null;for(const t of this.Qat)t.Vr();ly.wh(this.Qat),this.Qat=null}Ytt(){return this.itt}rit(){const t=new uy(null,this);return this.Qat.push(t),t}Jat(t){return t.$st().Lit()[0]}Vat(t){return t.$st().Lit().at(-1)}Oet(t,s){const i=s.$st().Lit(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.HO()===t)return e}}Yat(t,s){const i=s.$st().Lit(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.HO()>t)return e}}Aet(t,s){const i=s.$st().Lit(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.HO()>=t)return e}}Eet(t,s){const i=s.$st().Lit();for(let s=i.length-1;s>=0;s--){const e=i[s];if(e.HO()<=t)return e}}*Ftt(){for(const t of this.Qat)yield t}i4(){return{trackDataItemsJson:this.Qat.map(t=>t.i4())}}e4(t){t&&ly.z6.vat(this.Qat,t.trackDataItemsJson,uy,this)}}}{const cy=self.Cs;class fy{constructor(t,s){this.ert=s,this.Hat="",this.qat=null,this.Lht=null,this.Vc=null,this.Zat=NaN,this.Xat=NaN,this.Cat="default",this.Gat="default",this.fu=!1,this.Kat=null,this.$at=!0,t&&(this.Hat=t[0][0],this.qat=t[0].slice(1),this.Lht=t[1],this.Vc=t[2],this.Zat=t[3],this.Xat=t[4],this.Cat=t[5],this.Gat=t[6],this.fu=!!t[7],this.Kat=new cy.tlt(t[8],this),this.$at=t[9])}Vr(){this.Kat.Vr(),this.Kat=null,this.ert=null,this.qat=null}Fit(){return this.ert}ort(){return this.Kat||(this.Kat=new cy.tlt(null,this)),this.Kat}Zit(){return this.Hat}Trt(t){this.Hat=t}xrt(){return this.qat}Crt(t){this.qat=t}Nrt(){return this.Lht}Ert(t){this.Lht=t}HC(){return this.Vc}Lrt(t){this.Vc=t}krt(){return this.Zat}jrt(t){this.Zat=t}Prt(){return this.Xat}Frt(t){this.Xat=t}Ztt(){return this.Cat}Xtt(t){this.Cat=t}q7(){return this.Gat}Ktt(t){this.Gat=t}cet(){return this.fu}fet(t){this.fu=!!t}Brt(){return!!this.$at}i4(){return{propertyKeyframeDataJson:this.Kat.i4(),sourceAdapterId:this.Hat,sourceAdapterArguments:this.qat,property:this.Lht,type:this.Vc,min:this.Zat,max:this.Xat,interpolationMode:this.Cat,resultMode:this.Gat,enabled:this.fu,canHavePropertyKeyframes:this.$at}}e4(t){t&&(this.Hat=t.sourceAdapterId,this.qat=t.sourceAdapterArguments,this.Lht=t.property,this.Vc=t.type,this.Zat=t.min,this.Xat=t.max,this.Cat=t.interpolationMode,this.Gat=t.resultMode,this.fu=t.enabled,this.$at=t.canHavePropertyKeyframes,this.ort().e4(t.propertyKeyframeDataJson))}}cy.Uat=class{constructor(t,s){this.Sit=s,this.slt=[],cy.z6.bat(this.slt,t,fy,this)}Vr(){this.Sit=null;for(const t of this.slt)t.Vr();cy.wh(this.slt),this.slt=null}Kst(){return this.Sit}Bet(){const t=new fy(null,this);return this.slt.push(t),t}Rrt(t){return t.ort().hrt()[0]}Znt(t){return t.ort().hrt().at(-1)}Urt(t,s){const i=s.ort().hrt(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.HO()===t)return e}}Jrt(t,s){const i=s.ort().hrt(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.HO()>t)return e}}Vrt(t,s){const i=s.ort().hrt(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.HO()>=t)return e}}Wrt(t,s){const i=s.ort().hrt();for(let s=i.length-1;s>=0;s--){const e=i[s];if(e.HO()<=t)return e}}*Pit(){for(const t of this.slt)yield t}i4(){return{propertyTrackDataItemsJson:this.slt.map(t=>t.i4())}}e4(t){t&&cy.z6.vat(this.slt,t.propertyTrackDataItemsJson,fy,this)}}}{const dy=self.Cs;class py{constructor(t,s){if(this.jat=s,this.QR=-1,this.ilt="noease",this.elt=!1,this._tt=null,this.rlt=null,!t)return;this.QR=t[0],this.ilt=t[1],this.elt=!!t[2];const i=t[3];this._tt=i?i.split(" "):[],this.rlt=new Set(this._tt.map(t=>t.toLowerCase())),this.nlt=null,this.hlt=null}Vr(){this.jat=null,dy.wh(this._tt),this._tt=null,this.rlt.clear(),this.rlt=null,this.nlt=null}$st(){return this.jat}B7(){return this.nlt}olt(t){this.nlt=t}Let(){return this.hlt}llt(t){this.hlt=t}HO(){return this.QR}hH(t){this.QR=t,this.jat.ult()}ant(){return this.ilt}CH(t){this.ilt=t}cet(){return this.elt}fet(t){this.elt=!!t}mH(){return this._tt}rst(t){this._tt=t?t.split(" "):[],this.rlt=new Set(this._tt.map(t=>t.toLowerCase()))}clt(){return this.rlt}git(t){return this.rlt.has(t.toLowerCase())}i4(){return{time:this.QR,ease:this.ilt,enable:this.elt,tags:this._tt}}e4(t){t&&(this.QR=t.time,this.ilt=t.ease,this.elt=t.enable,this._tt=t.tags,this.rlt=new Set(this._tt.map(t=>t.toLowerCase())))}}dy.Bat=class{constructor(t,s){this.Sit=s,this.Ait=[],dy.z6.bat(this.Ait,t,py,this),this.ult()}Vr(){this.Sit=null;for(const t of this.Ait)t.Vr();dy.wh(this.Ait),this.Ait=null}ult(){this.Ait.sort((t,s)=>t.HO()-s.HO());for(let t=0;t<this.Ait.length;t++){const s=this.Ait[t];s.olt(this.Ait[t+1]),s.llt(this.Ait[t-1])}}Kst(){return this.Sit}flt(){return this.Ait.length}Lit(){return this.Ait}Fet(){const t=new py(null,this);return this.Ait.push(t),this.ult(),t}Wet(t){for(const s of this.Ait){if(!t(s))continue;const i=this.Ait.indexOf(s);-1!==i&&(s.Vr(),this.Ait.splice(i,1))}this.dlt(),this.ult()}dlt(){this.Ait.sort((t,s)=>t.HO()-s.HO())}$et(t){return this.Ait.indexOf(t)}trt(t){return this.Ait[t]}*plt(){for(const t of this.Ait)yield t}*mlt(){for(let t=this.Ait.length-1;t>=0;t--)yield this.Ait[t]}i4(){return{keyframeDataItemsJson:this.Ait.map(t=>t.i4())}}e4(t){t&&(dy.z6.vat(this.Ait,t.keyframeDataItemsJson,py,this),this.ult())}}}{const my=self.Cs;class yy{constructor(t,s){this.Kat=s,this.sht=null,this.ylt=null,this.Vc="",this.QR=NaN,this.ilt="noease",this.elt=!1,this.glt=null,this.Mlt=void 0,this.wlt="line",t&&(this.sht=t[0][0],this.ylt=t[0][1],this.Vc=t[0][2],this.QR=t[1],this.ilt=t[2],this.elt=!!t[3],this.wlt=t[5],this.glt=null,t[4]&&(this.glt=new my.blt(t[4],this)),this.nlt=null,this.Slt=null)}Vr(){this.Kat=null,this.glt&&(this.glt.Vr(),this.glt=null),this.nlt=null,this.Slt=null}Tlt(){return this.glt}olt(t){this.nlt=t}B7(){return this.nlt}vlt(t){this.Slt=t}U7(){return this.Slt}Grt(){return this.sht}lnt(t){"color"===this.Vc&&my.$i(t)?(this.sht[0]=my._n(t),this.sht[1]=my.En(t),this.sht[2]=my.Dn(t)):this.sht=t}Bht(){return this.ylt}nnt(t){"color"===this.Vc&&my.$i(t)?(this.ylt[0]=my._n(t),this.ylt[1]=my.En(t),this.ylt[2]=my.Dn(t)):this.ylt=t}r9(){const t=this.Kat.prt().q7();return"relative"===t?this.Grt():"absolute"===t?this.Bht():void 0}HC(){return this.Vc}Lrt(t){this.Vc=t}HO(){return this.QR}hH(t){this.QR=t,this.Kat.xlt()}ant(){return this.ilt}CH(t){this.ilt=t}cet(){return this.elt}fet(t){this.elt=!!t}W7(){return this.wlt}i9(t){if(!this.glt)return;if(this.Mlt||null===this.Mlt)return this.Mlt;const s=this.glt.Ilt();if(!s)return this.Mlt=null,this.Mlt;const i=s.length;for(let e=0;e<i;e++){const i=s[e];if(i.DH()===t)return this.Mlt=i,this.Mlt}return this.Mlt=null,this.Mlt}i4(){const t=this.glt;return{addonDataJson:t?t.i4():t,value:this.sht,aValue:this.ylt,type:this.Vc,time:this.QR,ease:this.ilt,enable:this.elt}}e4(t){t&&(t.addonDataJson&&this.glt.Clt(t.addonDataJson),this.sht=t.value,this.ylt=t.aValue,this.Vc=t.type,this.QR=t.time,this.ilt=t.ease,this.elt=t.enable)}}my.tlt=class{constructor(t,s){this.irt=s,this.nrt=[],this.Glt=[],my.z6.bat(this.nrt,t,yy,this),my.z6.Tat(this.Glt,t,yy,this),this.xlt()}Vr(){this.irt=null;for(const t of this.nrt)t.Vr();my.wh(this.nrt),this.nrt=null;for(const t of this.Glt)t.Vr();my.wh(this.Glt),this.Glt=null}xlt(){let t=this.nrt;t.sort((t,s)=>t.HO()-s.HO());for(let s=0;s<t.length;s++){const i=t[s];s+1<t.length&&i.olt(t[s+1]),s-1>=0&&i.vlt(t[s-1])}t=this.Glt,t.sort((t,s)=>t.HO()-s.HO());for(let s=0;s<t.length;s++){const i=t[s];s+1<t.length&&i.olt(t[s+1]),s-1>=0&&i.vlt(t[s-1])}}ent(){const t=new yy(null,this);return this.nrt.push(t),this.xlt(),t}rnt(t){for(const s of this.nrt){if(!t(s))continue;const i=this.nrt.indexOf(s);-1!==i&&(s.Vr(),this.nrt.splice(i,1))}this.Nlt(),this.xlt()}Nlt(){this.nrt.sort((t,s)=>t.HO()-s.HO())}prt(){return this.irt}_lt(){return this.nrt.length}Znt(){return this.nrt[this.nrt.length-1]}hrt(){return this.nrt}z7(){return this.Glt}*Elt(){for(const t of this.nrt)yield t}*Dlt(){for(let t=this.nrt.length-1;t>=0;t--)yield this.nrt[t]}i4(){const t=this.nrt,s=this.Glt;return{propertyKeyframeDataItemsJson:t.map(t=>t.i4()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.i4())}}e4(t){t&&(my.z6.vat(this.nrt,t.propertyKeyframeDataItemsJson,yy,this),my.z6.vat(this.Glt,t.propertyKeyframeDataItemsIncludingDisabledJson,yy,this),this.xlt())}}}{const gy=self.Cs;class My{constructor(t,s){this.glt=s,this.zc=t[0],this.Alt=t[1]}Vr(){this.glt=null,this.Alt=null}Tlt(){return this.glt}DH(){return this.zc}i4(){return{id:this.zc,data:this.Alt}}e4(t){t&&(this.zc=t.id,this.Alt=t.data)}}class wy extends My{constructor(t,s){super(t,s),this.Llt=this.Alt[0],this.Olt=!!this.Alt[1],this.Rlt=this.Alt[2],this.klt=!!this.Alt[3]}Vr(){super.Vr()}o9(){return this.Llt}pat(){return this.Olt}u9(){return this.Rlt}mat(){return this.klt}i4(){return Object.assign(super.i4(),{startAnchor:this.Llt,startEnable:!!this.Olt,endAnchor:this.Rlt,endEnable:!!this.klt})}e4(t){t&&(super.e4(t),this.Llt=t.startAnchor,this.Olt=!!t.startEnable,this.Rlt=t.endAnchor,this.klt=!!t.endEnable)}}class by extends My{constructor(t,s){super(t,s),this.jlt=this.Alt[0],this.Plt=this.Alt[1]}Vr(){super.Vr()}gat(){return this.jlt}yat(){return this.Plt}i4(){return Object.assign(super.i4(),{direction:this.jlt,revolutions:this.Plt})}e4(t){t&&(super.e4(t),this.jlt=t.direction,this.Plt=t.revolutions)}}gy.blt=class{constructor(t,s){this.Flt=s,this.zlt=[],gy.z6.bat(this.zlt,t,{xat:0,map:new Map([["cubic-bezier",wy],["angle",by]])},this)}Vr(){this.Flt=null;for(const t of this.zlt)t.Vr();gy.wh(this.zlt),this.zlt=null}Blt(){return this.Flt}Ilt(){return this.zlt}*Ult(){for(const t of this.zlt)yield t}i4(){return{addonDataItemsJson:this.zlt.map(t=>t.i4())}}e4(t){t&&gy.z6.vat(this.zlt,t.addonDataItemsJson,{xat:"id",map:new Map([["cubic-bezier",wy],["angle",by]])},this)}}}{const Sy=self.Cs;let Ty=0;Sy.Hot=class extends Sy.b8{constructor(t,s){super("tween-"+Ty++,t,s),this.zc="",this.Wlt=!1,this.Qlt="start-value",this.Iit=null,this.Jlt=null,this.Vlt=null,this.Ylt=null,this.srt=null,this.Hlt=null}jtt(t){const s=Sy.Jr(Sy.Event,"tweenstatereleased");s.qlt=this,t.dispatchEvent(s)}HC(){return 1}att(){for(const t of this.itt.ztt().Ftt())this.ett.push(Sy.Zlt.QI(this,t));this.srt=this.ett[0]}eit(){const t=this.itt.ztt().rit(),s=Sy.Zlt.QI(this,t);return this.ett.push(s),this.Xlt(),s}Xlt(){this.srt=this.ett[0]}LH(t){return this.srt.fit()[0]}Art(t){this.Klt=t}GH(){const t=this.j7();if(!t||!t.length)return;const s=t[0];if(this.srt=s,!s)return;const i=s.GH();return s.Wit()?i:void 0}$lt(t){this.Ylt=t}tut(t){this.Vlt||(this.Vlt=[]),this.Vlt.push(t)}sut(t){this.Jlt||(this.Jlt=[]),this.Jlt.push(t)}iut(t){if(!this.Vlt)return;const s=this.Vlt.indexOf(t);-1!==s&&this.Vlt.splice(s,1)}eut(t){if(!this.Jlt)return;const s=this.Jlt.indexOf(t);-1!==s&&this.Jlt.splice(s,1)}rut(t,s){for(const i of this.ett)for(const e of i.Oit){if(e.dit()!==s)continue;const i=e.Fit(),r=e.prt(),n=i.Rrt(r);n.lnt(t),n.nnt(t)}}nut(t){for(const s of this.ett)for(const i of s.Oit)if(i.dit()===t)return i}hut(t){let s=!1;for(const i of t){const t=this.nut(i);t&&(this.rut(t.qrt(),i),s=!0)}if(s){if(this.est()){const t=this.aH()-this.HO();this.oH(t);for(const s of this.ett)s.uet(t);this.Nst(0)}else{const t=this.HO();this.oH(t);for(const s of this.ett)s.uet(t);this.Nst(t)}this._st()}}out(t,s){const i=this.nut(s);if(!i)return;const e=i.Fit(),r=i.prt(),n=e.Znt(r);n.hH(this.aH()),n.lnt(t),n.nnt(t)}aut(t){this.zc=t}DH(){return this.zc}lut(t){this.Qlt=t}uut(){return this.Qlt}EH(t){this.Wlt=t}_H(){return this.Wlt}ast(){if(this.Vlt)for(const t of this.Vlt)t(this);if(!this.p7())for(const t of this.ett)t.Yet()}yst(){this.vtt=this.Pc.kP()}y7(){if(!this.Ctt&&(this.Ctt=!0,this.Jlt))for(const t of this.Jlt)t(this)}hH(t){this.cut(),super.hH(t)}Ost(t){Sy.$i(t)||(t=this.aH()),t<0?this.ctt=0:t>=this.aH()?this.ctt=this.aH():this.ctt=t,this.srt.Rst()}h7(t){if(!this.m7()&&"current-state"===this.uut())for(const t of this.ett)t.Vet();super.h7(t)}eH(t=!1){if(super.eH(t),!this.p7())for(const t of this.ett)t.Jet()}Ff(t=!0,s=!1){this.cut(),super.Ff(t,s)}cut(){for(const t of this.ett){const s=t=>{const s=t.HO(),i=this.aH();return 0!==s&&s!==i};t.Uet(s),t.Qet(s)}}r8(){if(this.sH())return!0;const t=this.GH();return!(t&&t.fQ().z$()||(this.stt.i7(this),this.Wst(),0))}u7(t,s,i){if(this.Iit||(this.Iit=this.GH()),!this.Iit||this.Iit.Mq())return this.eH(!0),void this.yst();const e=this.Iit.zP();if(-1!==e&&(t=i*e),0===t&&0===this.Ntt)return;this.Ntt=t;const r=this.ctt+this.ftt+t*this.dtt,n=this.itt.Hst;r<0?(this.ctt=0,this.ftt=-r):r>=n?(this.ctt=n,this.ftt=this.ctt-r):(this.ctt=r,this.ftt=0);let h=!1,o=!1;const a=this.uH(),l=this.fH();if(a||l?a&&!l?this.dtt>0?this.ctt>=n&&(this.Ost(0),this.fut(Sy.yut.mut.KF.dut),this.fut(Sy.yut.mut.KF.gut),o=!0):this.ctt<=0&&(this.Ost(n),this.fut(Sy.yut.mut.KF.dut),this.fut(Sy.yut.mut.KF.gut),o=!0):!a&&l?this.dtt>0?this.ctt>=n&&(this.Nst(n),this.dH(-1*this.pH()),o=!0,1===this.ptt?this.ytt<this.GY()?(this.ytt++,this.fut(Sy.yut.mut.KF.dut),this.fut(Sy.yut.mut.KF.gut),this.fut(Sy.yut.mut.KF.Mut),this.fut(Sy.yut.mut.KF.wut),this.IsPlaying()?this.ptt=0:this.mtt=0):(this.fut(Sy.yut.mut.KF.Mut),this.fut(Sy.yut.mut.KF.wut),h=!0):0===this.ptt&&(this.fut(Sy.yut.mut.KF.Mut),this.fut(Sy.yut.mut.KF.wut),this.IsPlaying()?this.ptt=1:this.mtt=1)):this.ctt<=0&&(this.Nst(0),this.dH(-1*this.pH()),o=!0,1===this.ptt?this.ytt<this.GY()?(this.ytt++,this.fut(Sy.yut.mut.KF.dut),this.fut(Sy.yut.mut.KF.gut),this.fut(Sy.yut.mut.KF.Mut),this.fut(Sy.yut.mut.KF.wut),this.IsPlaying()?this.ptt=0:this.mtt=0):(h=!0,this.fut(Sy.yut.mut.KF.Mut),this.fut(Sy.yut.mut.KF.wut)):0===this.ptt&&(this.fut(Sy.yut.mut.KF.Mut),this.fut(Sy.yut.mut.KF.wut),this.IsPlaying()?this.ptt=1:this.mtt=1)):a&&l&&(this.dtt>0?this.ctt>=n&&(this.Nst(n),this.dH(-1*this.pH()),o=!0,0===this.ptt&&(this.fut(Sy.yut.mut.KF.Mut),this.fut(Sy.yut.mut.KF.wut)),1===this.ptt&&(this.fut(Sy.yut.mut.KF.dut),this.fut(Sy.yut.mut.KF.gut),this.fut(Sy.yut.mut.KF.Mut),this.fut(Sy.yut.mut.KF.wut)),this.IsPlaying()?(this.ptt++,this.ptt=Sy.wrap(this.ptt,0,2)):(this.mtt=this.ptt+1,this.mtt=Sy.wrap(this.mtt,0,2))):this.ctt<=0&&(this.Nst(0),this.dH(-1*this.pH()),o=!0,0===this.ptt&&(this.fut(Sy.yut.mut.KF.Mut),this.fut(Sy.yut.mut.KF.wut)),1===this.ptt&&(this.fut(Sy.yut.mut.KF.dut),this.fut(Sy.yut.mut.KF.gut),this.fut(Sy.yut.mut.KF.Mut),this.fut(Sy.yut.mut.KF.wut)),this.IsPlaying()?(this.ptt++,this.ptt=Sy.wrap(this.ptt,0,2)):(this.mtt=this.ptt+1,this.mtt=Sy.wrap(this.mtt,0,2)))):this.dtt>0?this.ctt>=n&&(this.ytt<this.GY()?(this.ytt++,this.Ost(0),this.fut(Sy.yut.mut.KF.dut),this.fut(Sy.yut.mut.KF.gut),o=!0):(this.Nst(n),h=!0)):this.ctt<=0&&(this.ytt<this.GY()?(this.ytt++,this.Ost(n),this.fut(Sy.yut.mut.KF.dut),this.fut(Sy.yut.mut.KF.gut),o=!0):(this.Nst(0),h=!0)),!this.sH()&&this.IsPlaying()){if(h)return this.srt.qst(),this.eH(!0),void this.yst();this.srt.wc(this.ctt,!0,!1,o,this.Gtt,!1),this.Gtt&&(this.Gtt=!1)}}fut(t){const s=this.GH();this.Ylt.but(this),this.Pc.HQ(t,s,this.Ylt.cY()),this.Ylt.Sut()}i4(){const t=super.i4(),s=this.Ytt();return Object.assign(t,{tweenDataItemJson:s.i4(),id:this.zc,destroyInstanceOnComplete:this.Wlt,initialValueMode:this.Qlt})}e4(t){t&&(this.Ytt().e4(t.tweenDataItemJson),super.e4(t),this.zc=t.id,this.Wlt=t.destroyInstanceOnComplete,this.Qlt=t.initialValueMode,this.Xlt())}static IsPlaying(t){return t.IsPlaying()}static wH(t){return t.wH()}static Tut(t){return!!t.fH()&&0===t.ist()}static vut(t){return!!t.fH()&&1===t.ist()}static xut(t){const s=t.runtime.Utt(),i=new Sy.wat;if(t.json){i.e4(t.json.tweenDataItemJson);const e=new Sy.Hot(i,s);return e.e4(t.json),e}{const e=new Sy.Hot(i,s);Sy.ve(t.Iut)||(t.Iut=[t.Iut]),e.aut(t.id),e.rst(t.tags),e.lut(t.Cut),e.EH(t.Gut),e.lH(t.loop),e.cH(t.Nut),e.oH(t.time),e.qtt(0),e.Xtt("default"),e.Ktt(t.Iut[0]._ut),e.$tt(t.CY);const r=e.eit();r.aet(t.fY.IQ()),r.Xtt("default"),r.Ktt(t.Iut[0]._ut),r.fet(!0),r.det(t.fY.fQ().Tj());const n=t.fY.sY(),h=n.yet()?n.met():t.fY.OF().Yy(),o=n.yet()?n.wet():t.fY.OF().eg();r.pet(h),r.Met(o);const a=r.Pet();a.hH(0),a.CH("noease"),a.fet(!0),a.rst("");const l=r.Pet();l.hH(t.time),l.CH("noease"),l.fet(!0),l.rst("");for(const s of t.Iut){const i=r.zet();i.Trt(s.Eut),i.Irt(s.Dut),i._rt(s.net),i.Art(s.type),i.jrt(NaN),i.Frt(NaN),i.Xtt("default"),i.Ktt(s._ut),i.fet(!0);const e=i.int();e.Lrt(s.valueType),e.hH(0),e.CH(s.Aut),e.fet(!0),e.lnt(s.Lut),e.nnt(s.Lut);const n=i.int();n.Lrt(s.valueType),n.hH(t.time),n.CH(s.Aut),n.fet(!0),n.lnt(s.Out),n.nnt(s.Out),i.Qtt()}return e}}static aet(t,s){if(!isNaN(s))for(const i of t.j7())i.aet(s)}static $lt(t,s){t.$lt(s)}Rut(t,s){return this.Hlt||(this.Hlt=Sy.Jr(self.TH,this,t,s)),this.Hlt}}}{const vy=self.Cs;vy.Zlt=class extends vy.Btt{constructor(t,s){super(t,s),this.kut=null,this.jut=null}static QI(t,s){return vy.Jr(vy.Zlt,t,s)}Put(){1===this.Oit.length?this.kut=this.Oit[0]:(this.kut=this.Oit[0],this.jut=this.Oit[1])}Rit(){for(const t of this.Sit.Fit().Pit())this.Oit.push(vy.Fut.QI(this,t));this.Put()}zet(){const t=this.Sit.Fit().Bet(),s=vy.Fut.QI(this,t);return this.Oit.push(s),this.Put(),s}h7(){if(this.Uit(),!this.Wit()&&this.Vtt())return;const t=this.Bit().est()?0:this.let();for(const s of this.Oit)s.h7(t),0===this.kit&&1===s.vet()&&(this.kit=1),0===this.y8&&1===s.o7()&&(this.y8=1);this.jit=0,this.Oit.some(t=>t.Yst())&&(this.jit=1),this.Dit=this.xet(t),this.Nit=!1,this._it=!1,this.wc(t)}Zst(){}wc(t,s=!1,i=!1,e=!1,r=!1,n=!1,h=!1){if(this.Iit||this.GH(),this.Iit)return!this.Iit.Mq()&&(!n||!this.fQ().z$())&&(this.jut?(this.kut.wc(t,i,e,h),this.jut.wc(t,i,e,h)):this.kut.wc(t,i,e,h),void(0!==this.kut.vet()&&(this.Cit||(this.Cit=this.Iit.OF()),this.Cit&&this.Cit.vJ())))}tit(){}e4(t){super.e4(t),this.Put()}}}{const xy=self.Cs;xy.Fut=class extends xy.zit{constructor(t,s){super(t,s),this.zut=!1}static QI(t,s){return xy.Jr(xy.Fut,t,s)}wc(t,s=!1,i=!1,e=!1){let r,n;if(this.zut)r=this.nrt[0],n=this.nrt[1];else if(s)r=this.ert.Wrt(t,this.irt),n=r.B7();else{if(this.art){const s=this.Bit(),i=this.art.B7(),e=this.art.HO(),r=i?i.HO():s.aH();(t<=e||t>=r)&&(this.art=this.ert.Wrt(t,this.irt))}else this.art=this.ert.Wrt(t,this.irt);r=this.art,n=r.B7()}this.rrt.wc(t,r,n,s,i,e)}int(){const t=this.irt.ort().ent();return this.art=null,this.zut=this.zrt().length<=2,t}Qet(t){this.art=null,this.irt.ort().rnt(t),this.zut=this.zrt().length<=2}i4(){return{sourceAdapterJson:this.Qtt().i4(),basic:this.zut}}e4(t){t&&(this.Qtt().e4(t.sourceAdapterJson),this.zut=t.basic)}}}{const Iy=self.Cs,Cy=self.Uu;Iy.bc=class extends Iy.Wr{constructor(t,s=!0){super(),this.qr=t[0],this.But=t[2],this.Uut=[];for(const s of t[1]){const t=Iy.Wut.QI(this,s);this.Uut.push(t)}for(let t=0;t<this.Uut.length;t++){const s=this.Uut[t],i=this.Uut[t+1],e=this.Uut[t-1];s.olt(i),s.vlt(e)}this.Qut=new Map,this.Jut=new Map,this.Vut(),s&&Cy.Tc(this.qr,(t,s,i,e)=>this.wc(t,s,i,e),null,{transition:this})}static QI(t){return Iy.Jr(Iy.bc,t)}Vr(){for(const t of this.Uut)t.Vr();Iy.wh(this.Uut),this.Uut=null,this.Qut.clear(),this.Qut=null,this.Jut.clear(),this.Jut=null}Sc(t){this.But=!!t}Yut(t){const s=this.Jut.get(t);if(s)return s;for(const s of this.Uut)if(s.Hut()===t)return this.Jut.set(t,s),s}qut(t){for(let s=this.Uut.length-1;s>=0;s--){const i=this.Uut[s],e=i.Hut();if(e<=t){let s=i;if(e<t)return s;if(e===t){for(;s;){const t=s.U7();if(!t)break;if(t.Hut()!==s.Hut())break;s=t}return s}}}}wc(t,s,i,e){let r=t/e;if(this.But){const r=this.Yut(0),n=this.Yut(1),h=s+(s+i)*r.Zut(),o=(s+i)*n.Zut()-h;return 0===e?h+o:Cy.xc(t,h,o,e)}0===e&&(r=1);let n=this.qut(r),h=n.B7();if(!h){const t=n.U7(),s=n;n=t,h=s}const o=h.Hut()-n.Hut(),a=Iy.Zr(r,n.Hut(),h.Hut(),0,o);if(n.Xut()||0===o){const t=s+(s+i)*n.Zut(),e=(s+i)*h.Zut()-t;return 0===o?1===a?t+e:t:Cy.xc(a,t,e,o)}const l=n.Hut(),u=n.Zut(),c=n.Hut()+n.Kut(),f=n.Zut()+n.$ut(),d=h.Hut()+h.tct(),p=h.Zut()+h.sct(),m=h.Hut(),y=h.Zut();let g=Cy.nc("spline")(a,l,u,c,f,d,p,m,y,this.Qut.get(n));return g+=n.Zut(),(1-g)*s+g*(s+i)}Vut(){this.Qut.clear();for(let t=0;t<this.Uut.length-1;t++){const s=this.Uut[t];if(!s.pat())continue;const i=s,e=this.Uut[t+1];if(!e.mat())continue;const r=i.Hut(),n=i.Hut()+i.Kut(),h=e.Hut()+e.tct(),o=e.Hut();this.Qut.set(i,Cy.Ic(r,n,h,o))}}}}{const Gy=self.Cs;Gy.Wut=class extends Gy.Wr{constructor(t,s){super(),this.ict=t,this.ect=s[0],this.rct=s[1],this.nct=s[2],this.hct=s[3],this.oct=s[4],this.act=s[5],this.Olt=s[6],this.klt=s[7],this.lct=s[8],this.nlt=null,this.Slt=null}Vr(){this.ict=null}static QI(t,s){return Gy.Jr(Gy.Wut,t,s)}olt(t){this.nlt=t}B7(){return this.nlt}vlt(t){this.Slt=t}U7(){return this.Slt}Hut(){return this.ect}Zut(){return this.rct}Kut(){return this.nct}$ut(){return this.hct}tct(){return this.oct}sct(){return this.act}pat(){return this.Olt}mat(){return this.klt}Xut(){return"linear"===this.lct}uct(){return"cubic"===this.lct}}}{const Ny=self.Cs;Ny.cct=class extends Ny.Wr{constructor(t){super(),this.Pc=t,this.fct=[]}Vr(){for(const t of this.fct)t.Vr();Ny.wh(this.fct),this.fct=null}QI(t){this.fct.push(Ny.bc.QI(t))}}}{const _y=self.Cs;_y.dct=class extends _y.Wr{constructor(t){super(),this.Pc=t,this.pct=null,this.mct=null,this.o8=t=>this.a8(t.fY)}Vr(){if(this.g8(),this.pct){for(const t of this.pct.values())t.clear();this.pct.clear()}this.pct=null,this.Pc=null}QI(t){if(this.pct||(this.pct=new Map),!t)return;const s=t[0][16][0],i=t[1];this.pct.has(i)||this.pct.set(i,new Map),this.pct.get(i).set(s,t)}M8(){const t=this.Pc.Mf();t&&t.addEventListener("instancedestroy",this.o8)}g8(){const t=this.Pc.Mf();t&&t.removeEventListener("instancedestroy",this.o8)}yct(){return!!this.pct&&0!==this.pct.size}gct(t,s){let i=0;if(i=t instanceof _y.Mct?t.Tj():t,!this.pct.has(i))return;const e=this.pct.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}wct(t,s){this.mct||(this.mct=new WeakMap),this.mct.has(t)||this.mct.set(t,s)}bct(t){if(!this.mct)return"";return this.mct.get(t)||""}a8(t){this.mct&&this.mct.has(t)&&this.mct.delete(t)}}}{const Ey=self.Cs;Ey.Sct=class{constructor(t){this.Pc=t,this.Tct=new Ey.vct}Vr(){this.Tct.Vr(),this.Tct=null,this.Pc=null}oz(){return this.Pc}QI(t){this.Tct.Fu(t)}xct(t){return this.Tct.Js(t)}Ict(){return this.Tct.Ict()}}}{const Dy=self.Cs;Dy.Cct=class{constructor(t,s,i,e,r,n,h){this.Pc=r.oz(),this.Gct=r,this.Nct=t,this._ct=i,this.Ect=e,this._M=s,this.B6=n,this.Dct=h??n.GH().IQ(),this.Act(),this.Lct=this.Rct?.Oct()??-1,this.kct=[],this.jct=null,this.Pct=NaN,this.Fct=null,this.zct=null,this.Bct=null,this.Uct="",this.Wct=null,this.Qct="",this.Jct="",this.Vct=0,this.Yct=!1,this.Stt=!1}Vr(){this.Stt||(Dy.wh(this.kct),this.kct=null,this.Pc=null,this.Gct=null,this.Ect=null,this.B6=null,this.jct=null,this.Pct=NaN,this.Fct&&this.Fct.clear(),this.Fct=null,this.zct=null,this.Bct=null,this.Uct="",this.Wct=null,this.Qct="",this.Jct="",this.Stt=!0)}Yr(){return this.Stt}Hct(){return this.Gct}oz(){return this.Pc}_c(){return this.Nct}qct(){return this.Ect}tH(){return this._M}D8(){return this.B6||(this.B6=this.Pc._F(this.Dct).sY()),this.B6}Zct(){return this.Xct(this.Lct)}Kct(){const t=this.Zct();return t?t.tH():""}$ct(){const t=this.Zct();return t?t.mH():[]}tft(t){const s=this.$ct();if(!s)return!1;if(!s.length)return!1;const i=Dy.Cct.nst(t);return!(!i||!i.length)&&i.every(Dy.Cct.ost,s)}sft(t,s){const i=this.$ct();if(!i)return!1;if(!i.length)return!1;const e=Dy.Cct.nst(t);return!(!e||!e.length)&&e.every(t=>Dy.Cct.ift.call(i,t,s))}static ost(t){const s=this;return""===t?1===s.length&&""===s[0]:s.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static nst(t){return t.trim().split(" ")}static ift(t,s){const i=this;return""===t?1===i.length&&""===i[0]:i.some(i=>Dy.compare(i.trim(),s,t.trim()))}eft(t){const s=this.Zct();if(s){if(Dy.$i(t)){const i=s.rft(),e=i?i[t]:void 0;if(Dy.$i(e))return this.Xct(e)}if("string"==typeof t)for(const i of s.rft()){const s=this.Xct(i);if(s.nH(t))return this.Xct(s.Oct())}}}nft(t){const s=this.eft(t);return s?s.tH():""}hft(t){const s=this.eft(t);return s?s.mH():""}oft(t){const s=this.Zct();if(!s)return-1;const i=s.rft();if(!i)return-1;const e=this.eft(t);return e?i.indexOf(e.Oct()):-1}aft(){const t=this.Zct();if(!t)return 0;const s=t.rft();return s?s.length:0}Xct(t){return this.Ect.Xct(t)}Ff(){this.uft().lft(!0)}lft(t){if(this.cft()){for(const[t,s]of this.cft().entries())s.lft(!1);this.cft().clear()}if(this.Fct=null,this.jct=null,this.fft=null,this.zct=null,this.Uct="",this.Wct=null,this.Qct="",this.Jct="",this.kct=[],t){this.Gct.dft(this);const t=this.Rct.Oct();t!==this.Lct&&this.pft(t)}else this.Lct=this.Rct.Oct()}mft(){const t=this.Ect.Xct(this.Lct);return t?t.gft().yft():0}Mft(t){return!(t<0)&&t===this.wft()}wft(){const t=this.Ect.Xct(this.Lct);if(!t)return-1;let s=t.gft().bft();return s?t.gft().Sft().indexOf(s):-1}Tft(t){const s=this.vft(t);return s?s._c():""}xft(t){let s;return Dy.$i(t)&&(s=this.vft(t)),"string"==typeof t&&(s=this.Ift(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.Grt():""}Cft(t,s){if(t.cet())return t.Oct();{const i=t.gft().bft();if(!i)return s.Oct();const e=i.Gft();if(!Dy.$i(e))return s.Oct();const r=this.Xct(e);return r?this.Cft(r,s):s.Oct()}}Nft(t,s){if(t.cet()){if("reference"===t.HC()){const s=t._ft(),i=t.Eft(),e=this.Gct.xct(s);if(!e)return[-1,null];const r=e.Dft(i);return r?this.Nft(r,e):this.Nft(e.Aft(),e)}return[t.Oct(),s]}{const i=t.gft().bft();if(!i)return[-1,null];const e=i.Gft();if(!Dy.$i(e))return[-1,null];const r=s.Xct(e);return r?this.Nft(r,s):[-1,null]}}Lft(t,s){let i=this.Xct(t);if(i){if(!i.cet()){const s=this.Xct(this.Lct);t=this.Cft(i,s)}if(Dy.$i(t)&&t!==this.Lct)if(i=this.Xct(t),"reference"===i.HC()){const e=i._ft(),r=i.Eft(),n=this.Gct.xct(e);let h=n.Dft(r);if(h){const i=this.Nft(h,n);if(-1===i[0])return;s(this.Lct,t,i[1],i[0])}else s(this.Lct,t)}else s(this.Lct,t)}}Oft(t){let s;if(Dy.$i(t)&&(s=this.vft(t)),"string"==typeof t&&(s=this.Ift(t)),!s)return;let i=s.Gft();Dy.$i(i)&&this.Lft(i,(t,s,i,e)=>{this.kct.push(t),this.pft(s,i,e)})}Rft(){const t=this.kft();if(!t)return;const s=t.Gft();Dy.$i(s)&&this.Lft(s,(t,s,i,e)=>{this.kct.push(t),this.pft(s,i,e)})}jft(t){const s=this.Ect.Dft(t);if(!s)return;const i=s.Oct();Dy.$i(i)&&this.Lft(i,(t,s,i,e)=>{this.kct.push(t),this.pft(s,i,e)})}Pft(){const t=this.kct.pop();Dy.$i(t)?this.pft(t):this.Fft()&&(this.Gct.dft(this.Fft(),!0,!1,!1),this.Fft().pft(this.zft()),this.uft().Bft(this.Fft()))}Uft(t){if(!this.Zct())return;const s=this.eft(t);if(s){if(!s.cet())return;const t=s.Oct();if(!Dy.$i(t))return;this.kct.push(this.Lct),this.pft(s.Oct())}}Wft(t){if(Dy.$i(t))return!!this.Ect.Xct(this.Lct).gft().Sft()[t];if("string"==typeof t){const s=this.Ect.Xct(this.Lct).gft().Sft();for(let i=0;i<s.length;i++)if(s[i]._c()===t)return!0;return!1}return!1}Qft(){this.Yct=!0}Jft(){return this.Vct>0}Vft(){this.Vct++}Yft(){this.Vct--,0===this.Vct&&this.Yct&&this.Gct.Hft(this)}pft(t,s,i){const e=this.Lct,r=this.D8().GH();this.Vft(),this.Gct.qft(this),this.Pc.HQ(Dy.tz.Xft.KF.Zft,r),this.Pc.HQ(Dy.tz.Xft.KF.Kft,r),this.Pc.HQ(Dy.tz.Xft.KF.$ft,r),this.Pc.HQ(Dy.tz.Xft.KF.tdt,r),this.Lct=t;let n=this.Xct(this.Lct);if("dictionary"===n.HC()&&(this.Pc.HQ(Dy.tz.Xft.KF.sdt,r),this.Pc.HQ(Dy.tz.Xft.KF.idt,r),this.Pc.HQ(Dy.tz.Xft.KF.edt,r),this.Pc.HQ(Dy.tz.Xft.KF.rdt,r)),this.Gct.ndt(),this.Yft(),!this.Yr()&&(n=this.Xct(this.Lct),"reference"===n.HC())){const t=s?s._c():n._ft();if(this.hdt(n)){this.kct.pop();const t=this.odt(n);this.Gct.dft(t,!0,!0,!1),t.adt(this,e),this.uft().Bft(t)}else{const s="number"==typeof i?i:n.Eft();if(t){this.kct.pop();let i=n.ldt();if(i){let t=this.Gct.udt(i);for(;t;)i=Dy.Cm(i),t=this.Gct.udt(i)}else{i=`${t}-ref`;let s=this.Gct.udt(i);for(;s;)i=Dy.Cm(i),s=this.Gct.udt(i)}const r=this.Gct.cdt(t,s,i,this.B6,!0);r.adt(this,e),this.fdt(n,r);const h=this.uft();r.ddt(h),h.Bft(r)}}}}kft(){const t=this.Ect.Xct(this.Lct);return t?t.gft().bft():null}vft(t){const s=this.Ect.Xct(this.Lct);if(!s)return null;const i=s.gft().Sft();if(!i)return null;return i[t]||null}Ift(t){const s=this.Ect.Xct(this.Lct);if(!s)return null;return s.gft().pdt(t)||null}Act(t){if("number"==typeof t){let s=this.Xct(t);s||(s=this.Ect.Aft()),this.Rct=s}else if("number"==typeof this._ct){let t=this.Xct(this._ct);t||(t=this.Ect.Aft()),this.Rct=t}else{let t=this.Ect.Dft(this._ct);t||(t=this.Ect.Aft()),this.Rct=t}}i4(){return this.Yct?null:{flowchartName:this.Nct,flowchartTag:this._M,startNodeTag:this._ct,currentNodeId:this.Lct,previousNodeIds:this.kct,pluginUID:this.B6.GH().IQ(),reference:{previousFlowchartTag:this.Fft()?this.Fft().tH():"",previousStartNodeId:Dy.$i(this.zft())?this.zft():NaN,referencesJson:this.mdt(),currentReferenceFlowchartTag:this.ydt()?this.ydt().tH():"",rootFlowchartTag:this.uft()?this.uft().tH():""}}}mdt(){if(!this.gdt())return null;const t=[];for(const[s,i]of this.cft().entries())t.push({flowchartElementId:s.Oct(),flowchartStateTag:i.tH()});return t.length?t:null}e4(t){if(t){if(this.Nct=t.flowchartName,this._M=t.flowchartTag,this._ct=t.startNodeTag,this.Lct=t.currentNodeId,this.kct=t.previousNodeIds,this.Dct=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.Uct=s.previousFlowchartTag,this.Pct=s.previousStartNodeId,this.Wct=s.referencesJson,this.Qct=s.currentReferenceFlowchartTag,this.Jct=s.rootFlowchartTag}this.Act()}}Fft(){return"string"==typeof this.Uct&&this.Uct&&(this.jct=this.Gct.udt(this.Uct),this.Uct=""),this.jct}zft(){return this.Pct}adt(t,s){this.jct=t,this.Pct=s}ydt(){return"string"==typeof this.Qct&&this.Qct&&(this.zct=this.Gct.udt(this.Qct),this.Qct=""),this.zct}Bft(t){this.zct=t,this.zct===this&&(this.zct=null)}uft(){return"string"==typeof this.Jct&&this.Jct&&(this.Bct=this.Gct.udt(this.Jct),this.Jct=""),this.Bct?this.Bct:this}ddt(t){this.Bct=t}gdt(){return this.Mdt(),!!this.Fct}hdt(t){return this.Mdt(),this.Fct&&this.Fct.has(t)}Mdt(){if(this.Wct){this.Fct&&this.Fct.clear(),this.Fct||(this.Fct=new Map);for(const t of this.Wct){const s=this.Gct.udt(t.flowchartStateTag),i=s.Xct(t.flowchartElementId);this.Fct.set(i,s)}this.Wct=null}}cft(){return this.Mdt(),this.Fct}odt(t){return this.Mdt(),this.Fct.get(t)}fdt(t,s){this.Fct||(this.Fct=new Map),this.Fct.set(t,s)}}}{const Ay=self.Cs;Ay.wdt=class{constructor(t){this.Pc=t,this.bdt=new Map,this.Sdt=null,this.Tdt=[],this.vdt=()=>this.f8(),this.xdt=null}Vr(){Ay.wh(this.Tdt),this.Tdt=null,this.bdt.clear(),this.bdt=null,this.Sdt=null,this.Pc=null,this.xdt=null}oz(){return this.Pc}xct(t){return this.Pc.Hct().xct(t)}cdt(t,s,i,e,r,n){const h=this.Pc.Hct().xct(t);if(!h)return void console.warn(`[Flowcharts] no flowchart found with name '${t}'`);if(this.bdt.has(i)){const t=this.bdt.get(i);t&&this.Hft(t)}const o=new Ay.Cct(t,i,s,h,this,e,n);return this.bdt.set(i,o),r&&this.dft(o,!0),o}Hft(t){if(t.Qft(),t.Jft())return;const s=t.tH();this.bdt.delete(s),t.Vr(),this.Sdt===t&&(this.Sdt=null)}Idt(t){t.Ff()}udt(t){return this.bdt.get(t)}qft(t){this.Tdt.push(t)}ndt(){this.Tdt.pop()}dft(t,s=!1,i=!1,e=!0){if(e){const s=t.ydt();t=s||t}t!==this.Sdt&&(this.Cdt(),this.Gdt(t,s,i))}Ndt(t){return"string"==typeof t?this.udt(t):this.Tdt.length?this.Tdt[this.Tdt.length-1]:this.Sdt}Cdt(){if(!this.Sdt)return;if(this.Sdt.Yr())return;const t=this.Sdt.D8().GH();this.Sdt.Vft(),this.qft(this.Sdt),this.Pc.HQ(Ay.tz.Xft.KF._dt,t),this.ndt(),this.Sdt.Yft()}Gdt(t,s=!1,i=!1){if(this.Sdt=t,!this.Sdt)return;if(this.Sdt.Yr())return;const e=this.Sdt.D8().GH();this.Sdt.Vft(),this.qft(this.Sdt),this.Pc.HQ(Ay.tz.Xft.KF.Edt,e),!0!==i&&"number"!=typeof i||this.Sdt.Act(i),s&&(this.Pc.HQ(Ay.tz.Xft.KF.sdt,e),this.Pc.HQ(Ay.tz.Xft.KF.idt,e),this.Pc.HQ(Ay.tz.Xft.KF.edt,e),this.Pc.HQ(Ay.tz.Xft.KF.rdt,e)),this.ndt(),this.Sdt.Yft()}i4(){return{flowchartJsonObjects:[...this.bdt.values()].map(t=>t.i4()),currentFlowchartTag:this.Sdt?this.Sdt.tH():null}}e4(t){if(!t)return;this.xdt=t;const s=new Map;for(const t of this.xdt.flowchartJsonObjects){const i=t.flowchartTag;if(this.bdt.has(i)){const e=this.bdt.get(i);e.e4(t),s.set(i,e)}else{const i=this.cdt(t.flowchartName,t.startNodeTag,t.flowchartTag,null,!1,t.pluginUID);i.e4(t),s.set(t.flowchartTag,i)}}for(const[t,i]of this.bdt.entries())s.has(t)||i.Vr();this.bdt.clear(),this.bdt=s,this.Pc.j5()?this.Pc.Mf().addEventListener("afterload",this.vdt):this.f8()}f8(){this.Pc.Mf().removeEventListener("afterload",this.vdt);const t=this.bdt.get(this.xdt.currentFlowchartTag);t&&this.dft(t,!0),this.xdt=null}}}{const Ly=self.Cs;Ly.vct=class{constructor(){this.Ddt=new Map}Vr(){for(const t of this.Ddt.values())t.Vr();this.Ddt.clear(),this.Ddt=null}Fu(t){const s=new Ly.Adt(t),i=s._c();this.Ddt.set(i,s)}Js(t){return this.Ddt.get(t)}Ict(){return!!this.Ddt.size}static Ldt(t,s,i,e){if(s)for(const r of s){const s=new i(r,e);t.push(s)}}}}{const Oy=self.Cs;Oy.Adt=class{constructor(t){this.qr=t[0],this.Odt=new Oy.Rdt(t[1],this)}Vr(){this.Odt.Vr(),this.Odt=null}kdt(){return this.Odt}Xct(t){return this.Odt.Xct(t)}Dft(t){return this.Odt.Dft(t)}Aft(){return this.Odt.Aft()}_c(){return this.qr}}}{const Ry=self.Cs;class ky{constructor(t,s){this.Odt=s,this.Vc=t[7],this.jdt=t[0],this._M=t[1],this._M?this._tt=this._M.trim().split(" ").map(t=>t.trim()):this._tt=[],this.Pdt=t[2],this.Fdt=null,this.zdt=null,this.elt=!1,"dictionary"===this.Vc&&(this.Fdt=t[3],this.zdt=t[4],this.elt=t[8]),this.Bdt=t[6],this.Udt=null,this.Wdt=null,this.Qdt=null,"reference"===this.Vc&&(this.Udt=t[8],this.Wdt=t[9],this.Qdt=t[10],this.elt=t[11]),this.Jdt=new Ry.Vdt(t[5],this)}Vr(){this.Odt=null}kdt(){return this.Odt}gft(){return this.Jdt}Oct(){return this.jdt}tH(){return this._M}mH(){return this._tt}nH(t){if(!this._tt)return!1;if(!this._tt.length)return!1;const s=Ry.Cct.nst(t);return!(!s||!s.length)&&s.every(Ry.Cct.ost,this._tt)}Ydt(){return this.Bdt}Hdt(t){this.Bdt=!!t}qdt(){if("dictionary"===this.Vc)return!0;if("reference"===this.Vc)return!1;throw new Error(`unexpected flowchart node type: ${this.Vc}`)}rft(){return this.Pdt}Zdt(){return this.Fdt}Xdt(){return this.zdt}HC(){return this.Vc}cet(){return this.elt}_ft(){return this.Udt}Eft(){return this.Wdt}ldt(){return this.Qdt}}Ry.Rdt=class{constructor(t,s){this.Ect=s,this.Kdt=[],this.$dt=new Map,this.tpt=new Map,this.spt=null,Ry.vct.Ldt(this.Kdt,t,ky,this);for(const t of this.Kdt){const s=t.Oct(),i=t.tH(),e=t.mH(),r=t.Ydt();if(this.$dt.set(s,t),i)for(const s of e)this.tpt.has(s)||this.tpt.set(s,new Set),this.tpt.get(s).add(t);r&&(this.spt=t);const n=t.gft();for(const t of n.ipt()){const s=t.Oct();this.$dt.set(s,t)}}this.spt||this.ept()}Vr(){this.Ect=null;for(const t of this.Kdt)t.Vr();Ry.wh(this.Kdt),this.Kdt=null}qct(){return this.Ect}Xct(t){return this.$dt.get(t)}Dft(t){if(!t||!t.length)return null;const s=[];for(const i of t.trim().split(" ")){let t=this.tpt.get(i.trim())??new Set;if(0===t.size)return null;s.push(t)}return[...s.reduce((t,s)=>s.size<t.size?s:t)].filter(t=>s.every(s=>s.has(t)))[0]}Aft(){return this.spt}*rpt(){for(const t of this.Kdt)yield t}ept(){let t=0;for(const s of this.rpt())s.Ydt()&&t++;if(0===t){for(const t of this.rpt())if(t.qdt()&&!t.Ydt())return void t.Hdt(!0)}else{if(1===t)return;if(t>1){let t=!0;for(const s of this.rpt())s.qdt()&&(s.Ydt()&&t?t=!1:s.Ydt()&&!t&&s.Hdt(!1))}}for(const t of this.rpt())if(t.qdt()&&t.Ydt())return void(this.spt=t)}}}{const jy=self.Cs;class Py{constructor(t,s){this.Jdt=s,this.jdt=t[0],this.qr=t[1],this.sht=t[2],this.npt=t[3],this.elt=t[4],this.hpt=t[5]}Vr(){this.Jdt=null}gft(){return this.Jdt}Oct(){return this.jdt}_c(){return this.qr}Grt(){return this.sht}Gft(){return this.npt}cet(){return this.elt}opt(){return this.hpt}}jy.Vdt=class{constructor(t,s){this.apt=s,this.lpt=[],this.upt=new Map,jy.vct.Ldt(this.lpt,t,Py,this),this.cpt=this.lpt.filter(t=>t.cet());for(const t of this.cpt)this.upt.set(t._c(),t)}Vr(){this.apt=null;for(const t of this.lpt)t.Vr();jy.wh(this.lpt),this.lpt=null,jy.wh(this.cpt),this.cpt=null}fpt(){return this.apt}yft(){return this.cpt.length}Sft(){return this.cpt}pdt(t){return this.upt.get(t)}bft(){for(const t of this.cpt)if(t.opt())return t}*ipt(){for(const t of this.cpt)yield t}}}{const Fy=self.Cs;Fy.dpt=class extends Fy.Wr{constructor(t){super(),this.ppt=t,this.mpt=[],this.mpt.push(Fy.Jr(Fy.ypt,this)),this.NM=0,this.gpt=this.mpt[0]}Vr(){for(const t of this.mpt)t.Vr();Fy.wh(this.mpt),this.gpt=null,this.ppt=null}fQ(){return this.ppt}eU(){return this.gpt}Mpt(){return this.mpt[this.NM-1]}_u(){this.eU()._u()}wpt(){const t=this.mpt,s=++this.NM;if(s===t.length){const s=Fy.Jr(Fy.ypt,this);t.push(s),this.gpt=s}else{const i=t[s];i.Ff(),this.gpt=i}}bpt(){const t=this.mpt,s=++this.NM;s===t.length&&t.push(Fy.Jr(Fy.ypt,this));const i=t[s];i.nd(t[s-1]),this.gpt=i}fZ(){this.gpt=this.mpt[--this.NM]}Spt(t){const s=this.mpt;for(let i=0,e=s.length;i<e;++i)s[i].Spt(t)}}}{const zy=self.Cs;zy.ypt=class extends zy.Wr{constructor(t){super(),this.mpt=t,this.ppt=this.mpt.fQ(),this.Tpt=this.ppt.oz().bP(),this.vpt=!0,this.f$=[],this.xpt=[]}Vr(){this.Ipt(),this.mpt=null,this.ppt=null,this.Tpt=null}Ipt(){zy.wh(this.f$),zy.wh(this.xpt)}fQ(){return this.ppt}Cpt(){return this.vpt}Gpt(){return this.vpt?!!this.ppt.hU():!!this.f$.length}iU(){return this.vpt?this.ppt.iU():this.f$}Npt(){return!!this.xpt.length}_pt(){return this.xpt}Ept(){const t=this.iU();return t.length?t:this.xpt}Ff(){this.vpt=!0,zy.wh(this.xpt)}_u(){this.vpt=!0}nd(t){t.Cpt()?this.Ff():(this.vpt=!1,zy.xh(this.f$,t.f$),zy.wh(this.xpt))}Dpt(t){this.f$.push(t)}Apt(t){this.xpt.push(t)}Lpt(t){this.vpt=!!t}Opt(){return this.f$}Rpt(){return this.xpt}kpt(t){this.vpt=!1,zy.wh(this.f$),this.f$.push(t)}jpt(t){this.vpt=!1,zy.xh(this.f$,t)}Ppt(t){this.vpt=!1,zy.wh(this.f$);for(const s of t)this.f$.push(s)}Fpt(t,s){for(const i of s)t.has(i)||this.xpt.push(i)}zpt(t){for(const s of t)this.f$.push(s);zy._h(this.xpt,t)}Bpt(){zy.wh(this.xpt)}Upt(t){if(t)if(this.Tpt.tZ().dP().Wpt()){this.Cpt()&&(zy.wh(this.f$),zy.xh(this.xpt,t.fQ().iU()),this.vpt=!1);const s=this.xpt.indexOf(t);-1!==s&&(this.f$.push(this.xpt[s]),this.xpt.splice(s,1))}else this.kpt(t)}Spt(t){zy._h(this.f$,t),zy._h(this.xpt,t)}}}{const By=self.Cs;By.Qpt=class extends By.Wr{constructor(t){super(),this.Jpt=t,this.Pc=this.Jpt.oz(),this.mpt=[],this.mpt.push(By.Jr(By.Vpt,this,null)),this.NM=0,this.Ypt=[]}Vr(){for(const t of this.mpt)t.Vr();By.wh(this.mpt),By.wh(this.Ypt),this.Jpt=null,this.Pc=null}oP(){return this.Jpt}oz(){return this.Pc}tZ(){return this.mpt[this.NM]}Hpt(){return this.mpt}qpt(){return this.NM}sZ(t){const s=this.mpt,i=++this.NM;if(i===s.length){const i=By.Jr(By.Vpt,this,t);return s.push(i),i}{const e=s[i];return e.Ff(t),e}}fZ(){--this.NM}Zpt(t){this.Ypt.push(t)}Xpt(){this.Ypt.pop()}wP(){const t=this.Ypt;return 0===t.length?null:t.at(-1)}}}{const Uy=self.Cs;Uy.Vpt=class extends Uy.Wr{constructor(t,s){super(),this.mpt=t,this.Pc=this.mpt.oz(),this.Kpt=s,this.$pt=0,this.tmt=0,this.smt=!1,this.imt=!1,this.emt=null,this.rmt=0,this.nmt=0,this.hmt=null}Vr(){this.Ff(null),this.mpt=null,this.Pc=null}Ff(t){this.Kpt=t,this.$pt=0,this.tmt=0,this.smt=!1,this.imt=!1,this.hmt=null}omt(t,s){this.Kpt=t,this.$pt=0,this.tmt=s}amt(){this.$pt=0,this.tmt=0}dP(){return this.Kpt}lmt(t){this.Kpt=t}umt(){return this.$pt}cmt(t){this.$pt=t}fmt(){return this.tmt}dmt(t){this.tmt=t}pmt(t){this.smt=!!t}mmt(){return this.smt}ymt(t){this.imt=!!t}gmt(){return this.imt}Mmt(t){this.emt=t}wmt(){return this.emt}bmt(t,s){this.rmt=t,this.nmt=s}SP(){return this.rmt}TP(t){this.nmt=t}Smt(){return this.nmt}Tmt(){const t=this.Kpt;return!!t.vmt()||this.$pt<t.xmt()-1&&!!t.$q().length}Imt(t){this.hmt=t}Cmt(){return this.hmt}}}{const Wy=self.Cs;Wy.Gmt=class extends Wy.Wr{constructor(t){super(),this.Jpt=t,this.Pc=this.Jpt.oz(),this.mpt=[],this.NM=-1,this.gpt=null,this.Nmt=[]}Vr(){Wy.wh(this.mpt),this.Jpt=null,this.Pc=null}_mt(t){this.Nmt=t;const s=this.Nmt.slice(0);this.mpt.push(s),this.NM=0,this.gpt=s}oP(){return this.Jpt}oz(){return this.Pc}Emt(){return this.gpt}sZ(){const t=++this.NM,s=this.mpt;t===s.length?s.push(this.Nmt.slice(0)):Wy.xh(s[t],this.Nmt),this.gpt=s[t]}fZ(){this.gpt=this.mpt[--this.NM]}}}{const Qy=self.Cs;Qy.Dmt=class extends Qy.Wr{constructor(t){super(),this.Jpt=t,this.Pc=this.Jpt.oz(),this.mpt=[],this.NM=-1}Vr(){Qy.wh(this.mpt),this.Jpt=null,this.Pc=null}oP(){return this.Jpt}oz(){return this.Pc}Amt(){return this.NM>=0}Emt(){return this.mpt[this.NM]}sZ(){if(++this.NM,this.NM===this.mpt.length){const t=Qy.Jr(Qy.Lmt,this);return this.mpt.push(t),t}{const t=this.mpt[this.NM];return t.Ff(),t}}fZ(){--this.NM}Omt(t){const s=this.mpt;for(let i=this.NM;i>=0;--i){const e=s[i];if(e._c()===t)return e}return null}Rmt(){return this.mpt.slice(0,this.NM+1)}}}{const Jy=self.Cs;Jy.Lmt=class extends Jy.Wr{constructor(t){super(),this.kmt=t,this.qr="",this.NM=0,this.jmt=!1,this.Pmt=NaN}Ff(){this.qr="",this.NM=0,this.jmt=!1,this.Pmt=NaN}eZ(t){this.qr=t}_c(){return this.qr}lZ(t){this.NM=t}Tj(){return this.NM}eH(){this.jmt=!0}cZ(){return this.jmt}Fmt(t){this.Pmt=t}zmt(){return this.Pmt}}}{const Vy=self.Cs;Vy.Bmt=class extends Vy.Wr{constructor(){super(),this.mpt=[],this.NM=-1}Vr(){Vy.wh(this.mpt)}Emt(){return this.mpt[this.NM]}sZ(){if(++this.NM,this.NM===this.mpt.length){const t=[];return this.mpt.push(t),t}return this.mpt[this.NM]}fZ(){--this.NM}}}{let Yy=function(t,s){return t.Tj()-s.Tj()},Hy=function(t,s){for(let i=0,e=t.length;i<e;++i)if(t[i]!==s[i])return!1;return!0};0;const qy=self.Cs;self.assert;qy.Umt=class extends qy.Wr{constructor(t){super(),this.Pc=t,this.Wmt=[],this.Qmt=new Map,this.Jmt=[],this.Vmt=new Map,this.Ymt=new Map,this.Hmt=new Map,this.qmt=new Map,this.Zmt=new Map,this.Xmt=new Map,this.Kmt=0,this.$mt=[],this.tyt=[],this.syt=[],this.iyt=new Map,this.eyt=new Map,this.Tpt=qy.Jr(qy.Qpt,this),this.ryt=qy.Jr(qy.Gmt,this),this.kmt=qy.Jr(qy.Dmt,this),this.nyt=[],this.hyt=[],this.oyt=[],this.ayt=0,this.lyt=0,this.uyt=0,this.cyt=[],this.fyt=[],this.dyt=[],this.pyt=new Map,this.myt=new Map,self.c3_callFunction=(t,s)=>this.yyt(t,s)}Vr(){this.i6(),this.Tpt.Vr(),this.Tpt=null,this.ryt.Vr(),this.ryt=null,qy.wh(this.hyt),qy.wh(this.oyt),this.Pc=null,qy.wh(this.Wmt),this.Qmt.clear()}QI(t){const s=qy.Jr(qy.gyt,this,t);this.Wmt.push(s),this.Qmt.set(s._c().toLowerCase(),s)}Myt(t){this.nyt.push(t)}wyt(){for(const t of this.eyt.values())t.byt();for(const t of this.iyt.values())t.wyt();for(const t of this.eyt.values())t.wyt();for(const t of this.Wmt)t.wyt();for(const t of this.Wmt)t.C5();for(const t of this.nyt)t.wyt(!1);qy.wh(this.nyt),this.ryt._mt(this.syt)}oz(){return this.Pc}I5(t){return this.Qmt.get(t.toLowerCase())||null}Syt(t){this.Jmt.push(t),this.Vmt.set(t.Tyt(),t)}vyt(t){this.Ymt.set(t.G1(),t)}xyt(t){this.Hmt.set(t.G1(),t)}Iyt(t){this.qmt.set(t.G1(),t)}Cyt(t){switch(t.Gyt()){case 0:this.iyt.set(t.Nyt().toLowerCase(),t);break;case 1:this.eyt.set(t.Nyt().toLowerCase(),t)}}_yt(t){this.Xmt.set(t.G1(),t),t.z$()?this.$mt.push(t):this.tyt.push(t)}Eyt(t){t.length>=2&&t.sort(Yy);let s=this.Zmt.get(t.length);s||(s=[],this.Zmt.set(t.length,s));for(let i=0,e=s.length;i<e;++i){const e=s[i];if(Hy(t,e))return e}return s.push(t),t}Dyt(t){return this.syt.push(t.Ayt()),this.Kmt++}bP(){return this.Tpt}Lyt(){return this.bP().tZ()}dP(){return this.Lyt().dP()}Oyt(){const t=this.Lyt();return t.dP().Ryt(t.umt())}kyt(){const t=this.Lyt();return t.dP().jyt(t.fmt())}Pyt(){return this.ryt}iZ(){return this.kmt}Fyt(t){const s=[];for(t=t.zyt();t;)qy.Lr(s,t.Byt()),t=t.zyt();return s}Uyt(t){const s={};for(const i of this.Fyt(t))s[i.Wyt()]=i.Qyt();return Object.create(Object.prototype,s)}Jyt(t){return this.Xmt.get(t)||null}Vyt(t){return this.Ymt.get(t)||null}Yyt(t){return this.Hmt.get(t)||null}Hyt(t){return this.qmt.get(t)||null}aP(t){return this.iyt.get(t.toLowerCase())||null}qyt(t,s){let i=this.eyt.get((t._c()+"."+s).toLowerCase());if(i)return i;if(!t.w1())for(const e of t.yU())if(i=this.eyt.get((e._c()+"."+s).toLowerCase()),i)return i;return null}Zyt(){return this.$mt}Xyt(){return this.tyt}Kyt(t){for(const t of this.$mt)t.$yt();if(t)for(const t of this.tyt)t.Vx()&&t.$yt()}tgt(t){return this.Vmt.get(t.toLowerCase())||null}sgt(t){const s=this.Ymt.get(t);return s&&s.igt()?s:null}egt(){return this.Jmt}rgt(){for(const t of this.Jmt)t.ngt()}hgt(){for(const t of this.Wmt)t.ogt()}agt(t){this.hgt(),this.ayt++;for(const s of t.L6()){const t=s.K4();t&&(this.Pc.lgt(s),t.p_(),this.Pc.ugt())}this.ayt--}async cgt(t){this.hgt(),this.ayt++;for(const s of this.fgt(t))await this.Pc.dgt(s);this.ayt--}*fgt(t){for(const s of t.L6()){const t=s.K4();t&&(this.Pc.lgt(s),yield*t.pgt(),this.Pc.ugt())}}mgt(t,s,i,e){let r=!1;if(!t.uF())return this.ygt(s,i,e);this.lyt++;for(const n of t.L6()){const t=n.K4();if(!t)continue;this.Pc.lgt(n);for(const n of t.ggt()){const t=n.mgt(s,i,e);r=r||t}const h=t.mgt(s,i,e);r=r||h,this.Pc.ugt()}return this.lyt--,r}*Mgt(t,s,i,e){let r=!1;if(!t.uF())return this.ygt(s,i,e);this.lyt++;for(const n of t.L6()){const t=n.K4();if(!t)continue;this.Pc.lgt(n);for(const n of t.ggt()){const t=yield*n.Mgt(s,i,e);r=r||t}const h=yield*t.Mgt(s,i,e);r=r||h,this.Pc.ugt()}return this.lyt--,r}ygt(t,s,i){return this.hyt.push([t,s,i]),!1}wgt(t,s,i){let e=null;const r=new Promise(t=>e=t);return this.oyt.push([t,s,i,e]),r}*bgt(){if(this.Pc.Sgt())throw new Error("should not be in breakpoint");const t=this.Pc.dF();for(;this.oyt.length;){const[s,i,e,r]=this.oyt.shift();r(yield*this.Mgt(t,s,i,e))}}async Tgt(){for(const t of this.bgt())await this.Pc.dgt(t)}vgt(t,s,i,e){let r=!1;const n=t.uF(),h=n.K4();if(!h)return;this.lyt++,this.Pc.lgt(n);const o=h.ggt();for(let t=0,n=o.length;t<n;++t){const n=o[t].vgt(s,i,e);r=r||n}const a=h.vgt(s,i,e);return r=r||a,this.Pc.ugt(),this.lyt--,r}*xgt(t,s,i,e){let r=!1;const n=t.uF(),h=n.K4();if(!h)return;this.lyt++,this.Pc.lgt(n);const o=h.ggt();for(let t=0,n=o.length;t<n;++t){const n=yield*o[t].xgt(s,i,e);r=r||n}const a=yield*h.xgt(s,i,e);return r=r||a,this.Pc.ugt(),this.lyt--,r}Igt(){return this.lyt}Cgt(){return this.Igt()>0}Ggt(){return++this.lyt}Ngt(){--this.lyt}_gt(){return this.ayt>0}fU(){return this._gt()||this.Cgt()}V5(t){for(const[s,i,e]of this.hyt)this.mgt(t,s,i,e);qy.wh(this.hyt)}uU(t){t?this.uyt++:this.uyt--}wQ(){return this.uyt>0}Egt(t){for(let s=0,i=t.length;s<i;++s)t[s].Dgt()._u()}Agt(t){for(let s=0,i=t.length;s<i;++s)t[s].Dgt().wpt()}hZ(t){for(let s=0,i=t.length;s<i;++s)t[s].Dgt().bpt()}aZ(t){for(let s=0,i=t.length;s<i;++s)t[s].Dgt().fZ()}pP(t){const s=new Set,i=this.Tpt.Hpt(),e=this.Tpt.qpt();for(let r=0;r<=e;++r){const e=i[r].Cmt();if(e)for(const i of e)t&&t.has(i)||s.add(i)}return s}Lgt(t){const s=new Set([...t]),i=this.pP(s);if(i.size>0){for(const t of i)t.Dgt().wpt();return[...i]}return null}Ogt(){const t=qy.Jr(qy.Rgt,this);return this.cyt.push(t),t}kgt(){return this.cyt}jgt(){if(!this.cyt.length)return;const t=this.Lyt();let s=!1;this.ayt++;for(let i=0,e=this.cyt.length;i<e;++i){const e=this.cyt[i];e.Pgt()&&e.Fgt(t),e.zgt()&&(s=!0)}s&&(this.Bgt(),t.Ff(null)),this.ayt--}async Ugt(){if(!this.cyt.length)return;const t=this.Lyt();let s=!1;this.ayt++;for(let i=0,e=this.cyt.length;i<e;++i){const e=this.cyt[i];e.Pgt()&&await e.Wgt(t),e.zgt()&&(s=!0)}s&&(this.Bgt(),t.Ff(null)),this.ayt--}Bgt(){const t=qy.Nh(this.cyt,t=>t.zgt());for(const s of t)s.Vr()}i6(){for(const t of this.cyt)t.Vr();qy.wh(this.cyt)}Qgt(t){for(const s of this.cyt)s.Spt(t);for(const s of t){const t=this.myt.get(s);if(this.myt.delete(s),t)for(const{resolve:s}of t.Jgt.values())s(!0)}}Vgt(t){this.fyt.push({promise:t,Ygt:this.Igt()})}Hgt(){qy.wh(this.fyt)}qgt(){const t=this.Igt(),s=Promise.all(this.fyt.filter(s=>s.Ygt===t).map(t=>t.promise));return this.fyt=this.fyt.filter(s=>s.Ygt<t),s}vP(t){const s=t.toLowerCase();this.dyt.push(s),this.Pc.HQ(qy.tz.$F.KF.Zgt,null),this.dyt.pop();for(const t of this.Pc.oP().kgt())t.Xgt()&&t.Kgt()===s&&t.$gt();const i=this.pyt.get(s);i&&(i.resolve(),this.pyt.delete(s))}IP(t){const s=t.toLowerCase(),i=this.pyt.get(s);if(i)return i.promise;{let t=null;const i=new Promise(s=>t=s);return this.pyt.set(s,{promise:i,resolve:t}),i}}tMt(){if(0===this.dyt.length)throw new Error("not in a signal");return this.dyt.at(-1)}sMt(t){let s=this.myt.get(t);return s||(s={iMt:[],Jgt:new Map},this.myt.set(t,s)),s}PQ(t,s){const i=this.sMt(t),e=s.toLowerCase();i.iMt.push(e),this.Pc.HQ(t.JB().rMt().KF.eMt,t),i.iMt.pop();for(const s of this.Pc.oP().kgt())s.nMt()&&s.Kgt()===e&&s.hMt(t);const r=i.Jgt.get(e);r&&(r.resolve(!1),i.Jgt.delete(e)),0===i.iMt.length&&0===i.Jgt.size&&this.myt.delete(t)}FQ(t,s){const i=this.sMt(t),e=s.toLowerCase(),r=i.Jgt.get(e);if(r)return r.promise;{let t=null;const s=new Promise(s=>t=s);return i.Jgt.set(e,{promise:s,resolve:t}),s}}oMt(t){const s=this.sMt(t);if(!s||0===s.iMt.length)throw new Error("not in a signal");return s.iMt.at(-1)}i4(){return{groups:this.aMt(),cnds:this.lMt(),acts:this.uMt(),vars:this.cMt(),waits:this.fMt()}}e4(t){this.dMt(t.groups),this.pMt(t.cnds),this.mMt(t.acts),this.yMt(t.vars),this.gMt(t.waits)}aMt(){const t={};for(const s of this.egt())t[s.G1().toString()]=s.MMt();return t}dMt(t){for(const[s,i]of Object.entries(t)){const t=parseInt(s,10),e=this.sgt(t);e&&e.wMt(i)}}lMt(){const t={};for(const[s,i]of this.Hmt){const e=i.i4();e&&(t[s.toString()]=e)}return t}pMt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[t,i]of this.Hmt)i.e4(s.get(t)||null)}uMt(){const t={};for(const[s,i]of this.qmt){const e=i.i4();e&&(t[s.toString()]=e)}return t}mMt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[t,i]of this.qmt)i.e4(s.get(t)||null)}cMt(){const t={};for(const[s,i]of this.Xmt)i.bMt()||!i.z$()&&!i.Vx()||(t[s.toString()]=i.Grt());return t}yMt(t){for(const[s,i]of Object.entries(t)){const t=parseInt(s,10),e=this.Jyt(t);e&&e.lnt(i)}}fMt(){return this.cyt.filter(t=>!t.SMt()).map(t=>t.i4())}gMt(t){this.i6();for(const s of t){const t=qy.Rgt.TMt(this,s);t&&this.cyt.push(t)}}vMt(){return[...this.Pc.dF().L6()].map(t=>t.K4()).filter(t=>t).map(t=>t.xMt())}IMt(t){for(;t;){const s=t.zyt();if(s instanceof qy.CMt)return s;t=s}return null}yyt(t,s){Array.isArray(s)||(s=[]);const i=this.aP(t.toLowerCase());if(!i)return null;if(!i.Cu())return i.lP();const e=i.GMt();if(s.length<e.length){s=s.slice(0);do{s.push(e[s.length].Ayt())}while(s.length<e.length)}const r=i.cP();return r.mP(r.fP(),!1,i.gP(),i.lP(),...s)}}}{const Zy=self.Cs;Zy.gyt=class extends Zy.Wr{constructor(t,s){super(),this.Jpt=t,this.Pc=t.oz(),this.qr=s[0],this.NMt=[],this._Mt=new Map,this.EMt=new Map,this.DMt=new Map,this.AMt=!1,this.LMt=[],this.OMt=[],this.RMt=new Set;for(const t of s[1])this.kMt(t,null,this.NMt);this.jMt=this.Pc.iJ()?{type:"sheet",name:this.qr,PMt:0,children:[]}:null}Vr(){this.Jpt=null,this.Pc=null}kMt(t,s,i){switch(t[0]){case 0:case 3:this.FMt(t,s,i);break;case 1:this.zMt(t,s,i);break;case 2:this.BMt(t,s,i);break;case 4:this.UMt(t,s);break;case 5:this.WMt(t,s,i);break;case 6:this.QMt(t,s);break;default:throw new Error("invalid event type")}}FMt(t,s,i){const e=Zy.JMt.QI(this,s,t);if(e.Wpt()){i.push(e);const t=e.VMt();for(let s=0,i=t.length;s<i;++s)t[s].YMt()&&this.HMt(e,s)}else e.YMt()?this.HMt(e,0):i.push(e)}UMt(t,s){const i=Zy.CMt.qMt(this,s,t);this.Jpt.Cyt(i)}QMt(t,s){const i=Zy.CMt.ZMt(this,s,t);this.Jpt.Cyt(i)}zMt(t,s,i){const e=Zy.XMt.QI(this,s,t);i.push(e)}BMt(t,s,i){const e=Zy.KMt.QI(this,s,t);i.push(e)}WMt(t,s,i){const e=Zy.$Mt.QI(this,s,t);i.push(e)}HMt(t,s){t.Wpt()||this.Jpt.Myt(t);const i=t.Ryt(s),e=i.twt(),r=i.fQ();if(i.swt()){let n=this.EMt.get(r);n||(n=new Map,this.EMt.set(r,n));const h=i.iwt().toLowerCase();let o=n.get(e);o||(o=new Map,n.set(e,o));let a=o.get(h);a||(a=[],o.set(h,a)),a.push([t,s])}else{let n=this._Mt.get(r);n||(n={ewt:new Map,rwt:new Map},this._Mt.set(r,n));const h=i.cY();let o;h?(o=n.rwt.get(h),o||(o=new Map,n.rwt.set(h,o))):o=n.ewt;let a=o.get(e);a||(a=[],o.set(e,a)),a.push([t,s])}}wyt(){const t=this.NMt;for(let s=0,i=t.length;s<i;++s){const e=s<i-1&&t[s+1]instanceof Zy.JMt&&t[s+1].nwt();t[s].wyt(e)}}hwt(t){this.LMt.push(t)}C5(){Zy.wh(this.OMt),this.owt(this),this.RMt.clear()}owt(t){const s=t.OMt,i=t.RMt;for(const e of this.LMt){const r=e.awt();e.lwt()&&t!==r&&!i.has(r)&&(i.add(r),r.owt(t),s.push(r))}}ggt(){return this.OMt}oP(){return this.Jpt}oz(){return this.Pc}_c(){return this.qr}uwt(t,s){this.DMt.set(s,t)}cwt(t){return this.DMt.get(t)||null}ogt(){this.AMt=!1}p_(){if(this.AMt)return;const t=this.Pc,s=t.fwt(),i=s?performance.now():0;this.AMt=!0;const e=this.oP(),r=e.Lyt();for(const s of this.NMt)s.p_(r),e.Egt(s.$q()),e.Hgt(),t.pU();r.Ff(null),s&&(this.jMt.PMt+=performance.now()-i)}*pgt(){if(this.AMt)return;this.AMt=!0;const t=this.Pc,s=this.oP(),i=s.Lyt();for(const e of this.NMt)yield*e.pgt(i),s.Egt(e.$q()),s.Hgt(),t.pU();i.Ff(null)}mgt(t,s,i){if(!s)return this.dwt(t,s,null,null);{const e=s.fQ();let r=!1,n=this.dwt(t,s,e,i);r=r||n;for(const h of e.yU())n=this.dwt(t,s,h,i),r=r||n}}dwt(t,s,i,e){const r=this._Mt.get(i);if(!r)return!1;const n=e?r.rwt.get(e):r.ewt;if(!n)return!1;const h=n.get(t);if(!h)return!1;let o=!1;for(const[t,i]of h){const e=this.pwt(s,t,i);o=o||e}return o}*Mgt(t,s,i){if(!s)return yield*this.mwt(t,s,null,null);{const e=s.fQ();let r=!1,n=yield*this.mwt(t,s,e,i);r=r||n;for(const h of e.yU())n=yield*this.mwt(t,s,h,i),r=r||n}}*mwt(t,s,i,e){const r=this._Mt.get(i);if(!r)return!1;const n=e?r.rwt.get(e):r.ewt;if(!n)return!1;const h=n.get(t);if(!h)return!1;let o=!1;for(const[t,i]of h){let e;e=t.ywt()?this.pwt(s,t,i):yield*this.gwt(s,t,i),o=o||e}return o}vgt(t,s,i){const e=s.fQ(),r=this.EMt.get(e);if(!r)return!1;const n=r.get(t);if(!n)return!1;const h=n.get(i);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],i=this.pwt(null,s[0],s[1]);o=o||i}return o}*xgt(t,s,i){const e=s.fQ(),r=this.EMt.get(e);if(!r)return!1;const n=r.get(t);if(!n)return!1;const h=n.get(i);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],i=s[0],e=s[1];let r;r=i.ywt()?this.pwt(null,i,e):yield*this.gwt(null,i,e),o=o||r}return o}pwt(t,s,i){const e=this.Pc,r=this.Jpt,n=r.dP(),h=r.bP(),o=r.Igt();let a=!1;n&&r.Agt(n.fP()),r.Agt(s.fP());const l=o>1;l&&r.Pyt().sZ();const u=h.sZ(s);t&&(s.VMt()[i].fQ().eU().kpt(t),t.vQ()&&t.Mwt());let c=!0;if(s.nV()){const t=s.wwt();for(let s=0,i=t.length;s<i;++s)if(!t[s].bwt(u)){c=!1;break}}return c&&(s.Wpt()?s.Swt(u,i):s.p_(u),a=u.mmt()),h.fZ(),l&&r.Pyt().fZ(),r.aZ(s.fP()),n&&r.aZ(n.fP()),n||1!==o||(r.Hgt(),r.wQ()||e.pU()),a}*gwt(t,s,i){const e=this.Pc,r=this.Jpt,n=r.dP(),h=r.bP(),o=r.Igt();let a=!1;n&&r.Agt(n.fP()),r.Agt(s.fP());const l=o>1;l&&r.Pyt().sZ();const u=h.sZ(s);t&&(s.VMt()[i].fQ().eU().kpt(t),t.vQ()&&t.Mwt());let c=!0;if(s.nV()){const t=s.wwt();for(let s=0,i=t.length;s<i;++s)if(!(yield*t[s].Twt(u))){c=!1;break}}return c&&(s.Wpt()?yield*s.vwt(u,i):yield*s.pgt(u),a=u.mmt()),h.fZ(),l&&r.Pyt().fZ(),r.aZ(s.fP()),n&&r.aZ(n.fP()),n||1!==o||(r.Hgt(),r.wQ()||e.pU()),a}xMt(){return this.jMt}}}{let Xy=function(t,s){return!0};0;const Ky=self.Cs,$y=[];function*tg(t,s){return!0}Ky.JMt=class extends Ky.Wr{constructor(t,s,i){super(),this.g4=t,this.Pc=t.oz(),this.xwt=s,this.Iwt=null,this.Tpt=this.Pc.oP().bP(),this.Cwt=[],this.Gwt=[],this.Nwt=!1,this._wt=!1,this.Ewt=!1,this.Dwt=!1,this.Awt=!!i[2],this.Lwt=!1,this.Owt=null,this.Rwt=[],this.nht=[],this.kwt=[],this.jwt=Xy,this.Pwt=tg,this.Fwt=!1,this.zwt=!1,this.Bwt="",this.Uwt=!1,this.Wwt=null,this.jMt=null,this.V$=i[4],this.Qwt=i[5],this.g4.uwt(this,this.Qwt),this.Jwt=this.Pc.iJ()?{Vwt:i[3][0],Ywt:i[3][1],Hwt:!1,qwt:!1,Zwt:!1,Xwt:!1}:null,this.oP().vyt(this),3===i[0]&&this.Kwt(i[1]);let e=0;for(const t of i[6]){const s=Ky.$wt.QI(this,t,e++);this.Rwt.push(s),this.tbt(s.fQ())}e=0;for(const t of i[7]){const s=Ky.sbt.QI(this,t,e++);this.nht.push(s)}if(9===i.length){const t=i[8];for(const s of t)this.g4.kMt(s,this,this.kwt)}this.Rwt.length&&(this.Lwt=null===this.Rwt[0].fQ()&&this.Rwt[0].twt()===Ky.tz.$F.KF.ibt),0===this.Rwt.length&&(this.Rwt=$y),0===this.nht.length&&(this.nht=$y),0===this.kwt.length&&(this.kwt=$y)}static QI(t,s,i){return Ky.Jr(Ky.JMt,t,s,i)}Kwt(t){this.Fwt=!0,this.zwt=!!t[0],this.Uwt=this.zwt,this.Bwt=t[1].toLowerCase(),this.Wwt=[],this.oP().Syt(this),this.Pc.iJ()&&(this.jMt={type:"group",name:t[1],PMt:0,children:[]})}ebt(t){this.Wwt.push(t)}rbt(t,s){for(const i of t.f5().vU())s.includes(i)||s.push(i)}nbt(t,s){if(t)if(s.includes(t)||s.push(t),t.w1())for(const i of t.TU())i.vQ()&&this.rbt(i,s);else t.vQ()&&this.rbt(t,s)}tbt(t){this.nbt(t,this.Cwt)}hbt(t){this.nbt(t,this.Gwt)}obt(){this.Cwt=this.Pc.M1()}wyt(t){this.Dwt=!!t,this.abt(),this.lbt();for(const t of this.Rwt)t.wyt();if(this.nht.length>0){let t=!1;for(const s of this.nht)s.wyt(),s.ubt()&&(t=!0);t?(this.jwt=this.cbt,this.Pwt=this.fbt):(this.jwt=this.dbt,this.Pwt=this.pbt)}const s=this.kwt;for(let t=0,i=s.length;t<i;++t){const e=t<i-1&&s[t+1]instanceof Ky.JMt&&s[t+1].nwt();s[t].wyt(e)}this.Jwt&&this.mbt(),this.jMt&&this.ybt().xMt().children.push(this.jMt)}xMt(){return this.jMt}ybt(){let t=this.nV();for(;t;){if(t.igt())return t;t=t.nV()}return this.g4}mbt(){const t=this.Jwt;t.Hwt=this.Rwt.every(t=>t.ywt()),t.qwt=this.nht.every(t=>t.ywt()),t.Zwt=this.kwt.every(t=>t.ywt()),t.Xwt=t.Hwt&&t.qwt&&t.Zwt}gbt(){let t=this;do{t.mbt(),t=t.nV()}while(t)}abt(){if(!this.igt())return;let t=this.nV();for(this.Ewt=!0;t;){if(!t.igt()){this.Ewt=!1;break}t=t.nV()}}Mbt(){const t=this.Pc.M1();if(this.Cwt===t)this.Gwt=t;else{this.Gwt=Ky.Ah(this.Cwt);let t=this.nV();for(;t;){for(const s of t.Cwt)this.hbt(s);t=t.nV()}const s=this.oP();this.Cwt=s.Eyt(this.Cwt),this.Gwt=s.Eyt(this.Gwt)}}lbt(){if(!this.wbt())return;this.Owt=[];let t=this.nV();for(;t;)this.Owt.push(t),t=t.nV();this.Owt.reverse()}bbt(){this._wt=!0,this.xwt&&this.xwt.bbt()}vmt(){return this._wt}$q(){return this.Cwt}fP(){return this.Nwt||(this.Nwt=!0,this.Mbt()),this.Gwt}Sbt(t){return this.Cwt.includes(t)}wwt(){return this.Owt}K4(){return this.g4}oP(){return this.g4.oP()}oz(){return this.Pc}nV(){return this.xwt}Tbt(t){this.Iwt=t}zyt(){return this.Iwt||this.xwt}vbt(){return this.Qwt}xbt(){return this.Jwt&&this.Jwt.Ywt}Ibt(){return this.xbt()&&this.Jwt.Vwt}Cbt(t){this.Jwt.Vwt=!!t,this.gbt()}igt(){return this.Fwt}Gbt(){return this.Ewt}nwt(){return this.Lwt}Nbt(){return this.Dwt}Tyt(){return this.Bwt}MMt(){return this.Uwt}ngt(){this.wMt(this.zwt)}wMt(t){if(t=!!t,!this.Fwt)throw new Error("not a group");if(this.Uwt!==t){this.Uwt=t;for(const t of this.Wwt)t._bt();if(this.Wwt.length){const t=this.Pc.AF().K4();t&&t.C5()}}}G1(){return this.V$}Wpt(){return this.Awt}YMt(){return this.Rwt.length&&this.Rwt[0].YMt()}Ebt(){return this.Iwt&&this.Iwt instanceof Ky.CMt}wbt(){return this.Ebt()||this.Rwt.some(t=>t.YMt())}VMt(){return this.Rwt}xmt(){return this.Rwt.length}Ryt(t){if((t=Math.floor(t))<0||t>=this.Rwt.length)throw new RangeError("invalid condition index");return this.Rwt[t]}Dbt(t){return this.Ryt(t)}Abt(t){let s=t.Tj();if(0===s)return!0;--s;const i=t.Lbt()?t.Obt():t.fQ();for(;s>=0;--s){const t=this.Rwt[s];if(i===t.fQ()||t.Lbt()&&t.Obt()===i)return!1}return!0}Rbt(){return this.nht}kbt(){return this.nht.length}jyt(t){if((t=Math.floor(t))<0||t>=this.nht.length)throw new RangeError("invalid action index");return this.nht[t]}jbt(t){t=Math.floor(t);const s=this.nht.find(s=>s.Pbt()===t);if(!s)throw new RangeError("invalid action debug index");return s}Fbt(t){return(t=Math.floor(t))>=0&&t<this.nht.length}zbt(){return this.kwt}Byt(){return this.kwt.filter(t=>t instanceof Ky.XMt)}bwt(t){t.lmt(this);const s=this.Rwt;let i=0===s.length;for(let e=0,r=s.length;e<r;++e){const r=s[e];if(t.cmt(e),r.IY())throw new Error("trigger cannot be used as sub-event to a loop");if(r.p_())i=!0;else if(!this.Awt)return!1}return!this.Awt||i}Swt(t,s){t.lmt(this),t.cmt(s),this.Rwt[s].p_()&&(this.jwt(t,0)&&this.Bbt(t),t.pmt(!0))}*Twt(t){t.lmt(this);const s=this.Rwt;let i=0===s.length;for(let e=0,r=s.length;e<r;++e){const r=s[e];if(t.cmt(e),r.IY())throw new Error("trigger cannot be used as sub-event to a loop");let n;if(n=r.ywt()?r.p_():yield*r.pgt(),n)i=!0;else if(!this.Awt)return!1}return!this.Awt||i}*vwt(t,s){t.lmt(this),t.cmt(s);const i=this.Rwt[s];let e;if(e=i.ywt()?i.p_():yield*i.pgt(),e){let s;s=this.Ubt()?this.jwt(t,0):yield*this.Pwt(t,0),s&&(this.Wbt()?this.Bbt():yield*this.Qbt()),t.pmt(!0)}}p_(t){t.lmt(this),this.Lwt||t.ymt(!1),this.Awt?this.Jbt(t):this.Vbt(t)}*pgt(t){(this.Ibt()||this.Pc.Ybt())&&(yield this),t.lmt(this),this.Lwt||t.ymt(!1),this.Awt?yield*this.Hbt(t):yield*this.qbt(t)}Jbt(t){const s=this.Rwt;let i=0===s.length;for(let e=0,r=s.length;e<r;++e){const r=s[e];if(r.YMt())continue;t.cmt(e);const n=r.p_();i=i||n}t.pmt(i),i&&(this.jwt(t,0)&&this.Bbt(t),this.Dwt&&t.ymt(!0))}*Hbt(t){const s=this.Rwt;let i=0===s.length;for(let e=0,r=s.length;e<r;++e){const r=s[e];if(r.YMt())continue;let n;t.cmt(e),n=r.ywt()?r.p_():yield*r.pgt(),i=i||n}if(t.pmt(i),i){let s;s=this.Ubt()?this.jwt(t,0):yield*this.Pwt(t,0),s&&(this.Wbt()?this.Bbt():yield*this.Qbt()),this.Dwt&&t.ymt(!0)}}Vbt(t){const s=this.Rwt;for(let i=0,e=s.length;i<e;++i){const e=s[i];if(t.cmt(i),!e.p_())return void t.pmt(!1)}t.pmt(!0),this.jwt(t,0)&&this.Bbt(t),t.mmt()&&this.Dwt&&t.ymt(!0)}*qbt(t){const s=this.Rwt;for(let i=0,e=s.length;i<e;++i){const e=s[i];let r;if(t.cmt(i),r=e.ywt()?e.p_():yield*e.pgt(),!r)return void t.pmt(!1)}let i;t.pmt(!0),i=this.Ubt()?this.jwt(t,0):yield*this.Pwt(t,0),i&&(this.Wbt()?this.Bbt():yield*this.Qbt()),t.mmt()&&this.Dwt&&t.ymt(!0)}dbt(t,s){const i=this.nht;for(let e=s,r=i.length;e<r;++e){const s=i[e];t.dmt(e),s.p_()}return!0}*pbt(t,s){const i=this.nht;for(let e=s,r=i.length;e<r;++e){const s=i[e];t.dmt(e),s.ywt()?s.p_():yield*s.pgt()}return!0}cbt(t,s){const i=this.oP(),e=this.nht;for(let r=s,n=e.length;r<n;++r){const s=e[r];t.dmt(r);const n=s.p_();if(s.Zbt()&&!0===n)return!1;s.Xbt()&&n instanceof Promise&&i.Vgt(n)}return!0}*fbt(t,s){const i=this.oP(),e=this.nht;for(let r=s,n=e.length;r<n;++r){const s=e[r];let n;if(t.dmt(r),n=s.ywt()?s.p_():yield*s.pgt(),s.Zbt()&&!0===n)return!1;s.Xbt()&&n instanceof Promise&&i.Vgt(n)}return!0}Kbt(t){this.jwt(t,t.fmt())&&this.Bbt()}*$bt(t){(yield*this.Pwt(t,t.fmt()))&&(yield*this.Qbt())}Bbt(){if(!this.kwt.length)return;const t=this.igt()&&this.Pc.fwt(),s=t?performance.now():0,i=this.Tpt,e=i.sZ(this);this._wt?this.tSt(e):this.sSt(e),i.fZ(),t&&(this.jMt.PMt+=performance.now()-s)}tSt(t){const s=this.Fwt,i=this.Ewt,e=this.oP(),r=this.kwt;for(let n=0,h=r.length,o=h-1;n<h;++n){const h=r[n],a=h.$q(),l=!i||!s&&n<o;l&&e.hZ(a),h.p_(t),l?e.aZ(a):e.Egt(a)}}sSt(t){const s=this.kwt;for(let i=0,e=s.length;i<e;++i)s[i].p_(t)}*Qbt(){if(!this.kwt.length)return;const t=this.Tpt,s=t.sZ(this);this._wt?yield*this.iSt(s):yield*this.eSt(s),t.fZ()}*iSt(t){const s=this.Fwt,i=this.Ewt,e=this.oP(),r=this.kwt;for(let n=0,h=r.length,o=h-1;n<h;++n){const h=r[n],a=h.$q(),l=!i||!s&&n<o;l&&e.hZ(a),yield*h.pgt(t),l?e.aZ(a):e.Egt(a)}}*eSt(t){const s=this.kwt;for(let i=0,e=s.length;i<e;++i)yield*s[i].pgt(t)}oZ(t,s){s.amt();const i=this.Rwt;if(!this.Wpt())for(let e=t.umt()+1,r=i.length;e<r;++e){const t=i[e];if(s.cmt(e),!t.p_())return!1}return this.jwt(s,0)&&this.Bbt(s),!0}*rSt(t,s){s.amt();const i=this.Rwt;if(!this.Wpt())for(let e=t.umt()+1,r=i.length;e<r;++e){const t=i[e];let r;if(s.cmt(e),r=t.ywt()?t.p_():yield*t.pgt(),!r)return!1}let e;return e=this.Ubt()?this.jwt(s,0):yield*this.Pwt(s,0),e&&(this.Wbt()?this.Bbt():yield*this.Qbt()),!0}ywt(){return!this.Ibt()&&!this.Pc.Ybt()&&this.Jwt.Xwt}Ubt(){return!this.Pc.Ybt()&&this.Jwt.qwt}Wbt(){return!this.Pc.Ybt()&&this.Jwt.Zwt}nSt(t){if(this.nV()){const s=this.wwt();for(let i=0,e=s.length;i<e;++i)if(!s[i].bwt(t))return!1}return!0}*hSt(t){if(this.nV()){const s=this.wwt();for(let i=0,e=s.length;i<e;++i)if(!(yield*s[i].Twt(t)))return!1}return!0}oSt(t,s,i){if(s.length>0)if(i){const i=s.map(t=>t.Js(0));t.Pyt().sZ(),this.Iwt.aSt(i)}else this.Iwt.lSt(s);else i&&t.Pyt().sZ()}uSt(t,s,i,e){let r,n;const h=t.length>0;let o=null;const a=this.Pc,l=this.Tpt,u=a.oP(),c=this.Iwt,f=c.Xbt(),d=u.Ggt()>1;if(this.oSt(u,s,d),h&&(i?u.hZ(t):u.Agt(t)),null!==e){if(e.cSt){const t=i?e.cSt.eU():e.cSt.Dgt().Mpt(),s=e.fSt.eU();s.jpt(t.iU()),s.Bpt(),i||e.fSt.dSt()}else if(e.pSt){const t=e.pSt.eU();t.jpt(e.mSt),t.Bpt()}e.ySt&&(o=u.Lgt(t))}const p=l.sZ(this);return i&&p.Imt(t),this.nSt(p)&&(p.lmt(this),f&&([n,r]=c.gSt()),this.Vbt(p),f&&c.MSt(n)),l.fZ(),d&&u.Pyt().fZ(),null!==o&&u.aZ(o),h&&u.aZ(t),u.Ngt(),r}*wSt(t,s,i,e){let r,n;(this.Ibt()||this.Pc.Ybt())&&(yield this);const h=t.length>0;let o=null;const a=this.Pc,l=this.Tpt,u=a.oP(),c=this.Iwt,f=c.Xbt(),d=u.Ggt()>1;if(this.oSt(u,s,d),h&&(i?u.hZ(t):u.Agt(t)),null!==e){if(e.cSt){const t=i?e.cSt.eU():e.cSt.Dgt().Mpt(),s=e.fSt.eU();s.jpt(t.iU()),s.Bpt(),i||e.fSt.dSt()}else if(e.pSt){const t=e.pSt.eU();t.jpt(e.mSt),t.Bpt()}e.ySt&&(o=u.Lgt(t))}const p=l.sZ(this);return i&&p.Imt(t),(yield*this.hSt(p))&&(p.lmt(this),f&&([n,r]=c.gSt()),yield*this.qbt(p),f&&c.MSt(n)),l.fZ(),d&&u.Pyt().fZ(),null!==o&&u.aZ(o),h&&u.aZ(t),u.Ngt(),r}bSt(t,s){const i=this.fP(),e=i.length>0,r=this.Pc,n=this.Tpt,h=r.oP(),o=h.Ggt()>1;o&&h.Pyt().sZ(),this.Iwt.aSt(t),e&&(s?h.hZ(i):h.Agt(i));const a=n.sZ(this);this.nSt(a)&&(a.lmt(this),this.Vbt(a)),n.fZ(),o&&h.Pyt().fZ(),e&&h.aZ(i),h.Ngt()}*SSt(t,s){(this.Ibt()||this.Pc.Ybt())&&(yield this);const i=this.fP(),e=i.length>0,r=this.Pc,n=this.Tpt,h=r.oP(),o=h.Ggt()>1;o&&h.Pyt().sZ(),this.Iwt.aSt(t),e&&(s?h.hZ(i):h.Agt(i));const a=n.sZ(this);(yield*this.hSt(a))&&(a.lmt(this),yield*this.qbt(a)),n.fZ(),o&&h.Pyt().fZ(),e&&h.aZ(i),h.Ngt()}mP(t,s,i,e,...r){let n,h;const o=t.length>0,a=this.Pc,l=this.Tpt,u=a.oP(),c=this.Iwt,f=c.Xbt(),d=u.Ggt()>1;d&&u.Pyt().sZ(),r.length>0&&this.Iwt.aSt(r),o&&(s?u.hZ(t):u.Agt(t));const p=l.sZ(this);return p.bmt(i,e),l.Zpt(p),a.rZ(!1),this.nSt(p)&&(p.lmt(this),f&&([h,n]=c.gSt()),this.Vbt(p),f&&c.MSt(h)),a.rZ(!0),l.fZ(),l.Xpt(),d&&u.Pyt().fZ(),o&&u.aZ(t),u.Ngt(),n||p.Smt()}}}{const sg=self.Cs,ig=[];let eg=!1;sg.$Mt=class extends sg.Wr{constructor(t,s,i){super();const e=t.oz(),r=t.oP();this.g4=t,this.Jpt=r,this.Pc=t.oz(),this.xwt=s;const n=e.TSt(i[1]);this.vSt=n,this.Qwt=i[2],this.g4.uwt(this,this.Qwt),this.Jwt=e.iJ()?{Vwt:i[3][0],Ywt:i[3][1]}:null}static QI(t,s,i){return sg.Jr(sg.$Mt,t,s,i)}wyt(){const t=this.vSt,s=this.Pc.oP().Uyt(this);this.vSt=t.bind(null,this.Pc.mB(),s)}nV(){return this.xwt}zyt(){return this.xwt}K4(){return this.g4}vbt(){return this.Qwt}xbt(){return this.Jwt&&this.Jwt.Ywt}Ibt(){return this.xbt()&&this.Jwt.Vwt}Cbt(t){this.Jwt.Vwt=!!t}nwt(){return!1}$q(){return ig}fP(){return this.xwt?this.xwt.fP():ig}p_(t){t.lmt(this),this.Jpt.Vgt(this.xSt())}async xSt(){try{await this.vSt()}catch(t){console.error(`Unhandled exception running script %c${this.K4()._c()}, event ${this.vbt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.eJ&&self.eJ.ISt(this),eg||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),eg=!0)}}*pgt(t){t.lmt(this),(this.Ibt()||this.Pc.Ybt())&&(yield this),this.p_(t)}ywt(){return!this.Ibt()&&!this.Pc.Ybt()}static CSt(){return eg}static GSt(){eg=!0}}}{const rg=self.Cs;self.assert;rg.CMt=class extends rg.Wr{constructor(t,s,i){super(),this.g4=t,this.Pc=t.oz(),this.xwt=s,this.NSt=0,this._St="",this.ESt=0,this.DSt=[],this.ASt=!0,this.LSt="",this.ppt=null,this.OSt=!1,this.RSt=[],this.kSt=!1,this.jSt=!1,this.PSt=0,this.FSt=-1,this.zSt=new Map,this.BSt=rg.JMt.QI(t,s,i),this.BSt.Tbt(this)}USt(t){this.NSt=0,this._St=t[0],this.ESt=t[1],this.DSt=t[2].map(t=>rg.XMt.QI(this.g4,this,t)),this.ASt=t[3],this.jSt=t[4],this.kSt=t[5]}WSt(t){this.NSt=1,this.LSt=t[1],this.ppt=this.Pc.Y0(t[2]),this.BSt.tbt(this.ppt),this._St=this.ppt._c()+"."+this.LSt,this.ESt=t[3],this.DSt=t[4].map(t=>rg.XMt.QI(this.g4,this,t)),this.ASt=t[5],this.jSt=t[6],this.kSt=t[7],this.ppt.QSt(this)}static qMt(t,s,i){const e=rg.Jr(rg.CMt,t,s,i),r=i[1];return e.USt(r),e}static ZMt(t,s,i){const e=rg.Jr(rg.CMt,t,s,i),r=i[1];return e.WSt(r),e}byt(){if(this.ppt&&this.ppt.w1())for(const t of this.ppt.TU())if(t.JSt(this.LSt)){this.OSt=!0;break}}wyt(){for(const t of this.DSt)t.wyt();this.BSt.wyt(!1)}Gyt(){return this.NSt}Byt(){return this.DSt}GMt(){return this.DSt}uP(){return this.DSt.length}VSt(t){this.RSt.push(t)}YSt(){return this.RSt}lSt(t){const s=this.DSt;for(let i=0,e=s.length;i<e;++i)s[i].lnt(t[i].Js(0))}aSt(t){const s=this.DSt;for(let i=0,e=s.length;i<e;++i)s[i].lnt(t[i])}HSt(){return this.DSt.map(t=>t.Grt())}nV(){return this.xwt}zyt(){return this.xwt}Nyt(){return this._St}qSt(){return this.LSt}ZSt(){return this.OSt}gP(){return this.ESt}fQ(){return this.ppt}Cu(){return this.ASt}lP(){switch(this.ESt){case 0:return null;case 2:return"";default:return 0}}cP(){return this.BSt}yP(){return this.kSt}Xbt(){return this.jSt}gSt(){const t=this.PSt++;let s;this.FSt=t;const i=new Promise(t=>s=t);return this.zSt.set(t,{resolve:s,XSt:0}),[t,i]}MSt(t){const s=this.zSt.get(t);0===s.XSt&&(s.resolve(),this.zSt.delete(t)),this.FSt=-1}KSt(){return this.zSt.get(this.FSt).XSt++,this.FSt}$St(t){this.FSt=t,this.zSt.get(t).XSt--}tTt(t,s){const i=new Map,e=[];for(const t of this.ppt.eU().iU()){const s=t.fQ();if(s.JSt(this.LSt)){const e=i.get(s);Array.isArray(e)?e.push(t):i.set(s,[t])}else e.push(t)}if(e.length>0&&this.BSt.uSt(t,s,this.kSt,{pSt:this.ppt,mSt:e}),i.size>0)for(const[e,r]of i){const i=e.sTt(this.LSt).cP(),n=[...new Set([...t,...i.$q()])];i.uSt(n,s,this.kSt,{pSt:e,mSt:r})}}*iTt(t,s){const i=new Map,e=[];for(const t of this.ppt.eU().iU()){const s=t.fQ();if(s.JSt(this.LSt)){const e=i.get(s);Array.isArray(e)?e.push(t):i.set(s,[t])}else e.push(t)}if(e.length>0&&(yield*this.BSt.wSt(t,s,this.kSt,{pSt:this.ppt,mSt:e})),i.size>0)for(const[e,r]of i){const i=e.sTt(this.LSt).cP(),n=[...new Set([...t,...i.$q()])];yield*i.wSt(n,s,this.kSt,{pSt:e,mSt:r})}}}}{const ng=self.Cs,hg=[];ng.XMt=class extends ng.Wr{constructor(t,s,i){super();const e=t.oP();this.g4=t,this.Jpt=e,this.Pc=t.oz(),this.xwt=s,this.ryt=e.Pyt(),this.qr=i[1],this.Vc=i[2],this.eTt=i[3],this.Mx=!!i[4],this.rTt=!!i[5],this.nTt=s instanceof ng.CMt,this.V$=i[6],this.hTt=this.Pc.Wyt(i[8]),this.oTt=t=>this.lnt(t),this.aTt=()=>this.Grt(),this.lTt=!this.xwt||this.Mx||this.rTt,this.sht=this.eTt,this.uTt=-1,this.cTt()&&(this.sht=this.sht?1:0),!this.fTt()||this.Vx()||this.bMt()||(this.uTt=e.Dyt(this)),e._yt(this)}static QI(t,s,i){return ng.Jr(ng.XMt,t,s,i)}wyt(){if(this.fTt()&&!this.Vx()&&!this.bMt()&&!this.dTt()){const t=this.Jpt.IMt(this);t&&t.VSt(this)}}_c(){return this.qr}Wyt(){return this.hTt}nV(){return this.xwt}zyt(){return this.nV()}z$(){return!this.nV()}fTt(){return!this.z$()}dTt(){return this.nTt}Vx(){return this.Mx}bMt(){return this.rTt}Ki(){return 0===this.Vc}ae(){return 1===this.Vc}cTt(){return 2===this.Vc}nwt(){return!1}G1(){return this.V$}Ayt(){return this.eTt}$q(){return hg}p_(t){!this.fTt()||this.Vx()||this.bMt()||this.lnt(this.Ayt())}ywt(){return!0}*pgt(t){this.p_(t)}lnt(t){this.Ki()?"number"!=typeof t&&(t=parseFloat(t)):this.ae()?"string"!=typeof t&&(t=t.toString()):this.cTt()&&(t=t?1:0),this.lTt?this.sht=t:this.ryt.Emt()[this.uTt]=t}Grt(){return this.lTt?this.sht:this.ryt.Emt()[this.uTt]}pTt(){let t=this.Grt();return this.cTt()&&(t=!!t),t}$yt(){this.sht=this.eTt}Qyt(){return{configurable:!1,enumerable:!0,get:this.aTt,set:this.oTt}}}}{const og=self.Cs,ag=(self.assert,[]);og.KMt=class extends og.Wr{constructor(t,s,i){super();const e=t.oP();this.g4=t,this.Jpt=e,this.Pc=t.oz(),this.xwt=s,this.mTt=null,this.yTt=i[1],this.Pf=!0}static QI(t,s,i){return og.Jr(og.KMt,t,s,i)}wyt(){this.mTt=this.Jpt.I5(this.yTt),this.g4.hwt(this);let t=this.nV();for(;t;)t instanceof og.JMt&&t.igt()&&t.ebt(this),t=t.nV();this._bt(),this.Pc.iJ()&&this.g4.xMt().children.push(this.mTt.xMt())}nV(){return this.xwt}$q(){return ag}awt(){return this.mTt}p_(t){const s=!!this.nV(),i=this.Pc.M1();s&&this.Jpt.Agt(i),this.mTt.p_(),s&&this.Jpt.aZ(i)}*pgt(t){const s=!!this.nV(),i=this.Pc.M1();s&&this.Jpt.Agt(i),yield*this.mTt.pgt(),s&&this.Jpt.aZ(i)}ywt(){return!1}lwt(){return this.Pf}_bt(){let t=this.nV();for(;t;){if(t instanceof og.JMt&&t.igt()&&!t.MMt())return void(this.Pf=!1);t=t.nV()}this.Pf=!0}}}{let lg=function(t,s){return t>=s?t%s:t<0?(t<=-s&&(t%=s),t<0&&(t+=s),t):t};0;const ug=self.Cs;self.assert;ug.gTt=class extends ug.Wr{constructor(t){super(),this.mv=t,this.Pc=t.oz()}wyt(){}static MTt(t,s){const i=s[0],e=[mg,dg,pg,yg,cg,fg];return ug.Jr(e[i],t,s)}};class cg extends ug.gTt{constructor(t,s){super(t),this.wTt=this.Pc._K(),this.vSt=this.Pc.TSt(s[1]),this.vSt!==ug.tz.$F.Mht.random&&this.vSt!==ug.tz.$F.Mht.bTt||this.mv.STt()}TTt(){return this.wTt.vTt(this.vSt,this.wTt)}}class fg extends ug.gTt{constructor(t,s){super(t),this.xTt=null,this._St=s[1],this.mv.STt()}wyt(){const t=this.Pc.oP();this.xTt=t.aP(this._St),this._St=null;const s=this.mv.cP(),i=this.xTt.cP();this.ITt=[...new Set([...s.fP(),...i.fP()])],this.ITt=t.Eyt(this.ITt)}TTt(){const t=this.xTt;if(t.Cu()){const s=t.cP();return ug.JMt.prototype.mP.bind(s,this.ITt,t.yP(),t.gP(),t.lP())}{const s=t.lP();return()=>s}}}class dg extends ug.gTt{constructor(t,s){super(t),this.ppt=this.Pc.Y0(s[1]),this.vSt=this.Pc.TSt(s[2]),this.CTt=!!s[3],this.Tpt=this.Pc.oP().bP(),this.mv.GTt(this.ppt)}TTt(){return this.ppt.JB().vTt(this.vSt,this.ppt.UB().sY())}NTt(...t){const s=this.ppt,i=s.eU().Ept(),e=i.length;if(0===e)return this.CTt?"":0;const r=lg(this.mv._Tt(),e);return this.Tpt.tZ().Mmt(s),this.vSt.apply(i[r].sY(),t)}ETt(t,...s){const i=this.ppt,e=i.iU(),r=e.length;if(0===r||"number"!=typeof t)return this.CTt?"":0;const n=lg(t,r);return this.Tpt.tZ().Mmt(i),this.vSt.apply(e[n].sY(),s)}}class pg extends ug.gTt{constructor(t,s){super(t),this.ppt=this.Pc.Y0(s[1]),this.DTt=s[3],this.CTt=!!s[2],this.mv.GTt(this.ppt)}ATt(){const t=this.ppt.eU().Ept(),s=t.length;return 0===s?this.CTt?"":0:t[lg(this.mv._Tt(),s)].LTt(this.DTt)}OTt(){const t=this.ppt,s=t.eU().Ept(),i=s.length;if(0===i)return this.CTt?"":0;const e=s[lg(this.mv._Tt(),i)],r=e.fQ().RTt(t.kTt());return e.LTt(this.DTt+r)}jTt(t){const s=this.ppt,i=s.iU(),e=i.length;if(0===e||"number"!=typeof t)return this.CTt?"":0;const r=i[lg(t,e)];let n=0;return s.w1()&&(n=r.fQ().RTt(s.kTt())),r.LTt(this.DTt+n)}}class mg extends ug.gTt{constructor(t,s){super(t),this.ppt=this.Pc.Y0(s[1]),this.PTt=this.ppt.Lnt(s[2]),this.FTt=this.ppt.eet(s[2]),this.vSt=this.Pc.TSt(s[3]),this.CTt=!!s[4],this.Tpt=this.Pc.oP().bP(),this.mv.GTt(this.ppt)}zTt(...t){const s=this.ppt,i=s.eU().Ept(),e=i.length;if(0===e)return this.CTt?"":0;const r=lg(this.mv._Tt(),e);this.Tpt.tZ().Mmt(s);const n=i[r];let h=0;return s.w1()&&(h=n.fQ().BTt(s.kTt())),this.vSt.apply(n.Ant()[this.FTt+h].sY(),t)}UTt(t,...s){const i=this.ppt,e=i.iU(),r=e.length;if(0===r||"number"!=typeof t)return this.CTt?"":0;const n=lg(t,r);this.Tpt.tZ().Mmt(i);const h=e[n];let o=0;return i.w1()&&(o=h.fQ().BTt(i.kTt())),this.vSt.apply(h.Ant()[this.FTt+o].sY(),s)}}class yg extends ug.gTt{constructor(t,s){super(t),this.WTt=null,this.QTt=s[1]}wyt(){this.WTt=this.Pc.oP().Jyt(this.QTt)}JTt(){return this.WTt}}}{let gg=function(t){const s=self.VTt[t];if(!s)throw new Error("invalid expression number");return s};0;const Mg=self.Cs;self.assert;Mg.YTt=class extends Mg.Wr{constructor(t,s,i){super(),this.mv=t,this.NM=i,this.Vc=s,this.Js=null,this.HTt=!1,this.rTt=!1}static QI(t,s,i){const e=s[0],r=[wg,bg,Gg,Tg,xg,Sg,Ig,wg,Tg,Tg,Ng,_g,Gg,Dg,bg,Cg,vg,Eg,Ag,Lg,Og,Rg];return Mg.Jr(r[e],t,e,i,s)}wyt(){}STt(){this.HTt=!0}GTt(t){this.HTt||t&&(t.JB().MB()||(this.HTt=!0))}qTt(){return this.HTt}Tj(){return this.NM}oz(){return this.mv.oz()}cP(){return this.mv.cP()}bMt(){return this.rTt}ZTt(){return 4===this.Vc}};class wg extends Mg.YTt{constructor(t,s,i,e){super(t,s,i),this.XTt=0;const r=e[1];this.KTt=r[0],this.$Tt=[],this.tvt=null;for(let t=1,s=r.length;t<s;++t)this.$Tt.push(Mg.gTt.MTt(this,r[t]));this.$Tt.length?this.Js=this.svt:(this.Js=gg(this.KTt),this.rTt=!0)}ivt(t){if(t<0||t>=this.$Tt.length)throw new RangeError("invalid numbered node");return this.$Tt[t]}wyt(){for(const t of this.$Tt)t.wyt();const t=gg(this.KTt);this.$Tt.length?this.tvt=t(this):this.tvt=t}_Tt(){return this.XTt}svt(t){return this.XTt=t,this.tvt()}}class bg extends wg{constructor(t,s,i,e){super(t,s,i,e),this.Js=this.evt,14===s&&(this.cP().obt(),this.mv instanceof Mg.sbt&&this.cP().bbt())}evt(t){this.XTt=t;const s=this.tvt();return"string"==typeof s?s:""}rvt(){return gg(this.KTt)()}}class Sg extends wg{constructor(t,s,i,e){super(t,s,i,e),t.nvt()>=2?this.Js=this.UU:this.Js=this.RF,this.rTt=!1}RF(t){this.XTt=t;const s=this.tvt();return this.oz().AF().RF(s)}UU(t){const s=this.RF(t);return s?s.UU():null}}class Tg extends Mg.YTt{constructor(t,s,i,e){super(t,s,i),this.hvt=e[1],this.Js=this.ovt,this.rTt=!0}ovt(){return this.hvt}}class vg extends Mg.YTt{constructor(t,s,i,e){super(t,s,i),this.avt=e[1],this.Js=this.lvt,this.rTt=!0}lvt(){return this.avt}}class xg extends Mg.YTt{constructor(t,s,i,e){super(t,s,i),this.ppt=this.oz().Y0(e[1]),t.nvt()>=2?this.Js=this.PB:this.Js=this.fQ;const r=this.cP();r.tbt(this.ppt),this.mv instanceof Mg.sbt?r.bbt():r.nV()&&r.nV().bbt(),this.rTt=!0}fQ(){return this.ppt}PB(){return this.ppt?this.ppt.PB():null}}class Ig extends Mg.YTt{constructor(t,s,i,e){super(t,s,i),this.U$=this.oz().dF().N6(e[1]),t.nvt()>=2?this.Js=this.cF:this.Js=this.pF,this.rTt=!0}pF(){return this.U$}cF(){return this.U$?this.U$.cF():null}}class Cg extends Mg.YTt{constructor(t,s,i,e){super(t,s,i),this.O7=this.oz().Utt().z8(e[1]),t.nvt()>=2?this.Js=this.bit:this.Js=this.Bit,this.rTt=!0}Bit(){return this.O7}bit(){return this.O7?this.O7.bit():null}}class Gg extends Mg.YTt{constructor(t,s,i,e){super(t,s,i),this.uvt=e[1],this.Js=this.cvt,this.rTt=!0}cvt(){return this.uvt}}class Ng extends Mg.YTt{constructor(t,s,i,e){super(t,s,i),this.fvt=e[1];const r=this.mv.fQ();this.mv instanceof Mg.$wt&&this.mv.Vx()?(this.Js=this.dvt,this.rTt=!0):r&&r.w1()?(this.Js=this.pvt,this.STt()):(this.Js=this.dvt,this.rTt=!0)}dvt(){return this.fvt}pvt(t){t=t||0;const s=this.mv.fQ(),i=s.eU(),e=i.iU();let r=null;if(e.length)r=e[t%e.length].fQ();else if(i.Npt()){const s=i._pt();r=s[t%s.length].fQ()}else{if(!(s.hU()>0))return 0;{const i=s.iU();r=i[t%i.length].fQ()}}return this.fvt+r.RTt(s.kTt())}}class _g extends Mg.YTt{constructor(t,s,i,e){super(t,s,i),this.QTt=e[1],this.WTt=null,t.nvt()>=2?this.Js=this.mvt:this.Js=this.yvt,this.rTt=!0}wyt(){this.WTt=this.oz().oP().Jyt(this.QTt)}yvt(){return this.WTt}mvt(){return null}}class Eg extends Mg.YTt{constructor(t,s,i,e){super(t,s,i),this.gvt=e[1],this.xTt=null,t.nvt()>=2?this.Js=this.Mvt:this.Js=this.wvt,this.rTt=!0}wyt(){this.xTt=this.oz().oP().aP(this.gvt),this.gvt=null}wvt(){return this.xTt}Mvt(){return null}}class Dg extends Mg.YTt{constructor(t,s,i,e){super(t,s,i),this.bvt=[],this.Svt=[],this.rTt=!0;for(let t=1,s=e.length;t<s;++t){const s=Mg.YTt.QI(this.mv,e[t],0);this.bvt.push(s),this.Svt.push(0),s.bMt()||(this.rTt=!1)}this.Js=this.Tvt}wyt(){for(const t of this.bvt)t.wyt()}Tvt(){const t=this.bvt,s=this.Svt;for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Js(0);return s}}class Ag extends Mg.YTt{constructor(t,s,i,e){super(t,s,i),this.vvt=e[1],this.Js=this.ant,this.rTt=!0}ant(){return this.vvt}}class Lg extends Mg.YTt{constructor(t,s,i,e){super(t,s,i),this.xvt=e[1],this.Js=this.Ivt,this.rTt=!0}Ivt(){return this.xvt}}class Og extends wg{constructor(t,s,i,e){super(t,s,i,e),this.Js=this._Q,this.rTt=!1}_Q(){return this.tvt()}}class Rg extends Mg.YTt{constructor(t,s,i,e){super(t,s,i),this.Ect=this.oz().Hct().xct(e[1]),this.Js=this.Cvt,this.rTt=!0}Cvt(){return this.Ect._c()}}}{let kg=function(t,s){for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Js(0)};0;const jg=self.Cs,Pg=(self.assert,[]),Fg=function(){};jg.$wt=class extends jg.Wr{constructor(t,s,i){if(super(),this.BSt=t,this.Pc=t.oz(),this.NM=i,this.vSt=this.Pc.TSt(s[1]),this.Gvt=s[3]>0,this.Nvt=2===s[3],this._vt=!!s[4],this.Evt=!!s[5],this.Mx=!!s[6],this.V$=s[7],this.Dvt=this.BSt.Wpt(),this.ppt=null,this.PTt=null,this.FTt=-1,this.wTt=null,this.p_=Fg,this.pgt=Fg,this.zs=[],this.Avt=[],this.Lvt=!1,this.Ovt=null,this.Rvt=null,this.Jwt=this.Pc.iJ()?{Vwt:s[8][0],kvt:s[8][1]}:null,-1===s[0]?this.wTt=this.Pc._K():(this.ppt=this.Pc.Y0(s[0]),s[2]&&(this.PTt=this.ppt.Lnt(s[2]),this.FTt=this.ppt.eet(s[2])),this.BSt.nV()&&this.BSt.nV().bbt()),10===s.length){let t=s[9];for(let s of t)this.zs.push(jg.YTt.QI(this,s,this.zs.length)),this.Avt.push(0)}0===this.zs.length&&(this.zs=Pg,this.Avt=Pg),this.BSt.oP().xyt(this)}static QI(t,s,i){return jg.Jr(jg.$wt,t,s,i)}wyt(){for(const t of this.zs)t.wyt(),t.qTt()&&(this.Lvt=!0);this.Nvt?(this.p_=this.jvt,this.pgt=this.Pvt):this.wTt?(this.Fvt(),this.pgt=this.zvt):this.ppt.JB().MB()?(this.Bvt(),this.pgt=this.Uvt):this.Mx?(this.p_=this.Wvt,this.pgt=this.Qvt):(this.p_=this.Jvt,this.pgt=this.Vvt)}Fvt(){const t=this.wTt,s=this.wTt;this.Yvt(t,s,this.Hvt)}Bvt(){const t=this.ppt.JB(),s=this.ppt.UB().sY();this.Yvt(t,s,this.qvt)}Yvt(t,s,i){const e=this.vSt,r=this.Evt,n=this.zs;if(0===n.length){const i=t.vTt(e,s);this.p_=r?function(){return jg.xor(i(),r)}:i}else if(1===n.length){const i=n[0];if(!r&&i.bMt())this.p_=t.Zvt(e,s,i.Js(0));else{const n=t.vTt(e,s);this.p_=function(){return jg.xor(n(i.Js(0)),r)}}}else if(2===n.length){const i=n[0],h=n[1];if(!r&&i.bMt()&&h.bMt())this.p_=t.Xvt(e,s,i.Js(0),h.Js(0));else{const n=t.vTt(e,s);this.p_=function(){return jg.xor(n(i.Js(0),h.Js(0)),r)}}}else if(3===n.length){const i=n[0],h=n[1],o=n[2];if(!r&&i.bMt()&&h.bMt()&&o.bMt())this.p_=t.Kvt(e,s,i.Js(0),h.Js(0),o.Js(0));else{const n=t.vTt(e,s);this.p_=function(){return jg.xor(n(i.Js(0),h.Js(0),o.Js(0)),r)}}}else this.p_=i}G1(){return this.V$}twt(){return this.vSt}fQ(){return this.ppt}cY(){return this.PTt}$vt(){return this.PTt?this.PTt.aY():this.ppt?this.ppt.JB():null}nvt(){const t=this.$vt();return t?t.txt():1}cP(){return this.BSt}oz(){return this.Pc}Tj(){return this.NM}Pbt(){return this.Tj()}YMt(){return this.Gvt}swt(){return this.Nvt}sxt(){return this.Evt}IY(){return this._vt}Vx(){return this.Mx}ixt(){return this.Jwt.Vwt}rxt(){return!!this.wTt}Lbt(){return this.rxt()||this.ppt.JB().MB()}Obt(){for(const t of this.zs)if(t.ZTt())return t.fQ();return null}nxt(t){this.Jwt.Vwt=!!t,this.BSt.gbt()}hxt(){return this.Jwt.kvt}ywt(){return!this.ixt()&&!this.Pc.Ybt()&&!this.hxt()}oxt(){return this.Ovt||(this.Ovt=new Map),this.Ovt}axt(){return this.Rvt||(this.Rvt=new Map),this.Rvt}Hvt(){const t=this.Avt;return kg(this.zs,t),jg.xor(this.vSt.apply(this.wTt,t),this.Evt)}*zvt(){if((this.ixt()||this.Pc.Ybt())&&(yield this),this.hxt()){const t=this.Avt;kg(this.zs,t);let s=this.vSt.apply(this.wTt,t);return jg.So(s)&&(s=yield*s),jg.xor(s,this.Evt)}return this.p_()}qvt(){const t=this.Avt;kg(this.zs,t);const s=this.ppt.UB().sY();return jg.xor(this.vSt.apply(s,t),this.Evt)}*Uvt(){if((this.ixt()||this.Pc.Ybt())&&(yield this),this.hxt()){const t=this.Avt;kg(this.zs,t);const s=this.ppt.UB().sY();let i=this.vSt.apply(s,t);return jg.So(i)&&(i=yield*i),jg.xor(i,this.Evt)}return this.p_()}jvt(){return!0}*Pvt(){return(this.ixt()||this.Pc.Ybt())&&(yield this),!0}lxt(){return this.PTt?this.PTt.aY().txt()>=2?this.PTt.uY():this.PTt:this.ppt.JB().txt()>=2?this.ppt.PB():this.ppt}Wvt(){const t=this.Avt;kg(this.zs,t);const s=this.vSt.apply(this.lxt(),t);return this.ppt.dSt(),s}*Qvt(){if((this.ixt()||this.Pc.Ybt())&&(yield this),this.hxt()){const t=this.Avt;kg(this.zs,t);let s=this.vSt.apply(this.lxt(),t);return jg.So(s)&&(s=yield*s),this.ppt.dSt(),s}return this.p_()}Jvt(){const t=this.zs,s=this.Avt,i=this.ppt.eU();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.qTt()||(s[i]=e.Js(0))}return i.Cpt()?this.uxt(i):this.cxt(i)}*Vvt(){return(this.ixt()||this.Pc.Ybt())&&(yield this),this.Jvt()}fxt(t){const s=this.zs,i=this.Avt;for(let e=0,r=s.length;e<r;++e){const r=s[e];r.qTt()&&(i[e]=r.Js(t))}}uxt(t){const s=this.ppt,i=s.w1(),e=s.kTt(),r=this.FTt,n=r>=0,h=s.iU(),o=this.Lvt,a=this.Avt,l=this.vSt,u=this.Evt,c=this.Dvt&&!this.Gvt;t.Ipt();for(let s=0,f=h.length;s<f;++s){const f=h[s];let d;if(o&&this.fxt(s),n){const t=i?f.fQ().BTt(e):0;d=l.apply(f.Ant()[r+t].sY(),a)}else d=l.apply(f.sY(),a);jg.xor(d,u)?t.Dpt(f):c&&t.Apt(f)}return s.dxt(!0),t.Lpt(!1),s.dSt(),t.Gpt()}cxt(t){const s=this.ppt,i=s.w1(),e=s.kTt(),r=s.vQ(),n=this.FTt,h=n>=0,o=this.Lvt,a=this.Avt,l=this.vSt,u=this.Evt,c=this.Dvt&&!this.Gvt,f=t.Opt(),d=t.Rpt(),p=c&&!this.BSt.Abt(this),m=p?d:f;let y=0,g=!1;for(let t=0,s=m.length;t<s;++t){const s=m[t];let M;if(o&&this.fxt(t),h){const t=i?s.fQ().BTt(e):0;M=l.apply(s.Ant()[n+t].sY(),a)}else M=l.apply(s.sY(),a);jg.xor(M,u)?(g=!0,p?(f.push(s),r&&s.pxt()):(m[y]=s,r&&s.mxt(y),++y)):p?(m[y]=s,r&&s.yxt(y),++y):c&&(d.push(s),r&&s.gxt())}jg.Mh(m,y),r&&s.Mxt(p,y);const M=g;return p&&!g&&(g=this.wxt(f)),s.dxt(M||c),c?g:t.Gpt()}wxt(t){const s=this.ppt,i=s.w1(),e=s.kTt(),r=this.Lvt,n=this.FTt,h=n>=0,o=this.Avt,a=this.vSt,l=this.Evt;for(let s=0,u=t.length;s<u;++s){const u=t[s];let c;if(r&&this.fxt(s),h){const t=i?u.fQ().BTt(e):0;c=a.apply(u.Ant()[n+t].sY(),o)}else c=a.apply(u.sY(),o);if(jg.xor(c,l))return!0}return!1}bxt(t,s){return this.zs[t].Js(s)}iwt(){const t=this.zs;if(!t.length)throw new Error("no parameters");return t[0].rvt()}i4(){if(!this.Ovt||!this.Ovt.size)return null;const t={};for(const[s,i]of this.Ovt.entries()){let e=i;"collmemory"===s&&(e=[...i.entries()].map(t=>[t[0].IQ(),t[1].IQ(),t[2]])),t[s]=e}return{ex:t}}e4(t){if(this.Ovt&&(this.Ovt.clear(),this.Ovt=null),!t)return;const s=this.Pc,i=t.ex;if(i){const t=this.oxt();t.clear();for(const[e,r]of Object.entries(i)){let i=r;"collmemory"===e&&(i=jg.Jr(jg.Gu,r.map(t=>[s._F(t[0]),s._F(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),t.set(e,i)}}}}}{let zg=function(t,s){for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Js(0)};0;const Bg=self.Cs,Ug=(self.assert,[]),Wg=function(){},Qg=function*(){};Bg.sbt=class extends Bg.Wr{constructor(t,s,i){super(),this.BSt=t;const e=t.oz();this.Pc=e,this.NM=i,this.V$=s.length>=4?s[3]:-1,this.Sxt=s.length>=5?255&s[4]:0,this.Txt=s.length>=5?s[4]>>8:0,this.vSt=null,this.ppt=null,this.PTt=null,this.FTt=-1,this.wTt=null,this.vxt="",this.xxt=null,this.Ixt=null,this.p_=Wg,this.pgt=Wg,this.zs=[],this.Avt=[],this.Lvt=!1,this.Ovt=null,this.Rvt=null;const r=-3===s[0],n=r?s[2]:s[5];if(this.Jwt=e.iJ()||r?{Vwt:n[0],kvt:n[1],index:n[2]}:null,-1===s[0])this.wTt=e._K(),this.vSt=e.TSt(s[1]);else if(-2===s[0])this.vxt=s[1];else if(r){const t=e.TSt(s[1]);this.vSt=t,this.p_=this.Cxt,this.pgt=this.Gxt,this.Txt|=8}else this.ppt=e.Y0(s[0]),4&this.Txt?(this.vxt=s[1],this.xxt=e.Y0(s[2])):(s[2]&&(this.PTt=this.ppt.Lnt(s[2]),this.FTt=this.ppt.eet(s[2])),this.vSt=e.TSt(s[1]));if(7===s.length){const t=s[6];for(const s of t)this.zs.push(Bg.YTt.QI(this,s,this.zs.length)),this.Avt.push(0)}0===this.zs.length&&(this.zs=Ug,this.Avt=Ug),this.Nxt()&&(this.BSt.obt(),this.BSt.bbt()),this.BSt.oP().Iyt(this)}static QI(t,s,i){return Bg.Jr(Bg.sbt,t,s,i)}wyt(){for(const t of this.zs)t.wyt(),t.qTt()&&(this.Lvt=!0);if(this.wTt)this.Fvt(),this.pgt=this.zvt;else if(this.vxt)4&this.Txt?this._xt():this.Ext(),this.vxt="",this.xxt=null;else if(this.p_===this.Cxt){const t=this.vSt,s=this.Pc.oP().Uyt(this.BSt);this.vSt=t.bind(null,this.Pc.mB(),s)}else this.PTt?this.Xbt()?(this.p_=this.Dxt,this.pgt=this.Axt):(this.p_=this.Lxt,this.pgt=this.Oxt):this.ppt.JB().MB()?(this.Bvt(),this.pgt=this.Uvt):this.Vx()?(this.p_=this.Rxt,this.pgt=this.kxt):this.Xbt()?(this.p_=this.jxt,this.pgt=this.Pxt):this.Fxt()?(this.p_=this.zxt,this.pgt=this.Bxt):this.zs.length?this.zs.every(t=>t.qTt())?(this.p_=this.Uxt,this.pgt=this.Wxt):this.Lvt?(this.p_=this.Qxt,this.pgt=this.Jxt):this.zs.every(t=>t.bMt())?(zg(this.zs,this.Avt),this.p_=this.Vxt,this.pgt=this.Yxt):(this.p_=this.Hxt,this.pgt=this.qxt):(this.p_=this.Vxt,this.pgt=this.Yxt)}Fvt(){const t=this.wTt,s=this.wTt;this.Yvt(t,s,this.Hvt)}Bvt(){const t=this.ppt.JB(),s=this.ppt.UB().sY();this.Yvt(t,s,this.qvt)}Ext(){const t=this.BSt.oP(),s=t.aP(this.vxt);if(s.Cu()){const i=!!(2&this.Txt);this.Ixt=s.cP();let e=[...new Set([...this.BSt.fP(),...this.Ixt.fP()])];e=t.Eyt(e);const r=!s.yP()&&this.Zxt()?{ySt:!0}:null;if(this.p_=Bg.JMt.prototype.uSt.bind(this.Ixt,e,this.zs,i,r),this.Pc.iJ()){const t=this;this.pgt=function*(){return(t.ixt()||t.Pc.Ybt())&&(yield t),yield*t.Ixt.wSt(e,t.zs,i,r)}}else this.pgt=Qg}else this.p_=Wg,this.pgt=Qg}_xt(){const t=this.BSt.oP(),s=t.qyt(this.xxt,this.vxt);if(s.Cu()){const i=!!(2&this.Txt);this.Ixt=s.cP();let e=[...new Set([...this.BSt.fP(),...this.Ixt.fP(),this.ppt,s.fQ()])];e=t.Eyt(e);const r=!this.ppt.w1()&&!s.fQ().w1(),n=!this.ppt.w1()&&s.fQ().w1(),h=this.ppt.w1();let o=null;if(!s.yP()&&this.Zxt()&&(o=o||{},o.ySt=!0),!n&&i||(o=o||{},o.cSt=this.ppt,o.fSt=s.fQ()),r||n||h&&!s.ZSt()?this.p_=Bg.JMt.prototype.uSt.bind(this.Ixt,e,this.zs,i,o):h&&(this.p_=Bg.CMt.prototype.tTt.bind(s,e,this.zs)),this.Pc.iJ()){const t=this;r||n||h&&!s.ZSt()?this.pgt=function*(){return(t.ixt()||t.Pc.Ybt())&&(yield t),yield*t.Ixt.wSt(e,t.zs,i,o)}:h&&(this.pgt=function*(){return(t.ixt()||t.Pc.Ybt())&&(yield t),yield*s.iTt(e,t.zs)})}else this.pgt=Qg}else this.p_=Wg,this.pgt=Qg}Yvt(t,s,i){const e=this.vSt,r=this.zs;if(0===r.length)this.p_=t.vTt(e,s);else if(1===r.length){const i=r[0];if(i.bMt())this.p_=t.Zvt(e,s,i.Js(0));else{const r=t.vTt(e,s);this.p_=function(){return r(i.Js(0))}}}else if(2===r.length){const i=r[0],n=r[1];if(i.bMt()&&n.bMt())this.p_=t.Xvt(e,s,i.Js(0),n.Js(0));else{const r=t.vTt(e,s);this.p_=function(){return r(i.Js(0),n.Js(0))}}}else if(3===r.length){const i=r[0],n=r[1],h=r[2];if(i.bMt()&&n.bMt()&&h.bMt())this.p_=t.Kvt(e,s,i.Js(0),n.Js(0),h.Js(0));else{const r=t.vTt(e,s);this.p_=function(){return r(i.Js(0),n.Js(0),h.Js(0))}}}else this.p_=i}G1(){return this.V$}Xbt(){return!!(8&this.Txt)}Zbt(){return!!(16&this.Txt)}Fxt(){return 1===this.Sxt}Vx(){return 2===this.Sxt}Nxt(){return!!(1&this.Txt)}ubt(){return this.Xbt()||this.Zbt()}fQ(){return this.ppt}$vt(){return this.PTt?this.PTt.aY():this.ppt?this.ppt.JB():null}nvt(){const t=this.$vt();return t?t.txt():1}cP(){return this.BSt}Zxt(){let t=this.BSt;do{if(t instanceof Bg.CMt&&t.yP())return!0;t=t.zyt()}while(t);return!1}oz(){return this.Pc}Tj(){return this.NM}Pbt(){return this.Jwt.index}ixt(){return this.Jwt.Vwt}nxt(t){this.Jwt.Vwt=!!t,this.BSt.gbt()}hxt(){return this.Jwt.kvt}ywt(){return!this.ixt()&&!this.Pc.Ybt()&&!this.hxt()}oxt(){return this.Ovt||(this.Ovt=new Map),this.Ovt}axt(){return this.Rvt||(this.Rvt=new Map),this.Rvt}Hvt(){const t=this.Avt;return zg(this.zs,t),this.vSt.apply(this.wTt,t)}*zvt(){if((this.ixt()||this.Pc.Ybt())&&(yield this),this.hxt()){const t=this.Avt;return zg(this.zs,t),yield*this.vSt.apply(this.wTt,t)}return this.p_()}qvt(){const t=this.Avt;return zg(this.zs,t),this.vSt.apply(this.ppt.UB().sY(),t)}*Uvt(){if((this.ixt()||this.Pc.Ybt())&&(yield this),this.hxt()){const t=this.Avt;return zg(this.zs,t),yield*this.vSt.apply(this.ppt.UB().sY(),t)}return this.p_()}Vxt(){const t=this.Avt,s=this.ppt.eU().iU();for(let i=0,e=s.length;i<e;++i)this.vSt.apply(s[i].sY(),t)}*Yxt(){if((this.ixt()||this.Pc.Ybt())&&(yield this),this.hxt()){const t=this.Avt,s=this.ppt.eU().iU();for(let i=0,e=s.length;i<e;++i)yield*this.vSt.apply(s[i].sY(),t)}else this.Vxt()}Hxt(){const t=this.Avt;zg(this.zs,t);const s=this.ppt.eU().iU();for(let i=0,e=s.length;i<e;++i)this.vSt.apply(s[i].sY(),t)}*qxt(){if((this.ixt()||this.Pc.Ybt())&&(yield this),this.hxt()){const t=this.Avt;zg(this.zs,t);const s=this.ppt.eU().iU();for(let i=0,e=s.length;i<e;++i)yield*this.vSt.apply(s[i].sY(),t)}else this.Hxt()}Uxt(){const t=this.zs,s=this.Avt,i=this.vSt,e=this.ppt.eU().iU();for(let r=0,n=e.length;r<n;++r){const n=e[r];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Js(r);i.apply(n.sY(),s)}}*Wxt(){if((this.ixt()||this.Pc.Ybt())&&(yield this),this.hxt()){const t=this.zs,s=this.Avt,i=this.vSt,e=this.ppt.eU().iU();for(let r=0,n=e.length;r<n;++r){const n=e[r];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Js(r);yield*i.apply(n.sY(),s)}}else this.Uxt()}Qxt(){const t=this.zs,s=this.Avt,i=this.vSt,e=this.ppt.eU().iU();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.qTt()||(s[i]=e.Js(0))}for(let r=0,n=e.length;r<n;++r){const n=e[r];for(let i=0,e=t.length;i<e;++i){const e=t[i];e.qTt()&&(s[i]=e.Js(r))}i.apply(n.sY(),s)}}*Jxt(){if((this.ixt()||this.Pc.Ybt())&&(yield this),this.hxt()){const t=this.zs,s=this.Avt,i=this.vSt,e=this.ppt.eU().iU();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.qTt()||(s[i]=e.Js(0))}for(let r=0,n=e.length;r<n;++r){const n=e[r];for(let i=0,e=t.length;i<e;++i){const e=t[i];e.qTt()&&(s[i]=e.Js(r))}yield*i.apply(n.sY(),s)}}else this.Qxt()}zxt(){const t=this.zs,s=this.Avt,i=this.vSt,e=this.ppt,r=e.Xxt(),n=e.eU().iU();r.Kxt(i);for(let e=0,r=n.length;e<r;++e){const r=n[e];for(let i=0,r=t.length;i<r;++i)s[i]=t[i].Js(e);i.apply(r.sY(),s)}r.$xt(i)}*Bxt(){if((this.ixt()||this.Pc.Ybt())&&(yield this),this.hxt()){const t=this.zs,s=this.Avt,i=this.vSt,e=this.ppt,r=e.Xxt(),n=e.eU().iU();r.Kxt(i);for(let e=0,r=n.length;e<r;++e){const r=n[e];for(let i=0,r=t.length;i<r;++i)s[i]=t[i].Js(e);yield*i.apply(r.sY(),s)}r.$xt(i)}else this.zxt()}tIt(){return this.PTt?this.PTt.aY().txt()>=2?this.PTt.uY():this.PTt:this.ppt.JB().txt()>=2?this.ppt.PB():this.ppt}Rxt(){const t=this.Avt;return zg(this.zs,t),this.vSt.apply(this.tIt(),t)}*kxt(){if((this.ixt()||this.Pc.Ybt())&&(yield this),this.hxt()){const t=this.Avt;zg(this.zs,t);let s=this.vSt.apply(this.tIt(),t);return Bg.So(s)&&(s=yield*s),s}return this.Rxt()}Lxt(){const t=this.ppt,s=t.w1(),i=t.kTt(),e=this.zs,r=this.Lvt,n=this.Avt,h=this.vSt,o=this.FTt,a=t.eU().iU();for(let t=0,s=e.length;t<s;++t){const s=e[t];s.qTt()||(n[t]=s.Js(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(r)for(let s=0,i=e.length;s<i;++s){const i=e[s];i.qTt()&&(n[s]=i.Js(t))}const u=s?l.fQ().BTt(i):0;h.apply(l.Ant()[o+u].sY(),n)}}*Oxt(){if((this.ixt()||this.Pc.Ybt())&&(yield this),this.hxt()){const t=this.ppt,s=t.w1(),i=t.kTt(),e=this.zs,r=this.Lvt,n=this.Avt,h=this.vSt,o=this.FTt,a=t.eU().iU();for(let t=0,s=e.length;t<s;++t){const s=e[t];s.qTt()||(n[t]=s.Js(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(r)for(let s=0,i=e.length;s<i;++s){const i=e[s];i.qTt()&&(n[s]=i.Js(t))}const u=s?l.fQ().BTt(i):0;yield*h.apply(l.Ant()[o+u].sY(),n)}}else this.Lxt()}jxt(){const t=this.zs,s=this.Avt,i=this.vSt,e=this.ppt.eU().iU(),r=[];for(let n=0,h=e.length;n<h;++n){const h=e[n];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Js(n);r.push(i.apply(h.sY(),s))}return Promise.all(r)}*Pxt(){if((this.ixt()||this.Pc.Ybt())&&(yield this),this.hxt()){const t=this.zs,s=this.Avt,i=this.vSt,e=this.ppt.eU().iU(),r=[];for(let n=0,h=e.length;n<h;++n){const h=e[n];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Js(n);r.push(yield*i.apply(h.sY(),s))}return Promise.all(r)}return this.jxt()}Dxt(){const t=this.ppt,s=t.w1(),i=t.kTt(),e=this.zs,r=this.Avt,n=this.vSt,h=this.FTt,o=t.eU().iU(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,i=e.length;s<i;++s)r[s]=e[s].Js(t);const u=s?l.fQ().BTt(i):0;a.push(n.apply(l.Ant()[h+u].sY(),r))}return Promise.all(a)}*Axt(){if((this.ixt()||this.Pc.Ybt())&&(yield this),this.hxt()){const t=this.ppt,s=t.w1(),i=t.kTt(),e=this.zs,r=this.Avt,n=this.vSt,h=this.FTt,o=t.eU().iU(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,i=e.length;s<i;++s)r[s]=e[s].Js(t);const u=s?l.fQ().BTt(i):0;a.push(yield*n.apply(l.Ant()[h+u].sY(),r))}return Promise.all(a)}return this.Dxt()}async Cxt(){try{await this.vSt()}catch(t){console.error(`Unhandled exception running script %c${this.BSt.K4()._c()}, event ${this.BSt.vbt()}, action ${this.Pbt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.eJ&&self.eJ.ISt(this),Bg.$Mt.CSt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),Bg.$Mt.GSt())}}*Gxt(){return(this.ixt()||this.Pc.Ybt())&&(yield this),this.Cxt()}i4(){return this.Ovt&&this.Ovt.size?{ex:Bg.Mo(this.Ovt)}:null}e4(t){if(this.Ovt&&(this.Ovt.clear(),this.Ovt=null),!t)return;const s=t.ex;s&&(this.Ovt=Bg.wo(s))}}}{let Jg=function(t){return t instanceof fM?cM.HU(t):t.GH()},Vg=function(t){return Jg(t).OF()},Yg=function(t){return cM.HU(t)},Hg=function(t){return Yg(t).OF()},qg=function(t){return t instanceof dM?cM.HU(t):t},Zg=function(t){return t instanceof pM?cM.HU(t):t},Xg=function(t,s,i,e){s.IQ()<i.IQ()?t.Set(s,i,e):t.Set(i,s,e)},Kg=function(t,s,i){s.IQ()<i.IQ()?t.Du(s,i):t.Du(i,s)},$g=function(t,s){t.Au(s)},tM=function(t,s,i){return s.IQ()<i.IQ()?t.Js(s,i):t.Js(i,s)},sM=function(t,s,i,e){if(!s)return!1;const r=0!==i||0!==e,n=t.OF(),h=cM.Ej(),o=cM.Oyt(),a=o.cP().Wpt(),l=o.fQ(),u=o.sxt(),c=s.eU(),f=l!==s;let d;wM=s,MM=f&&!u,bM=!1;let p=0,m=0,y=!1;c.Cpt()?(mM.m(n.FJ()),mM.offset(i,e),h.sIt(n.RF(),s,mM,gM),d=gM):a?cM.iIt()&&!c.Rpt().length&&c.Opt().length?d=c.Opt():(d=c.Rpt(),bM=!0):d=c.Opt(),r&&(p=n.YT(),m=n.ZT(),n.CJ(i,e),n.vJ());for(const s of d)if(h.Nz(t,s)){if(y=!0,u)break;f&&SM.add(s)}return r&&(n.xJ(p,m),n.vJ()),hM.wh(gM),y},iM=function(t){const s=cM.dP().Wpt(),i=wM.eU(),e=i.Opt(),r=i.Rpt();i.Cpt()?(i.Ppt(SM),s&&(hM.wh(r),i.Fpt(SM,wM.iU()))):s?bM?i.zpt(SM):(i.Fpt(SM,e),i.Ppt(SM)):i.Ppt(SM),wM.dSt()},eM=function(t,s){MM&&(s&&iM(t),SM.clear(),wM=null,MM=!1)},rM=function(t,s){const i=cM._F(s);if(!i)return!1;const e=t.eU();if(!e.Cpt()&&!e.Opt().includes(i))return!1;if(t.w1()){if(i.fQ().eIt(t))return e.Upt(i),t.dSt(),!0}else if(i.fQ()===t)return e.Upt(i),t.dSt(),!0;return!1},nM=function(t,s){const i=t.eU();if(i.Cpt()){i.Lpt(!1),i.Ipt();const e=t.iU();for(let t=0,r=e.length;t<r;++t){const r=e[t];r.IQ()===s?i.Apt(r):i.Dpt(r)}return t.dSt(),!!i.Opt().length}{const e=i.Opt();let r=0;for(let t=0,n=e.length;t<n;++t){const n=e[t];e[r]=n,n.IQ()===s?i.Apt(n):++r}return hM.Mh(e,r),t.dSt(),!!e.length}};0;const hM=self.Cs,oM=new hM.vo,aM={},lM={},uM={};let cM=null;hM.rIt=function(t){cM=t};const fM=self.cQ,dM=self.WB,pM=self.YU;lM.nIt=function(t,s){return hM.compare(this.OF().YT(),t,s)},uM.nIt=function(t,s){return hM.compare(this.x,t,s)},lM.hIt=function(t,s){return hM.compare(this.OF().ZT(),t,s)},uM.hIt=function(t,s){return hM.compare(this.y,t,s)},lM.oIt=function(){return this.OF().WJ()},uM.oIt=function(){return this.UJ()},aM.aIt=function(){const t=Vg(this),s=t.pF(),i=t.FJ();return i.tl()<0||i.sl()<0||i.Ka()>s.Yy()||i.$a()>s.eg()},aM.lIt=function(t,s,i){const e=qg(this).eU(),r=e.iU();if(!r.length)return!1;let n=r[0],h=n.OF(),o=n,a=hM.nn(h.YT(),h.ZT(),s,i);for(let e=1,l=r.length;e<l;++e){n=r[e],h=n.OF();const l=hM.nn(h.YT(),h.ZT(),s,i);(0===t&&l<a||1===t&&l>a)&&(a=l,o=n)}return e.Upt(o),!0},lM.HT=function(t){const s=this.OF();s.YT()!==t&&(s.HT(t),s.vJ())},uM.HT=function(t){this.x=+t},lM.XT=function(t){const s=this.OF();s.ZT()!==t&&(s.XT(t),s.vJ())},uM.XT=function(t){this.y=+t},lM.uIt=function(t,s){const i=this.OF();i.cIt(t,s)||(i.xJ(t,s),i.vJ())},uM.uIt=function(t,s){this.setPosition(t,s)},aM.fIt=function(t,s){if(!(t=qg(t)))return;const i=Jg(this),e=t.tU(i);if(!e)return;const[r,n]=e.dIt(s),h=i.OF();h.YT()===r&&h.ZT()===n||(h.xJ(r,n),h.vJ())},aM.pIt=function(t){if(0===t)return;const s=Vg(this);s.CJ(s.mIt()*t,s.yIt()*t),s.vJ()},lM.gIt=function(t,s){if(0===s)return;const i=this.OF();t=hM.$r(t),i.CJ(Math.cos(t)*s,Math.sin(t)*s),i.vJ()},uM.gIt=function(t,s){0!==s&&(t=hM.$r(t),this.offsetPosition(Math.cos(t)*s,Math.sin(t)*s))},lM.YT=function(){return this.OF().YT()},uM.YT=function(){return this.x},lM.ZT=function(){return this.OF().ZT()},uM.ZT=function(){return this.y},aM.EP=function(){return cM.EP(Jg(this))},lM.MIt=function(t,s){return hM.compare(this.OF().Yy(),t,s)},uM.MIt=function(t,s){return hM.compare(this.width,t,s)},lM.wIt=function(t,s){return hM.compare(this.OF().eg(),t,s)},uM.wIt=function(t,s){return hM.compare(this.height,t,s)},lM.tg=function(t){const s=this.OF();s.Yy()!==t&&(s.tg(t),s.vJ())},uM.tg=function(t){this.width=t},lM.Hy=function(t){const s=this.OF();s.eg()!==t&&(s.Hy(t),s.vJ())},uM.Hy=function(t){this.height=t},lM.FE=function(t,s){const i=Vg(this);i.Yy()===t&&i.eg()===s||(i.FE(t,s),i.vJ())},uM.FE=function(t,s){this._U(t,s)},lM.Yy=function(){return this.OF().Yy()},uM.Yy=function(){return this.width},lM.eg=function(){return this.OF().eg()},uM.eg=function(){return this.height},aM.bIt=function(){return Vg(this).FJ().Ka()},aM.SIt=function(){return Vg(this).FJ().$a()},aM.TIt=function(){return Vg(this).FJ().tl()},aM.vIt=function(){return Vg(this).FJ().sl()},aM.xIt=function(){const t=Vg(this).FJ();return(t.Ka()+t.tl())/2},aM.IIt=function(){const t=Vg(this).FJ();return(t.$a()+t.sl())/2},aM.CIt=function(t,s){return hM.an(Vg(this).LU(),hM.$r(s))<=hM.$r(t)},aM.GIt=function(t){return hM.un(Vg(this).LU(),hM.$r(t))},aM.NIt=function(t,s){const i=hM.$r(t),e=hM.$r(s),r=Vg(this).LU();return hM.un(e,i)?hM.un(r,i)&&!hM.un(r,e):!(!hM.un(r,i)&&hM.un(r,e))},lM.AU=function(t){const s=this.OF(),i=hM.Kr(hM.$r(t));isNaN(i)||s.LU()===i||(s.AU(i),s.vJ())},uM.AU=function(t){this.jJ=t},aM._It=function(t){if(isNaN(t)||0===t)return;const s=Vg(this);s.AU(s.LU()+hM.$r(t)),s.vJ()},aM.EIt=function(t){if(isNaN(t)||0===t)return;const s=Vg(this);s.AU(s.LU()-hM.$r(t)),s.vJ()},aM.DIt=function(t,s){const i=Vg(this),e=i.LU(),r=hM.ln(e,hM.$r(s),hM.$r(t));isNaN(r)||e===r||(i.AU(r),i.vJ())},aM.AIt=function(t,s,i){const e=Vg(this),r=e.LU(),n=s-e.YT(),h=i-e.ZT(),o=Math.atan2(h,n),a=hM.ln(r,o,hM.$r(t));isNaN(a)||r===a||(e.AU(a),e.vJ())},aM.LIt=function(t,s){const i=Vg(this),e=i.LU(),r=t-i.YT(),n=s-i.ZT(),h=Math.atan2(n,r);isNaN(h)||e===h||(i.AU(h),i.vJ())},lM.LU=function(){return hM.tn(this.OF().LU())},uM.LU=function(){return this.jJ},aM.OIt=function(t,s){return hM.compare(hM.xn(100*Vg(this).ML(),6),t,s)},lM.wW=function(){return this.OF().wW()},uM.wW=function(){return this.isVisible},aM.gW=function(t){const s=Vg(this);t=2===t?!s.wW():0!==t,s.wW()!==t&&(s.gW(t),cM.BF())},aM.bL=function(t){const s=hM.Xr(t/100,0,1),i=Vg(this);if(i.LV()){if(i.Wnt().RIt()===s)return}else if(i.ML()===s)return;i.bL(s),cM.BF()},aM.kIt=function(t){oM.$o(t);const s=Vg(this);s.JJ().Jo(oM)||(s.VJ(oM),cM.BF())},aM.TL=function(){const t=Vg(this).JJ();return hM.Gn(t.jo(),t.Po(),t.Fo(),t.zo())},aM.ML=function(){return hM.xn(100*Vg(this).ML(),6)},aM.jIt=function(t){return!!(t=Zg(t))&&Vg(this).RF()===t},aM.PIt=function(t){const s=qg(this).eU(),i=s.iU();if(!i.length)return!1;let e=i[0];for(let s=1,r=i.length;s<r;++s){const r=i[s],n=r.OF(),h=e.OF(),o=n.RF().Tj(),a=h.RF().Tj();0===t?(o>a||o===a&&n.kF()>h.kF())&&(e=r):(o<a||o===a&&n.kF()<h.kF())&&(e=r)}return s.Upt(e),!0},lM.FIt=function(t,s,i){const e=this.OF(),r=0===t?e.KT():e.kJ();return hM.compare(r,s,i)},uM.FIt=function(t,s,i){const e=0===t?this.BW:this.RJ;return hM.compare(e,s,i)},lM.zIt=function(){this.OF().HJ()},uM.zIt=function(){this.YJ()},lM.BIt=function(){this.OF().ZJ()},uM.BIt=function(){this.qJ()},aM.UIt=function(t){(t=Zg(t))&&Vg(this).KJ(t)},aM.WIt=function(t,s){const i=0===t;if(!(s=qg(s)))return;const e=Jg(this),r=s.QIt(e);r&&e.OF().tV(r,i)},lM.$T=function(t){const s=this.OF();s.KT()!==t&&(s.$T(t),cM.BF())},uM.$T=function(t){this.BW=t},aM.JIt=function(){return Vg(this).RF().Tj()},aM.VIt=function(){return Vg(this).RF()._c()},lM.YIt=function(){return this.OF().kF()},uM.YIt=function(){return this.zIndex},lM.HIt=function(){return this.OF().KT()},uM.HIt=function(){return this.BW},lM.qIt=function(){return this.OF().kJ()},uM.qIt=function(){return this.RJ},aM.ZIt=function(t){const s=Jg(this),i=s.fQ().CU().Rnt(t);if(!i)return;const e=i.Tj();return s.OF().SJ().gY(e)},aM.XIt=function(t,s){const i=Jg(this),e=i.fQ().CU().Rnt(s);if(!e)return;const r=e.Tj(),n=1===t,h=i.OF().SJ();h.gY(r)!==n&&(h.MY(r,n),h.wY(),cM.BF())},aM.KIt=function(t,s,i){const e=Jg(this),r=e.fQ().CU().Rnt(t);if(!r)return;s=Math.floor(s);const n=r.JC().YC(s);if(!n)return;"color"===n?(oM.$o(i),i=oM):"percent"===n&&(i/=100);const h=r.Tj(),o=e.OF().SJ();o.SY(h,s,i)&&o.gY(h)&&cM.BF()};const mM=hM.Jr(hM.Rect),yM=[],gM=[];let MM=!1,wM=null,bM=!1;const SM=new Set;function*TM(t){if(!t)return!1;const s=this.oz(),i=s.Ej(),e=s.oP(),r=e.bP(),n=e.Oyt(),h=n.fQ(),o=n.oxt(),a=n.axt(),l=r.tZ(),u=s.kP(),c=u-1,f=l.dP(),d=r.sZ(f);let p=o.get("collmemory");p||(p=hM.Jr(hM.Gu),o.set("collmemory",p)),a.get("collisionCreatedDestroyCallback")||(a.set("collisionCreatedDestroyCallback",!0),s.Mf().addEventListener("instancedestroy",t=>$g(p,t.fY)));const m=h.eU(),y=t.eU(),g=m.iU();let M=null;for(let s=0;s<g.length;++s){const r=g[s];y.Cpt()?(i.sIt(r.OF().RF(),t,r.OF().FJ(),yM),M=yM,i.$It(r,t,M)):M=y.iU();for(let s=0;s<M.length;++s){const n=M[s];if(i.Nz(r,n)||i.tCt(r,n)){const s=tM(p,r,n);let i=!1,o=-2;"number"==typeof s&&(i=!0,o=s);const a=!i||o<c;if(Xg(p,r,n,u),a){const s=f.$q();e.hZ(s);const i=h.eU(),o=t.eU();if(i.Lpt(!1),o.Lpt(!1),h===t){const t=i.Opt();hM.wh(t),t.push(r),t.push(n),h.dSt()}else{const s=i.Opt(),e=o.Opt();hM.wh(s),hM.wh(e),s.push(r),e.push(n),h.dSt(),t.dSt()}yield*f.rSt(l,d),e.aZ(s)}}else Kg(p,r,n)}hM.wh(yM)}return r.fZ(),!1}aM.sCt=function(t){const s=qg(this);t=qg(t);const i=s.oz();if(i.iCt())return TM.call(s,t);if(!t)return!1;const e=i.Ej(),r=i.oP(),n=r.bP(),h=r.Oyt(),o=h.fQ(),a=h.oxt(),l=h.axt(),u=n.tZ(),c=i.kP(),f=c-1,d=u.dP(),p=n.sZ(d);let m=a.get("collmemory");m||(m=hM.Jr(hM.Gu),a.set("collmemory",m)),l.get("collisionCreatedDestroyCallback")||(l.set("collisionCreatedDestroyCallback",!0),i.Mf().addEventListener("instancedestroy",t=>$g(m,t.fY)));const y=o.eU(),g=t.eU(),M=y.iU();let w=null;for(let s=0;s<M.length;++s){const i=M[s];g.Cpt()?(e.sIt(i.OF().RF(),t,i.OF().FJ(),yM),w=yM,e.$It(i,t,w)):w=g.iU();for(let s=0;s<w.length;++s){const n=w[s];if(e.Nz(i,n)||e.tCt(i,n)){const s=tM(m,i,n);let e=!1,h=-2;"number"==typeof s&&(e=!0,h=s);const a=!e||h<f;if(Xg(m,i,n,c),a){const s=d.$q();r.hZ(s);const e=o.eU(),h=t.eU();if(e.Lpt(!1),h.Lpt(!1),o===t){const t=e.Opt();hM.wh(t),t.push(i),t.push(n),o.dSt()}else{const s=e.Opt(),r=h.Opt();hM.wh(s),hM.wh(r),s.push(i),r.push(n),o.dSt(),t.dSt()}d.oZ(u,p),r.aZ(s)}}else Kg(m,i,n)}hM.wh(yM)}return n.fZ(),!1},aM.eCt=function(t){return t=qg(t),sM(Jg(this),t,0,0)},aM.rCt=function(t,s,i){return t=qg(t),sM(Jg(this),t,s,i)},aM.nCt=function(){return!0},aM.MV=function(){return Vg(this).MV()},aM.h4=function(){return Vg(this).h4()},aM.hCt=function(t,s){const i=qg(this);t=qg(t);const e=i.oz(),r=this.eU().iU();if(0===r.length)return!1;const n=t.eU();let h=n.iU();if(n.Cpt()){const s=[...e.oCt(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=n.Cpt()?null:new Set(h),a=new Set;for(let i=0,e=r.length;i<e;++i){const e=r[i];if(1===s)for(const s of e.aV())s.aCt(t)&&(null===o||o.has(s))&&a.add(s);else{let i;if(0===s){if(i=e.nV(),null===i)continue}else i=e.oV();i.aCt(t)&&(null===o||o.has(i))&&a.add(i)}}return 0!==a.size&&(n.Ppt(a),t.dSt(),!0)},aM.lCt=function(t,s){const i=qg(this);t=qg(t);const e=i.oz(),r=i.eU().iU();if(0===r.length)return!1;const n=t.eU();let h=n.iU();if(n.Cpt()){const s=[...e.oCt(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=n.Cpt()?null:new Set(h),a=new Set;for(let i=0,e=r.length;i<e;++i){const e=r[i];2!==s||e.h4()||!e.aCt(t)||null!==o&&!o.has(e)||a.add(e);for(const i of 0===s?e.children():e.dV())2===s&&i.h4()||i.aCt(t)&&(null===o||o.has(i))&&a.add(i)}return 0!==a.size&&(n.Ppt(a),t.dSt(),!0)},aM.uCt=function(t,s,i){const e=qg(this);t=qg(t);const r=e.oz(),n=e.eU().iU();if(0===n.length)return!1;const h=t.eU();let o=h.iU();if(h.Cpt()){const s=[...r.oCt(t)];s.length>0&&(o=o.concat(s))}if(0===o.length)return!1;const a=h.Cpt()?null:new Set(o),l=[];for(let e=0,r=n.length;e<r;++e){const r=n[e];if(0===s){const s=r.fV(i);null!==s&&s.aCt(t)&&(null===a||a.has(s))&&l.push(s)}else if(1===s)for(const s of r.children())if(s.aCt(t)){if(0===i){(null===a||a.has(s))&&l.push(s);break}--i}}return 0!==l.length&&(h.jpt(l),t.dSt(),!0)},aM.cCt=function(t,s,i){const e=Jg(this);switch(t){case 0:default:return hM.compare(e.uV(),s,i);case 1:return hM.compare(e.fCt(),s,i)}},aM.mV=function(t,s,i,e,r,n,h,o,a,l){t=qg(t);const u=Jg(this),c=cM.kyt().fQ();for(const f of t.dCt(u,c)){if(!f.JB().EB())return;u.mV(f,{bV:s,TV:i,xV:e,CV:r,NV:n,AV:h,EV:o,OV:a,kV:l})}},aM.yV=function(t){t=qg(t);const s=Jg(this),i=cM.kyt().fQ();for(const e of t.dCt(s,i))s.yV(e)},aM.pCt=function(){const t=Jg(this);t.MV()&&t.nV().yV(t)},aM.mCt=function(){const t=Jg(this).nV();return t?t.IQ():-1},aM.yCt=function(){return Jg(this).uV()},aM.gCt=function(){return Jg(this).fCt()},aM.MCt=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=Vg(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.BV(),i.vJ()):i.FV(t,s)},aM.WV=function(t,s,i,e,r,n,h,o){const a=Vg(this);a.WV(t,s,{mode:0===i?"absolute":"relative",x:e,y:r,BW:n,YV:h,HV:o})&&a.vJ()},aM.wCt=function(){const t=Vg(this);return t.JV()?t.VV().Cv():0},aM.bCt=function(){const t=Vg(this);return t.JV()?t.VV().Gv():0},aM.SCt=function(t){const s=Vg(this);t=2===t?!s.wW():0!==t,s.wW()!==t&&s.gW(t)},aM.nY=function(t,s){this instanceof self.cQ?this.vq(t,s):this.nY(t,s)},aM.TCt=function(t,s){this instanceof self.cQ?this.Iq(t,""+s):this.TCt(t,""+s)},aM.vCt=function(t){this instanceof self.cQ?this.Cq(t):this.vCt(t)},aM.xCt=function(){this instanceof self.cQ?this.bq():this.iY()},aM.ICt=function(){this instanceof self.cQ?this.Sq():this.eY()},aM.CCt=function(){return this instanceof self.cQ?this.Tq():this.CCt()},aM.GCt=function(t){this instanceof self.cQ?this.NCt(0!==t):this._Ct(0!==t)},aM.ECt=function(){return this instanceof self.cQ?this.ASt():this.DCt()},lM.ACt=function(t,s,i){return hM.compare(this.GH().lot(t),s,i)},uM.ACt=function(t,s,i){return hM.compare(Yg(this).lot(t),s,i)},lM.LCt=function(t){return!!this.GH().lot(t)},uM.LCt=function(t){return!!Yg(this).lot(t)},aM.OCt=function(t,s){const i=qg(this),e=i.eU(),r=e.iU();if(!r.length)return!1;const n=i.w1();let h=null,o=0;for(let e=0,a=r.length;e<a;++e){const a=r[e],l=n?a.fQ().RTt(i.kTt()):0,u=a.lot(l+s);(null===h||0===t&&u<o||1===t&&u>o)&&(o=u,h=a)}return e.Upt(h),!0},aM.RCt=function(t){const s=qg(this);return s.oz().Oyt().sxt()?nM(s,t):rM(s,t)},aM.nH=function(t){const s=new Set(hM.Rh(t)),i=Jg(this).OQ();return s.isSubsetOf(i)},aM.kCt=function(){return Jg(this).jCt()},aM.PCt=function(){return Jg(this).OQ().size},aM.FCt=function(t){return Jg(this).zCt(t)},aM.BCt=function(t,s){const i=hM.Rh(s);if(0===i.length)return;const e=Jg(this),r=new Set(e.OQ());if(0===t)for(const t of i)r.add(t);else if(1===t)for(const t of i)r.delete(t);e.kQ(r)},aM.UCt=function(){cM.MQ(Jg(this))},aM.WCt=function(){return!0},aM.QCt=function(){return!0},lM.JCt=function(t,s){this.GH().uot(t,s)},uM.JCt=function(t,s){Yg(this).uot(t,s)},lM.VCt=function(t,s){const i=this.GH(),e=i.lot(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.uot(t,e+s)},uM.VCt=function(t,s){const i=Yg(this),e=i.lot(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.uot(t,e+s)},lM.YCt=function(t,s){const i=this.GH(),e=i.lot(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.uot(t,e-s))},uM.YCt=function(t,s){const i=Yg(this),e=i.lot(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.uot(t,e-s))},lM.HCt=function(t,s){this.GH().uot(t,s?1:0)},uM.HCt=function(t,s){Yg(this).uot(t,s?1:0)},lM.qCt=function(t){const s=this.GH();s.uot(t,0===s.lot(t)?1:0)},uM.qCt=function(t){const s=Yg(this);s.uot(t,0===s.lot(t)?1:0)},aM.ZCt=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=Jg(this),e="state";cM.XCt(),i.u8(e),i.av(s,e),cM.KCt(e,{$Ct:!0})},aM.tGt=function(){return JSON.stringify(Jg(this).ov("state"))},aM.sGt=function(){return Jg(this).fQ()._c()},aM.iGt=function(){const t=cM.Lyt().wmt();let s=t.hU();for(const i of cM.oCt(t))++s;return s},aM.eGt=function(){return cM.Lyt().wmt().eU().iU().length},lM.GQ=function(){return this.GH().GQ()},uM.GQ=function(){return Yg(this).GQ()},lM.IQ=function(){return this.GH().IQ()},uM.IQ=function(){return Yg(this).IQ()},aM.eMt=function(t){const s=Jg(this);return t.toLowerCase()===cM.oP().oMt(s)},aM.PQ=function(t){const s=Jg(this);cM.oP().PQ(s,t)},aM.rGt=function(t){const s=qg(this);return cM.oP().Ogt().nGt(s.eU().iU(),t),!0},aM.hGt=function(){return Jg(this)._Q()},hM.oGt=function(t,s,i){const e=t[1],r=t[3],n=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],y=t[16],g=s.KF,M=s.ght,w=s.Mht,b=Object.assign({},aM,i>=2?uM:lM);r&&(g.nIt=b.nIt,g.hIt=b.hIt,g.oIt=b.oIt,g.aIt=b.aIt,g.lIt=b.lIt,M.HT=b.HT,M.XT=b.XT,M.uIt=b.uIt,M.fIt=b.fIt,M.pIt=b.pIt,M.gIt=b.gIt,w.aGt=b.YT,w.lGt=b.ZT,w._P=b.EP),n&&(g.MIt=b.MIt,g.wIt=b.wIt,M.tg=b.tg,M.Hy=b.Hy,M.FE=b.FE,w.uGt=b.Yy,w.cGt=b.eg,w.fGt=b.bIt,w.dGt=b.SIt,w.pGt=b.TIt,w.mGt=b.vIt,w.yGt=b.xIt,w.gGt=b.IIt),h&&(g.MGt=b.CIt,g.wGt=b.GIt,g.NIt=b.NIt,M.AU=b.AU,M._It=b._It,M.EIt=b.EIt,M.DIt=b.DIt,M.AIt=b.AIt,M.LIt=b.LIt,w.bGt=b.LU),o&&(g.wW=b.wW,g.OIt=b.OIt,M.gW=b.gW,M.bL=b.bL,M.kIt=b.kIt,w.Opacity=b.ML,w.ColorValue=b.TL),a&&(g.jIt=b.jIt,g.PIt=b.PIt,g.FIt=b.FIt,M.zIt=b.zIt,M.BIt=b.BIt,M.UIt=b.UIt,M.WIt=b.WIt,M.$T=b.$T,w.JIt=b.JIt,w.VIt=b.VIt,w.YIt=b.YIt,w.HIt=b.HIt,w.qIt=b.qIt),l&&(g.ZIt=b.ZIt,M.XIt=b.XIt,M.KIt=b.KIt),d&&(g.nCt=b.nCt,g.MV=b.MV,g.h4=b.h4,g.hCt=b.hCt,g.lCt=b.lCt,g.uCt=b.uCt,g.cCt=b.cCt,M.mV=b.mV,M.yV=b.yV,M.pCt=b.pCt,w.mCt=b.mCt,w.yCt=b.yCt,w.gCt=b.gCt),p&&(M.MCt=b.MCt,M.WV=b.WV,w.wCt=b.wCt,w.bCt=b.bCt),u&&(g.wW=b.wW,M.gW=b.SCt,M.SGt=b.nY,M.TGt=b.TCt,M.vGt=b.vCt),c&&(g.xGt=b.CCt,M.IGt=b.xCt,M.CGt=b.ICt),f&&(g.Cu=b.ECt,M.GGt=b.GCt),m&&(g.sCt=b.sCt,g.eCt=b.eCt,g.rCt=b.rCt,s.NGt=eM),e||(g.ACt=b.ACt,g.LCt=b.LCt,g.OCt=b.OCt,g.RCt=b.RCt,g.nH=b.nH,M.JCt=b.JCt,M.VCt=b.VCt,M.YCt=b.YCt,M.HCt=b.HCt,M.qCt=b.qCt,M.BCt=b.BCt,g.WCt=b.WCt,g.QCt=b.QCt,M.UCt=b.UCt,M.ZCt||(M.ZCt=b.ZCt),w.tGt||(w.tGt=b.tGt),w.iGt=b.iGt,w.eGt=b.eGt,w._Gt=b.GQ,w.EGt=b.IQ,w.sGt=b.sGt,w.kCt=b.kCt,w.PCt=b.PCt,w.FCt=b.FCt,g.eMt=b.eMt,M.PQ=b.PQ,M.rGt=b.rGt),y&&(w.hGt=b.hGt)}}{const vM=self.Cs;vM.Rgt=class extends vM.Wr{constructor(t){super(),this.Jpt=t,this.Vc="",this.QR=-1,this.DGt="",this.AGt=!1,this.LGt=null,this.tmt=0,this.Cwt=[],this.hmt=null,this.OGt=new Map,this.RGt=null,this.kGt=null,this.jGt=-1,this.DSt=null,this.PGt=null,this.FGt=!1}Vr(){this.Vc="",this.QR=-1,this.DGt="",this.LGt=null,this.kGt=null,this.DSt=null,this.PGt=null,this.jGt=-1,vM.wh(this.Cwt),this.hmt&&(this.hmt.clear(),this.hmt=null);for(const t of this.OGt.values())t.Vr();this.OGt.clear(),this.RGt=null}VT(){const t=this.Jpt,s=t.oz().M1(),i=t.Lyt();this.LGt=i.dP(),this.tmt=i.fmt()+1;const e=t.IMt(this.LGt);e&&(this.kGt=e,this.DSt=e.HSt(),this.PGt=e.YSt().map(t=>t.Grt()),e.Xbt()&&(this.jGt=e.KSt()));for(const t of s){const s=t.eU();s.Cpt()&&!this.LGt.Sbt(t)||(this.Cwt.push(t),this.OGt.set(t,vM.Jr(vM.zGt,s)))}const r=t.pP();this.hmt=r.size>0?r:null}BGt(t){this.Vc="timer",this.VT(),this.QR=this.Jpt.oz().OP()+t}UGt(t){this.Vc="walltimer",this.VT(),this.QR=this.Jpt.oz().PP()+t}WGt(t){this.Vc="signal",this.VT(),this.DGt=t.toLowerCase()}nGt(t,s){this.Vc="instance-signals",this.VT(),this.DGt=s.toLowerCase(),this.RGt=new Set(t)}QGt(t){this.Vc="promise",this.VT(),t.then(()=>this.$gt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.$gt()})}JGt(){return"timer"===this.Vc}VGt(){return"walltimer"===this.Vc}Xgt(){return"signal"===this.Vc}nMt(){return"instance-signals"===this.Vc}SMt(){return"promise"===this.Vc}Kgt(){return this.DGt}YGt(){return this.AGt}$gt(){this.AGt=!0}hMt(t){this.RGt.delete(t),0===this.RGt.size&&this.$gt()}Pgt(){return this.JGt()?this.QR<=this.Jpt.oz().OP():this.VGt()?this.QR<=this.Jpt.oz().PP():this.YGt()}HGt(t){t.omt(this.LGt,this.tmt);for(const[t,s]of this.OGt.entries()){const i=t.eU();s.omt(i)}this.hmt&&t.Imt([...this.hmt]);const s=this.kGt;s&&(s.aSt(this.DSt),s.YSt().map((t,s)=>t.lnt(this.PGt[s])),s.Xbt()&&s.$St(this.jGt))}Fgt(t){this.HGt(t),this.LGt.Kbt(t),this.kGt&&this.kGt.Xbt()&&this.kGt.MSt(this.jGt),this.Jpt.Egt(this.Cwt),this.FGt=!0}async Wgt(t){this.HGt(t);for(const s of this.LGt.$bt(t))await this.Jpt.oz().dgt(s);this.kGt&&this.kGt.Xbt()&&this.kGt.MSt(this.jGt),this.Jpt.Egt(this.Cwt),this.FGt=!0}zgt(){return this.FGt}Spt(t){for(const s of this.OGt.values())s.Spt(t);if("instance-signals"===this.Vc){for(const s of t)this.RGt.delete(s);0===this.RGt.size&&this.$gt()}}i4(){const t={},s={wt:this.Vc,t:this.QR,st:this.DGt,s:this.AGt,ev:this.LGt.G1(),sm:this.Cwt.map(t=>t.G1()),dsm:this.hmt?[...this.hmt].map(t=>t.G1()):null,sols:t};this.LGt.Fbt(this.tmt)&&(s.act=this.LGt.jyt(this.tmt).G1());for(const[s,i]of this.OGt)t[s.G1().toString()]=i.i4();return"instance-signals"===this.Vc&&(s.pi=[...this.RGt].map(t=>t.IQ())),s}static TMt(t,s){const i=t.oz(),e=t.Vyt(s.ev);if(!e)return null;let r=0;if(s.hasOwnProperty("act")){const i=t.Hyt(s.act);if(!i)return null;r=i.Tj()}const n=vM.Jr(vM.Rgt,t);n.QR=s.t,s.hasOwnProperty("wt")?n.Vc=s.wt:n.Vc=-1===n.QR?"signal":"timer",n.DGt=s.st,n.AGt=s.s,n.LGt=e,n.tmt=r;for(const t of s.sm){const s=i.Kq(t);s&&n.Cwt.push(s)}if(Array.isArray(s.dsm))for(const t of s.dsm){const s=i.Kq(t);s&&(n.hmt||(n.hmt=new Set),n.hmt.add(s))}for(const[e,r]of Object.entries(s.sols)){const s=parseInt(e,10),h=i.Kq(s);if(!h)continue;const o=vM.Jr(vM.zGt,null);o.e4(t,r),n.OGt.set(h,o)}if("instance-signals"===n.Vc){n.RGt=new Set;for(const t of s.pi){const s=i._F(t);s&&n.RGt.add(s)}}return n}}}{const xM=self.Cs;xM.zGt=class extends xM.Wr{constructor(t){super(),this.ppt=null,this.qGt=!0,this.f$=[],t&&(this.ppt=t.fQ(),this.qGt=t.Cpt(),xM.xh(this.f$,t.Opt()))}Vr(){this.ppt=null,xM.wh(this.f$)}omt(t){t.Lpt(this.qGt),xM.xh(t.Opt(),this.f$)}Spt(t){xM._h(this.f$,t)}i4(){return{sa:this.qGt,insts:this.f$.map(t=>t.IQ())}}e4(t,s){const i=t.oz();this.qGt=!!s.sa,xM.wh(this.f$);for(const t of s.insts){const s=i._F(t);s&&this.f$.push(s)}}}}{let IM=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};0;const CM=self.Cs;CM.ZGt=class extends CM.Wr{constructor(t){super(),this.Pc=t.runtime,this.zc=t.id,this.qr=t.name??"",this.XGt=!!t.gB,this.KGt=!!t.$Gt,this.tNt=!!t.vB,this.sNt=!!t.iNt,this.eNt=!!t.IB,this.rNt=!!t.nNt,this.hNt=!!t.DB,this.oNt=!!t.SB,this.aNt=!!t.GB,this.lNt=t.uNt,this.cNt=null,this.fNt=new Map,this.dNt=new Map,this.pNt=new Map,this.mNt=new Map,this.yNt=t.gNt,this.MNt=null}Vr(){this.Pc=null}oz(){return this.Pc}yB(){return this.zc}_c(){return this.qr}wNt(){}rMt(){return this.txt()>=2?this.MNt.constructor:this.constructor}txt(){return this.lNt}bNt(t=!1){let s=this.yNt;return t&&"function"!=typeof s&&this.txt()>=2&&(s=globalThis.OH),s}MB(){return this.XGt}bB(){return this.KGt}TB(){return this.oNt}NB(){return this.aNt}xB(){return this.tNt}wT(){return this.sNt}CB(){return this.eNt}EB(){return this.rNt}AB(){return this.hNt}vTt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.fNt.get(t);return i||(i=t.bind(s),this.fNt.set(t,i),i)}Zvt(t,s,i){if(!s)throw new Error("missing 'this' binding");const e=IM(this.dNt,t);let r=e.get(i);return r||(r=t.bind(s,i),e.set(i,r),r)}Xvt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");const r=IM(this.pNt,t),n=IM(r,i);let h=n.get(e);return h||(h=t.bind(s,i,e),n.set(e,h),h)}Kvt(t,s,i,e,r){if(!s)throw new Error("missing 'this' binding");const n=IM(this.mNt,t),h=IM(n,i),o=IM(h,e);let a=o.get(r);return a||(a=t.bind(s,i,e,r),o.set(r,a),a)}SNt(t){if(!this.MB())throw new Error("must be single-global plugin");this.cNt=t}zB(){if(!this.MB())throw new Error("must be single-global plugin");return this.cNt}UB(){if(!this.MB())throw new Error("must be single-global plugin");return this.cNt.UB()}TNt(){const t=this.txt();CM.pB.vNt(this,t);const s=this.bNt(!0);if(s){if(this.MNt=new s,!(this.MNt instanceof self.fB))throw new TypeError("plugin class must derive from IPlugin")}else this.MNt=new self.fB;CM.pB.xNt(t)}kB(){return this.MNt}}}{const GM=self.Cs;GM.INt=class extends GM.ZGt{constructor(t,s){super(t),this.CNt=s,this.GNt=0,this.NNt=new Map,this._Nt("elem-focused",t=>t.ENt()),this._Nt("elem-blurred",t=>{t&&t.DNt()})}Vr(){super.Vr()}ANt(t){const s=this.GNt++;return this.NNt.set(s,t),s}LNt(t){this.NNt.delete(t)}_Nt(t,s){this.Pc.XQ(this.CNt,t,t=>{const i=this.NNt.get(t.elementId);s(i,t)})}}}{const NM=self.Cs;NM.ONt=class extends NM.Wr{constructor(t){super(),this.ppt=t,this.Pc=t.oz(),this.RNt=t.JB()}Vr(){this.ppt=null,this.Pc=null,this.RNt=null}fQ(){return this.ppt}oz(){return this.Pc}JB(){return this.RNt}zY(){return this.ppt.zY()}wNt(){}dxt(t){}Kxt(t){}$xt(t){}m5(t){}S5(){}M5(){}U5(t){}kNt(){}bNt(){return null}jNt(t,s,i){const e=NM.Jr(NM.Event,t,s);e.PNt=this,i&&Object.assign(e,i),this.fQ().GK(e)}}}{const _M=self.Cs;_M.FNt=class extends _M.Wr{constructor(t,s){super(),this.fi=t,this.CNt=s,this.zNt=null,this.Pc=t.oz(),this.ppt=this.fi.fQ(),this.BNt=this.ppt.Xxt(),this.K6=null,this.s8=null,this.hJ=!1,this.aJ=!1,this.Zf=null,this.uE=!1}Vr(){this.uE=!0,this.UNt(),this.WNt(),this.K6=null,this.s8=null,this.Zf&&(this.Zf.Vr(),this.Zf=null),this.fi=null,this.Pc=null,this.ppt=null,this.BNt=null}Yr(){return this.uE}GH(){return this.fi}oz(){return this.Pc}fQ(){return this.ppt}JB(){return this.BNt.JB()}Xxt(){return this.BNt}QNt(){return this.fi.EF()}HQ(t){return this.Pc.HQ(t,this.fi,null)}JNt(t){return this.Pc.JNt(t,this.fi,null)}ZF(t){return this.Pc.ZF(t,this.fi,null)}VNt(t,s){return this.Pc.VNt(t,this.fi,s)}YNt(t,s){return this.Pc.YNt(t,this.fi,s)}HNt(t){return this.Pc.HNt(t)}qNt(t,s){this.Pc.XQ(this.CNt,t,s)}ZNt(t){for(const[s,i]of t)this.qNt(s,i)}XNt(t,s){this.Pc.Bc(this.CNt,t,s)}KNt(t,s){return this.Pc.WF(this.CNt,t,s)}$Nt(t,s){if(!this.Pc.Jj())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.CNt,handler:t,data:s,responseId:null});this.XNt(t,s)}t_t(t){if(!t)throw new Error("cannot set empty component id");this.zNt=t}s_t(){if(!this.zNt)throw new Error("wrapper extension component id not set");return this.Pc.dJ(this.zNt)}mJ(t,s){if(!this.zNt)throw new Error("wrapper extension component id not set");this.Pc.mJ(this.zNt,t,s)}i_t(t){for(const[s,i]of t)this.mJ(s,i)}Uq(t,s){if(!this.zNt)throw new Error("wrapper extension component id not set");this.Pc.Uq(this.zNt,t,s)}Wq(t,s){if(!this.zNt)throw new Error("wrapper extension component id not set");return this.Pc.Wq(this.zNt,t,s)}u7(){}e_t(){}r_t(){if(!this.hJ){if(!this.K6)if(this.Pc.iJ()){const t=globalThis.eJ,s=this.JB();this.K6=()=>{const i=performance.now();this.u7(),t.nJ(s,performance.now()-i)}}else this.K6=()=>this.u7();this.Pc.Mf().addEventListener("tick",this.K6),this.hJ=!0}}UNt(){this.hJ&&(this.Pc.Mf().removeEventListener("tick",this.K6),this.hJ=!1)}n_t(){return this.hJ}h_t(){if(!this.aJ){if(!this.s8)if(this.Pc.iJ()){const t=globalThis.eJ,s=this.JB();this.s8=()=>{const i=performance.now();this.e_t(),t.nJ(s,performance.now()-i)}}else this.s8=()=>this.e_t();this.Pc.Mf().addEventListener("tick2",this.s8),this.aJ=!0}}WNt(){this.aJ&&(this.Pc.Mf().removeEventListener("tick2",this.s8),this.aJ=!1)}o_t(){return this.aJ}a_t(){return[]}ov(){return null}av(t){}tot(t){}hot(t,s){}$ot(t,s,i){if(0===s)return;const e=this.tot(t);if("number"!=typeof e)throw new Error("expected number");this.hot(t,e+s,i)}l_t(t,s,i,e){}u_t(t,...s){t.call(this,...s)}c_t(t,...s){return t.call(this,...s)}bNt(){return null}jNt(t,s,i){if(!this.fi.f_t())return;const e=this.QNt(),r=_M.Jr(_M.Event,t,s);r.fY=e,i&&Object.assign(r,i),e.dispatchEvent(r)}wT(){return!1}}}{const EM=self.Cs;EM.d_t=class extends EM.FNt{constructor(t,s){super(t,s),this.Cit=t.OF(),this.p_t=null,this.m_t=null}Vr(){if(this.p_t){const t=this.Pc.Mf();t.removeEventListener("renderercontextlost",this.p_t),t.removeEventListener("renderercontextrestored",this.m_t),this.p_t=null,this.m_t=null}this.Cit=null,super.Vr()}y_t(){this.g_t()}M_t(){}w_t(){}g_t(){if(this.p_t)return;this.p_t=()=>this.r$(),this.m_t=()=>this.b_t();const t=this.Pc.Mf();t.addEventListener("renderercontextlost",this.p_t),t.addEventListener("renderercontextrestored",this.m_t)}r$(){this.M_t()}b_t(){this.w_t()}OF(){return this.Cit}yet(){return!1}met(){if(!this.yet())throw new Error("original size not known");const t=this.S_t();if(t)return t.Yy()}wet(){if(!this.yet())throw new Error("original size not known");const t=this.S_t();if(t)return t.eg()}S_t(){return null}T_t(){const t=this.S_t();if(t){const s=t.vI();if(s)return[s.Yy(),s.eg()]}return[100,100]}v_t(){const t=this.S_t();return t?t.yD():null}x_t(){const t=this.S_t();return t?t.I_t():null}C_t(){const t=this.S_t();return!!t&&t.G_t()}dIt(t){const s=this.fi.OF();return[s.YT(),s.ZT(),s.kJ()]}kNt(t,s,i){}N_t(t,s){}D3(){return!0}}}{const DM=self.Cs,AM=DM.Jr(DM.Rect);DM.__t=class extends DM.d_t{constructor(t,s){super(t,s),this.E_t=this.JB().ANt(this),this.D_t=!0,this.A_t=!1,this.L_t=!1,this.O_t=-.2,this.R_t=DM.Jr(DM.Rect,0,0,-1,-1);const i=this.Pc.IF();this.k_t=i.eq(),this.j_t=i.rq(),this.P_t=-1,this.F_t=-1,this.z_t=!1,this.r_t()}Vr(){this.JB().LNt(this.E_t),this.B_t("destroy"),this.E_t=-1,super.Vr()}tY(){if(this.Pc.Jj())throw new Error("not valid in worker mode");return this.U_t("get-element")}B_t(t,s){s||(s={}),s.elementId=this.E_t,this.XNt(t,s)}U_t(t,s){return s||(s={}),s.elementId=this.E_t,this.$Nt(t,s)}W_t(t,s){return s||(s={}),s.elementId=this.E_t,this.KNt(t,s)}Q_t(t){t||(t={});const s=this.OF();t.elementId=this.E_t,t.isVisible=s.wW(),t.htmlIndex=s.RF().uq(),t.htmlZIndex=s.cq(),Object.assign(t,this.J_t()),this.D_t=!!t.isVisible,this.$Nt("create",t),this.V_t(!0)}SCt(t){t=!!t,this.D_t!==t&&(this.D_t=t,this.B_t("set-visible",{isVisible:t}))}u7(){this.V_t(!1)}Y_t(){const t=this.Pc.IF().gq();return"Android"===DM.Xs.Ks&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}V_t(t){if(this.GH().Mq())return;const s=this.OF(),i=s.RF(),e=s.FJ();let[r,n]=i.rQ(e.Ka(),e.$a()),[h,o]=i.rQ(e.tl(),e.sl());const a=this.Pc.IF(),l=a.iB(),u=a.rB();if(!s.wW()||!i.wW())return void this.SCt(!1);if(!this.Y_t()&&(h<=0||o<=0||r>=l||n>=u))return void this.SCt(!1);AM.set(r,n,h,o);const c=a.eq(),f=a.rq(),d=i.uq(),p=s.cq();if(!t&&AM.equals(this.R_t)&&this.k_t===c&&this.j_t===f&&this.P_t===d&&this.F_t===p)return void this.SCt(!0);this.R_t.m(AM),this.k_t=c,this.j_t=f,this.P_t=d,this.F_t=p,this.SCt(!0);let m=null;this.L_t&&(m=i.wq()+this.O_t),this.U_t("update-position",{left:Math.round(this.R_t.Ka()),top:Math.round(this.R_t.$a()),width:Math.round(this.R_t.width()),height:Math.round(this.R_t.height()),htmlIndex:d,htmlZIndex:p,fontSize:m})}iY(){this.U_t("focus",{focus:!0})}eY(){this.U_t("focus",{focus:!1})}ENt(){this.A_t=!0}DNt(){this.A_t=!1}CCt(){return this.A_t}nY(t,s){this.B_t("set-css-style",{prop:DM.bo(t),val:s})}TCt(t,s){this.B_t("set-attribute",{name:t,val:s})}vCt(t){this.B_t("remove-attribute",{name:t})}H_t(){this.z_t||(this.z_t=!0,Promise.resolve().then(()=>{this.z_t=!1,this.B_t("update-state",this.J_t())}))}J_t(){}q_t(){return this.E_t}}}{const LM=self.Cs,OM=self.mY;LM.Z_t=class extends LM.Wr{constructor(t){super(),this.Pc=t.runtime,this.zc=t.id,this.qr=t.name??"",this.X_t=LM.Jr(LM.Ru),this.K_t=LM.Jr(LM.Ru),this.lNt=t.uNt,this.yNt=t.gNt,this.$_t=null}Vr(){this.K_t.Vr(),this.X_t.Vr(),this.Pc=null}oz(){return this.Pc}yB(){return this.zc}_c(){return this.qr}wNt(){}txt(){return this.lNt}bNt(t=!1){let s=this.yNt;return t&&"function"!=typeof s&&this.txt()>=2&&(s=globalThis._q),s}tEt(t){this.X_t.Fu(t)}k8(){return this.X_t.zu()}e1(t){this.K_t.Fu(t)}o1(t){this.K_t.Du(t)}iU(){return this.K_t.zu()}TNt(){const t=this.txt();LM.pB.vNt(this,t);const s=this.bNt(!0);if(s){if(this.$_t=new s,!(this.$_t instanceof OM))throw new TypeError("behavior class must derive from IBehavior")}else this.$_t=new OM;LM.pB.xNt(t)}oY(){return this.$_t}}}{const RM=self.Cs;RM.sEt=class extends RM.Wr{constructor(t){super(),this.Pc=t.oz(),this.PTt=t,this.ppt=t.fQ(),this.iEt=t.aY(),this.iEt.tEt(this.ppt)}Vr(){this.Pc=null,this.PTt=null,this.ppt=null,this.iEt=null}wNt(){}cY(){return this.PTt}fQ(){return this.ppt}oz(){return this.Pc}aY(){return this.iEt}}}{const kM=self.Cs;kM.eEt=class extends kM.Wr{constructor(t,s){super(),this.Ylt=t,this.CNt=s,this.fi=t.dY(),this.Pc=t.oz(),this.PTt=t.cY(),this.BNt=this.PTt.Xxt(),this.hJ=!1,this.aJ=!1,this.zq=!1,this.Zf=null}Vr(){this.UNt(),this.WNt(),this.rEt(),this.Zf&&(this.Zf.Vr(),this.Zf=null),this.Ylt=null,this.fi=null,this.Pc=null,this.PTt=null,this.BNt=null}aY(){return this.PTt.aY()}nEt(){return this.Ylt}dY(){return this.fi}fQ(){return this.fi.fQ()}OF(){return this.fi.OF()}oz(){return this.Pc}cY(){return this.PTt}Xxt(){return this.BNt}QNt(){return this.Ylt.QNt()}HQ(t){return this.Pc.HQ(t,this.fi,this.PTt)}JNt(t){return this.Pc.JNt(t,this.fi,this.PTt)}ZF(t){return this.Pc.ZF(t,this.fi,this.PTt)}hEt(){}u7(){}e_t(){}oEt(){}r_t(){this.hJ||(this.Pc.Oq(this),this.hJ=!0)}UNt(){this.hJ&&(this.Pc.Rq(this),this.hJ=!1)}n_t(){return this.hJ}h_t(){this.aJ||(this.Pc.kq(this),this.aJ=!0)}WNt(){this.aJ&&(this.Pc.jq(this),this.aJ=!1)}o_t(){return this.aJ}aEt(){this.zq||(this.Pc.Pq(this),this.zq=!0)}rEt(){this.zq&&(this.Pc.Fq(this),this.zq=!1)}lEt(){return this.zq}a_t(){return[]}qNt(t,s){this.Pc.XQ(this.CNt,t,s)}uEt(t,s){}ov(){return null}av(t){}tot(t){}hot(t,s){}$ot(t,s){if(0===s)return;const i=this.tot(t);if("number"!=typeof i)throw new Error("expected number");this.hot(t,i+s)}l_t(t,s,i,e){}u_t(t,...s){t.call(this,...s)}c_t(t,...s){return t.call(this,...s)}bNt(){return null}jNt(t,s,i){if(!this.Ylt.f_t())return;const e=this.QNt(),r=kM.Jr(kM.Event,t,s);r.cEt=e,r.fY=e.fY,i&&Object.assign(r,i),e.dispatchEvent(r)}}}{let jM=function(t){if(t!==FM)throw new Error("invalid internal API token")};0;const PM=self.Cs;PM.tz={},PM.yut={};const FM=PM.Gs();let zM=[],BM=[],UM=[],WM=null,QM=null,JM=null,VM=null;const YM=new Map,HM=new Map;PM.pB=class extends PM.Wr{constructor(t,s){super(),this.Pc=t,this.fEt=[],this.wTt=null,this.dEt=[],this.pEt=new Map,this.mEt=null,this.yEt=null,this.gEt=new Set(s)}MEt(t){const s=t[19],i=this.Pc.TSt(t[0]);if(!i)throw new Error("missing plugin");PM.oGt(t,i,s);const e=s>=2?PM.ZGt:i,r=PM.Jr(e,{runtime:this.Pc,gB:t[1],$Gt:t[2],vB:t[5],IB:t[8],iNt:t[9],nNt:t[13],DB:t[14],SB:t[17],GB:t[18],uNt:s,id:t[20],name:t[21],gNt:s>=2?i:null});r.wNt(),this.fEt.push(r),YM.set(i,r)}wEt(){this.wTt=PM.Jr(PM.tz.$F,{runtime:this.Pc,gB:!0}),this.wTt.wNt()}bEt(t){const s=t[1],i=t[2],e=t[3],r=this.Pc.TSt(t[0]);if(!r)throw new Error("missing behavior");this.pEt.set(r,()=>{const t=s>=2?PM.Z_t:r,n=PM.Jr(t,{runtime:this.Pc,id:i,name:e,uNt:s,gNt:s>=2?r:null});n.wNt(),this.dEt.push(n),HM.set(r,n),!this.mEt&&PM.yut.SEt&&n instanceof PM.yut.SEt?this.mEt=n:!this.yEt&&PM.yut.TEt&&n instanceof PM.yut.TEt&&(this.yEt=n),n.TNt()})}vEt(t){const s=this.pEt.get(t);s&&(s(),this.pEt.delete(t))}static vNt(t,s=1){if(PM.pB.vNt!==WM)throw new Error("invalid method");1===s&&zM.push(t),BM.push(t)}static xNt(t=1){if(PM.pB.xNt!==QM)throw new Error("invalid method");1===t&&zM.pop(),BM.pop()}static yQ(){if(PM.pB.yQ!==JM)throw new Error("invalid method");if(0===zM.length)throw new Error("no init object set");return zM.at(-1)}static dB(t){if(PM.pB.dB!==VM)throw new Error("invalid method");if(jM(t),0===BM.length)throw new Error("no init object set");return BM.at(-1)}static xEt(t){UM.push(t)}static IEt(){UM.pop()}static VQ(){if(0===UM.length)throw new Error("no init properties set");return UM.at(-1)}CEt(){for(const t of this.fEt)t.TNt()}static RB(t){return YM.get(t)||null}static yY(t){return HM.get(t)||null}_K(){return this.wTt}GEt(){return this.mEt}NEt(){return this.yEt}dJ(t){return this.gEt.has(t)}},WM=PM.pB.vNt,QM=PM.pB.xNt,JM=PM.pB.yQ,VM=PM.pB.dB}{const qM=self.Cs,ZM=new Set;qM._Et=class extends qM.Wr{constructor(){super(),this.EEt=0,this.VK="",this.YK=0,this.DEt=0,this.AEt=0,this._g=0,this.Eg=0,this.LEt=!1,this.OEt=!1,this.REt=null,this.kEt="",this.rE=qM.Jr(qM.Rect),this.jEt=qM.Jr(qM.Nl),this.PEt="",this.FEt=new self.nz(this),ZM.add(this)}Vr(){this.oE(),this.REt&&0===this.REt.o$()&&this.REt.Vr(),this.REt=null,ZM.delete(this),this.zEt()}static r$(){for(const t of ZM)t.kEt="",t.rE.set(0,0,0,0),t.jEt.ql(t.rE)}BEt(t){this.VK=t[0],this.YK=t[1],this.DEt=t[2],this.AEt=t[3],this._g=t[4],this.Eg=t[5],this.LEt=t[6],this.OEt=!0}UEt(t,s,i){if(i=!!i,this.REt)throw new Error("already loaded asset");this.VK=s;const e={yK:i};return qM.Zh(s)&&(e.gK="remote"),this.hz(t,e),this.REt.wK()}WEt(t,s){if(this.REt)throw new Error("already loaded asset");this.VK="",this.YK=s.size,this.REt=qM.Jr(qM.MK,t.Gj(),{blob:s,size:this.YK,gK:"local"})}QEt(t){if(t===this)throw new Error("cannot replace with self");this.EEt++,this.oE(),this.VK=t.VK,this.YK=t.YK,this.DEt=t.DEt,this.AEt=t.AEt,this._g=t._g,this.Eg=t.Eg,this.LEt=t.LEt,this.OEt=t.OEt,this.REt=t.REt,this.kEt=t.kEt,this.rE=t.rE,this.jEt=t.jEt,this.zEt()}TK(){return this.VK}Lu(){return this.YK}JEt(){return this.DEt}VEt(){return this.AEt}G_t(){return this.LEt}Yy(){return this._g}eg(){return this.Eg}YEt(){return this.REt.Yy()}HEt(){return this.REt.eg()}hz(t,s){if(this.REt)throw new Error("already got asset");s=Object.assign({},s,{url:this.TK(),size:this.Lu()}),this.REt=t.mK(s)}XK(){return this.REt&&this.REt.XK()}async ZZ(t,s){if(!this.REt)throw new Error("no asset");if(this.kEt)throw new Error("already loaded texture");const i=this.EEt;this.kEt="loading";const e=await this.REt.ZZ(t,s);if(this.EEt!==i)return null;if(!e)return this.kEt="",null;this.kEt="loaded",this.OEt||(this._g=e.Yy(),this.Eg=e.eg(),this.OEt=!0);const r=this.LEt?this.Eg:this._g,n=this.LEt?this._g:this.Eg;return this.rE.set(this.DEt,this.AEt,this.DEt+r,this.AEt+n),this.rE.Mt(e.Yy(),e.eg()),this.jEt.ql(this.rE),this.LEt&&this.jEt.su(),e}oE(){this.kEt&&(this.REt&&this.REt.oE(),this.kEt="",this.rE.set(0,0,0,0),this.jEt.ql(this.rE))}vI(){return this.REt&&"loaded"===this.kEt?this.REt.vI():null}yD(){return this.rE}I_t(){return this.jEt}JH(){return this.FEt}qEt(){return this.REt}async ZEt(t){t||(t=await this.REt.a$());const s=qM.uo(this._g,this.Eg),i=s.getContext("2d");return this.LEt?(i.rotate(Math.PI/-2),i.translate(-this.Eg,0),i.drawImage(t,this.DEt,this.AEt,this.Eg,this._g,0,0,this.Eg,this._g)):i.drawImage(t,this.DEt,this.AEt,this._g,this.Eg,0,0,this._g,this.Eg),s}async XEt(t){if(this.PEt)return this.PEt;const s=await this.ZEt(t),i=await qM.co(s);return this.PEt=URL.createObjectURL(i),this.PEt}zEt(){this.PEt&&(URL.revokeObjectURL(this.PEt),this.PEt="")}}}{const XM=self.Cs;XM.KEt=class extends XM.Wr{constructor(t){super(),this.qr=t[0],this.$Et=t[1],this._vt=!!t[2],this.Eat=t[3],this.tDt=t[4],this.sDt=!!t[5],this.V$=t[6],this.iDt=t[7].map(t=>XM.Jr(XM.eDt,t)),this.rDt=new self.TY(this)}static nDt(t,s){const i=XM.Jr(XM.KEt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.iDt.push(XM.eDt.nDt(t)),i}Vr(){for(const t of this.iDt)t.Vr();XM.wh(this.iDt)}hDt(t){for(const s of this.iDt)s.zY().hz(t)}oDt(t,s){return Promise.all(this.iDt.map(i=>i.zY().ZZ(t,s)))}aDt(){for(const t of this.iDt)t.zY().oE()}_c(){return this.qr}G1(){return this.V$}AY(){return this.iDt.length}OY(){return this.iDt}lDt(t){if((t=Math.floor(t))<0||t>=this.iDt.length)throw new RangeError("invalid frame");return this.iDt[t]}uDt(t,s){(s=Math.floor(s))<0?this.iDt.unshift(t):s>=this.iDt.length?this.iDt.push(t):this.iDt.splice(s,0,t)}cDt(t){if((t=Math.floor(t))<0||t>=this.iDt.length)throw new RangeError("invalid frame");this.iDt[t].Vr(),this.iDt.splice(t,1)}fDt(t){for(let s=0,i=this.iDt.length;s<i;++s)if(XM.Xe(this.iDt[s].tH(),t))return s;return-1}dDt(t){if("string"==typeof t){const s=this.fDt(t);if(-1===s)throw new Error(`cannot find animation frame with tag ${t}`);return s}return t}vY(){return this.$Et}IY(){return this._vt}GY(){return this.Eat}_Y(){return this.tDt}DY(){return this.sDt}pDt(){return this.rDt}}}{const KM=self.Cs,$M=(()=>{const t=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),s=new Uint8Array(t.length);for(let i=0,e=t.length;i<e;++i)s[i]=t.charCodeAt(i);return new Blob([s],{type:"image/png"})})();KM.eDt=class extends KM.Wr{constructor(t){super(),this.mDt=KM.Jr(KM._Et),this.mDt.BEt(t),this.yDt=t[7],this.gDt=KM.Jr(KM.Na,t[8],t[9]),this.MDt=t[10].map(t=>KM.Jr(KM.wDt,this,t)),this.bDt=new Map;for(const t of this.MDt)this.bDt.set(t._c().toLowerCase(),t);this.SDt=null;const s=t[11];s.length>=6&&(this.SDt=KM.Jr(KM.au,s)),this._M=t[12]?t[12]:"",this.TDt=new self.FY(this)}static nDt(t){const s=KM.Jr(KM.eDt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.mDt.WEt(t,$M),s}Vr(){this.SDt&&(this.SDt.Vr(),this.SDt=null),this.mDt.Vr(),this.mDt=null}zY(){return this.mDt}BY(){return this.yDt}NJ(){return this.gDt.La()}DJ(){return this.gDt.Ra()}ZY(){return this.SDt}HY(t){return this.bDt.get(t.toLowerCase())||null}YY(t){return(t=Math.floor(t))<0||t>=this.MDt.length?null:this.MDt[t]}WY(){return this.MDt.length}tH(){return this._M}RY(){return this.TDt}}}{const tw=self.Cs;tw.wDt=class extends tw.Wr{constructor(t,s){super(),this.vDt=t,this.qr=s[0],this.xDt=tw.Jr(tw.Na,s[1],s[2])}Vr(){}_c(){return this.qr}YT(){return this.xDt.La()}ZT(){return this.xDt.Ra()}IDt(){return this.xDt}}}{const sw=globalThis.Cs,iw=globalThis.eJ,ew=(globalThis.WB,globalThis.rU),rw=globalThis.wU;globalThis.assert;sw.Mct=class extends sw.Wr{constructor(t,s,i){super();const e=t.TSt(i[1]);this.Pc=t,this.RNt=sw.pB.RB(e),this.BNt=null,this.CDt=e.Instance,this.NM=s,this.V$=i[11],this.qr=i[0],this.hTt=this.Pc.Wyt(i[14]),this.GDt=!!i[9],this.NDt=!!i[2],this._Dt=!!i[10],this.EDt=i[3].map(s=>({D$:s[0],type:s[1],name:s[2],DDt:t.Wyt(s[3])})),this.ADt=i[4],this.LDt=i[5],this.KGt=this.RNt.bB(),this.ODt=sw.Jr(sw.Event.Mf),this.G0=null;const[r,n]=t.Ej().Rz();if(this.RDt=sw.Jr(sw.kDt,r,n),this.jDt=!0,this.PDt=null,this.FDt=null,this.zDt=-1,this.BDt=null,this.UDt=null,this.WDt=null,this.QDt=null,this.JDt=null,this.VDt=!1,this.YDt=null,this.HDt=i[8].map(t=>sw.qDt.QI(this,t)),this.ZDt=[],this.XDt=new Map,this.KDt=new Map,this.$Dt=new Set,this.tAt=new Map,this.sAt=sw.Jr(sw.dpt,this),this.iAt=null,this.eAt=0,this.rAt=!1,this.YDt=null,this.mDt=null,this.nAt=null,this.hAt=null,this.oAt=null,this.aAt=0,this.Ovt=new Map,this.Rvt=new Map,this.f$=[],this.lAt=new Map,this.uAt=!0,this.RNt.CB()&&(this.G0=sw.Jr(sw.N0,this,i[12])),i[6]&&(this.mDt=sw.Jr(sw._Et),this.mDt.BEt(i[6])),i[7]){this.nAt=i[7].map(t=>sw.Jr(sw.KEt,t)),this.hAt=new Map,this.oAt=new Map;for(const t of this.nAt)this.hAt.set(t._c().toLowerCase(),t),this.oAt.set(t.G1(),t)}this.NDt?(this.PDt=[],this.FDt=new Set,this.zDt=this.Pc.cAt()):(this.BDt=[],this.UDt=new Set,this.WDt=[],this.QDt=[],this.JDt=[]);const h=this.RNt.txt();if(h<2&&(this.BNt=sw.Jr(e.fAt,this,i[15]),!(this.BNt instanceof sw.ONt)))throw new Error("v1 sdk type must derive from SDKTypeBase");let o;if(this.dAt=null,this.pAt=null,this.B0=sw.Jr(sw.Event.Mf),sw.pB.vNt(this,h),h>=2?(o=e.fAt,o||(o=globalThis.UH)):o=this.BNt.bNt(),o&&!this.NDt){if(this.dAt=new o(h<2?this:null),h<2&&!(this.dAt instanceof ew))throw new TypeError("script interface class must derive from IObjectType");if(h>=2&&!(this.dAt instanceof globalThis.UH))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else{const t=this.NDt?rw:ew;this.dAt=new t}if(sw.pB.xNt(h),i[13]){const t=i[13];if(t){const s=t[0],i=t[1],e=t[2];this.BNt.kNt(s,i,e)}}this.Pc.mAt()&&!this.NDt&&!this._Dt&&this.KGt||this.wNt(),this.RNt.MB()&&(this.RNt.SNt(this),this.yAt(i)),this.gAt=null}static QI(t,s,i){return sw.Jr(sw.Mct,t,s,i)}Vr(){if(this.ODt.Vr(),this.ODt=null,this.mDt&&(this.mDt.Vr(),this.mDt=null),this.nAt){for(const t of this.nAt)t.Vr();sw.wh(this.nAt),this.hAt.clear(),this.oAt.clear()}this.gAt=null,this.sAt.Vr(),this.sAt=null,this.Ovt.clear(),this.Rvt.clear(),this.YDt=null,this.Pc=null}MAt(t){for(let s=1,i=t.length;s<i;++s){const i=this.Pc.Y0(t[s]);this.PDt.push(i),this.FDt.add(i),i.BDt.push(this),i.UDt.add(this)}}wAt(t){this.VDt=!0,this.YDt=t}vQ(){return this.VDt}f5(){return this.YDt}bAt(){let t=0;if(!this.NDt)for(const s of this.BDt)for(const i of s.SAt()){const s=i._c().toLowerCase();this.XDt.set(s,i),this.KDt.set(s,t),this.ZDt.push(i),++t}for(const s of this.SAt()){const i=s._c().toLowerCase();this.XDt.set(i,s),this.KDt.set(i,t),this.ZDt.push(s),++t}for(const t of this.ZDt)this.$Dt.add(t.aY().constructor);if(!this.NDt&&this.BDt.length){const t=this.Pc.TAt();sw.Sh(this.WDt,t,0),sw.Sh(this.QDt,t,0),sw.Sh(this.JDt,t,0);const s=[];let i=0,e=0,r=0;for(const t of this.BDt){const n=t.kTt();this.WDt[n]=i,i+=t.vAt(),this.QDt[n]=e,e+=t.xAt(),this.JDt[n]=r,r+=t.IAt();const h=t.CU();if(h&&this.G0)for(const t of h.GU())s.push(t.CAt(this.G0))}this.G0&&this.G0.GAt(s)}}yAt(t){const s=sw.$i(t[17])?t[17]:this.Pc.NAt(),i=sw.Jr(sw.Instance,{runtime:this.Pc,objectType:this,uid:s});i._At(t[16],[]),this.Pc.EAt(s,i),this.f$.push(i)}Xxt(){return this.BNt}DAt(){return this._Dt}Mf(){return this.ODt}wNt(){this.NDt||(this.BNt?this.BNt.wNt():this.dAt.WH())}AAt(){return this.aAt>0}async m5(t){this.NDt||(this.aAt++,1===this.aAt&&(this.BNt?await this.BNt.m5(t):await this.dAt.VH(this.Pc.IF().xF())))}S5(){if(!this.NDt){if(this.aAt--,this.aAt<0)throw new Error("released textures too many times");0===this.aAt&&(this.BNt?this.BNt.S5():this.dAt.YH(this.Pc.IF().xF()))}}M5(){if(this.NDt)throw new Error("not applicable to family");this.BNt?this.BNt.M5():this.dAt.HH()}async U5(t){this.NDt||(this.BNt?await this.BNt.U5(t):await this.dAt.qH(this.Pc.IF().xF()))}oz(){return this.Pc}JB(){return this.RNt}LAt(){return this.CDt}_c(){return this.qr}Wyt(){return this.hTt}Tj(){return this.NM}G1(){return this.V$}w1(){return this.NDt}z$(){return this.GDt}bB(){return this.KGt}kTt(){return this.zDt}SAt(){return this.HDt}xAt(){return this.ADt}OAt(t){return t&&this.$Dt.has(t)}vAt(){return this.EDt.length}RAt(){return this.EDt.map(t=>t.D$)}kAt(t){return this.EDt.findIndex(s=>s.D$===t)}Kit(t){return this.EDt.findIndex(s=>s.name===t)}jAt(){return this.EDt.map(t=>t.name)}PAt(){return this.EDt.map(t=>t.DDt)}tet(t){if((t=Math.floor(t))<0||t>=this.EDt.length)throw new RangeError("invalid instance variable index");return this.EDt[t].type}$it(t){if((t=Math.floor(t))<0||t>=this.EDt.length)throw new RangeError("invalid instance variable index");return this.EDt[t].name}IAt(){return this.LDt}FAt(){return this.ZDt}Lnt(t){return this.XDt.get(t.toLowerCase())||null}eet(t){const s=this.KDt.get(t.toLowerCase());return void 0===s?-1:s}CU(){return this.G0}CB(){return this.RNt.CB()}zAt(){return this.G0&&this.G0.BAt()}Dgt(){return this.sAt}eU(){return this.sAt.eU()}zY(){return this.mDt}Z0(t){this.iAt=t}q0(){return this.iAt}X0(t){this.eAt=t}UAt(){return this.eAt}WAt(){return this.nAt}QAt(){return this.nAt.length}yU(){return this.BDt}eIt(t){return this.UDt.has(t)}TU(){return this.PDt}xU(t){return this.FDt.has(t)}BTt(t){return this.QDt[t]}RTt(t){return this.WDt[t]}QSt(t){this.tAt.set(t.qSt().toLowerCase(),t)}JSt(t){return!!this.sTt(t)}sTt(t){const s=this.tAt.get(t.toLowerCase());return s&&s.Cu()?s:null}JAt(){return this.nAt}VAt(t){if(!this.nAt)throw new Error("no animations");return this.hAt.get(t.toLowerCase())||null}YAt(t){if(!this.nAt)throw new Error("no animations");return this.oAt.get(t)||null}HAt(t){if(this.VAt(t))throw new Error(`animation name '${t}' already exists`);const s=sw.KEt.nDt(this.oz(),t);return this.nAt.push(s),this.hAt.set(s._c().toLowerCase(),s),this.oAt.set(s.G1(),s),s}qAt(t){const s=this.VAt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.nAt.length)throw new Error("cannot remove last animation");const i=this.nAt.indexOf(s);this.nAt.splice(i,1),this.hAt.delete(s._c().toLowerCase()),this.oAt.delete(s.G1()),s.Vr()}ZAt(){if(!this.nAt)throw new Error("no animations");return this.nAt[0]}XAt(){return this.ZAt().lDt(0)}KAt(){if(this.nAt){const t=this.XAt().zY();return[t.Yy(),t.eg()]}return this.mDt?[this.mDt.Yy(),this.mDt.eg()]:[100,100]}UB(){if(!this.RNt.MB())throw new Error("not a single-global plugin");return this.f$[0]}iU(){return this.f$}*YB(){yield*this.f$}*sU(){yield*this.f$,yield*this.Pc.oCt(this)}hU(){return this.f$.length}e1(t){this.f$.push(t)}$At(){this.uAt=!0}q5(){if(!this.uAt||this.NDt)return;const t=this.f$;let s=0;for(let i=t.length;s<i;++s)t[s].tLt(s);const i=this.Pc.sLt();for(const t of i)t.fQ()===this&&t.tLt(s++);this.uAt=!1}iLt(t){const s=this.f$;if(t<s.length)return s[t];t-=s.length;const i=this.Pc.sLt();for(const s of i)if(s.fQ()===this){if(0===t)return s;--t}return null}QIt(t){if(t&&t.vQ()&&t.fQ()!==this)for(const s of t.xQ())if(s.fQ()===this)return s;const s=this.eU().iU();return s.length?s[0]:null}tU(t){const s=this.eU().iU();return s.length>0?s[t.GQ()%s.length]:null}*dCt(t,s){const i=this.eU().iU(),e=i.length,r=s.eU(),n=s.eU().iU(),h=n.length;let o=t.GQ();!s.w1()&&r.Cpt()||(o=n.indexOf(t));const a=Math.ceil(e/h),l=e%h;let u=0,c=0;0===l||o<l?(u=o*a,c=a):(u=l*a+(o-l)*(a-1),c=a-1);for(let t=u,s=u+c;t<s;++t)yield i[t]}dxt(t){this.BNt?.dxt(t)}dSt(){if(!this.VDt||this.NDt)return;this.q5();const t=this.eU(),s=t.Opt(),i=t.Cpt(),e=this.Pc.Lyt(),r=e&&e.dP()&&e.dP().Wpt();for(const e of this.YDt.vU()){if(e===this)continue;e.q5();const n=e.eU();if(n.Lpt(i),!i){const i=n.Opt();sw.wh(i);for(const t of s)i.push(e.iLt(t.GQ()));if(r){const s=t.Rpt(),i=n.Rpt();sw.wh(i);for(const t of s)i.push(e.iLt(t.GQ()))}}}}Mxt(t,s){for(const i of this.f5().vU()){const e=i.eU();t?sw.Mh(e.Rpt(),s):sw.Mh(e.Opt(),s)}}eLt(){return this.RDt}rLt(t){this.jDt=!!t}nLt(){if(this.jDt&&this.KGt){for(const t of this.f$)t.OF().hLt();for(const t of this.Pc.sLt())t.fQ()===this&&t.OF().hLt();this.jDt=!1}}oLt(t,s,i){if(s){const i=this.lAt.get(s);i&&(i.delete(t),0===i.size&&this.lAt.delete(s))}if(i){let s=this.lAt.get(i);s||(s=new Set,this.lAt.set(i,s)),s.add(t)}}*aLt(){if(this.w1()){const t=new Set;for(const s of this.PDt)for(const i of s.aLt())t.add(i);yield*t.values()}else for(const t of this.lAt.keys())t.Yr()||(yield t)}oxt(){return this.Ovt||(this.Ovt=new Map),this.Ovt}axt(){return this.Rvt||(this.Rvt=new Map),this.Rvt}lLt(){return this.OAt(sw.yut.SEt)}uLt(){return this.OAt(sw.yut.TEt)}cLt(){return this.OAt(sw.yut.fLt)}s1(){return this.OAt(sw.yut.dLt)}i4(){const t={instances:this.f$.map(t=>t.ov())};return this.Ovt&&this.Ovt.size&&(t.ex=sw.Mo(this.Ovt)),t}e4(t,s){this.Ovt&&(this.Ovt.clear(),this.Ovt=null);const i=t.ex;i&&(this.Ovt=sw.wo(i));const e=this.f$,r=t.instances;for(let t=0,s=Math.min(e.length,r.length);t<s;++t)e[t].av(r[t]);for(let t=r.length,s=e.length;t<s;++t)this.Pc.MQ(e[t]);for(let t=e.length,i=r.length;t<i;++t){const i=r[t];let e=null;if(this.bB()&&(e=this.Pc.uF().i5(i.w.l),!e))continue;const n=this.Pc.i1(this.iAt||this,e,!1,0,0,!0);n.av(i),s&&s.add(n)}this.gAt=r,this.$At()}pLt(){return this.gAt}mLt(){this.gAt=null}yLt(){for(let t=0,s=this.f$;t<s;++t)this.f$[t].yLt()}PB(){return this.dAt}eP(){return this.B0}gLt(){return this.pAt}oU(t){this.pAt=t}GK(t){const s=this.Pc,i=s.iJ()&&!s.oP().fU();i&&iw.S6(),this.B0.dispatchEvent(t),i&&iw.T6()}}}{const nw=self.Cs;nw.MLt=class extends nw.Wr{constructor(t,s){super(),this.Pc=t,this.wLt=s;for(const t of this.wLt)t.wAt(this)}Vr(){this.Pc=null}oz(){return this.Pc}c5(){return this.wLt}vU(){return this.wLt}X5(){return this.wLt.some(t=>t.bB())}}}{const hw=self.Cs,ow=self.eJ,aw=(self.cQ,hw.pB),lw=[];let uw=0;const cw=new WeakMap,fw=new WeakMap;hw.Instance=class extends hw.Wr{constructor(t){if(hw.pB!==aw)throw new Error("invalid addon manager");super(),this.Pc=t.runtime,this.bLt=t.objectType,this.Cit=null,this.SLt=null,this.TLt=null,this.vLt=0,this.xLt=t.uid,this.ILt=uw++,this.Txt=0,this.CLt=null;const s=hw.Rh(t.tags);s.length>0&&(this.CLt=new Set(s)),this.GLt=lw,this.NLt=lw;const i=this.bLt.FAt();i.length>0&&(this.NLt=i.map((t,s)=>hw.Jr(hw._Lt,{runtime:this.Pc,lY:t,fY:this,index:s}))),this.ELt=this.bLt.vQ()?[]:null,this.DLt=-1,this.ODt=null;const e=this.JB();if(e.wT()&&(this.Txt|=4),e.bB())if(this.Cit=hw.Jr(hw.ALt,this,t.TJ),t.LLt)this.Cit.OLt(t.LLt);else{this.Cit.RLt();const[t,s]=this.bLt.KAt();this.Cit.FE(t,s),this.fQ().zAt()&&this.Cit.SJ().kLt()}t.jLt?this.PLt(t.jLt):this.FLt()}Vr(){if(this.TLt&&(this.TLt.gQ(),this.TLt=null),this.NLt.length>0){for(const t of this.NLt)t.Vr();hw.wh(this.NLt)}this.SLt&&(this.SLt.Vr(),this.SLt=null);const t=cw.get(this);t&&(t.clear(),cw.delete(this));const s=fw.get(this);s&&(s.clear(),fw.delete(this)),this.ELt&&hw.wh(this.ELt),this.ODt&&(this.ODt.Vr(),this.ODt=null),this.CLt&&this.CLt.clear(),this.CLt=null,this.Pc=null,this.bLt=null,this.GLt.length>0&&hw.wh(this.GLt),this.Cit&&(this.Cit.Vr(),this.Cit=null)}PLt(t){t.length>0&&(this.GLt=[],hw.xh(this.GLt,t))}FLt(){const t=this.bLt.vAt();if(0===t)return;this.GLt=[];const s=[0,0,""];for(let i=0;i<t;++i)this.GLt.push(s[this.bLt.tet(i)])}_At(t,s){if(this.SLt)throw new Error("already got sdk instance");for(let t=0,i=this.NLt.length;t<i;++t)this.NLt[t]._At(s?s[t]:null);if(this.JB().txt()<2){if(this.SLt=hw.Jr(this.bLt.LAt(),this,t),!(this.SLt instanceof hw.FNt))throw new Error("sdk type must derive from SDKInstanceBase");!this.JB().bB()&&this.bLt.gLt()&&this.EF()}else{const s=this.JB().bNt();this.zLt(s.Instance,t)}}sY(){return this.SLt??this.TLt}OF(){return this.Cit}oz(){return this.Pc}zP(){return this.DLt}EQ(){const t=this.DLt;return-1===t?this.oz().zP():t}BP(t){((t=+t)<0||!isFinite(t))&&(t=0),this.DLt=t,this.fQ().zAt()&&this.Pc.BLt(this,!0)}AQ(){this.DLt=-1,this.fQ().zAt()&&this.Pc.BLt(this,!1)}W3(){return this.Pc.ULt(this)}Mf(){return this.ODt||(this.ODt=hw.Jr(hw.Event.Mf)),this.ODt}Qv(t){this.SLt?this.SLt.Qv(t):this.TLt.tq(this.Pc.IF().xF())}wNt(t){this.SLt.wNt(t)}WLt(){this.Txt|=2}QLt(){return!!(2&this.Txt)}JLt(){this.Txt|=1}Mq(){return!!(1&this.Txt)}wT(){return!!(4&this.Txt)||(this.SLt?this.SLt.wT():this.TLt.sT())}VLt(){this.Txt|=32}L3(){return!!(32&this.Txt)}YLt(){return!!(8&this.Txt)}HLt(t){t?this.Txt|=8:this.Txt&=-9}qLt(){return!!(16&this.Txt)}ZLt(t){t?this.Txt|=16:this.Txt&=-17}XLt(){return!!(64&this.Txt)}KLt(t){t?this.Txt|=64:this.Txt&=-65}$Lt(t,s){t<<=16,s?this.Txt|=t:this.Txt&=~t}tOt(t){return!!(this.Txt&t<<16)}S_t(){return this.SLt?this.SLt.S_t():null}T_t(){return this.SLt?this.SLt.T_t():null}v_t(){return this.SLt?this.SLt.v_t():null}x_t(){return this.SLt?this.SLt.x_t():null}C_t(){return!!this.SLt&&this.SLt.C_t()}dIt(t){return this.SLt?this.SLt.dIt(t):[this.TLt.x,this.TLt.y,this.TLt.RJ]}fQ(){return this.bLt}D3(){return this.SLt?this.SLt.D3():this.TLt.sq()}aCt(t){return t.w1()?t.xU(this.fQ()):this.fQ()===t}sOt(t,s,i){const e=(s,i)=>{const e=i||s.fQ(),r=t.get(e);r?r.add(s):t.set(e,new Set([s]))};if(e(this,s),this.vQ())for(const t of this.xQ())e(t);if(i)for(const t of this.dV())e(t)}iOt(){if(!this.JB().EB())throw new Error("object does not support scene graph")}MV(){return null!==this.nV()}nV(){const t=this.OF();if(!t)return null;const s=t.nV();return s?s.GH():null}oV(){const t=this.OF();if(!t)return null;const s=t.oV();return s?s.GH():null}*aV(){const t=this.OF();if(t)for(const s of t.aV())yield s.GH()}eOt(t){if(!t)return!1;for(const s of this.children())if(s===t)return!0;return!1}h4(){const t=this.OF();return!!t&&t.h4()}rOt(t){const s=this.OF();if(!s)return[];const i=t._c();return s.h6().map(t=>t.GH()).filter(t=>t.fQ()._c()===i)}h6(){const t=this.OF();return t?t.h6().map(t=>t.GH()):[]}*children(){const t=this.OF();if(t)for(const s of t.children())yield s.GH()}*dV(){const t=this.OF();if(t)for(const s of t.dV())yield s.GH()}uV(){const t=this.OF();return t?t.uV():0}nOt(){return[...this.aV()].length}fCt(){const t=this.OF();return t?t.fCt():0}fV(t){const s=this.OF();if(!s)return null;const i=s.fV(t);return i?i.GH():null}hOt(){const t=this.OF();if(!t)return NaN;const s=t.nV();return s?s.oOt(t):NaN}aOt(t){for(const s of this.OF().h6())if(s.GH().IQ()===t)return!0;return!1}mV(t,s){this.iOt(),t.iOt(),this.OF().mV(t.OF(),s||{})}yV(t){const s=this.OF();s&&s.yV(t.OF())}jV(){const t=this.OF();return!!t&&t.jV()}P5(){const t=this.OF();if(!t)return;const s=t.lOt();if(s)for(const t of s){const s=this.Pc._F(t[2]);if(s){const i=t[3];this.mV(s,{bV:!!(1&i),TV:!!(i>>1&1),xV:!!(i>>2&1),CV:!!(i>>3&1),NV:!!(i>>4&1),kV:!!(i>>5&1),EV:!!(i>>6&1),AV:!!(i>>7&1),OV:!!(i>>8&1)})}}}F5(t,s){const i=t.get(this);if(i)for(const t of i.sceneGraphJson.children){const i=s.get(t.index);if(!i)continue;const e=t.flags;this.mV(i,{bV:!!(1&e),TV:!!(e>>1&1),xV:!!(e>>2&1),CV:!!(e>>3&1),NV:!!(e>>4&1),kV:!!(e>>5&1),EV:!!(e>>6&1),AV:!!(e>>7&1),OV:!!(e>>8&1)})}}_Q(){const t=this.Pc.uOt();return t?t.bct(this):""}vQ(){return null!==this.ELt}cOt(){hw.wh(this.ELt)}H5(t){this.ELt.push(t)}SQ(){return this.ELt}fOt(t){return!!this.dOt(t)}dOt(t){const s=this.xQ();if(null===s||0===s.length)return!1;for(const i of s)if(i.fQ()===t)return i;return null}xQ(){return this.ELt}Mwt(){for(const t of this.xQ())t.fQ().eU().kpt(t)}pxt(){for(const t of this.xQ())t.fQ().eU().Dpt(t)}mxt(t){for(const s of this.xQ())s.fQ().eU().Opt()[t]=s}gxt(){for(const t of this.xQ())t.fQ().eU().Apt(t)}yxt(t){for(const s of this.xQ())s.fQ().eU().Rpt()[t]=s}JB(){return this.bLt.JB()}tLt(t){this.vLt=t}GQ(){return this.bLt.q5(),this.vLt}IQ(){return this.xLt}pOt(t){this.xLt=t}mOt(){return this.ILt}yOt(t){t?this.kQ(new Set(t)):this.CLt=null}kQ(t){if(0===t.size)this.CLt=null;else{this.CLt?this.CLt.clear():this.CLt=new Set;for(const s of t)this.CLt.add(s)}}OQ(){return this.CLt??new Set}jCt(){return Array.from(this.OQ()).join(" ")}zCt(t){t=Math.floor(t);for(const s of this.OQ()){if(0===t)return s;--t}return""}Ant(){return this.NLt}gOt(t){if(!t)return null;for(const s of this.NLt)if(s.aY()instanceof t)return s;return null}MOt(t){if(!t)return null;const s=this.gOt(t);return s?s.sY():null}Dnt(t){const s=this.NLt;for(let i=0,e=s.length;i<e;++i)if(s[i].cY().G1()===t)return i;return-1}wOt(){return this.GLt}jAt(){return this.bLt.jAt()}bOt(){return this.GLt.length}lot(t){t|=0;const s=this.GLt;if(t<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}LTt(t){return this.GLt[t]}SOt(t){const s=this.GLt[t];return 0===this.bLt.tet(t)?!!s:s}uot(t,s){t|=0;const i=this.GLt;if(t<0||t>=i.length)throw new RangeError("invalid instance variable");switch(this.bLt.tet(t)){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}tat(t,s){if(0===s)return;t|=0;const i=this.GLt;if(t<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}oxt(){let t=cw.get(this);return t||(t=new Map,cw.set(this,t),t)}axt(){let t=fw.get(this);return t||(t=new Map,fw.set(this,t),t)}TOt(t){const s=this.fQ();if(s.eP().vf(t))return!0;for(const i of s.yU())if(i.eP().vf(t))return!0;return!!this.Pc.eP().vf(t)}cU(t=void 0){const s=t??new Set;if(s.has(this))return;s.add(this);const i=this.OF();if(i&&i.h4())for(const t of this.dV())if(s.add(t),t.vQ())for(const i of t.xQ())s.add(i);if(this.vQ())for(const t of this.xQ())t.cU(s);if(!t){for(const t of s.values())t.z5();this.B5()}}vOt(){this.bLt.gLt()&&this.EF();for(const t of this.NLt)t.hEt()}xOt(){this.vOt()}z5(){if(this.vOt(),this.TOt("instancecreate")){const t=this.fQ(),s=new hw.Event("instancecreate");s.fY=this.EF(),t.GK(s);for(const i of t.yU())i.GK(s);this.Pc.GK(s)}this.Pc.HQ(this.JB().rMt().KF.WCt,this,null)}B5(){if(this.JB().EB()){if(this.GK(new hw.Event("hierarchyready")),this.TOt("hierarchyready")){const t=this.fQ(),s=new hw.Event("hierarchyready");s.fY=this.EF(),t.GK(s);for(const i of t.yU())i.GK(s);this.Pc.GK(s)}this.Pc.HQ(this.JB().rMt().KF.nCt,this,null)}}IOt(){this.Pc.HQ(this.JB().rMt().KF.QCt,this,null)}COt(t){if(this.TLt){const s=new hw.Event("destroy");s.GOt=t,this.GK(s)}if(!this.TOt("instancedestroy"))return;const s=this.fQ(),i=new hw.Event("instancedestroy");i.fY=this.EF(),i.GOt=t,s.GK(i);for(const t of s.yU())t.GK(i);this.Pc.GK(i)}NOt(){return this.SLt?this.SLt.a_t():this.TLt.lJ()}ov(t="full",s=null){const i={};"full"===t?i.uid=this.IQ():i.c3=!0;const e=this.OQ();if(e.size>0&&(i.tags=Array.from(e)),"visual-state"!==t){const s=cw.get(this);if(s&&s.size&&(i.ex=hw.Mo(s)),-1!==this.zP()&&(i.mts=this.zP()),this.bLt.vAt()>0){const t={},s=this.bLt.RAt();for(let i=0,e=this.GLt.length;i<e;++i)t[s[i].toString()]=this.GLt[i];i.ivs=t}if(this.NLt.length){const s={};for(const i of this.NLt){const e=i.ov(t);e&&(s[i.cY().G1().toString()]=e)}i.behs=s}}this.Cit&&(i.w=this.Cit.i4(t,s));const r=this.SLt?this.SLt.ov():this.TLt.uJ();return r&&(i.data=r),i}u8(t="full",s=null){this.Cit&&this.Cit.u8(t)}f8(t,s="full",i=null){this.Cit&&this.Cit.f8(t,s,i)}_Ot(t,s="full",i=null){this.Cit&&this.Cit._Ot(t,s,i)}yLt(){this.JB().bB()&&this.Cit.yLt()}av(t,s="full",i=null){if("full"===s)this.xLt=t.uid;else if(!t.c3)return;if(this.yOt(t.tags),"visual-state"!==s){let s=cw.get(this);s&&(s.clear(),cw.delete(this));const i=t.ex;i&&(s=hw.wo(i),cw.set(this,s)),this.DLt=t.hasOwnProperty("mts")?t.mts:-1;const e=t.ivs;if(e)for(const[t,s]of Object.entries(e)){const i=parseInt(t,10),e=this.bLt.kAt(i);if(e<0||e>=this.GLt.length)continue;let r=s;null===r&&(r=NaN),this.GLt[e]=r}}if(this.JB().bB()){const e=t.w;if(e){const t=e.l;if(this.Cit.RF().G1()!==t){const i=this.Cit.RF(),e=i.pF().i5(t);e?(this.Cit.FF(e),i.o1(this,!0),e.e1(this,!0),e.zF(this),this.Cit.vJ()):"full"===s&&this.Pc.MQ(this)}this.Cit.e4(e,s,i)}}if("visual-state"!==s){const i=t.behs;if(i)for(const[t,e]of Object.entries(i)){const i=parseInt(t,10),r=this.Dnt(i);r<0||r>=this.NLt.length||this.NLt[r].av(e,s)}}const e=t.data;e&&(this.SLt?this.SLt.av(e,s):this.TLt.cJ(e))}EOt(t){if(this.Cit.RF().G1()===t)return;const s=this.Cit.RF(),i=s.pF().i5(t);i&&(this.Cit.FF(i),s.o1(this,!0),i.e1(this,!0),i.zF(this),this.Cit.vJ())}EF(){return this.TLt||this.zLt()}f_t(){return!!this.TLt}zLt(t,s){const i=this.Cit?t?self.ZH:self.ZV:t?self.zQ:self.cQ,e=t||this.SLt.bNt(),r=this.bLt.gLt(),n=r||e||i,h=this.JB().txt();if(hw.pB.vNt(this,h),hw.pB.xEt(s),this.TLt=new n,hw.pB.IEt(),hw.pB.xNt(h),e&&!(this.TLt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(r){const t=e||i;if(!(this.TLt instanceof t))throw new TypeError(`setInstanceClass(): class '${r.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.TLt}dQ(t){if(0===this.GLt.length)return;const s={},i=this.bLt.PAt();for(let t=0,e=i.length;t<e;++t)s[i[t]]={configurable:!1,enumerable:!0,get:hw.Instance.prototype.SOt.bind(this,t),set:hw.Instance.prototype.uot.bind(this,t)};const e=Object.create(Object.prototype,s);t.DOt={value:e,writable:!1}}pQ(t){const s=this.NLt;if(0===s.length)return;const i={};for(const t of s)i[t.cY().Wyt()]={value:t.QNt(),writable:!1};const e=Object.create(Object.prototype,i);t.rwt={value:e,writable:!1}}GK(t){if(!this.f_t())return;const s=this.EF();t.fY=s;const i=this.Pc,e=i.iJ()&&!i.oP().fU();e&&ow.S6(),s.dispatchEvent(t),e&&ow.T6()}}}{const dw=self.Cs,pw=new Map;dw.a6=class extends dw.Wr{constructor(t){super(),this.mv=t,this.xwt=null,this.AOt=[],this.LOt=t.Yy(),this.OOt=t.eg(),this.ROt=1,this.kOt=1,this.jOt=0,this.POt=1,this.FOt=t.ML(),this.zOt=null,this.BOt=null,this.UOt=NaN,this.WOt=!1,this.l4=NaN,this.u4=NaN,this.QOt=s=>{if(s.fY!==this.xwt.GH())return;t.oz().Mf().removeEventListener("instancecreate",this.QOt);const i=this.xwt.GH().sY();this.WOt=!!i.yet(),this.l4=this.WOt?i.met():NaN,this.u4=this.WOt?i.wet():NaN}}Vr(){this.xwt=null,this.zOt=null,this.BOt=null,this.UOt=NaN,this.WOt=!1,this.l4=NaN,this.u4=NaN,dw.wh(this.AOt)}JOt(t){if(this.POt=this.mv.ML(),this.FOt=this.POt,this.xwt=t,this.jOt=t?t.LU():0,this.xwt){const t=this.mv.oz();if(this.xwt.GH().JB().txt()<2){const s=this.xwt.GH().sY();s?(this.WOt=!!s.yet(),this.l4=this.WOt?s.met():NaN,this.u4=this.WOt?s.wet():NaN):this.xwt.GH().Mq()||t.Mf().addEventListener("instancecreate",this.QOt)}else this.WOt=!1,this.l4=NaN,this.u4=NaN}else this.WOt=!1,this.l4=NaN,this.u4=NaN}nV(){return this.xwt}h4(){return this.AOt.length>0}h6(){return this.AOt}VOt(){this.h4()&&1!==this.AOt.length&&(this.BOt?this.AOt.sort((t,s)=>{const i=this.BOt.get(t.GH()),e=this.BOt.get(s.GH());return dw.$i(i)&&dw.$i(e)?i-e:0}):this.AOt.sort((t,s)=>{const i=t.Wnt().YOt(),e=s.Wnt().YOt();return dw.$i(i)&&dw.$i(e)?i-e:0}))}YOt(){return this.UOt}HOt(){return this.ROt}qOt(t){this.ROt=t}ZOt(){return this.kOt}XOt(t){this.kOt=t}_ot(){return this.FOt}RIt(){return this.POt}KOt(t){this.POt=t}Unt(){return 0===this.LOt?Number.EPSILON:this.LOt}Ynt(){return 0===this.OOt?Number.EPSILON:this.OOt}$Ot(){if(this.mv.IV()){const t=this.xwt;let s=t.Yy(),i=t.Wnt().Unt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.WOt?1+s/this.l4:s/i}return 1}tRt(){if(this.mv.GV()){const t=this.xwt;let s=t.eg(),i=t.Wnt().Ynt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.WOt?1+s/this.u4:s/i}return 1}sRt(){return 0}iRt(){return{sw:this.LOt,sh:this.OOt,sx:this.ROt,sy:this.kOt,psa:this.jOt,oo:this.POt,so:this.FOt,pi:this.mv.GH().hOt()}}i4(t,s=null){const i=this.iRt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.eRt(t),c:this.rRt(t)})}nRt(t){let s="";return t.SV()&&(s+="x"),t.vV()&&(s+="y"),t.IV()&&(s+="w"),t.GV()&&(s+="h"),t._V()&&(s+="a"),t.DV()&&(s+="z"),t.jV()&&(s+="d"),t.LV()&&(s+="o"),t.RV()&&(s+="v"),s}eRt(t){return this.xwt?!this.xwt.GH()||this.xwt.GH().Mq()?null:this.hRt(this.xwt,this.mv,t):null}rRt(t){return this.AOt.map(s=>this.hRt(s,s,t)).filter(t=>t)}hRt(t,s,i){const e=t.GH();if(e&&e.Mq())return null;const r={};return r.uid=e.IQ(),r.f=this.nRt(s),r.offsets=s.oRt(),r.data=dw.a6.aRt(e),r.oci=e.fQ().Tj(),"state"===i?(r.inst=e.ov("full",{selfOnly:!0}),r.instIndex=NaN):(r.instIndex=e.fQ().iU().indexOf(e),r.inst=null),r}e4(t){this.LOt=t.sw,this.OOt=t.sh,this.ROt=t.sx,this.kOt=t.sy,this.jOt=t.psa,this.POt=t.oo,this.FOt=t.so,this.UOt=dw.$i(t.pi)?t.pi:NaN}lRt(t,s,i,e){if(!t&&!s)if(e?.$Ct){if(this.zOt)for(const t of this.zOt)t.Mq()||t.MV()||t.oz().MQ(t)}else if(this.zOt)for(const t of this.zOt)if(i.c&&i.c.length){if(!i.c.some(s=>s.uid===t.IQ()))continue;t.Mq()||t.MV()||t.oz().MQ(t)}this.zOt=t,this.BOt=s}uRt(t){const s=this.mv.oz();return pw.has(t)?pw.get(t):s._F(t)}f8(t,s){const i=this.mv,e=i.oz(),r=s?.cRt??new Set;if(t.p&&!this.xwt){const n=t.p.uid,h=this.uRt(n);if(h){const n=h.OF();h.eOt(i.GH())?this.xwt=n:(h.aOt(i.GH().IQ())?(e.MQ(i.GH()),e.fRt(i.GH().IQ()),pw.delete(i.GH().IQ())):h.mV(i.GH(),this.dRt(t.p.f)),r.has(i)||(i.pRt(t.p.offsets),this.mRt(h,t.p,s),this.yRt(h,h.IQ(),i.oz(),s)),r.add(i),h.OF().Wnt().VOt())}else if(dw.$i(t.p.oci)){const r=e.aU(e.Y0(t.p.oci),i.RF(),0,0,!0);if(r){const n=this.gRt(t.p,e);n&&r.av(n);const h=r.OF(),o=!!s?.$Ct;h.RF().lU(r,!1,o),r.mV(i.GH(),this.dRt(t.p.f)),pw.set(r.IQ(),r),this.yRt(r,r.IQ(),e,s),r.OF().Wnt().VOt()}}}const n=[];for(const s of t.c){const t=s.uid,i=this.uRt(t);i&&n.push(i)}let h=0;for(const o of t.c){const a=o.uid,l=this.uRt(a);if(l){if(this.zOt){if(this.zOt.includes(l)){const e=l;if(e.fQ()!==l.fQ()){h++;continue}if(e.Mq()){h++;continue}const o=t.c[h];if(!s?.$Ct&&this.MRt(e,n,i)){if(i.GH().fV(h)){const n=e.fQ().Tj(),a=o.oci,l=i.GH().fV(h).fQ().Tj();if(n!==a||a!==l){this.wRt(t.c,i,r,s);break}this.bRt(h,o,i,r,s)}else this.bRt(h,o,i,r,s);h++;continue}if(e.MV()&&e.nV()!==i.GH()){const t=this.SRt(o,s);this.TRt(t,o,r,s),h++;continue}this.TRt(e.OF(),o,r,s,!0),h++;continue}if(this.zOt[h]){const e=this.zOt[h];if(e.fQ()!==l.fQ()){h++;continue}if(e.Mq()){h++;continue}const o=t.c[h];if(!s?.$Ct&&this.MRt(e,n,i)){if(i.GH().fV(h)){const n=e.fQ().Tj(),a=o.oci,l=i.GH().fV(h).fQ().Tj();if(n!==a||a!==l){this.wRt(t.c,i,r,s);break}this.bRt(h,o,i,r,s)}else this.bRt(h,o,i,r,s);h++;continue}if(e.MV()&&e.nV()!==i.GH()){const t=this.SRt(o,s);this.TRt(t,o,r,s),h++;continue}this.TRt(e.OF(),o,r,s,!0),h++;continue}}const e=l.fQ();if(this.vRt(n,e)===i.GH().rOt(e).length){for(const t of i.GH().h6()){if(t.fQ()!==e)continue;const i=t.OF();if(i&&!r.has(i)){r.add(i),i.pRt(o.offsets),this.mRt(t,o,s);break}}h++;continue}if(l.MV()&&l.nV()!==i.GH()){const t=this.SRt(o,s);this.TRt(t,o,r,s),h++;continue}this.TRt(l.OF(),o,r,s)}else if(this.zOt&&this.zOt[h]){const a=this.zOt[h],l=e.Y0(this.xRt(o));if(a.fQ()!==l){h++;continue}if(a.Mq()){h++;continue}const u=t.c[h];if(!s?.$Ct&&this.MRt(a,n,i)){if(i.GH().fV(h)){const e=a.fQ().Tj(),n=u.oci,o=i.GH().fV(h).fQ().Tj();if(e!==n||n!==o){this.wRt(t.c,i,r,s);break}this.bRt(h,u,i,r,s)}else this.bRt(h,u,i,r,s);h++;continue}if(a.MV()&&a.nV()!==i.GH()){const t=this.SRt(u,s);this.TRt(t,u,r,s),h++;continue}this.TRt(a.OF(),u,r,s)}else{const t=this.SRt(o,s);this.TRt(t,o,r,s)}h++}}wRt(t,s,i,e){const r=s.oz();for(const t of s.GH().children())t&&!t.Mq()&&(r.MQ(t),r.fRt(t.IQ()),pw.delete(t.IQ()));this.zOt&&(this.zOt=[]),this.BOt&&(this.BOt=new WeakMap),Object.assign({},e,{assignZIndex:!1});for(const s of t){const t=this.SRt(s,e);this.TRt(t,s,i,e),this.zOt.push(t.GH()),this.BOt.set(t.GH(),this.zOt.length-1)}s.Wnt().VOt()}MRt(t,s,i){const e=t.fQ();return this.vRt(s,e)===i.GH().rOt(e).length}bRt(t,s,i,e,r){const n=i.GH().fV(t);if(!n)return;const h=n.OF();h&&(e.has(h)||(h.pRt(s.offsets),this.mRt(n,s,r)),e.add(h))}dRt(t){const s={};return s.bV=t.includes("x"),s.TV=t.includes("y"),s.xV=t.includes("w"),s.CV=t.includes("h"),s.NV=t.includes("a"),s.EV=t.includes("z"),s.kV=t.includes("d"),s.AV=t.includes("o"),s.OV=t.includes("v"),s}xRt(t){return dw.$i(t.oci)?t.oci:t[1]}SRt(t,s){if(!dw.$i(t.oci))return;const i=this.mv,e=i.oz();let r;const n=!s.hasOwnProperty("createHierarchy")||s.createHierarchy;if(r=t.data?e.i1(t.data,i.RF(),!1,0,0,!1,n):e.aU(e.Y0(t.oci),i.RF(),0,0,n),!r)return;const h=this.gRt(t,e);h&&r.av(h);const o=r.OF(),a=!!s?.$Ct;return o.RF().lU(r,!0,a),o}yRt(t,s,i,e){if(this.uRt(s)&&!e?.$Ct){const e=this.uRt(s);e!==t&&i.MQ(e)}i.fRt(s),i.EAt(s,t)}TRt(t,s,i,e,r=!0){const n=this.mv,h=n.mV(t,this.dRt(s.f));h&&r?(i.has(t)||(t.pRt(s.offsets),this.mRt(t.GH(),s,e)),i.add(t)):h&&(pw.set(t.GH().IQ(),t.GH()),this.yRt(t.GH(),s.uid,n.oz(),e)),this.VOt()}mRt(t,s,i){let e=this.gRt(s,this.mv.oz());if(!e)return;const r=!i.hasOwnProperty("clearChildren")||i.clearChildren,n=!i.hasOwnProperty("assignZIndex")||i.assignZIndex,h=t.oz();if(pw.set(t.IQ(),t),e=JSON.parse(JSON.stringify(e)),r&&t.IQ()!==e.uid){for(const s of t.children())s&&!s.Mq()&&(h.MQ(s),h.fRt(s.IQ()),pw.delete(s.IQ()));if(e.w?.sgi&&e.w.sgi.c?.length)for(const s of e.w.sgi.c){const e=Object.assign({},i,{clearChildren:!1,createHierarchy:!1}),r=this.SRt(s,e);pw.set(r.GH().IQ(),r.GH()),t.mV(r.GH(),this.dRt(s.f)),r.pRt(s.offsets),this.mRt(r.GH(),s,e)}}const o=e.w?.zi,a=e.w?.l;e.w=null,t.av(e),i?.$Ct||(dw.$i(o)&&n&&t.OF().f1(o),dw.$i(a)&&t.EOt(a)),this.yRt(t,e.uid,h,i)}vRt(t,s){return t.filter(t=>t.fQ()._c()===s._c()).length}gRt(t,s){if(dw.$i(t.instIndex)){const i=s.Y0(t.oci).pLt();return i?i[t.instIndex]:null}return dw.ae(t.inst)?JSON.parse(t.inst):t.inst?t.inst:void 0}static aRt(t){let s=t.OF().RF().K0(t.IQ());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const s of[...t.h6()]){const t=s.OF();i.push([t.pF().G1(),t.RF().Tj(),s.IQ(),dw.a6.o6(t),s.fQ().vQ()?1:0,t.kF(),dw.a6.aRt(s)])}return dw.ve(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=dw.a6.IRt(),s[0][14][1]=i,s[0][14][2]=t.OF().kF()),s}static o6(t){let s=0;return s|=Number(t.RV())<<8,s|=Number(t.LV())<<7,s|=Number(t.DV())<<6,s|=Number(t.jV())<<5,s|=Number(t._V())<<4,s|=Number(t.GV())<<3,s|=Number(t.IV())<<2,s|=Number(t.vV())<<1,s|=0|Number(t.SV()),s}static IRt(t){let s=0;return s|=256,s|=128,s|=64,s|=32,s|=16,s|=8,s|=4,s|=2,s|=1,511}static CRt(){pw.clear()}}}{const mw=self.Cs,yw=self.hs,gw=(yw.gs,yw.Ms,mw.Jr(mw.Rect)),Mw=mw.Jr(mw.Nl),ww=mw.Jr(mw.Event,"bboxchange",!1),bw=mw.Jr(mw.vo,0,0,0,0),Sw=mw.Jr(mw.au),Tw=mw.Jr(mw.vo,1,1,1,1),vw=mw.Jr(mw.Rect,0,0,-1,-1),xw=mw.Jr(mw.Rect,0,0,-1,-1),Iw=new Set(["absolute","relative"]),Cw=[];let Gw=!0;const Nw=new WeakMap,_w=new WeakMap;mw.ALt=class extends mw.Wr{constructor(t,s){super(),this.fi=t,this.ppt=t.fQ(),this.Pc=t.oz(),this.GRt=s,this.ppt.oLt(this,null,s),this.NRt=-1,this._Rt=-1,this.Txt=196635,this.ppt.JB().xB()&&(this.Txt|=128),this._a=NaN,this.Ea=NaN,this.AT=NaN,this.ERt=NaN,this.DRt=NaN,this.rI=NaN,this.Go=NaN,this.ARt=NaN,this.LRt=NaN,this.ORt=NaN,this.RRt=NaN,this.kRt=mw.Jr(mw.Rect),this.jRt=mw.Jr(mw.Nl),this.PRt=xw,this.FRt=vw,this.zRt=null,this.BRt=null,this.URt=null,this.DT=Tw,this.WRt=Tw,this.QRt=null,this.JRt=null,this.fi.fQ().zAt()&&(this.JRt=mw.Jr(mw.VRt,this.fi,this)),this.YRt=null,this.zOt=null,this.BOt=null,this.HRt=-1,this.qRt=null}JLt(){this.Txt|=256}Vr(){if(this.ppt.oLt(this,this.GRt,null),this.QRt&&(this.Pc.pT().Eb(this.QRt),this.QRt=null),this.zRt=null,this.BRt&&(this.BRt.ZRt.Vr(),this.BRt=null),this.URt&&(this.URt.clear(),this.URt=null),this.BV(),this.JRt&&this.JRt.Vr(),this.MV()&&this.nV().yV(this),this.h4()){const t=[...this.h6()];for(const s of t)this.yV(s)}this.XRt(),this.KRt(),Nw.delete(this),_w.delete(this),this.fi=null,this.ppt=null,this.Pc=null,this.GRt=null}OLt(t){if(Gw=!1,this.xJ(t[0],t[1]),this.$T(t[2]),this.FE(t[3],t[4]),this.rI=0,this.xB()?this.AU(t[6]):this.Go=0,bw.Ma(t[7]),this.$Rt(bw),this._J(t[8]),this.AJ(t[9]),this.kT(t[10]),this.JRt&&this.JRt.tkt(t[12]),t[14]&&Nw.set(this,{skt:t[14][1],ikt:t[14][2]}),t[15]){const s=t[15];this.FV(s[0],s[1]);const i=this.VV(),e=s[2];for(let t=0,s=e.length;t<s;++t){const s=e[t];for(let e=0,r=s.length;e<r;++e){const r=s[e],n=i.jv(e,t);n.HT(r[0]),n.XT(r[1]),n.$T(r[2]),n.sv(r[3]),n.rv(r[4])}}}if(t[16]){const s=t[16][0],i=t[16][1],e=!!i,r=!e,n=this.Pc.uOt();e&&n&&n.wct(this.GH(),i),r&&n&&n.wct(this.GH(),s)}Gw=!0,this.ekt()}RLt(){this._a=0,this.Ea=0,this.AT=0,this.ERt=0,this.DRt=0,this.rI=0,this.Go=0,this.ARt=0,this.LRt=1,this.ORt=0,this.RRt=0,this.ekt()}oz(){return this.Pc}fQ(){return this.ppt}GH(){return this.fi}rkt(){return this._V()?this.nkt(this.nV().hkt()-this.YRt.sRt()):0}HT(t){if(t=+t,this.SV()){const s=this.YRt,i=t-this.YT(),e=-this.rkt();0===e?this._a+=i/s.$Ot():(this._a+=Math.cos(e)*i/s.$Ot(),this.vV()&&(this.Ea+=Math.sin(e)*i/s.tRt()))}else this._a=t}mot(t,s=!1){t=+t,s?this._a+=t:this.SV()?this.HT(this.YT()+t):this._a+=t}YT(){if(this.SV()){let t=this._a;const s=this.YRt,i=this.nV(),e=this.rkt();return 0===e?t*=s.$Ot():(t=t*s.$Ot()*Math.cos(e),this.vV()&&(t-=this.Ea*s.tRt()*Math.sin(e))),i.YT()+t}return this._a}XT(t){if(t=+t,this.vV()){const s=this.YRt,i=t-this.ZT(),e=-this.rkt();0===e?this.Ea+=i/s.tRt():(this.SV()&&(this._a-=Math.sin(e)*i/s.$Ot()),this.Ea+=Math.cos(e)*i/s.tRt())}else this.Ea=t}yot(t,s=!1){t=+t,s?this.Ea+=t:this.vV()?this.XT(this.ZT()+t):this.Ea+=t}ZT(){if(this.vV()){let t=this.Ea;const s=this.YRt,i=this.nV(),e=this.rkt();return 0===e?t*=s.tRt():(t=t*s.tRt()*Math.cos(e),this.SV()&&(t+=this._a*s.$Ot()*Math.sin(e))),i.ZT()+t}return this.Ea}xJ(t,s){if(t=+t,s=+s,this.okt()){const i=this.SV(),e=this.vV(),r=this.YRt,n=t-this.YT(),h=s-this.ZT(),o=-this.rkt();if(0===o)i?this._a+=n/r.$Ot():this._a=t,e?this.Ea+=h/r.tRt():this.Ea=s;else{const a=Math.sin(o),l=Math.cos(o);i?this._a+=e?(l*n-a*h)/r.$Ot():l*n/r.$Ot():this._a=t,e?this.Ea+=i?(a*n+l*h)/r.tRt():l*h/r.tRt():this.Ea=s}}else this._a=t,this.Ea=s}akt(){return[this.YT(),this.ZT()]}CJ(t,s){t=+t,s=+s,this.okt()?this.xJ(this.YT()+t,this.ZT()+s):(this._a+=t,this.Ea+=s)}cIt(t,s){return this.YT()===t&&this.ZT()===s}$T(t){if(t=+t,this.DV()&&(t-=this.nV().KT()),this.AT===t)return;this.AT=t,this.lkt();const s=this.RF();0!==this.AT&&s.u1(),s.zF(this)}lkt(){if(this.ekt(),this.h4()){const t=this.h6();for(let s=0,i=t.length;s<i;s++){const i=t[s];i.DV()&&i.lkt()}}}Aot(t){this.$T(this.KT()+t)}KT(){return this.DV()?this.nV().KT()+this.AT:this.AT}kJ(){return this.RF().KT()+this.KT()}yet(){return this.GH().JB().txt()<2&&this.GH().sY().yet()}tg(t){if(t=+t,this.IV()){const s=this.Yy();0===s?this.ERt=Number.EPSILON:this.ERt*=t/s}else this.ERt=t;this.ukt()}Ig(t,s){t=+t,s?this.ERt+=t:this.IV()?this.tg(this.Yy()+t):this.ERt+=t,this.ukt()}Yy(){if(this.IV()){const t=this.nV(),s=t.Yy();return t.Wnt().Unt()===Number.EPSILON?(this.Wnt().Unt()+s)*this.ERt:s*this.ERt}return this.ERt}Hy(t){if(t=+t,this.GV()){const s=this.eg();0===s?this.DRt=Number.EPSILON:this.DRt*=t/s}else this.DRt=t;this.ukt()}Tot(t,s){t=+t,s?this.DRt+=t:this.GV()?this.Hy(this.eg()+t):this.DRt+=t,this.ukt()}eg(){if(this.GV()){const t=this.nV(),s=t.eg();return t.Wnt().Ynt()===Number.EPSILON?(this.Wnt().Ynt()+s)*this.DRt:s*this.DRt}return this.DRt}FE(t,s){if(t=+t,s=+s,this.IV()){const s=this.Yy();0===s?this.ERt=Number.EPSILON:this.ERt*=t/s}else this.ERt=t;if(this.GV()){const t=this.eg();0===t?this.DRt=Number.EPSILON:this.DRt*=s/t}else this.DRt=s;this.ukt()}Lu(){return[this.Yy(),this.eg()]}A3(){return this.rI}ckt(t){if(t<0)throw new RangeError("invalid depth");this.rI=t}fkt(){if(this.MV()){const t=this.YRt;return Math.min(t.$Ot(),t.tRt())}return 1}xB(){return!!(128&this.Txt)}AU(t){t=+t,this.xB()&&(this._V()&&(t-=this.nV().LU()),t=mw.Kr(t),this.Go!==t&&(this.Go=t,this.ukt()))}vot(t){0!==(t=+t)&&this.xB()&&(this.Go=mw.Kr(this.Go+t),this.ukt())}ukt(){if(this.Txt|=262144,this.h4()){const t=this.h6();for(let s=0,i=t.length;s<i;s++)t[s].ukt()}}LU(){return this._V()&&this.xB()?this.nkt(mw.Kr(this.nV().hkt()+this.Go)):this.Go}hkt(){return this._V()&&this.xB()?mw.Kr(this.nV().hkt()+this.Go):this.Go}nkt(t){return this.IV()&&this.oV().Yy()<0&&(t=mw.Kr(mw.pn(t,this.oV().LU()+Math.PI))),this.GV()&&this.oV().eg()<0&&(t=mw.pn(t,this.oV().LU())),t}dkt(){const t=this.nV();return!!(this.IV()&&t.Yy()<0)||!!(this.GV()&&t.eg()<0)}pkt(){const t=this.nV();return!!(this.IV()&&t.Yy()<0&&this.GV()&&t.eg()<0)}mkt(){const t=this.Txt;if(!(262144&t))return;const s=this.LU();this.ARt=Math.sin(s),this.LRt=Math.cos(s),this.Txt=-262145&t}yIt(){return this.mkt(),this.ARt}mIt(){return this.mkt(),this.LRt}_J(t){this.ORt=+t}Eot(t){this.ORt+=+t}NJ(){return this.ORt}AJ(t){this.RRt=+t}Dot(t){this.RRt+=+t}DJ(){return this.RRt}$Rt(t){this.DT.equals(t)||(this.DT===Tw?(this.DT=mw.Jr(mw.vo,t),this.WRt=mw.Jr(mw.vo,t),this.WRt.Xo()):t.Yo(1,1,1,1)?(this.DT=Tw,this.WRt=Tw):(this.DT.set(t),this.WRt.set(t),this.WRt.Xo()),this.ekt())}bL(t){if(t=mw.Xr(+t,0,1),this.LV()){if(this.Wnt().RIt()===t)return;this.Wnt().KOt(t),t=this.ML()}else if(this.DT.a===t)return;this.ykt(t)}gkt(){if(!this.h4())return;const t=this.h6();for(let s=0,i=t.length;s<i;s++){const i=t[s];i.ykt(i.ML())}}ykt(t){bw.ko(this.DT),bw.a=t,this.$Rt(bw),this.gkt()}Cot(t){this.LV()?this.bL(this.Wnt().RIt()+t):this.bL(this.ML()+t)}ML(){return this.LV()?this.nV().ML()*this.Wnt().RIt():this.DT.a}VJ(t){this.DT.Jo(t)||(bw.ko(t),bw.a=this.ML(),this.$Rt(bw))}oot(t,s,i){bw._o(t,s,i),this.VJ(bw)}Mkt(t,s,i){0===t&&0===s&&0===i||(bw.ko(this.DT),bw.r+=t,bw.g+=s,bw.b+=i,this.VJ(bw))}JJ(){return this.DT}E0(){return this.WRt}jV(){return!!(512&this.Txt)}wkt(t){this.bkt(512,t)}SV(){return!!(1024&this.Txt)}Skt(t){this.bkt(1024,t)}vV(){return!!(2048&this.Txt)}okt(){return!!(3072&this.Txt)}Tkt(t){this.bkt(2048,t)}IV(){return!!(4096&this.Txt)}vkt(t){this.bkt(4096,t)}GV(){return!!(8192&this.Txt)}xkt(t){this.bkt(8192,t)}_V(){return!!(16384&this.Txt)}Ikt(t){this.bkt(16384,t)}DV(){return!!(32768&this.Txt)}Ckt(t){this.bkt(32768,t)}LV(){return!!(4194304&this.Txt)}Gkt(t){this.bkt(4194304,t)}RV(){return!!(8388608&this.Txt)}Nkt(t){this.bkt(8388608,t)}_kt(){this.Txt&=-12647937}mV(t,s){if(t===this)return!1;if(t.MV())return!1;if(this.Ekt(t))return!1;if(this.Dkt(t))return!1;const i=t.YT(),e=t.ZT(),r=t.Yy(),n=t.eg(),h=t.LU(),o=t.KT(),a=t.ML();t.Akt(this),t.Skt(s.bV),t.Tkt(s.TV),t.vkt(s.xV),t.xkt(s.CV),t.Ikt(s.NV),t.Ckt(s.EV),t.Gkt(s.AV),t.Nkt(s.OV),t.wkt(s.kV);const l=i-this.YT(),u=e-this.ZT(),c=-this.LU(),f=Math.cos(c),d=Math.sin(c);if(s.bV&&(s.NV?t._a=l*f-u*d:t._a=l,s.xV)){const s=this.Yy()/this.YRt.Unt();0!==s&&(t._a/=s)}if(s.TV&&(s.NV?t.Ea=l*d+u*f:t.Ea=u,s.CV)){const s=this.eg()/this.YRt.Ynt();0!==s&&(t.Ea/=s)}if(s.xV){const s=this.Yy();0===s||s===Number.EPSILON?(t.ERt=1,t.YRt.qOt(1)):(t.ERt=r/this.Yy(),t.YRt.qOt(t.ERt))}if(s.CV){const s=this.eg();0===s||s===Number.EPSILON?(t.DRt=1,t.YRt.XOt(1)):(t.DRt=n/this.eg(),t.YRt.XOt(t.DRt))}return s.NV&&(t.Go=h-this.LU()),s.EV&&(t.AT=o-this.KT()),s.AV&&t.YRt.KOt(a),s.OV&&t.gW(this.wW()),this.Lkt(t),this.vJ(),this.gkt(),!0}yV(t){if(t.nV()!==this)return;const s=t.YT(),i=t.ZT(),e=t.Yy(),r=t.eg(),n=t.LU(),h=t.KT(),o=t.ML();t.Akt(null),t._kt(),t.xJ(s,i),t.FE(e,r),t.AU(n),t.$T(h),t.bL(o),this.Okt(t),this.vJ()}Rkt(){return this.HRt}kkt(){this.jkt();const t=[...this.children()];for(const s of t)this.yV(s);const s=this.nV();s&&s.yV(this),this._kt()}jkt(){if(this.Pkt(),!this.zOt){const t=[...this.children()];t.length&&(this.zOt=[],this.BOt=new WeakMap);let s=0;for(const i of t){const t=i.GH();this.zOt.push(t),this.BOt.set(t,s),s++}}const t=this.nV();t&&t.jkt()}Pkt(){if(-1!==this.HRt)return;const t=[...this.aV()];this.HRt=t.length;for(const s of t)s.Pkt();const s=[...this.children()];for(const t of s)t.Pkt()}KRt(){this.zOt&&(this.zOt.length=0),this.zOt=null,this.BOt=null;const t=this.nV();t&&t.KRt(),this.HRt=-1}MV(){return null!==this.nV()}nV(){const t=this.YRt;return null!==t?t.nV():null}oV(){let t=this;for(;t.MV();)t=t.nV();return t}*aV(){let t=this.nV();for(;t;)yield t,t=t.nV()}eOt(t){return this.h6().includes(t)}h4(){const t=this.YRt;return null!==t&&t.h4()}h6(){const t=this.YRt;return null!==t?t.h6():Cw}children(){return this.h6()}*dV(){for(const t of this.children())yield t,yield*t.dV()}uV(){return this.h6().length}fCt(){return[...this.dV()].length}fV(t){const s=this.h6();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}oOt(t){if(!t)return NaN;const s=this.h6();if(!s)return NaN;for(let i=0;i<s.length;i++)if(t===s[i])return i;return NaN}Fkt(t){this.YRt||(this.YRt=mw.Jr(mw.a6,this)),t&&this.YRt.JOt(t)}Wnt(){return this.YRt}XRt(){this.YRt&&(this.YRt.Vr(),this.YRt=null)}Akt(t){t?(t.Fkt(null),this.Fkt(t)):(this.YRt&&this.YRt.JOt(null),this.h4()||this.XRt())}Dkt(t){if(!this.MV())return!1;const s=this.nV();return s===t||s.Dkt(t)}Ekt(t){if(this.eOt(t))return!0;for(const s of this.h6())if(s.Ekt(t))return!0;return!1}Lkt(t){this.YRt.h6().push(t)}Okt(t){const s=this.YRt.h6(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.MV()||this.XRt(),t.h4()||t.XRt()}lOt(){const t=Nw.get(this);return t?t.skt:null}zkt(){const t=Nw.get(this);return t?t.ikt:NaN}n4(){const t=_w.get(this);return mw.$i(t)?t:NaN}Bkt(t){_w.set(this,t)}Ukt(){this.bkt(524288,!0),this.ekt()}ekt(){if(!Gw)return;const t=this.Pc.pT();let s;this.QRt&&t.Eb(this.QRt),s=524288&this.Txt?t.ub()||"<point>":t.ob()||"<default>",this.QRt=t.Cb(s,this.ZW(),this.WRt,this.KT(),this.Wkt()?1:0,0)}z3(){return this.QRt}D1(){return this.DT===Tw}kT(t){if((t|=0)<0||t>31)throw new RangeError("invalid blend mode");this.ZW()!==t&&(this.Txt=-2080374785&this.Txt|t<<26,this.ekt())}ZW(){return(2080374784&this.Txt)>>26}FF(t,s){const i=s&&this.GRt!==t;i&&this.a1(),this.ppt.oLt(this,this.GRt,t),this.GRt=t,i&&this.Qkt(),0!==this.KT()&&this.GRt.u1()}RF(){return this.GRt}pF(){return this.RF().pF()}f1(t){this.NRt=0|t}kF(){return this.GRt.N2(),this.NRt}A2(t){this._Rt=0|t}cq(){return this.GRt.E2(),this._Rt}l$(){return this.NRt}bkt(t,s){s?this.Txt|=t:this.Txt&=~t}wW(){return!!(1&this.Txt)}gW(t){if(this.bkt(1,t),this.h4())for(const s of this.h6())s.RV()&&s.gW(t)}iV(){return!!(8&this.Txt)}eV(t){t=!!t,this.iV()!==t&&(this.bkt(8,t),t?this.vJ():this.Jkt())}Vkt(t,s){if(this.bkt(32,t),this.URt&&this.URt.clear(),s.trim()){this.URt||(this.URt=new Set);for(const t of s.split(" "))t&&this.URt.add(t.toLowerCase())}else this.URt=null}Ykt(t){const s=!!(32&this.Txt),i=this.URt;if(!t||!i)return!s;for(const e of i)if(t.has(e))return s;return!s}vJ(){if(this.Txt|=65554,this.ppt.rLt(!0),this.Pc.BF(),this.GRt.W0()&&(this.PJ(this.kRt,this.jRt,!0),this.Txt&=-3,this.Qkt()),4&this.Txt&&this.fi.Mf().dispatchEvent(ww),null!==this.YRt){const t=this.YRt.h6();for(let s=0,i=t.length;s<i;++s)t[s].vJ()}}PJ(t,s,i){const e=this.YT(),r=this.ZT(),n=this.Yy(),h=this.eg(),o=this.LU();t.Qa(e-this.ORt*n,r-this.RRt*h,n,h),i&&this.JV()&&this.Hkt(t),0===o?s.ql(t):(t.offset(-e,-r),s.Xl(t,this.yIt(),this.mIt()),s.offset(e,r),s.Kl(t)),t.normalize()}qkt(){const t=this.Txt;2&t&&(this.PJ(this.kRt,this.jRt,!0),this.Txt=-3&t)}FJ(){return this.qkt(),this.kRt}BJ(){return this.qkt(),this.jRt}Zkt(t){const s=this.YT(),i=this.ZT(),e=Math.round(s)-s,r=Math.round(i)-i;return 0===e&&0===r?t:(Mw.m(t),Mw.offset(e,r),Mw)}Xkt(t){this.kRt.m(t),this.jRt.ql(this.kRt),this.Txt&=-3,this.hLt(),this.Qkt()}Kkt(t){this.bkt(4,t)}$kt(){return!!(4&this.Txt)}G3(t,s,i){return s&&0!==this.A3()?this.E3(this.RF()._3()):0===this.KT()||i?t.Tl(this.FJ()):this.tjt()}tjt(){const t=this.RF(),s=this.kJ();return!(s>=t.q1())&&(t.Y1(s,gw),gw.Tl(this.FJ()))}E3(t){const s=this.FJ(),i=s.Ka(),e=s.tl(),r=s.$a(),n=s.sl(),h=this.kJ(),o=h+this.A3();return t.YM(i,r,h,e,n,o)}WJ(){const t=this.RF();if(t.l2())return this.E3(t._3());{const s=t.pF();return this.G3(t.tQ(),s.C3(),s.aW())}}j3(t){this.bkt(1048576,t)}R3(t){this.bkt(2097152,t)}sjt(){return!!(1048576&this.Txt)}ijt(){return!!(2097152&this.Txt)}ejt(t){(t=!!t)!==this.Wkt()&&(this.bkt(16777216,t),this.ekt())}Wkt(){return!!(16777216&this.Txt)}rjt(t){this.zRt=t,this.njt(),this.JV()&&(this.qRt.hjt=null)}ojt(){return this.zRt}ajt(){return null!==this.zRt||this.JV()}ljt(){return this.ujt(this.Yy(),this.eg(),this.LU(),this.yIt(),this.mIt())}cjt(t,s,i){let e=0,r=1;return 0!==i&&(e=Math.sin(i),r=Math.cos(i)),this.ujt(t,s,i,e,r)}ujt(t,s,i,e,r){let n=this.BRt;null===n&&(n={ZRt:mw.Jr(mw.au),width:NaN,height:NaN,angle:NaN},this.BRt=n);const h=n.ZRt;if(n.width===t&&n.height===s&&n.angle===i)return h;const o=this.zRt;if(this.JV()){const i=this.NJ(),n=this.DJ(),a=this.VV();let l=this.qRt.hjt;l||(o?(Sw.m(o),Sw.offset(i,n)):Sw.yu(),l=a.Yv(Sw),this.qRt.hjt=l),a.Hv(l,h),h.offset(-i,-n),h.bu(t,s,e,r)}else o?(h.m(o),h.bu(t,s,e,r)):h.wu(this.BJ(),-this.YT(),-this.ZT());return n.width=t,n.height=s,n.angle=i,h}njt(){this.fjt(!0);const t=this.BRt;null!==t&&(t.width=NaN)}FV(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.GH().JB().AB())throw new Error("object does not support mesh");this.BV(),this.qRt={djt:mw.Jr(mw.RM.fv,t,s),pjt:mw.Jr(mw.RM.fv,t,s),hjt:null}}JV(){return null!==this.qRt}VV(){if(!this.JV())throw new Error("no mesh");return this.qRt.djt}mjt(){if(!this.JV())throw new Error("no mesh");return this.qRt.pjt}yjt(t){this.bkt(65536,t)}gjt(){return!!(65536&this.Txt)}fjt(t){this.bkt(131072,t)}Mjt(){return!!(131072&this.Txt)}Hkt(t){const s=this.qRt.djt,i=Math.min(s.Dv(),0),e=Math.min(s.Av(),0),r=Math.max(s.Lv(),1),n=Math.max(s.Ov(),1),h=t.width(),o=t.height();t.offsetLeft(i*h),t.offsetTop(e*o),t.al((r-1)*h),t.ll((n-1)*o),this.rI=s.Rv()}BV(){this.qRt&&(this.qRt.djt.Vr(),this.qRt.pjt.Vr(),this.qRt=null,this.njt())}WV(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!Iw.has(e))throw new Error("invalid mode");const r="relative"===e;let n=i.x,h=i.y;const o=i.BW;let a="number"==typeof i.YV?i.YV:r?0:-1,l="number"==typeof i.HV?i.HV:r?0:-1;if(!this.JV())return!1;const u=this.VV(),c=u.jv(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.KT()!==o&&(c.$T(o),f=!0),r&&(n+=t/(u.Cv()-1),h+=s/(u.Gv()-1)),-1!==a||r?(r&&(a+=t/(u.Cv()-1)),a=mw.Xr(a,0,1)):a=c.tv(),-1!==l||r?(r&&(l+=s/(u.Gv()-1)),l=mw.Xr(l,0,1)):l=c.ev(),c.YT()===n&&c.ZT()===h&&c.tv()===a&&c.ev()===l?f:(c.HT(n),c.XT(h),c.sv(a),c.rv(l),this.njt(),!0)}QLt(){return this.fi.QLt()}rV(t,s){return!!this.FJ().xl(t,s)&&!!this.BJ().xl(t,s)&&(this.QLt()?this.fi.sY().N_t(t,s):!this.ajt()||this.ljt().xl(t-this.YT(),s-this.ZT()))}wjt(){return!!(16&this.Txt)}hLt(){if(!this.wjt()||!this.iV()||256&this.Txt)return;const t=this.FJ(),s=this.ppt.eLt(),i=this.PRt;if(gw.set(s.C$(t.Ka()),s.G$(t.$a()),s.C$(t.tl()),s.G$(t.sl())),i.equals(gw))return;const e=this.fi;i===xw?(s.N$(e,null,gw),this.PRt=mw.Jr(mw.Rect,gw)):(s.N$(e,i,gw),i.m(gw)),this.Txt&=-17}bjt(){this.Txt|=16}Jkt(){const t=this.PRt;t!==xw&&(this.ppt.eLt().N$(this.fi,t,null),this.PRt=xw)}Qkt(){const t=this.RF();if(!t.W0()||256&this.Txt)return;const s=t.L1(),i=this.FJ(),e=this.FRt;if(gw.set(s.C$(i.Ka()),s.G$(i.$a()),s.C$(i.tl()),s.G$(i.sl())),e.equals(gw))return;const r=this.fi;e===vw?(s.N$(r,null,gw),this.FRt=mw.Jr(mw.Rect,gw)):(s.N$(r,e,gw),e.m(gw)),t.O1()}a1(){const t=this.FRt;t!==vw&&(this.RF().L1().N$(this.fi,t,null),this.FRt=vw)}_2(){return this.FRt}HJ(){const t=this.fi,s=this.GRt,i=s.PF();i.length&&i.at(-1)===t||(s.o1(t,!1),s.e1(t,!1),this.Pc.BF())}ZJ(){const t=this.fi,s=this.GRt,i=s.PF();i.length&&i[0]===t||(s.o1(t,!1),s.h1(t,!1),this.Pc.BF())}KJ(t){const s=this.fi,i=this.GRt;if(i.pF()!==t.pF())throw new Error("layer from different layout");t!==i&&(i.o1(s,!0),this.FF(t),t.e1(s,!0),this.Pc.BF())}tV(t,s){const i=this.fi;let e=!1;const r=this.GRt;if(t.IQ()===i.IQ())return;const n=t.OF();if(!n)throw new Error("expected world instance");const h=n.RF();r.Tj()!==h.Tj()&&(r.o1(i,!0),this.FF(h),h.e1(i,!0),e=!0);const o=h.R2(i,t,!!s);(e||o)&&this.Pc.BF()}SJ(){return this.JRt}Sjt(t){this.bkt(64,t)}W2(){return!!(64&this.Txt)}i4(t,s=null){const i={x:this.YT(),y:this.ZT(),w:this.Yy(),h:this.eg(),l:this.RF().G1(),zi:this.kF()};0!==this.KT()&&(i.ze=this.KT()),0!==this.LU()&&(i.a=this.hkt()),this.D1()||(i.c=this.DT.toJSON()),.5!==this.NJ()&&(i.oX=this.NJ()),.5!==this.DJ()&&(i.oY=this.DJ()),0!==this.ZW()&&(i.bm=this.ZW()),this.wW()||(i.v=this.wW()),this.iV()||(i.ce=this.iV()),this.$kt()&&(i.be=this.$kt()),this.JRt&&(i.fx=this.JRt.i4());const e=!!(32&this.Txt);return e&&(i.sfi=e),this.URt&&(i.sft=[...this.URt].join(" ")),this.YRt&&"visual-state"!==t&&(i.sgi=this.YRt.i4(t,s),Nw.has(this)&&(i.sgcd=Nw.get(this).skt,i.sgzid=Nw.get(this).ikt)),this.JV()&&(i.mesh=this.VV().ov()),i}oRt(){return{x:this._a,y:this.Ea,z:this.AT,w:this.ERt,h:this.DRt,a:this.Go,sgi:this.Wnt()?this.Wnt().iRt():null}}pRt(t){t&&(this._a=t.x,this.Ea=t.y,this.AT=t.z,this.ERt=t.w,this.DRt=t.h,this.Go=t.a,t.sgi&&this.Wnt()&&this.Wnt().e4(t.sgi),this.ukt(),this.vJ())}yLt(){this.KRt(),this.kkt(),this.Fkt(null),this.YRt&&this.YRt.lRt(this.zOt,this.BOt)}u8(t){"visual-state"!==t&&this.kkt()}f8(t,s="full",i=null){if(t.hasOwnProperty("sgi")&&"visual-state"!==s){if(256&this.Txt)return;this.YRt.f8(t.sgi,i)}}_Ot(t,s="full",i=null){if("visual-state"!==s)if(256&this.Txt)this.KRt();else{if(t.hasOwnProperty("sgi"))this.YRt.lRt(null,null,t.sgi,i);else if(i?.$Ct&&this.zOt)for(const t of this.zOt)t.Mq()||this.Pc.MQ(t);this.KRt(),this.vJ()}}e4(t,s,i=null){if(Gw=!1,this.HT(t.x),this.XT(t.y),this.tg(t.w),this.Hy(t.h),this.f1(t.zi),this.$T(t.hasOwnProperty("ze")?t.ze:0),this.AU(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?bw.Ma(t.c):t.hasOwnProperty("o")?(bw.ko(this.DT),bw.a=t.o):bw.No(1,1,1,1),this.$Rt(bw),this._J(t.hasOwnProperty("oX")?t.oX:.5),this.AJ(t.hasOwnProperty("oY")?t.oY:.5),this.kT(t.hasOwnProperty("bm")?t.bm:0),this.gW(!t.hasOwnProperty("v")||t.v),this.eV(!t.hasOwnProperty("ce")||t.ce),this.Kkt(!!t.hasOwnProperty("be")&&t.be),this.Vkt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.JRt&&t.hasOwnProperty("fx")&&this.JRt.e4(t.fx),t.hasOwnProperty("sgi")&&"visual-state"!==s){this.Fkt(null);const s=this.YRt,i=t.sgi;s.e4(i),s.lRt(this.zOt,this.BOt),this.Tjt(t.sgcd,t.sgzid)}if(t.hasOwnProperty("mesh")){const s=t.mesh;this.FV(s.cols,s.rows),this.VV().av(s)}else this.BV();this.vJ(),Gw=!0,this.ekt(),"visual-state"!==s&&this.Pc.vjt(this.GH(),t)}Tjt(t,s){t&&mw.$i(s)&&Nw.set(this,{skt:t,ikt:s})}}}{const Ew=self.Cs;Ew.qDt=class extends Ew.Wr{constructor(t,s){super();const i=t.oz(),e=i.TSt(s[1]);i.xjt().vEt(e),this.Pc=i,this.ppt=t,this.iEt=Ew.pB.yY(e),this.BNt=null,this.Ijt=null,this.CDt=e.Instance,this.V$=s[2],this.qr=s[0],this.hTt=this.Pc.Wyt(s[3]);const r=this.iEt.txt();if(r<2&&(this.BNt=Ew.Jr(e.fAt,this),!(this.BNt instanceof Ew.sEt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(Ew.pB.vNt(this,r),r>=2){const t=e.fAt??globalThis.Eq;if(this.Ijt=new t,!(this.Ijt instanceof globalThis.Eq))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.Ijt=new globalThis.pY;Ew.pB.xNt(r),this.wNt()}static QI(t,s){return Ew.Jr(Ew.qDt,t,s)}Vr(){this.Pc=null,this.iEt=null,this.BNt&&(this.BNt.Vr(),this.BNt=null),this.CDt=null}Xxt(){return this.BNt}wNt(){this.BNt?this.BNt.wNt():this.Ijt&&this.Ijt.WH()}oz(){return this.Pc}fQ(){return this.ppt}aY(){return this.iEt}LAt(){return this.CDt}_c(){return this.qr}G1(){return this.V$}uY(){return this.Ijt}Wyt(){return this.hTt}}}{const Dw=self.Cs,Aw=self.hY;Dw._Lt=class extends Dw.Wr{constructor(t){super(),this.Pc=t.runtime,this.PTt=t.lY,this.iEt=this.PTt.aY(),this.fi=t.fY,this.NM=t.index,this.SLt=null,this.TLt=null,this.iEt.e1(this.fi)}Vr(){this.TLt&&(this.TLt.gQ(),this.TLt=null),this.iEt.o1(this.fi),this.SLt&&(this.SLt.Vr(),this.SLt=null),this.Pc=null,this.PTt=null,this.iEt=null,this.fi=null}_At(t){if(this.SLt)throw new Error("already got sdk instance");if(this.aY().txt()<2){if(this.SLt=Dw.Jr(this.PTt.LAt(),this,t),!(this.SLt instanceof Dw.eEt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const s=this.aY().bNt();this.TNt(s.Instance,t)}}sY(){return this.SLt??this.TLt}dY(){return this.fi}oz(){return this.Pc}cY(){return this.PTt}aY(){return this.iEt}Yht(){return this.NM}hEt(){this.SLt?this.SLt.hEt():this.TLt.Lq()}uEt(t,s){this.SLt&&this.SLt.uEt(t,s)}NOt(){return this.SLt?this.SLt.a_t():this.TLt.lJ()}ov(t="full"){return this.SLt?this.SLt.ov(t):this.TLt.uJ(t)}av(t,s="full"){if(this.SLt)return this.SLt.av(t,s);this.TLt.cJ(t,s)}static Cjt(t,s,i){const e=globalThis.Dq;let r,n;r=s instanceof e?t.HU(s):s.nEt(),n=i instanceof e?t.HU(i):i.nEt();const h=r.dY(),o=n.dY(),a=h.fQ().Tj(),l=o.fQ().Tj();if(a!==l)return a-l;const u=h.mOt(),c=o.mOt();return u!==c?u-c:r.Yht()-n.Yht()}TNt(t,s){const i=Aw,e=t??this.SLt.bNt(),r=e||i,n=this.aY().txt();if(Dw.pB.vNt(this,n),Dw.pB.xEt(s),this.TLt=new r,Dw.pB.IEt(),Dw.pB.xNt(n),e&&!(this.TLt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);return this.TLt}QNt(){return this.TLt||this.TNt()}f_t(){return!!this.TLt}}}{const Lw=self.Cs;Lw.N0=class extends Lw.Wr{constructor(t,s){super(),this.mv=t,this.Gjt=[],this.Njt=[],this._jt=new Map,this.Ejt=[],this.Djt=[],this.Ajt=new Set,this.eT=!0;for(const t of s){const s=Lw.Jr(Lw.Ljt,this,t,this.Gjt.length);this.Gjt.push(s),this._jt.set(s._c().toLowerCase(),s),t.length>=3&&this.Ejt.push(this.Ojt(s,t[2]))}this.oz().Rjt(this)}Vr(){this.oz().kjt(this);for(const t of this.Djt)t.Vr();Lw.wh(this.Djt),Lw.wh(this.Gjt),Lw.wh(this.Njt),this._jt.clear(),Lw.wh(this.Ejt),this.mv=null}jjt(t){this.Ajt.add(t)}Pjt(t){this.Ajt.delete(t)}Fjt(t){t.tb()&&(this.Djt=this.Gjt.map(t=>{const s=t.JC();return s.zjt()>0?Lw.Jr(Lw.RM.Bjt,s):null}),this.Ujt());for(const s of this.Ajt)s.Fjt(t)}GAt(t){if(t.length){this.Gjt=t.concat(this.Gjt);for(const s of t)this._jt.set(s._c().toLowerCase(),s);for(let t=0,s=this.Gjt.length;t<s;++t)this.Gjt[t].S1(t)}}Ojt(t,s){t.Wjt(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const s=i[t];if(Array.isArray(s)){const e=Lw.Jr(Lw.vo);e.Ma(s),i[t]=e}}return i}Nv(){return this.mv}oz(){return this.mv.oz()}wY(){Lw.wh(this.Njt);let t=!0;for(const s of this.Gjt)s.lwt()&&(this.Njt.push(s),s.JC().bT()||(t=!1));this.eT=t}GU(){return this.Gjt}BAt(){return this.Gjt.length>0}Rnt(t){return this._jt.get(t.toLowerCase())||null}Qjt(t){if((t=Math.floor(+t))<0||t>=this.Gjt.length)throw new RangeError("invalid effect type index");return this.Gjt[t]}gY(t){return this.Qjt(t).lwt()}MY(t,s){this.Qjt(t).Wjt(s)}A1(){return this.Njt}W2(){return this.Njt.length>0}bT(){return this.eT}Ont(t){return this.Ejt[t]}A0(t){return t<this.Djt.length?this.Djt[t]:this.Ejt[t]}bY(t,s){if(t<0||t>=this.Ejt.length)return null;const i=this.Ejt[t];return s<0||s>=i.length?null:i[s]}SY(t,s,i){if(t<0||t>=this.Ejt.length)return!1;const e=this.Ejt[t];if(s<0||s>=e.length)return!1;const r=e[s];if(r instanceof Lw.vo){if(r.Jo(i))return!1;r.ko(i)}else{if(r===i)return!1;e[s]=i}return t<this.Djt.length&&this.Djt[t].Jjt(s,i),!0}Ujt(){const t=this.Ejt,s=this.Djt;for(let i=0,e=Math.min(t.length,s.length);i<e;++i){const e=s[i],r=t[i];for(let t=0,s=r.length;t<s;++t)e.Jjt(t,r[t])}}static Vjt(t){return t&&t instanceof Lw.vo?{t:"color",v:t.toJSON()}:t}static Yjt(t){if(null===t)return NaN;if("object"==typeof t){if("color"===t.t){const s=Lw.Jr(Lw.vo);return s.Ma(t.v),s}throw new Error("invalid effect parameter type")}return t}static Hjt(t){return t.map(Lw.N0.Vjt)}static qjt(t){return t.map(Lw.N0.Yjt)}ov(){return this.Gjt.map(t=>({name:t._c(),active:t.lwt(),params:Lw.N0.Hjt(this.Ejt[t.Tj()])}))}av(t){for(const s of t){const t=this.Rnt(s.name);t&&(t.Wjt(s.active),this.Ejt[t.Tj()]=Lw.N0.qjt(s.params))}this.wY(),this.Ujt()}}}{const Ow=self.Cs;Ow.Ljt=class extends Ow.Wr{constructor(t,s,i){super(),this.G0=t,this.zc=s[0],this.qr=s[1],this.NM=i,this.NT=null,this.Pf=!0}Vr(){this.G0=null,this.NT=null}CAt(t){const s=Ow.Jr(Ow.Ljt,t,[this.zc,this.qr],-1);return s.NT=this.NT,s.Pf=this.Pf,s}Fjt(t){const s=t.hb(this.zc);if(!s)throw new Error("failed to find shader program '"+this.zc+"'");this.NT=s}CU(){return this.G0}_c(){return this.qr}S1(t){this.NM=t}Tj(){return this.NM}Nv(){return this.G0.Nv()}oz(){return this.G0.oz()}Wjt(t){this.Pf=!!t}lwt(){return this.Pf}JC(){return this.NT}Zjt(){const t=[];for(let s=0,i=this.NT.VC();s<i;++s){const i=this.NT.YC(s);if("float"===i||"percent"===i)t.push(0);else{if("color"!==i)throw new TypeError("unknown effect parameter type");t.push(Ow.Jr(Ow.vo,1,1,1,1))}}return t}}}{const Rw=self.Cs;Rw.VRt=class extends Rw.Wr{constructor(t,s){super(),this.fi=t,this.Xjt=s,this.G0=t.fQ().CU(),this.Kjt=!0,this.O0=!0,this.$jt=!1,this.tPt=!1,this.sPt=!1,this.iPt=!1,this.Mj=Rw.Jr(Rw.RM.oR,t.oz().IF()._0(),{ZO:(t,s)=>{const i=s.uj(),e=i.OF();t.jT(e.E0()),t.Qb(e.kJ()),i.Qv(t),t.Qb(0)},XO:t=>{const s=t.v_t(),[i,e]=t.T_t();return{ij:s,ej:i,rj:e}},KO:t=>this.A0(t)}),this.ePt=[],this.Njt=[],this.eT=!0,this.Ejt=[],this.Djt=[],this.Fjt(t.oz().pT());for(let t=0,s=this.G0.GU().length;t<s;++t)this.ePt.push(!0);this.wY(),this.G0.jjt(this)}Vr(){this.G0.Pjt(this);for(const t of this.Djt)t&&t.Vr();Rw.wh(this.Djt),this.Mj.Vr(),this.Mj=null,Rw.wh(this.ePt),Rw.wh(this.Njt),Rw.wh(this.Ejt),this.fi=null,this.G0=null}Fjt(t){t.tb()&&(this.Djt=this.G0.GU().map(t=>{const s=t.JC();return s.zjt()>0?Rw.Jr(Rw.RM.Bjt,s):null}))}tkt(t){let s=0;for(const i of t)this.Ejt.push(this.Ojt(s,i)),++s;this.Ujt(),this.wY()}Ojt(t,s){this.ePt[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const s=i[t];if(Array.isArray(s)){const e=Rw.Jr(Rw.vo);e.Ma(s),i[t]=e}}return i}kLt(){for(const t of this.G0.GU())this.Ejt.push(t.Zjt());this.Ujt()}Nv(){return this.mv}CU(){return this.G0}Sj(){return this.E1(),this.Mj}oz(){return this.fi.oz()}wY(){Rw.wh(this.Njt);const t=this.Xjt,s=this.G0.GU(),i=this.Njt,e=this.ePt;let r=!0;for(let t=0,n=s.length;t<n;++t)if(e[t]){const e=s[t];i.push(e),e.JC().bT()||(r=!1)}this.eT=r,t.Sjt(!!i.length),this.Kjt=!0}E1(){const t=this.fi,s=this.Xjt,i=s.D1(),e=t.JB().NB(),r=0!==s.LU()||0!==s.RF().LU()||s.Yy()<0||s.eg()<0,n=t.C_t(),h=t.wT();(this.Kjt||i!==this.O0||e!==this.$jt||r!==this.tPt||n!==this.sPt||h!==this.iPt||this.Mj.$R())&&(this.Mj.tk(this.Njt.map(t=>t.JC()),{tR:this.Njt.map(t=>t.Tj()),sR:!i||h,eR:e,rR:n,nR:r}),this.Kjt=!1,this.O0=i,this.$jt=e,this.tPt=r,this.sPt=n,this.iPt=h)}A1(){return this.Njt}Ont(t){return this.Ejt[t]}A0(t){return t<this.Djt.length?this.Djt[t]:this.Ejt[t]}bY(t,s){if(t<0||t>=this.Ejt.length)return null;const i=this.Ejt[t];return s<0||s>=i.length?null:i[s]}SY(t,s,i){if(t<0||t>=this.Ejt.length)return!1;const e=this.Ejt[t];if(s<0||s>=e.length)return!1;const r=e[s];if(r instanceof Rw.vo){if(r.Jo(i))return!1;r.ko(i)}else{if(r===i)return!1;e[s]=i}return t<this.Djt.length&&this.Djt[t].Jjt(s,i),!0}Ujt(){const t=this.Ejt,s=this.Djt;for(let i=0,e=s.length;i<e;++i){const e=s[i],r=t[i];for(let t=0,s=r.length;t<s;++t)e.Jjt(t,r[t])}}bT(){return this.eT}rPt(){return this.Njt.some(t=>t.JC().vT())}gY(t){return this.ePt[t]}MY(t,s){this.ePt[t]=!!s}GU(){return this.G0.GU()}i4(){return this.G0.GU().map(t=>({name:t._c(),active:this.ePt[t.Tj()],params:Rw.N0.Hjt(this.Ejt[t.Tj()])}))}e4(t){for(const s of t){const t=this.G0.Rnt(s.name);t&&(this.ePt[t.Tj()]=s.active,this.Ejt[t.Tj()]=Rw.N0.qjt(s.params))}this.wY(),this.Ujt()}}}{const kw=self.Cs,jw=[],Pw=[],Fw=[],zw=kw.Jr(kw.au),Bw=kw.Jr(kw.au),Uw=kw.Jr(kw.Nl),Ww=kw.Jr(kw.Rect),Qw=kw.Jr(kw.Rect);let Jw=null,Vw=null,Yw=null;kw.nPt=class extends kw.Wr{constructor(t){super(),this.Pc=t,this.hPt=0,this.oPt=0,this.aPt=[],this.lPt=0,this.uPt=0,this.cPt=0,this.fPt=0,this.dPt=new self.Cz(this)}Vr(){this.Pc=null}oz(){return this.Pc}_j(){return this.dPt}pPt(){this.uPt=this.lPt,this.lPt=0,this.fPt=this.cPt,this.cPt=0}mPt(){return this.uPt}yPt(){return this.fPt}gPt(t,s){const i=t.OF(),e=s.OF();i&&e&&i.iV()&&e.iV()&&this.aPt.push([t,s])}$It(t,s,i){for(const[e,r]of this.aPt){let n=null;if(t===e)n=r;else{if(t!==r)continue;n=e}n.aCt(s)&&(i.includes(n)||i.push(n))}}tCt(t,s){if(!this.aPt.length)return!1;for(const[i,e]of this.aPt)if(t===i&&s===e||t===e&&s===i)return!0;return!1}MPt(){kw.wh(this.aPt)}Nz(t,s){if(!t||!s||t===s)return!1;const i=t.OF(),e=s.OF();if(!i.iV()||!e.iV())return!1;this.lPt++;const r=i.RF(),n=e.RF();return r.v2(n)?this.wPt(i,e):this.bPt(i,e)}wPt(t,s){if(!t.FJ().Tl(s.FJ()))return!1;if(this.cPt++,!t.BJ().tu(s.BJ()))return!1;if(t.QLt()&&s.QLt())return!1;if(t.QLt())return this.SPt(t,s);if(s.QLt())return this.SPt(s,t);if(!t.ajt()&&!s.ajt())return!0;const i=t.ljt(),e=s.ljt();return i.Su(e,s.YT()-t.YT(),s.ZT()-t.ZT())}bPt(t,s){const i=t.QLt(),e=s.QLt();if(i&&!e)return this.TPt(t,s);if(e&&!i)return this.TPt(s,t);if(e||i)return!1;{const i=t.RF(),e=s.RF();zw.m(t.ljt()),Bw.m(s.ljt());const r=zw.du();for(let s=0,e=r.length;s<e;s+=2){const e=s+1,n=r[s],h=r[e],[o,a]=i.rQ(n+t.YT(),h+t.ZT());r[s]=o,r[e]=a}const n=Bw.du();for(let t=0,i=n.length;t<i;t+=2){const i=t+1,r=n[t],h=n[i],[o,a]=e.rQ(r+s.YT(),h+s.ZT());n[t]=o,n[i]=a}return zw.gu(),Bw.gu(),this.cPt++,zw.Su(Bw,0,0)}}TPt(t,s){const i=t.RF(),e=s.RF();Jw||(Jw=kw.Jr(kw.au)),Vw||(Vw=kw.Jr(kw.Rect)),Yw||(Yw=kw.Jr(kw.Nl));const r=s.YT(),n=s.ZT(),[h,o]=e.rQ(r,n),[a,l]=i.iQ(h,o),u=a-r,c=l-n;if(Vw.m(s.FJ()),Vw.offset(u,c),!t.FJ().Tl(Vw))return!1;if(Yw.m(s.BJ()),Yw.offset(u,c),this.cPt++,!t.BJ().tu(Yw))return!1;Jw.m(s.ljt());const f=Jw.du();for(let t=0,s=f.length;t<s;t+=2){const s=t+1;f[t]+=u,f[s]+=c}return Jw.gu(),this.SPt(t,s,a,l,Jw,Vw,Yw)}SPt(t,s,i,e,r,n,h){const o=void 0!==n?n:s.FJ(),a=t.YT(),l=t.ZT(),u=t.GH().sY(),c=void 0!==i?i:s.YT(),f=void 0!==e?e:s.ZT(),d=s.ajt(),p=void 0!==h?h:s.BJ(),m=Pw;u.vPt(o,m);for(let t=0,i=m.length;t<i;++t){const i=m[t],e=i.xPt();if(this.lPt++,o.vl(e,a,l)&&(Uw.ql(e),Uw.offset(a,l),Uw.tu(p)))if(d){const t=void 0!==r?r:s.ljt();let n=c,h=f;void 0!==r&&(n=s.YT(),h=s.ZT());const o=i.IPt();if(o){if(this.cPt++,o.Su(t,n-(a+e.Ka()),h-(l+e.$a())))return kw.wh(m),!0}else if(zw.wu(Uw,0,0),zw.Su(t,n,h))return kw.wh(m),!0}else{const t=i.IPt();if(!t)return kw.wh(m),!0;if(zw.wu(p,0,0),t.Su(zw,-(a+e.Ka()),-(l+e.$a())))return kw.wh(m),!0}}return kw.wh(m),!1}CPt(t,s,i){const e=t.eU(),r=this.Pc.dP();if(!r)throw new Error("cannot call outside event");const n=r.Wpt(),h=new kw.GPt;if(e.Cpt()){i||(e.Lpt(!1),kw.wh(e.Opt())),n&&kw.wh(e.Rpt());for(const r of t.iU()){const t=r.OF(),o=t.RF();let a=!1;if(h.SW(o)&&t.WJ()&&(a=s.some(([s,i])=>{const[e,r]=h.iQ(o,s,i,t.kJ());return t.rV(e,r)})),a){if(i)return!1;e.Dpt(r)}else n&&e.Apt(r)}}else{let t,o=!1;n&&!r.Abt(this.Pc.Oyt())?this.Pc.iIt()&&!e.Rpt().length&&e.Opt().length?t=e.Opt():(t=e.Rpt(),o=!0):t=e.Opt();let a=0;for(let r=0,l=t.length;r<l;++r){const l=t[r],u=l.OF(),c=u.RF();let f=!1;if(h.SW(c)&&u.WJ()&&(f=s.some(([t,s])=>{const[i,e]=h.iQ(c,t,s,u.kJ());return u.rV(i,e)})),f){if(i)return!1;o?e.Dpt(l):t[a++]=l}else o?t[a++]=l:n&&e.Apt(l)}i||(t.length=a)}return t.dSt(),h.Vr(),!!i||e.Gpt()}NPt(t,s){if(!t)return!0;for(const i of s.aLt())if(!t.v2(i))return!1;return!0}sIt(t,s,i,e){if(s.w1())for(const r of s.TU())this.NPt(t,r)?(r.nLt(),r.eLt()._$(i,e)):kw.Lr(e,r.iU());else this.NPt(t,s)?(s.nLt(),s.eLt()._$(i,e)):kw.Lr(e,s.iU())}Pz(t,s,i,e){for(const r of s)this.sIt(t,r,i,e)}_Pt(t,s,i){const e=this.Pc.GEt();e&&this.Pz(t,e.k8(),s,i)}EPt(t,s,i){const e=this.Pc.NEt();e&&this.Pz(t,e.k8(),s,i)}Ykt(t,s){return t.YLt()&&(!s||s.OF().Ykt(t.oxt().get("solidTags")))}Dz(t){const s=t.OF();this._Pt(s.RF(),s.FJ(),jw);for(const s of jw)if(this.Ykt(s,t)&&this.Nz(t,s))return kw.wh(jw),s;return kw.wh(jw),null}DPt(t,s){this._Pt(null,t,jw);for(const i of jw)if(this.Ykt(i,s)&&this.APt(t,i))return kw.wh(jw),i;return kw.wh(jw),null}LPt(t,s){let i=null;s&&(i=Fw,kw.wh(i));const e=t.OF();this.EPt(e.RF(),e.FJ(),jw);for(const e of jw)if(e.qLt()&&this.Nz(t,e)){if(!s)return kw.wh(jw),e;i.push(e)}return kw.wh(jw),i}OPt(t,s,i,e,r){e=e||50;const n=t.OF(),h=n.YT(),o=n.ZT();for(let a=0;a<e;++a)if(n.xJ(h+s*a,o+i*a),n.vJ(),!this.Nz(t,r))return!0;return n.xJ(h,o),n.vJ(),!1}RPt(t,s,i,e,r,n){e=e||50;const h=t.OF(),o=h.YT(),a=h.ZT();let l=null,u=null;for(let c=0;c<e;++c)if(h.xJ(o+s*c,a+i*c),h.vJ(),!this.Nz(t,l))if(l=this.Dz(t),l)u=l;else if(r&&(l=n?this.Nz(t,n)?n:null:this.LPt(t),l&&(u=l)),!l)return u&&this.kPt(t,s,i,u,16,!0),!0;return h.xJ(o,a),h.vJ(),!1}jPt(t,s,i,e){e=e||50;const r=t.OF(),n=r.YT(),h=r.ZT();let o=null,a=null;for(let l=0;l<e;++l)for(let e=0;e<2;++e){const u=2*e-1;if(r.xJ(n+s*l*u,h+i*l*u),r.vJ(),!this.Nz(t,o)){if(o=this.Dz(t),!o)return a&&this.kPt(t,s*u,i*u,a,16,!0),!0;a=o}}return r.xJ(n,h),r.vJ(),!1}kPt(t,s,i,e,r,n){let h=2,o=!1,a=!1;const l=t.OF();let u=l.YT(),c=l.ZT();for(;h<=r;){const r=1/h;h*=2,l.CJ(s*r*(o?1:-1),i*r*(o?1:-1)),l.vJ(),this.Nz(t,e)||n&&this.Dz(t)?(o=!0,a=!0):(o=!1,a=!1,u=l.YT(),c=l.ZT())}a&&(l.xJ(u,c),l.vJ())}PPt(t,s=100){let i=0;const e=t.OF(),r=e.YT(),n=e.ZT();let h=0,o=this.Dz(t);if(!o)return!0;for(;i<=s;){let s=0,a=0;switch(h){case 0:s=0,a=-1,i++;break;case 1:s=1,a=-1;break;case 2:s=1,a=0;break;case 3:s=1,a=1;break;case 4:s=0,a=1;break;case 5:s=-1,a=1;break;case 6:s=-1,a=0;break;case 7:s=-1,a=-1}if(h=(h+1)%8,e.xJ(Math.floor(r+s*i),Math.floor(n+a*i)),e.vJ(),!this.Nz(t,o)&&(o=this.Dz(t),!o))return!0}return e.xJ(r,n),e.vJ(),!1}FPt(t,s,i,e){const r=t.OF(),n=r.YT(),h=r.ZT(),o=Math.max(10,kw.rn(s,i,n,h)),a=kw.hn(s,i,n,h),l=e||this.Dz(t);if(!l)return kw.Kr(a+Math.PI);let u=l,c=0,f=0;const d=kw.$r(5);let p;for(p=1;p<36;++p){const n=a-p*d;if(r.xJ(s+Math.cos(n)*o,i+Math.sin(n)*o),r.vJ(),!this.Nz(t,u)&&(u=e?null:this.Dz(t),!u)){c=n;break}}for(36===p&&(c=kw.Kr(a+Math.PI)),u=l,p=1;p<36;++p){const n=a+p*d;if(r.xJ(s+Math.cos(n)*o,i+Math.sin(n)*o),r.vJ(),!this.Nz(t,u)&&(u=e?null:this.Dz(t),!u)){f=n;break}}if(36===p&&(f=kw.Kr(a+Math.PI)),r.xJ(n,h),r.vJ(),f===c)return f;const m=kw.an(f,c)/2;let y;y=kw.un(f,c)?kw.Kr(c+m+Math.PI):kw.Kr(f+m);const g=Math.cos(a),M=Math.sin(a),w=Math.cos(y),b=Math.sin(y),S=g*w+M*b,T=g-2*S*w,v=M-2*S*b;return kw.hn(0,0,T,v)}zPt(t,s,i,e,r){if(!r)return!1;const n=r.OF();return!!n.iV()&&(this.lPt++,Ww.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!!n.FJ().Tl(Ww)&&(r.QLt()?this.BPt(t,s,i,e,r,n):(this.cPt++,!!n.BJ().$l(t,s,i,e)&&(!n.ajt()||n.ljt().$l(n.YT(),n.ZT(),t,s,i,e)))))}BPt(t,s,i,e,r,n){const h=n.YT(),o=n.ZT(),a=r.sY(),l=Pw;Qw.set(t,s,i,e),Qw.normalize(),a.vPt(Qw,l);for(let r=0,n=l.length;r<n;++r){const n=l[r],a=n.xPt();if(this.lPt++,Ww.vl(a,h,o)&&(Uw.ql(a),Uw.offset(h,o),Uw.$l(t,s,i,e))){const r=n.IPt();if(!r)return kw.wh(l),!0;if(this.cPt++,r.$l(h+a.Ka(),o+a.$a(),t,s,i,e))return kw.wh(l),!0}}return kw.wh(l),!1}APt(t,s){if(!s)return!1;const i=s.OF();if(!i.iV())return!1;if(this.lPt++,!i.FJ().Tl(t))return!1;if(s.QLt())return this.UPt(t,s,i);if(this.cPt++,Uw.ql(t),!i.BJ().tu(Uw))return!1;if(!i.ajt())return!0;const e=zw;e.ql(t,i.YT(),i.ZT());const r=i.ljt();return e.Su(r,0,0)}UPt(t,s,i){const e=i.YT(),r=i.ZT(),n=s.sY(),h=Pw;n.vPt(t,h);for(let s=0,i=h.length;s<i;++s){const i=h[s],n=i.xPt();if(this.lPt++,t.vl(n,e,r)){const s=i.IPt();if(!s)return kw.wh(h),!0;if(this.cPt++,zw.ql(t,0,0),s.Su(zw,-(e+n.Ka()),-(r+n.$a())))return kw.wh(h),!0}}return kw.wh(h),!1}WPt(t,s){if(!t)return;const i=t.OF();i.iV()&&(this.lPt++,i.FJ().Tl(s.rect)&&(t.QLt()?this.QPt(t,i,s):(this.cPt++,i.ajt()?s.JPt(t,i.YT(),i.ZT(),i.ljt()):s.VPt(t,i.BJ()))))}QPt(t,s,i){const e=s.YT(),r=s.ZT(),n=Pw;t.sY().vPt(i.rect,n);for(let h=0,o=n.length;h<o;h++){const o=n[h],a=o.xPt();if(this.lPt++,i.rect.vl(a,e,r)){const n=o.IPt();this.cPt++,n?i.JPt(t,e+a.Ka(),r+a.$a(),n):i.YPt(t,s.YT(),s.ZT(),a)}}kw.wh(n)}Lz(t,s){if(t===this.hPt&&s===this.oPt)return;this.hPt=t,this.oPt=s;const i=this.Pc.M1();for(const e of i)if(e.bB()){for(const t of e.sU())t.OF().Jkt();e.eLt().HPt(t,s),e.rLt();for(const t of e.sU()){const s=t.OF();s.bjt(),s.hLt()}}}Rz(){return[this.hPt,this.oPt]}qPt(t,s){this.hPt=t,this.oPt=s}}}{const Hw=self.Cs;Hw.kDt=class extends Hw.Wr{constructor(t,s){super(),this.T$=t,this.v$=s,this.x$=Hw.Jr(Hw.Gu)}Vr(){this.x$.Vr(),this.x$=null}HPt(t,s){if(!this.x$.Eu())throw new Error("grid not empty");this.T$=t,this.v$=s}I$(t,s,i){let e=this.x$.Js(t,s);return e||(i?(e=Hw.Jr(Hw.ZPt,this,t,s),this.x$.Set(t,s,e),e):null)}C$(t){const s=Math.floor(t/this.T$);return isFinite(s)?s:0}G$(t){const s=Math.floor(t/this.v$);return isFinite(s)?s:0}N$(t,s,i){if(s)for(let e=s.Ka(),r=s.tl();e<=r;++e)for(let r=s.$a(),n=s.sl();r<=n;++r){if(i&&i.xl(e,r))continue;const s=this.I$(e,r,!1);s&&(s.Xf(t),s.Eu()&&this.x$.Du(e,r))}if(i)for(let e=i.Ka(),r=i.tl();e<=r;++e)for(let r=i.$a(),n=i.sl();r<=n;++r)s&&s.xl(e,r)||this.I$(e,r,!0).M$(t)}_$(t,s){let i=this.C$(t.Ka());const e=this.G$(t.$a()),r=this.C$(t.tl()),n=this.G$(t.sl());if(isFinite(r)&&isFinite(n))for(;i<=r;++i)for(let t=e;t<=n;++t){const e=this.I$(i,t,!1);e&&e.b$(s)}}}}{const qw=self.Cs;qw.ZPt=class extends qw.Wr{constructor(t,s,i){super(),this.c$=t,this._a=s,this.Ea=i,this.f$=qw.Jr(qw.Ru)}Vr(){this.f$.Vr(),this.f$=null,this.c$=null}Eu(){return this.f$.Eu()}M$(t){this.f$.Fu(t)}Xf(t){this.f$.Du(t)}b$(t){qw.Lr(t,this.f$.zu())}}}{const Zw=self.Cs,Xw=1e-6;Zw.XPt=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new Zw.Rect,this.KPt=2,this.$Pt=null,this.tFt=0,this.sFt=0,this.iFt=0,this.eFt=0,this.rFt=0,this.bt=0,this.nFt=1,this.hFt=0,this.oFt=1,this.aFt=0}lFt(){return this.KPt<1.000001}Ff(){this.KPt=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.KPt=2,this.$Pt=null,this.tFt=0,this.sFt=0,this.iFt=0,this.eFt=0,this.rFt=0,this.bt=0,this.nFt=1,this.hFt=0,this.oFt=1,this.aFt=0,this}uFt(){if(!1===this.lFt())return;const t=this.dx*this.KPt,s=this.dy*this.KPt,i=Zw.sn(t,s),e=t/i,r=s/i;this.bt=i-Xw,this.eFt=this.x1+e*this.bt,this.rFt=this.y1+r*this.bt,this.tFt=Math.atan2(this.iFt,this.sFt)+Math.PI/2,this.nFt=Math.cos(this.tFt),this.hFt=Math.sin(this.tFt);const n=e*this.nFt+r*this.hFt;if(this.oFt=e-2*this.nFt*n,this.aFt=r-2*this.hFt*n,n>0){const t=Math.PI;this.tFt=Zw.Kr(this.tFt+t),this.nFt=-this.nFt,this.hFt=-this.hFt}}cFt(t,s,i,e,r){const n=Zw.Yn(this.x1,this.y1,this.x2,this.y2,s,i,e,r);n>=0&&n<this.KPt&&(this.KPt=n,this.$Pt=t.IQ(),this.sFt=s-e,this.iFt=i-r)}YPt(t,s,i,e){const r=s+e.Ka(),n=s+e.tl(),h=i+e.$a(),o=i+e.sl();this.cFt(t,r,h,n,h),this.cFt(t,n,h,n,o),this.cFt(t,n,o,r,o),this.cFt(t,r,o,r,h)}VPt(t,s){const i=s.Pn(),e=s.Fn(),r=s.zn(),n=s.Bn(),h=s.Un(),o=s.Wn(),a=s.Qn(),l=s.Jn();this.cFt(t,i,e,r,n),this.cFt(t,r,n,h,o),this.cFt(t,h,o,a,l),this.cFt(t,a,l,i,e)}JPt(t,s,i,e){const r=e.du();for(let e=0,n=r.length;e<n;e+=2){const h=(e+2)%n,o=r[e]+s,a=r[e+1]+i,l=r[h]+s,u=r[h+1]+i;this.cFt(t,o,a,l,u)}}}}{const Kw=self.Cs;Kw.GPt=class{constructor(){this.fFt=new Map}Vr(){for(const t of this.fFt.values())t.dFt._u();this.fFt.clear()}pFt(t){let s=this.fFt.get(t);return void 0===s&&(s={bW:null,dFt:new Kw.Gu},this.fFt.set(t,s)),s}SW(t){const s=this.pFt(t);return null===s.bW&&(s.bW=t.NW()),s.bW}iQ(t,s,i,e){if(0!==e)return t.iQ(s,i,e);const r=this.pFt(t);let n=r.dFt.Js(s,i);return void 0===n&&(n=t.iQ(s,i,e),r.dFt.Set(s,i,n)),n}}}{const $w=self.Cs,tb=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),sb=new Set(["high","low"]),ib=self.hs,eb=ib.fs,rb=(ib.gs,eb.create()),nb=$w.Jr($w.Nl),hb=$w.Jr($w.Rect);$w.mFt=class extends $w.Wr{constructor(t){super(),this.Pc=t,this.yFt=[],this.gFt=!1,this.MFt=null,this.wFt=null,this.bFt=null,this.SFt="high-performance",this.TFt=!1,this.vFt="auto",this.xFt=0,this.IFt=0,this.CFt="",this.GFt=0,this.NFt=0,this._Ft=0,this.EFt=0,this.DFt=0,this.AFt=0,this.iw="normalized",this.LFt=0,this.OFt=1,this.RFt=1e4,this.Ow=!0,this.kFt=0,this.AR=0,this.LR=0,this.jFt="letterbox-scale",this.PFt="letterbox-scale",this.FFt=0,this.zFt=0,this.BFt=eb.create(),this.UFt="high",this.WFt=this.UFt,this.QFt=!1,this.JFt=[],this.VFt=new Set,this.YFt=self.C3_Shaders,this.HFt=$w.Jr($w.RM.kO,{AO:()=>[this.h3(),this.o3()],LO:()=>this.qFt(),OO:t=>this.ZFt(t),getTime:()=>this.oz().OP(),RO:()=>this.oz().BF()}),this.XFt=0,this.KFt=0,this.$Ft=NaN,this.tzt=null,this.szt=new Map,this.izt=NaN,this.ezt=new Map,this.rzt="",this.nzt=1,this.hzt=$w.Jr($w.Rect),this.ozt="",this.azt=null,this.lzt=null,this.uzt=0,this.czt=0,this.fzt=-1,this.dzt=0,this.pzt=t=>this.dzt=t.progress,this.mzt=null,this.yzt={gzt:null,Mzt:null,wzt:null},this.bzt=0,this.Szt=0,this.Tzt=0,this.vzt="fade-in",this.xzt=null,this.Izt=new Promise(t=>this.xzt=t)}Czt(t){this.SFt=t}Gzt(t){this.gFt=!!t}Nzt(t){this.iw=t}_zt(){return this.iw}Ezt(t){this.LFt=t}Dzt(t,s){this.OFt=t,this.RFt=s}Azt(t){this.TFt=!!t}Lzt(t){this.vFt=t}async uo(t){let s=t.canvas;this.yFt.push({canvas:s,Ozt:null}),this.Pc.XQ("runtime","window-resize",t=>this.Rzt(t)),this.Pc.XQ("runtime","fullscreenchange",t=>this.kzt(t)),this.Pc.XQ("runtime","fullscreenerror",t=>this.jzt(t)),s.addEventListener("webglcontextlost",t=>this.Pzt(t)),s.addEventListener("webglcontextrestored",t=>this.Fzt(t)),this.QFt=!!t.isFullscreen,this.CFt=t.cssDisplayMode;const i=navigator.gpu&&this.gFt;let e=!1;if(i)try{await this.zzt(!0)}catch(t){this.Bzt("WebGPU",t),this.wFt=null}if(!this.pT())try{await this.Uzt(!0)}catch(t){this.Bzt("WebGL",t),this.MFt=null}if(this.pT()||(e=!0),!this.pT()&&i)try{await this.zzt(!1)}catch(t){this.Bzt("WebGPU",t),this.wFt=null}if(!this.pT())try{await this.Uzt(!1)}catch(t){this.Bzt("WebGL",t),this.MFt=null}const r=this.pT();if(!r)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");r.PS(e),this.wFt&&(this.wFt.Wzt=()=>this.Qzt(),this.wFt.Jzt=()=>this.Vzt()),"normalized"===this.iw?r.Zw():(r.Xw(),r.Hw(this.LFt)),this.FE(t.windowInnerWidth,t.windowInnerHeight,!0),await this.Fjt()}Bzt(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async zzt(t){const s={qM:this.OFt,ZM:this.RFt};let i=!0;"no"===this.vFt?i=!1:"auto"===this.vFt&&(i=$w.Xs.ni);const e={powerPreference:this.SFt,depth:this.Pc.a2(),failIfMajorPerformanceCaveat:t,Yzt:this.Pc.M3(),Hzt:this.Pc.qzt(),HD:this.Pc.Zzt(),Xzt:i};this.wFt=$w.Jr($w.RM.Kzt,s),await this.wFt.QI(this.yFt[0].canvas,e)}async Uzt(t){const s={alpha:!0,powerPreference:this.SFt,YD:"xbox-uwp-webview2"!==this.Pc.Qz(),depth:this.Pc.a2(),HD:this.Pc.Zzt(),failIfMajorPerformanceCaveat:t,qM:this.OFt,ZM:this.RFt};this.TFt&&(s.qD=1),this.MFt=$w.Jr($w.RM.KD,this.yFt[0].canvas,s),await this.MFt.Pw()}async $zt(){if(this.YFt){const t=[];for(const[s,i]of Object.entries(this.YFt)){i.src=i.tBt;const e=$w.RM.sBt.fG(this.wFt.XI());t.push(this.wFt.rL(Object.assign({BI:e,name:s},i)))}await Promise.all(t)}}async iBt(){if(this.YFt){const t=[];for(const[s,i]of Object.entries(this.YFt)){let e;if(i.eBt&&this.MFt._x()>=2)i.src=i.eBt,e=$w.RM.FI.dG();else{if(!i.rBt)throw new Error(`shader '${s}' does not support WebGL 1`);i.src=i.rBt,e=$w.RM.FI.fG()}t.push(this.MFt.rL(Object.assign({BI:e,name:s},i)))}await Promise.all(t),this.MFt.nL(),this.MFt.ab()}this.MFt.SO()&&(this.tzt=$w.Jr($w.RM.jD,this.MFt))}async Fjt(){this.wFt?await this.$zt():this.MFt&&await this.iBt();const t=this.pT();t.kS(this.Ow),t.SO()&&(this.$Ft=0);for(const s of this.Pc.nBt()){for(const i of s.GU())i.Fjt(t);s.Fjt(t),s.wY()}this.bFt=new self.dZ(this.Pc,t)}Vr(){this.Pc=null,this.MFt=null,this.yFt.length=0}Jj(){return this.Pc.Jj()}Rzt(t){const s=this.Pc;if(s.hBt())return;const i=t.devicePixelRatio;this.Jj()&&(self.devicePixelRatio=i),s.oBt(i),this.QFt=!!t.isFullscreen,this.CFt=t.cssDisplayMode,this.FE(t.innerWidth,t.innerHeight),s.BF();const e=new $w.Event("window-resize");e.data=t,s.Mf().Nf(e);const r=new $w.Event("resize");r.aBt=this.iB(),r.lBt=this.rB(),r.uBt=this.hB(),r.cBt=this.aB(),s.GK(r),this.Pc.AF()?.V3(),s.iJ()&&(s.Sgt()||self.eJ.fBt())&&s.ck()}kzt(t){this.QFt=!!t.isFullscreen,this.FE(t.innerWidth,t.innerHeight,!0),this.Pc.BF()}jzt(t){this.QFt=!!t.isFullscreen,this.FE(t.innerWidth,t.innerHeight,!0),this.Pc.BF()}FE(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.xFt===t&&this.IFt===s&&!i)return;this.xFt=t,this.IFt=s;const e=this.dBt();"letterbox-scale"===e?this.pBt(t,s):"letterbox-integer-scale"===e?this.mBt(t,s):"off"===e?this.yBt(t,s):this.gBt(t,s),this.MBt(e);for(const{canvas:t}of this.yFt)t.width=this._Ft,t.height=this.EFt;this.Pc.Bc("canvas","update-size",{marginLeft:this.DFt,marginTop:this.AFt,styleWidth:this.GFt,styleHeight:this.NFt,displayScale:this.wq()});const r=this.pT();r.FE(this._Ft,this.EFt,!0);for(const t of this.JFt)r.mO(t);$w.wh(this.JFt),this.wBt();const n=this.Pc.dF();n.k6(),n.j6()}wBt(){this.pT().$w(this.BFt,this.h3()/this.o3())}a3(){return this.BFt}pBt(t,s){const i=this.Pc.lB(),e=this.Pc.Yj(),r=this.Pc.qj(),n=e/r;if(t/s>n){const i=s*n;this.GFt=Math.round(i),this.NFt=s,this.DFt=Math.floor((t-this.GFt)/2),this.AFt=0}else{const i=t/n;this.GFt=t,this.NFt=Math.round(i),this.DFt=0,this.AFt=Math.floor((s-this.NFt)/2)}this._Ft=Math.round(this.GFt*i),this.EFt=Math.round(this.NFt*i),this.Pc.bBt(e,r)}mBt(t,s){const i=this.Pc.lB();1!==i&&(t+=1,s+=1);const e=this.Pc.Yj(),r=this.Pc.qj(),n=e/r;let h;h=t/s>n?s*n*i/e:t/n*i/r,h>1?h=Math.floor(h):h<1&&(h=1/Math.ceil(1/h)),this._Ft=Math.round(e*h),this.EFt=Math.round(r*h),this.GFt=this._Ft/i,this.NFt=this.EFt/i,this.DFt=Math.max(Math.floor((t-this.GFt)/2),0),this.AFt=Math.max(Math.floor((s-this.NFt)/2),0),this.Pc.bBt(e,r)}gBt(t,s){const i=this.Pc.lB();this.GFt=t,this.NFt=s,this._Ft=Math.round(this.GFt*i),this.EFt=Math.round(this.NFt*i),this.DFt=0,this.AFt=0;const e=this.wq();this.Pc.bBt(this.GFt/e,this.NFt/e)}yBt(t,s){const i=this.Pc.lB();this.GFt=this.Pc.Z1(),this.NFt=this.Pc.X1(),this._Ft=Math.round(this.GFt*i),this.EFt=Math.round(this.NFt*i),this.SBt()?(this.DFt=Math.floor((t-this.GFt)/2),this.AFt=Math.floor((s-this.NFt)/2)):(this.DFt=0,this.AFt=0),this.Pc.bBt(this.Pc.Z1(),this.Pc.X1())}MBt(t){if("high"===this.UFt)this.AR=this._Ft,this.LR=this.EFt,this.WFt="high";else{let s,i;if("off"===this.dBt()?(s=this.Pc.Z1(),i=this.Pc.X1()):(s=this.Pc.Yj(),i=this.Pc.qj()),this._Ft<s||this.EFt<i)this.AR=this._Ft,this.LR=this.EFt,this.WFt="high";else if(this.AR=s,this.LR=i,this.WFt="low","scale-inner"===t){const t=s/i,e=this.xFt/this.IFt;e<t?this.AR=this.LR*e:e>t&&(this.LR=this.AR/e)}else if("scale-outer"===t){const t=s/i,e=this.xFt/this.IFt;e>t?this.AR=this.LR*e:e<t&&(this.LR=this.AR/e)}}}oz(){return this.Pc}TBt(){return this.yFt[0].canvas}_0(){return this.HFt}SBt(){return this.QFt}vBt(){return this.CFt}xBt(t){if(!tb.has(t))throw new Error("invalid fullscreen mode");this.jFt=t;const s=this.Pc.dF();s.k6(),s.j6()}gq(){return this.jFt}IBt(t){if(!tb.has(t))throw new Error("invalid fullscreen mode");this.PFt=t;const s=this.Pc.dF();s.k6(),s.j6()}CBt(){return this.PFt}dBt(){return this.SBt()?this.CBt():this.gq()}GBt(t){if(!sb.has(t))throw new Error("invalid fullscreen scaling quality");this.UFt=t,this.Pc.dF().k6()}NBt(){return this.UFt}w3(){return this.WFt}static _Bt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}eq(){return this.xFt}rq(){return this.IFt}h3(){return this.AR}o3(){return this.LR}kS(t){this.Ow=!!t}EBt(t){this.kFt=t}n$(){return this.kFt}DBt(){return this.pT().pD()}Pzt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.JFt=[],this.VFt.clear(),this.HFt.PT(),this.MFt.PT(),this.Pc.v5()}Qzt(){console.log("[Construct] WebGPU device lost"),this.JFt=[],this.VFt.clear(),this.HFt.PT(),this.Pc.v5()}async Fzt(t){await this.MFt.FT(),await this.Fjt(),await this.Pc.ABt(),console.log("[Construct] WebGL context restored")}async Vzt(){await this.Fjt(),await this.Pc.ABt(),console.log("[Construct] WebGPU device restored")}LBt(){return this.MFt}OBt(){return this.wFt}pT(){return this.wFt||this.MFt}xF(){return this.bFt}Yz(){let t="";return t=this.Pc.OBt()?"webgpu":"webgl"+this.Pc.LBt()._x(),this.Pc.pT().FS()&&(t+="-software"),t}Zz(){return this.Pc.OBt()?this.Pc.OBt().RBt():this.Pc.LBt().NO()}uQ(){return"low"===this.WFt?1/this.Pc.lB():this.wq()}wq(){const t=this.dBt();if("off"===t||"crop"===t)return 1;const s=this.Pc.Yj(),i=this.Pc.qj(),e=s/i,r=this._Ft/this.EFt;return"scale-inner"!==t&&r>e||"scale-inner"===t&&r<e?this.NFt/i:this.GFt/s}Q3(){return"low"===this.w3()?1:this.wq()}U3(){return"low"===this.w3()?1:this.Pc.lB()}kBt(t,s){this.FFt=t,this.zFt=s}nX(t,s,i,e=!0){s=s||this.AR,i=i||this.LR;const r=s/2+this.FFt,n=i/2+this.zFt;if(e){let e=this.a3();s===this.AR&&i===this.LR||(t.$w(rb,s/i),e=rb),t.oL(e)}const h=t.eb(r,n,t.zw(i),r,n,0,i);t.dL(h)}jBt(t,s=!0){const i=this.iB(),e=this.rB(),r=i/2,n=e/2;s&&t.oL(this.a3());const h=t.eb(r,n,t.zw(e),r,n,0,e);t.dL(h)}hB(){return this._Ft}aB(){return this.EFt}iB(){return this.GFt}rB(){return this.NFt}Kz(){return this.DFt}tB(){return this.AFt}h5(){return this.yFt.length}PBt(){return"undefined"!=typeof OffscreenCanvas&&this.TBt()instanceof OffscreenCanvas&&("Chromium"!==$w.Xs.ei||$w.Xs.ii>=124)}async N5(t,s=!1){if(t<1)throw new Error("invalid HTML layer count");if(this.yFt.length===t)return;const i={count:t,layersDomState:this.Pc.dF().uF().C1().filter(t=>t.xW()).map(t=>t.O2()),immediate:s,marginLeft:this.DFt,marginTop:this.AFt,styleWidth:this.GFt,styleHeight:this.NFt};let e;if(e=this.Jj()?await this.Pc.WF("canvas","set-html-layer-count",i):self.c3_runtimeInterface._OnSetHTMLLayerCount(i),t<this.yFt.length)this.yFt.length=t;else for(const t of e.addedCanvases){t.width=this._Ft,t.height=this.EFt;const s=this.PBt()?"bitmaprenderer":"2d",i=t.getContext(s);if(!i)throw new Error(`failed to acquire '${s}' canvas context`);this.yFt.push({canvas:t,Ozt:i})}this.Pc.BF()}g6(t){if(t>=this.yFt.length)return;const s=this.TBt(),i=this.yFt[t].Ozt;this.PBt()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}b3(t){t.depth=this.Pc.a2();const s=this.JFt,i=s.findIndex(s=>s.AI(t));let e;return-1!==i?(e=s[i],s.splice(i,1)):e=this.pT().uO(t),this.VFt.add(e),e}D0(t){if(!this.VFt.has(t))throw new Error("render target not in use");this.VFt.delete(t),this.JFt.push(t)}qFt(){const t={ix:this.Pc.Zj()};return"low"===this.w3()&&(t.width=this.h3(),t.height=this.o3()),this.b3(t)}ZFt(t){this.D0(t)}*FBt(){for(const t of this.Pc.dF().L6())for(const s of t.QU()){const t=this.szt.get(s);t&&(yield t)}}f3(t){if(!this.pT().SO())return null;let s=this.szt.get(t);return s||(s={TJ:t,name:t._c(),zBt:$w.Jr($w.RM.jD,this.MFt),BBt:0,UBt:0,WBt:0},this.szt.set(t,s)),s.zBt}QBt(){const t=this.pT();if(t.SO()&&0===this.KFt){this.KFt=t.OS(),this.izt=NaN;for(const t of this.FBt())t.BBt=NaN}}JBt(){this.MFt&&this.MFt.SO()&&this.VBt(),this.wFt&&this.wFt.SO()&&this.YBt()}VBt(){if(isNaN(this.izt)&&(this.izt=this.tzt.QD(this.XFt,this.KFt),!isNaN(this.izt))){if(this.Pc.iJ())for(const t of this.FBt())if(t.BBt=t.zBt.QD(this.XFt,this.KFt),isNaN(t.BBt))return;if(this.tzt.JD(this.KFt),this.$Ft=Math.min(this.izt,1),this.Pc.iJ()){const t=new Map;for(const s of this.FBt())s.zBt.JD(this.KFt),s.UBt=Math.min(s.BBt,1),t.set(s.TJ,s.UBt);for(const s of this.FBt()){const i=s.TJ,e=(t.get(i)||0)-i.dW().reduce((s,i)=>s+(t.get(i)||0),0);s.WBt=$w.Xr(e,0,1)}const s=this.Pc.uF(),i=this.$Ft-s.C1().reduce((s,i)=>s+(t.get(i)||0),0);self.eJ.HBt($w.Xr(i,0,1),this.$Ft,[...this.FBt()])}this.XFt=this.KFt,this.KFt=0}}qBt(){return this.tzt}YBt(){if(0===this.KFt)return;for(let t=this.XFt;t<this.KFt;++t){const s=this.ezt.get(t);if(s&&!s.CD())return}const t=this.Pc.uF(),s=$w.To(t.t5()+1,0);let i=0;for(let t=this.XFt;t<this.KFt;++t){const e=this.ezt.get(t);if(!e)continue;const r=e.GD();let n=BigInt(0),h=BigInt(0);const o=BigInt(0);for(let t=0,i=Math.min(s.length,r.length/2);t<i;++t){const i=r[2*t],e=r[2*t+1];i!==o&&(n===o||i<n)&&(n=i),e>h&&(h=e);const a=Number(e-i)/1e9;s[t]+=a}i+=Number(h-n)/1e9}if(this.$Ft=$w.Xr(i,0,1),this.Pc.iJ()){const i=t.QU(),e=new Map;for(let t=0,r=Math.min(i.length,s.length-1);t<r;++t){const r=s[t+1];e.set(i[t],r)}const r=[],n=new Map;for(const[t,s]of e){const i=[...t.mW()].reduce((t,s)=>t+(e.get(s)||0),0);n.set(t,i),r.push({name:t._c(),WBt:$w.Xr(s,0,1),UBt:$w.Xr(i,0,1)})}const h=this.$Ft-t.C1().reduce((t,s)=>t+(n.get(s)||0),0);self.eJ.HBt($w.Xr(h,0,1),this.$Ft,r)}for(let t=this.XFt;t<this.KFt;++t)this.ezt.delete(t);this.XFt=this.KFt,this.KFt=0}ZBt(t){this.ezt.set(this.wFt.OS(),t)}qP(){return this.$Ft}qF(t,s,i,e,r,n){return this.rzt=t,this.nzt=s,this.hzt.Qa(i,e,r,n),this.azt||(this.azt=new Promise(t=>{this.lzt=t})),this.azt}XBt(){if(!this.rzt)return;let t=this.TBt();const s=this.hzt,i=$w.Xr(Math.floor(s.Ka()),0,t.width),e=$w.Xr(Math.floor(s.$a()),0,t.height);let r=s.width();r=0===r?t.width-i:$w.Xr(Math.floor(r),0,t.width-i);let n=s.height();if(n=0===n?t.height-e:$w.Xr(Math.floor(n),0,t.height-e),(0!==i||0!==e||r!==t.width||n!==t.height)&&r>0&&n>0){const s=$w.uo(r,n);s.getContext("2d").drawImage(t,i,e,r,n,0,0,r,n),t=s}$w.co(t,this.rzt,this.nzt).then(t=>{this.ozt&&URL.revokeObjectURL(this.ozt),this.ozt=URL.createObjectURL(t),this.azt=null,this.lzt(t)}),this.rzt="",this.nzt=1}KBt(){return this.ozt}$Bt(t){t?this.uzt++:this.uzt--}tUt(){return this.uzt>0}sUt(t){const s=this.pT();if(2===t)this.mzt=$w.Jr($w.RM.VS,this.pT()),this.mzt.mE("Arial"),this.mzt.yE(16),this.mzt.EE("center"),this.mzt.AE("center"),this.mzt.FE(300,200);else if(0===t){const t=this.Pc.iUt();t&&t.ZZ(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.eUt("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHdpZHRoPSIxNzAwLjc5MDA0cHgiIGhlaWdodD0iMTcwMC43OTAwNHB4IiB2aWV3Qm94PSIyODcgMzE3IDExMjUgMTEyNSINCgkgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTcwMC43OTAwNCAxNzAwLjc5MDA0IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJsb2dvIj4NCgk8Zz4NCgkJPGc+DQoJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0ZGRkZGRiIgZD0iTTM1NC45Nzc1NCwxMTk1LjYyMzA1DQoJCQkJYzExLjM4NDc3LDAsMjIuMDEyNywzLjIzNzMsMzEuMDE3NTgsOC44Mzc4OWMxLjk0NjI5LDEuMjEwOTQsMi41ODQ5NiwzLjc0OTAyLDEuNDM4NDgsNS43MzQzOGwtNC45MzI2Miw4LjU0MTk5DQoJCQkJYy0zLjI3ODMyLDUuNjc5NjktMTAuMDMzMiw4LjM3Njk1LTE2LjMxNzM4LDYuNTAwOThjLTIuNzY0NjUtMC44MjUyLTUuNjkzMzYtMS4yNjg1NS04LjcyNjU2LTEuMjY4NTUNCgkJCQljLTE2LjgyOTEsMC0zMC40NzI2NiwxMy42NDM1NS0zMC40NzI2NiwzMC40NzI2NmMwLDE2LjgyODEzLDEzLjY0MzU1LDMwLjQ3MjY2LDMwLjQ3MjY2LDMwLjQ3MjY2DQoJCQkJYzMuMDMzMiwwLDUuOTYxOTEtMC40NDMzNiw4LjcyNjU2LTEuMjY4NTVjNi4yOTQ5Mi0xLjg3OTg4LDEzLjAzMzIsMC44MTE1MiwxNi4zMTczOCw2LjUwMDk4bDQuOTMxNjQsOC41NDE5OQ0KCQkJCWMxLjE0NzQ2LDEuOTg4MjgsMC41MTA3NCw0LjUyMzQ0LTEuNDM4NDgsNS43MzQzOGMtOS4wMDM5MSw1LjYwMTU2LTE5LjYzMTg0LDguODM3ODktMzEuMDE2Niw4LjgzNzg5DQoJCQkJYy0zMi40ODUzNSwwLTU4LjgxOTM0LTI2LjMzNDk2LTU4LjgxOTM0LTU4LjgxOTM0QzI5Ni4xNTgyLDEyMjEuOTU3MDMsMzIyLjQ5MjE5LDExOTUuNjIzMDUsMzU0Ljk3NzU0LDExOTUuNjIzMDUNCgkJCQlMMzU0Ljk3NzU0LDExOTUuNjIzMDV6IE03MDMuMjE0ODQsMTI1OS4xNzU3OGMtMTQuNTU5NTctOS44MTczOC0yMC4yMDMxMy0yMC4wMzIyMy0yMC4yMDMxMy0zMy4wODAwOA0KCQkJCWMwLTE4LjQ4OTI2LDE1LjcxNDg0LTI5Ljc2MzY3LDM4LjI2NjYtMjkuNzYzNjdjOS42NTcyMywwLDE4LjcyMTY4LDIuNTQyOTcsMjYuNTU5NTcsNi45OTQxNA0KCQkJCWMyLjA0OTgsMS4xNjQwNiwyLjc2MTcyLDMuNzgzMiwxLjU4MzAxLDUuODI0MjJsLTMuNDE3OTcsNS45MTk5MmMtMy4yNDcwNyw1LjYyNDAyLTkuOTA4Miw4LjMzMTA1LTE2LjE1MzMyLDYuNTQ4ODMNCgkJCQljLTIuNzIzNjMtMC43NzYzNy01LjU5ODYzLTEuMTkyMzgtOC41NzEyOS0xLjE5MjM4Yy0xMC40OTAyMywwLTExLjU5ODYzLDkuNTc2MTctNC44NTc0MiwxNC4xMjMwNWwyMy42ODY1MiwxNS45NzY1Ng0KCQkJCWM5Ljk5MDIzLDYuNzM4MjgsMTUuODk1NTEsMTcuMDY2NDEsMTUuODk1NTEsMjguNzE4NzVjMCwxOC43ODYxMy0xNS4wMDY4NCwzMy4zMDc2Mi0zOC4yNjc1OCwzMy4zMDc2Mg0KCQkJCWMtOS41MjI0NiwwLTE4LjU4Nzg5LTEuOTU3MDMtMjYuODE1NDMtNS40OTAyM2MtNy43ODEyNS0zLjMzOTg0LTEwLjkzMzU5LTEyLjc4MjIzLTYuNjk3MjctMjAuMTE4MTZsMy40ODczLTYuMDQxOTkNCgkJCQljMS4yMTM4Ny0yLjA5OTYxLDMuOTMxNjQtMi43NTk3Nyw1Ljk3NDYxLTEuNDU2MDVjNi44NTkzOCw0LjM4MjgxLDE2LjQ5MDIzLDcuNTk0NzMsMjQuNzU4NzksNy41OTQ3Mw0KCQkJCWMxMC41NDU5LDAsMTEuMzI4MTMtOS45NTg5OCwzLjc2NzU4LTE1LjA1NzYyTDcwMy4yMTQ4NCwxMjU5LjE3NTc4TDcwMy4yMTQ4NCwxMjU5LjE3NTc4eiBNOTg0LjYzMDg2LDEyMDIuMDAwOTgNCgkJCQljMC0yLjM0NzY2LDEuOTAzMzItNC4yNTE5NSw0LjI1MTk1LTQuMjUxOTVoOS45MjE4OGM3LjgyNzE1LDAsMTQuMTcyODUsNi4zNDU3LDE0LjE3Mjg1LDE0LjE3MzgzdjU3LjQwMTM3DQoJCQkJYzAsOC42MTAzNSw2Ljk4MDQ3LDE1LjU5MDgyLDE1LjU5MDgyLDE1LjU5MDgyczE1LjU5MDgyLTYuOTgwNDcsMTUuNTkwODItMTUuNTkwODJ2LTU3LjQwMTM3DQoJCQkJYzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTcyODUtMTQuMTczODNoOS45MjA5YzIuMzQ4NjMsMCw0LjI1MTk1LDEuOTA0Myw0LjI1MTk1LDQuMjUxOTV2NjcuMzIzMjQNCgkJCQljMCwyNC4yNjU2My0xOS42NzA5LDQzLjkzNzUtNDMuOTM2NTIsNDMuOTM3NXMtNDMuOTM3NS0xOS42NzE4OC00My45Mzc1LTQzLjkzNzVWMTIwMi4wMDA5OEw5ODQuNjMwODYsMTIwMi4wMDA5OHoNCgkJCQkgTTQ2Ni44NjkxNCwxMTk1LjYyMzA1YzMyLjQ4NDM4LDAsNTguODE4MzYsMjYuMzMzOTgsNTguODE4MzYsNTguODE5MzRjMCwzMi40ODQzOC0yNi4zMzM5OCw1OC44MTkzNC01OC44MTgzNiw1OC44MTkzNA0KCQkJCWMtMzIuNDg2MzMsMC01OC44MTkzNC0yNi4zMzQ5Ni01OC44MTkzNC01OC44MTkzNEM0MDguMDQ5OCwxMjIxLjk1NzAzLDQzNC4zODI4MSwxMTk1LjYyMzA1LDQ2Ni44NjkxNCwxMTk1LjYyMzA1DQoJCQkJTDQ2Ni44NjkxNCwxMTk1LjYyMzA1eiBNNDY2Ljg2OTE0LDEyMjUuMDMzMmMtMTYuMjQzMTYsMC0yOS40MTAxNiwxMy4xNjY5OS0yOS40MTAxNiwyOS40MDkxOA0KCQkJCXMxMy4xNjY5OSwyOS40MDgyLDI5LjQxMDE2LDI5LjQwODJjMTYuMjQxMjEsMCwyOS40MDgyLTEzLjE2NjAyLDI5LjQwODItMjkuNDA4MlM0ODMuMTEwMzUsMTIyNS4wMzMyLDQ2Ni44NjkxNCwxMjI1LjAzMzINCgkJCQlMNDY2Ljg2OTE0LDEyMjUuMDMzMnogTTU1Ni43MzI0MiwxMzExLjEzNDc3Yy0yLjM0NzY2LDAtNC4yNTE5NS0xLjkwMjM0LTQuMjUxOTUtNC4yNXYtOTQuOTYxOTENCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzM4My0xNC4xNzM4M2gzLjk1ODk4YzQuNjI1LDAsOC45NTg5OCwyLjI1Njg0LDExLjYxMTMzLDYuMDQ1OWw0MS4xMjIwNyw1OC43NDcwN3YtNTAuNjE5MTQNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2g5LjkyMTg4YzIuMzQ3NjYsMCw0LjI1MTk1LDEuOTA0Myw0LjI1MTk1LDQuMjUxOTV2OTQuOTYwOTQNCgkJCQljMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3MzgzLDE0LjE3Mjg1aC0zLjk1ODk4Yy00LjYyNSwwLTguOTU4OTgtMi4yNTU4Ni0xMS42MTEzMy02LjA0NDkybC00MS4xMjIwNy01OC43NDYwOXY1MC42MTgxNg0KCQkJCWMwLDcuODI5MS02LjM0NTcsMTQuMTcyODUtMTQuMTcyODUsMTQuMTcyODVINTU2LjczMjQyTDU1Ni43MzI0MiwxMzExLjEzNDc3eiBNMTIxNS4wMjA1MSwxMjExLjkyMjg1DQoJCQkJYzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTcyODUtMTQuMTczODNoNTAuMzE1NDNjMi4zNDg2MywwLDQuMjUxOTUsMS45MDQzLDQuMjUxOTUsNC4yNTE5NXY1LjY2OTkyDQoJCQkJYzAsNy44MjcxNS02LjM0NTcsMTQuMTcyODUtMTQuMTcyODUsMTQuMTcyODVoLTYuMDI0NDF2NzUuMTE4MTZjMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3Mjg1LDE0LjE3Mjg1aC05LjkyMTg4DQoJCQkJYy0yLjM0ODYzLDAtNC4yNTE5NS0xLjkwMjM0LTQuMjUxOTUtNC4yNXYtODUuMDQxMDJoLTE1Ljk0NDM0Yy0yLjM0ODYzLDAtNC4yNTE5NS0xLjkwMzMyLTQuMjUxOTUtNC4yNTE5NVYxMjExLjkyMjg1DQoJCQkJTDEyMTUuMDIwNTEsMTIxMS45MjI4NXogTTc3Ni40NDkyMiwxMjExLjkyMjg1YzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTczODMtMTQuMTczODNoNTAuMzE0NDUNCgkJCQljMi4zNDk2MSwwLDQuMjUxOTUsMS45MDQzLDQuMjUxOTUsNC4yNTE5NXY1LjY2OTkyYzAsNy44MjcxNS02LjM0NTcsMTQuMTcyODUtMTQuMTcxODgsMTQuMTcyODVoLTYuMDI1Mzl2NzUuMTE4MTYNCgkJCQljMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3Mjg1LDE0LjE3Mjg1aC05LjkyMDljLTIuMzQ5NjEsMC00LjI1MTk1LTEuOTAyMzQtNC4yNTE5NS00LjI1di04NS4wNDEwMmgtMTUuOTQ1MzENCgkJCQljLTIuMzQ3NjYsMC00LjI1MTk1LTEuOTAzMzItNC4yNTE5NS00LjI1MTk1VjEyMTEuOTIyODVMNzc2LjQ0OTIyLDEyMTEuOTIyODV6IE05MjkuNjA0NDksMTI3Mi4wMjI0NmwyNi45NTgwMSwzMi4xMjc5Mw0KCQkJCWMyLjMxNDQ1LDIuNzU3ODEsMC4zNDM3NSw2Ljk4NDM4LTMuMjU2ODQsNi45ODQzOGgtMTkuNzA1MDhjLTQuMTg5NDUsMC04LjE2NTA0LTEuODUxNTYtMTAuODU3NDItNS4wNjA1NWwtMjIuNjgxNjQtMjcuMDMxMjUNCgkJCQl2MjcuODQxOGMwLDIuMzQ3NjYtMS45MDMzMiw0LjI1LTQuMjUxOTUsNC4yNWgtOS45MjA5Yy03LjgyNzE1LDAtMTQuMTcyODUtNi4zNDM3NS0xNC4xNzI4NS0xNC4xNzI4NXYtODUuMDM5MDYNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2gyOS43NjM2N2MyMi43MDAyLDAsNDEuMTAyNTQsMTcuMTMzNzksNDEuMTAyNTQsMzguMjY4NTUNCgkJCQlDOTU2Ljc1NDg4LDEyNTIuNTkwODIsOTQ1LjQzNjUyLDEyNjYuNzAyMTUsOTI5LjYwNDQ5LDEyNzIuMDIyNDZMOTI5LjYwNDQ5LDEyNzIuMDIyNDZ6IE05MDAuMDYxNTIsMTIyMS44NDM3NXYzMi41OTg2M2g4LjUwMzkxDQoJCQkJYzEwLjk1ODk4LDAsMTkuODQyNzctNy4yOTc4NSwxOS44NDI3Ny0xNi4yOTg4M2MwLTkuMDAxOTUtOC44ODM3OS0xNi4yOTk4LTE5Ljg0Mjc3LTE2LjI5OThIOTAwLjA2MTUyTDkwMC4wNjE1MiwxMjIxLjg0Mzc1eg0KCQkJCSBNMTE1OC4zNTkzOCwxMTk1LjYyMzA1YzExLjM4NDc3LDAsMjIuMDEyNywzLjIzNzMsMzEuMDE3NTgsOC44Mzc4OWMxLjk0NzI3LDEuMjEwOTQsMi41ODQ5NiwzLjc0OTAyLDEuNDM4NDgsNS43MzQzOA0KCQkJCWwtNC45MzI2Miw4LjU0MTk5Yy0zLjI3ODMyLDUuNjc5NjktMTAuMDMzMiw4LjM3Njk1LTE2LjMxNzM4LDYuNTAwOThjLTIuNzY0NjUtMC44MjUyLTUuNjkzMzYtMS4yNjg1NS04LjcyNTU5LTEuMjY4NTUNCgkJCQljLTE2LjgyOTEsMC0zMC40NzI2NiwxMy42NDM1NS0zMC40NzI2NiwzMC40NzI2NmMwLDE2LjgyODEzLDEzLjY0MzU1LDMwLjQ3MjY2LDMwLjQ3MjY2LDMwLjQ3MjY2DQoJCQkJYzMuMDMyMjMsMCw1Ljk2MDk0LTAuNDQzMzYsOC43MjU1OS0xLjI2ODU1YzYuMjk1OS0xLjg3OTg4LDEzLjAzMzIsMC44MTE1MiwxNi4zMTgzNiw2LjUwMDk4bDQuOTMwNjYsOC41NDE5OQ0KCQkJCWMxLjE0NzQ2LDEuOTg4MjgsMC41MTA3NCw0LjUyMzQ0LTEuNDM3NSw1LjczNDM4Yy05LjAwNDg4LDUuNjAxNTYtMTkuNjMyODEsOC44Mzc4OS0zMS4wMTc1OCw4LjgzNzg5DQoJCQkJYy0zMi40ODUzNSwwLTU4LjgxOTM0LTI2LjMzNDk2LTU4LjgxOTM0LTU4LjgxOTM0QzEwOTkuNTQwMDQsMTIyMS45NTcwMywxMTI1Ljg3NDAyLDExOTUuNjIzMDUsMTE1OC4zNTkzOCwxMTk1LjYyMzA1eiIvPg0KCQkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiMwMEZGREEiIGQ9Ik0xMzE4LjE5NzI3LDEyMDYuMDMyMjMNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2MyMC42NTYyNSwwLDQxLjMxMjUsMCw2MS45Njg3NSwwYzMuNDI5NjksMCw1LjQ1MDIsMy44ODA4NiwzLjQ4MzQsNi42OTA0Mw0KCQkJCWwtMTkuMjk2ODgsMjcuNTY3MzhjMTUuNTQyOTcsOC4zNzU5OCwyNi4xMDY0NSwyNC44MDA3OCwyNi4xMDY0NSw0My42OTUzMWMwLDI3LjM5NzQ2LTIyLjIwODk4LDQ5LjYwNjQ1LTQ5LjYwNjQ1LDQ5LjYwNjQ1DQoJCQkJYy0xNi42ODg0OCwwLTMxLjQ1MTE3LTguMjQwMjMtNDAuNDQzMzYtMjAuODc1OThjLTEuNDUwMi0yLjAzOTA2LTAuODMxMDUtNC44OTk0MSwxLjMzNTk0LTYuMTUyMzRsMTAuOTc3NTQtNi4zMzc4OQ0KCQkJCWM0Ljg4MTg0LTIuODE4MzYsMTAuOTc5NDktMi40NzU1OSwxNS41MTQ2NSwwLjg3MzA1YzMuNTI4MzIsMi42MDU0Nyw3Ljg5MTYsNC4xNDY0OCwxMi42MTUyMyw0LjE0NjQ4DQoJCQkJYzExLjc0MjE5LDAsMjEuMjU5NzctOS41MTg1NSwyMS4yNTk3Ny0yMS4yNTk3N3MtOS41MTc1OC0yMS4yNTk3Ny0yMS4yNTk3Ny0yMS4yNTk3N2gtMTUuMjE3NzcNCgkJCQljLTMuNDI5NjksMC01LjQ1MDItMy44ODA4Ni0zLjQ4NDM4LTYuNjkwNDNsMTguMTM1NzQtMjUuOTA4MmgtMzIuMDA5NzdjLTIuMzQ4NjMsMC00LjI1MTk1LTEuOTAzMzItNC4yNTE5NS00LjI1MTk1VjEyMDYuMDMyMjN6DQoJCQkJIi8+DQoJCTwvZz4NCgkJPGc+DQoJCQk8Zz4NCgkJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0RBRThGNyIgZD0iTTg1MC4zOTU1MSw4NTcuNTkxOA0KCQkJCQljLTUwLjM1NjQ1LDAtOTQuMzI1Mi0yNy4zNTY0NS0xMTcuODUyNTQtNjguMDIwNTFsLTgwLjAzMDI3LDQ2LjIwNDFjLTQuNjU1MjcsMi42ODk0NS02LjEzMTg0LDguNzE4NzUtMy4yNDkwMiwxMy4yNTU4Ng0KCQkJCQljNDIuMjM3Myw2Ni40ODYzMywxMTYuNTMzMiwxMTAuNjA3NDIsMjAxLjEzMTg0LDExMC42MDc0MmM4OC4xMjU5OCwwLDE2NS4wNzEyOS00Ny44NzUsMjA2LjI0MzE2LTExOS4wMzYxM2wtODAuNDg3My00Ni40Njk3Mw0KCQkJCQljLTQuMzEzNDgtMi40OTAyMy05LjgwMTc2LTEuMjA1MDgtMTIuNTcwMzEsMi45MzU1NUM5MzkuMTc1NzgsODMzLjU2MjUsODk3LjU5MTgsODU3LjU5MTgsODUwLjM5NTUxLDg1Ny41OTE4DQoJCQkJCUw4NTAuMzk1NTEsODU3LjU5MTh6IE0xMTM2LjcyMTY4LDU1Ni4yMTc3N2M0LjYxNDI2LTIuNjYzMDksNi4xMTAzNS04LjYxOTE0LDMuMzEyNS0xMy4xNTEzNw0KCQkJCQljLTU5LjkxNTA0LTk3LjAzMDI3LTE2Ny4yMjQ2MS0xNjEuNjk0MzQtMjg5LjYzODY3LTE2MS42OTQzNGMtMTI1Ljg5MzU1LDAtMjM1LjgxMzQ4LDY4LjM5MjU4LTI5NC42MzM3OSwxNzAuMDQ5OA0KCQkJCQlsODAuMzc2OTUsNDYuNDA2MjVjNC4zOTc0NiwyLjUzOTA2LDEwLjAwMTk1LDEuMTQ5NDEsMTIuNzEwOTQtMy4xNDU1MQ0KCQkJCQljNDIuMTY0MDYtNjYuODUxNTYsMTE2LjY2ODk1LTExMS4yNjM2NywyMDEuNTQ1OS0xMTEuMjYzNjdjODguMTI1OTgsMCwxNjUuMDcxMjksNDcuODc1OTgsMjA2LjI0MzE2LDExOS4wMzYxMw0KCQkJCQlMMTEzNi43MjE2OCw1NTYuMjE3Nzd6Ii8+DQoJCQkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiNBNUJBQzgiIGQ9Ik04NTAuMzk1NTEsOTU5LjYzODY3DQoJCQkJCWMtODQuNTk4NjMsMC0xNTguODk0NTMtNDQuMTIxMDktMjAxLjEzMTg0LTExMC42MDc0MmMtMi44NzY5NS00LjUzMDI3LTEuMzk5NDEtMTAuNTcwMzEsMy4yNDkwMi0xMy4yNTU4Nmw4MC4wMzAyNy00Ni4yMDQxDQoJCQkJCWMtMTEuNTgxMDUtMjAuMDE2Ni0xOC4yMDk5Ni00My4yNTQ4OC0xOC4yMDk5Ni02OC4wNDE5OWMwLTc0Ljc4NTE2LDYwLjU1NzYyLTEzNi4wNjI1LDEzNi4wNjI1LTEzNi4wNjI1DQoJCQkJCWM0Ny4xOTYyOSwwLDg4Ljc4MDI3LDI0LjAyOTMsMTEzLjE4NTU1LDYwLjUyMjQ2YzIuNzY0NjUsNC4xMzM3OSw4LjI2MzY3LDUuNDIxODgsMTIuNTcwMzEsMi45MzU1NWw4MC40ODczLTQ2LjQ2OTczDQoJCQkJCWMtNDEuMTcxODgtNzEuMTYwMTYtMTE4LjExNzE5LTExOS4wMzYxMy0yMDYuMjQzMTYtMTE5LjAzNjEzYy04NC44NzY5NSwwLTE1OS4zODE4NCw0NC40MTIxMS0yMDEuNTQ1OSwxMTEuMjYzNjcNCgkJCQkJYy0yLjcwNjA1LDQuMjkxMDItOC4zMTgzNiw1LjY4MTY0LTEyLjcxMDk0LDMuMTQ1NTFsLTgwLjM3Njk1LTQ2LjQwNjI1DQoJCQkJCWMtMjguOTUyMTUsNTAuMDQwMDQtNDUuNTIzNDQsMTA4LjEzOTY1LTQ1LjUyMzQ0LDE3MC4xMDc0MmMwLDE4Ni45NjM4NywxNTEuMzk0NTMsMzQwLjE1NzIzLDM0MC4xNTcyMywzNDAuMTU3MjMNCgkJCQkJYzEyMi40MTQwNiwwLDIyOS43MjM2My02NC42NjQwNiwyODkuNjM4NjctMTYxLjY5NTMxYzIuNzk0OTItNC41MjYzNywxLjI5NDkyLTEwLjQ5MDIzLTMuMzEyNS0xMy4xNTEzN2wtODAuMDgzMDEtNDYuMjM3Mw0KCQkJCQlDMTAxNS40NjY4LDkxMS43NjM2Nyw5MzguNTIxNDgsOTU5LjYzODY3LDg1MC4zOTU1MSw5NTkuNjM4Njd6Ii8+DQoJCQk8L2c+DQoJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzAwRkZEQSIgZD0iTTExMzcuMTg1NTUsNzU4LjExMzI4di03My4xNjc5N2wtNjMuMzY1MjMsMzYuNTgzOTgNCgkJCQlMMTEzNy4xODU1NSw3NTguMTEzMjhMMTEzNy4xODU1NSw3NTguMTEzMjh6IE0xMDI2LjU3NjE3LDcwNS4xNjQwNmwxMjAuMDU4NTktNjkuMzE2NDENCgkJCQljMTIuNTY4MzYtNy4yNTU4NiwyOC4zNDQ3MywxLjg1MjU0LDI4LjM0NTcsMTYuMzY2MjF2MTM4LjYzMDg2Yy0wLjAwMDk4LDE0LjUxMjctMTUuNzc3MzQsMjMuNjIyMDctMjguMzQ1NywxNi4zNjYyMQ0KCQkJCWwtMTIwLjA1ODU5LTY5LjMxNjQxQzEwMTQuMDI4MzIsNzMwLjY0OTQxLDEwMTQuMDI4MzIsNzEyLjQwOTE4LDEwMjYuNTc2MTcsNzA1LjE2NDA2eiIvPg0KCQk8L2c+DQoJPC9nPg0KPC9nPg0KPC9zdmc+DQo=").then(t=>{"done"===this.vzt?s.gI(t):this.yzt.gzt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.rUt("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAABABAMAAACekdKMAAAAMFBMVEUAAAByfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYYgo7vbAAAAD3RSTlMAmd137hFVqjO7zCKIRGZ881JRAAAFY0lEQVR42u2aPW/bVhSGn1iiPizZ8D+QgSJBNglFmiboQA0NUKAD1XotYA0BOspAkZnqx24vnTrIQNCpg4QkQMcYKDoW9j9w5y6qLNqWFDlvh3tJUa6ddHBhAuS7SKBIQffhuee851CQKVOmTJkyZcqUKXmqa8O+uyNlABKsFRmdP0o5AOle2gHoWdoBzFrpBHACwPeetJNmAFSlt6kGwGH0LqUAVqRuqgHkpEaqAVRkfvOWr+Dh9Rc4j6VvwnrhPNAbgK2ezj+yx7Z6GjUuASi4Ch4lHQAGwBeRK1rROQAdUx5K0hE4NUkaAdS02ZEuoms2wkCSgvYSgFJfkn6CobkSPG0mEcAOrHnGFOxAToHNjk/MygLgO/PxL0BN9yRdQKlufMQAoCdJGi8BOJYknXTJ269cu9HtdqNb4Ni6oimUbFb0dAZQ1DmULJ+TFtT0qQHwg73mLlCMfFUMQPR5VWrbmttNHICC1KDiSZ+w3pMOwFPDhP4IYFtv4ZX0nIorbUBNmjWAiqdZg5fmNFd6jvPhJQDjAV9LI0r28IpmycsBZalNWfoRWJcuoKY9c7cCkwpOwdcIqNT1BmrSgQkNbQAvpAGOF+aHOIBpCxhKR/TVBNjVOHkAOgrg2N6aoU7sklmVidtD7bNm/fIrjaBmk+Sxea142iBnTyguAfjZZscNXLOdXFM8EgVgXRpDz/6yonTEts6AXdV1APTVoKigFSXEmj3XN0kSV01WFQwAHC8O4Mhagye8NgHS137SALzsS3dxwhtXkQ4oaw64eqomOFKXbc2xJbFLTX8DOHYnsKsJu2Gdu8IIuTqjrMB8eyM5ACIFXQo2S5t7lNMM6AdFTaCgADqahHW8EQIohBk9rzEdE+JXAtjVmHWpDTmplUAA96Ea/bJDnVKSWjgaFTSHqubgmjVDXQchgFy4wBXNcXV6LYC8RjbEypomcCAyBopRShxqAn21yenM8WawqjOoKVbmLYBFndeImsnyVwJY1RR8NW1FTRiA6UNTCsP6fKwLONQBZTXx1WVbT0KbtwygvAxg81oAZU0xe2QYxkmyrDDx2DzWBXTUZFs7dNQwHUEMwN4VAKb47wOQ1wj8Gx0+/Y8A8powVJtt7XOoxn8A8N4IqCrA8cJUmzgAl3JAUWN8tSjqDX0NwI/XbwugGLe178oBK7bBaBesm0gggOUqwLrOHe8c1jV2NAMOw/XFAFRth2dr/burANS1cSc0C8kDsB7zAZvgKCjoLTiaFqwpmvwLQC7e2b3PB4CrZj48KXkAKktOEPr6VqeAr680udzEWACluK0LreJ1ThBe6+w4HkfJAhD1AtbAu3qgPcDVX2oCK9bqxwFQ1+fRsVW7va/uBZpAWaND652TCGBoM1rHHN6VmQlsq6cdE+4mC75oLAC49prKB1zTDd6NukHIKahbIkkEsGrmAQWZbZqXNLClrg04dTP4KnjnCwBfmgkZT7WD45k94C8BmA3MPGBgeqcbfQBxwwDsRMi3N7Iqc3dzsuVhV5ofkevpJOoGKUn6Ax5L92F49USoayZCls08uQDiM0ETCWPb8k7DMmH02SICGC7ayVhnsABwEpsZQkfxUpI4ALGpsFn4xCbHcVjnwgnvAkBh0U6CbzqrXgzA1E6FB9YOJGcacgUAfl36t0Ro/SIDUDEL/D1WBcJr5q0oRoJ2LQZgZJ4LPIu2RCPJAJafDLm2Yr2OHmQ4H0vzBksA2PKl38L3fY0aLAFYejK0ZpJhelVKzkj8dlRNzkj8dpRP0DTkVjTUXroB9PVnqtefS9I05BZU8NOdAyUl5q8RtwUg6KYcwP1Up8CanpMpU6ZMmTLdgP4BRYsi23xEdOAAAAAASUVORK5CYII=").then(t=>{"done"===this.vzt?s.gI(t):this.yzt.Mzt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.rUt("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAABABAMAAACekdKMAAAAMFBMVEUAAAByfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYYgo7vbAAAAD3RSTlMAdxHdu4hmVZnuRMwzqiLYE4y2AAAFw0lEQVR42u2Yy+9LQRTHp6Xq0VIkXkFvwkYslAWJiGJj2a6sJJe/oF3YWGElEQmxkYi4ErFWNpatWFmIx9Lm1sJCLKgqraqv82h726l6hOuRzDf53TtnOr+ZOZ+ZOffca5ycnJycnJycnJycnJycnJz+pi7g2G9osxjvzX8qB8ABcAAcgH8XwDa85dspNOiaRDuAR4U0PnHtDuyy7IJRJS6gvVmL6TywVkp4ZxIhulUxFvlaXQTrgEHbnMDH5XRjlXCdb+uAnc2ojWgFFTYBZ8e9tzcaswAk6v/3K4sPfPNRFj87IXj+KXQUS9m2jXoH1lMuLq2DtEcAtNMBT9PjanFq7ySAhbABVEAaeDaAwkk2D7GRqctAMQJIq2sBauLnB/VxCfqKpWrbRhSC1W5SMQ9RTgBUwKpF1ccmAIQ2gCxE+20Au9nSESvDgeIDkJSBMpA9vgyXdsj0H0GORL3n2fbwPOKoSQS4Q2cBOGzSJbQYAHDbZEI+rEuBcyZRlF71fIP/x0wBuIBOw6xH3xu2GQFAP2cegmvSwHkeqBZjECzB46UXD3bg8UKJCT6QYzgDY9uiU7hC11doERq6MAZ2CPJ7ipEulOrteDcB4KOZBpBG7zrV1JGzATzmIdnrl/go3bRiBJBHlZc+6ItjuQQ+yFLz8Gka2LZFRVTFGdoQJQ0LPodHnXkS8AjlRWkBLwKQswAs0PDzGpcsAAMNuG+5WgdqxwjgEcp8qcBjN5oZdPhEvOfhU/hsbJuVloWV6WWgp2IBLxXQNEwLDfKqoMXrEQBjATiFA3qePlgAZJRl+EStdaAQjfgALOC1zfeX8ALV+7S69JdALWjxHGqztmxyMnTD6OOBWvAdGDkn60c6vrI5H4CPnOJsWQDe8G0hIU0MB8ojFx+AFAeqeitLy5FkL3w0yNNcSOx3oDxjjxaH9XxldZluY5NBfwrAQvQbRjQXAO8UqVq5dh6A7HCgWzgdFwBdgOX4lMZbTndkWWkDN07Bk+zItllLdHm1+FkLwBSADNDf8B0AnGOp5gFYgJEexwcgGQx4iyeD9ybFkWsbDZbv0+2Y8XvGtqMpWsUimpMAzA1AUrj5ALjm2wCoONKB+ACYsEeDlU04MMs4imeJQqljslSuD4xl/zgAsx6ku/8DgDwaO9AwFU56qhzOPiXpKCzCpSSdb8v+CQDmXshb99cARAPFCOA1chWaFXlP55yn2FqEgiFvOSzYtmiJzisKB7MxQPS8iO63YsD3AHDv8QPgjR92eKuf9vts1wdZjvZhN4XajD35FNDiR7ln0LYBaILY+OZT4DsA+BkTP4AUrgXkxSJcDFps+72X7EGlx6mBbU/lAbdQjvKA7hSAlSuHxdw0gORsHrAUnXkAUuj+AQAZdHGRp9bShX2ECz1JRSk4zNhRJqj5SZQJfpgCUNS2eRsAP/usTDAxPxFKA834AZgAOM1z6qGgxxpdmUDQNjP25LtAsojxu0AehSkAF6RLXWR/EkAdVYEevQtswVtpMwuAB1JGh2jbxQcgBKrig/qSxTD6o2Nm7fttSY6uUnErV+jb4CJyaArAI5luJkCDOy5HAPISSB5A3wYbhJERahvtPALAAw2EI9Vzsh2TTuk23qEceN9d4vVVv227hNroe0CRi/o9IKTZTQFIAc/M8jwGEiouG2/042u8u25uAuPvAavRH7XhzqcBpICdRpssRa+aNLFoh2JeyBzU08fih/ht20WZXghW34s+/ZQnAKhzojsSH4CC/sjARPKamLXacOfTAIwfNSkCbROLluG9Tm2gdl3PY178tu2SBIpFQ6fHH//2GAvAogCkjtGDEAFQYPsu6DdBqw11bgFIF8dNHsQGIEFRSDOe0RS9YYJk23JMrw+/Cr9bFX0VXmNsACbhA088qXhBrMYAlq8Gjhh//FX4YNSGO7cASO9n9B99AuHk5OTk5OTk5OTk5OTk5OTk5OT0VX0B7+fX+9cwWYYAAAAASUVORK5CYII=").then(t=>{"done"===this.vzt?s.gI(t):this.yzt.wzt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async eUt(t){t=new URL(t,this.Pc.nUt()).toString();const s=await $w.eo(t),i=await this.Pc.hUt(s,2048,2048);return await this.pT().lO(i,{lx:"high"})}async rUt(t){t=new URL(t,this.Pc.nUt()).toString();const s=await $w.eo(t);return await this.pT().lO(s,{lx:"high"})}oUt(){this.Pc.Bc("runtime","hide-cordova-splash")}aUt(){this.czt=Date.now(),this.Pc.Mf().addEventListener("loadingprogress",this.pzt),this.fzt=requestAnimationFrame(()=>this.lUt()),3!==this.Pc.uUt()&&this.oUt()}async cUt(){const t=this.pT();this.dzt=1;const s=this.Pc.uUt();4===s&&await this.Izt,this.xzt=null,this.Izt=null,-1!==this.fzt&&(cancelAnimationFrame(this.fzt),this.fzt=-1),this.Pc.Mf().removeEventListener("loadingprogress",this.pzt),this.pzt=null,this.mzt&&(this.mzt.Vr(),this.mzt=null),this.Pc.fUt(),t.$L(),this.yzt.gzt&&(t.gI(this.yzt.gzt),this.yzt.gzt=null),this.yzt.Mzt&&(t.gI(this.yzt.Mzt),this.yzt.Mzt=null),this.yzt.wzt&&(t.gI(this.yzt.wzt),this.yzt.wzt=null),t.KL(0,0,0,0),t.AS(),this.vzt="done",this.XFt=t.OS(),3===s&&this.oUt()}lUt(){if(-1===this.fzt)return;const t=this.pT();t.$L(),this.fzt=-1;const s=this.Pc.Gj().CK(),i=this.Pc.uUt();if(3!==i&&(this.jBt(t),t.KL(0,0,0,0),t.SL(),t.ab(),t.vL(null)),0===i)this.dUt(s);else if(1===i)this.pUt(s,120,0);else if(2===i)this.mUt(s);else if(3===i)$w.mh();else{if(4!==i)throw new Error("invalid loader style");this.yUt(s)}t.AS(),this.fzt=requestAnimationFrame(()=>this.lUt())}mUt(t){t?this.mzt._E(1,0,0):this.mzt._E(.6,.6,.6),this.mzt.Uc(Math.round(100*this.dzt)+"%");const s=this.GFt/2,i=this.NFt/2;nb.jl(s-150,i-100,s+150,i+100);const e=this.pT();e.vL(this.mzt.vI()),e.sS(nb,this.mzt.yD())}pUt(t,s,i){const e=this.pT();e.mb(),t?e.wL(1,0,0,1):e.wL(.118,.565,1,1);const r=this.GFt/2,n=this.NFt/2,h=s/2;hb.Qa(r-h,n-4+i,Math.floor(s*this.dzt),8),e.Rect(hb),hb.Qa(r-h,n-4+i,s,8),hb.offset(-.5,-.5),hb.cl(.5,.5),e.wL(0,0,0,1),e.hS(hb),hb.cl(1,1),e.wL(1,1,1,1),e.hS(hb)}dUt(t){const s=this.pT(),i=this.Pc.iUt();if(!i)return void this.pUt(t,120,0);const e=i.vI();if(!e)return void this.pUt(t,120,0);const r=e.Yy(),n=e.eg(),h=this.GFt/2,o=this.NFt/2,a=r/2,l=n/2;nb.jl(h-a,o-l,h+a,o+l),s.vL(e),s.Nl(nb),this.pUt(t,r,l+16)}yUt(t){const s=this.pT(),i=this.yzt.gzt,e=this.yzt.Mzt,r=this.yzt.wzt,n=Date.now();0===this.bzt&&(this.czt=n);const h=this.Pc.gUt()||this.Pc.MUt()&&!this.Pc.wUt(),o=h?0:200,a=h?0:3e3;let l=1;"fade-in"===this.vzt?l=Math.min((n-this.czt)/300,1):"fade-out"===this.vzt&&(l=Math.max(1-(n-this.Tzt)/300,0)),s.mb(),s.wL(.231*l,.251*l,.271*l,l),hb.set(0,0,this.GFt,this.NFt),s.Rect(hb);const u=Math.ceil(this.GFt),c=Math.ceil(this.NFt);let f,d;this.NFt>256?(s.wL(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),hb.Qa(0,.8*c-d/2,f,d),s.Rect(hb),t?s.wL(l,0,0,l):s.wL(.161*l,.953*l,.816*l,l),f=u*this.dzt,hb.Qa(.5*u-f/2,.8*c-d/2,f,d),s.Rect(hb),s.wL(l,l,l,l),s.ab(),e&&(f=1.5*$w.Xr(.22*c,105,.6*u),d=f/8,hb.Qa(.5*u-f/2,.2*c-d/2,f,d),s.vL(e),s.Rect(hb)),i&&(f=Math.min(.395*c,.95*u),d=f,hb.Qa(.5*u-f/2,.485*c-d/2,f,d),s.vL(i),s.Rect(hb)),r&&(f=1.5*$w.Xr(.22*c,105,.6*u),d=f/8,hb.Qa(.5*u-f/2,.868*c-d/2,f,d),s.vL(r),s.Rect(hb))):(s.wL(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),hb.Qa(0,.85*c-d/2,f,d),s.Rect(hb),t?s.wL(l,0,0,l):s.wL(.161*l,.953*l,.816*l,l),f=u*this.dzt,hb.Qa(.5*u-f/2,.85*c-d/2,f,d),s.Rect(hb),s.wL(l,l,l,l),s.ab(),i&&(f=.55*c,d=f,hb.Qa(.5*u-f/2,.45*c-d/2,f,d),s.vL(i),s.Rect(hb))),this.bzt++,"fade-in"===this.vzt&&n-this.czt>=300&&this.bzt>=2&&(this.vzt="wait",this.Szt=n),"wait"===this.vzt&&n-this.Szt>=a&&this.dzt>=1&&(this.vzt="fade-out",this.Tzt=n),("fade-out"===this.vzt&&n-this.Tzt>=300+o||h&&this.dzt>=1&&n-this.czt<500)&&this.xzt()}}}{const ob=self.Cs,ab=self.eJ,lb=(self.assert,self.Dq),ub={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""};let cb=!0;ob.bUt=class extends ob.Wr{constructor(t){t=Object.assign({},ub,t),super(),this.SUt=t.messagePort,this.TUt=t.runtimeBaseUrl,this.vUt=t.previewUrl,this.xUt=!!t.headless,this.IUt=!!t.hasDom,this.CUt=!!t.isInWorker,cb=t.ife,this.GUt=!!t.useAudio,this.NUt=t.exportType,this._Ut=t.isNWjs,this.CX=!!t.isiOSCordova,this.EUt=!!t.isiOSWebView,this.DUt=!!t.isWindowsWebView2,this.AUt=!!t.isAnyWebView2Wrapper,this.LUt=!!t.isFBInstantAvailable,this.OUt=!("preview"!==this.NUt||!t.isDebug),this.RUt=this.OUt,this.kUt=this.OUt,this.jUt=0,this.PUt=[],this.FUt=[],this.zUt=!1,this.BUt="",this.UUt="",this.WUt="",this.QUt="",this.JUt=0,this.VUt=0,this.YUt=0,this.BR=self.devicePixelRatio,this.HUt=0,this.qUt=0,this.ZUt=0,this.XUt=0,this.KUt=0,this.$Ut=!1,this.gM=!0,this.tWt=!1,this.sWt=!1,this.iWt=!1,this.eWt=null,this.JK=ob.Jr(ob.TX,this,t),this.a4=ob.Jr(ob.I6,this),this.Jpt=ob.Jr(ob.Umt,this),this.rWt=ob.Jr(ob.pB,this,t.wrapperComponentIds),this.nWt=ob.Jr(ob.nPt,this),this.stt=ob.Jr(ob.P6,this),this.hWt=ob.Jr(ob.cct,this),this.oWt=ob.Jr(ob.dct,this),this.Gct=ob.Jr(ob.Sct,this),this.fM=ob.Jr(ob.tM,{eM:t=>this.aWt(t),nM:t=>this.lWt(t)}),this.uWt=new Map,this.cWt=[],this.fWt=new Map,this.dWt=new Map,this.pWt=0,this.mWt=[],this.yWt=new Set,this.gWt=[],this.MWt=[],this.wWt=new Map,this.bWt=!1,this.SWt=!1,this.TWt=0,this.vWt=0,this.xWt=new Map,this.IWt=new Set,this.CWt=new Set,this.GWt=[],this.NWt=[],this._Wt=null,this.EWt=!1,this.DWt="vsync",this.Sx="trilinear",this.AWt=!1,this.LWt=!0,this.OWt=!1,this.RWt=!1,this.kWt=null,this.jWt={PWt:t=>{this.fzt=-1,this.FWt=-1,this.u7(t)},zWt:t=>{this.FWt=-1,this.u7(t,!1,"skip-render")},BWt:()=>{this.fzt=-1,this.ck()}},this.fzt=-1,this.FWt=-1,this.UWt=0,this.WWt=0,this.QWt=!1,this.JWt=!1,this.VWt=!1,this.YWt=!0,this.HWt=!0,this.qWt=!1,this.ZWt=0,this.XWt=new ob.Qd(1),this.KWt=()=>Math.random(),this.$Wt=0,this.tQt=0,this.sQt=0,this.iQt=0,this.eQt=0,this.DLt=1,this.rQt=1/30,this.nQt=0,this.hQt=ob.Jr(ob.$f),this.oQt=ob.Jr(ob.$f),this.aQt=ob.Jr(ob.$f),this.lQt=new Map,this.uQt=-1,this.cQt=0,this.fQt=0,this.dQt=-1,this.pQt=0,this.mQt=0,this.yQt=0,this.gQt=!1,this.MQt="",this.wQt=!1,this.bQt="",this.cJ=null,this.SQt="",this.TQt=null,this.vQt=null,this.ODt=ob.Jr(ob.Event.Mf),this.xQt=new Map,this.IQt=new Map,this.CQt=0,this.GQt=!1,this.NQt=!1,this._Qt=!1,this.EQt=[],this.DQt={pretick:ob.Jr(ob.Event,"pretick",!1),tick:ob.Jr(ob.Event,"tick",!1),tick2:ob.Jr(ob.Event,"tick2",!1),instancecreate:ob.Jr(ob.Event,"instancecreate",!1),instancedestroy:ob.Jr(ob.Event,"instancedestroy",!1),beforelayoutchange:ob.Jr(ob.Event,"beforelayoutchange",!1),layoutchange:ob.Jr(ob.Event,"layoutchange",!1)},this.DQt.instancecreate.fY=null,this.DQt.instancedestroy.fY=null,this.B0=ob.Jr(ob.Event.Mf),this.AQt=null;const s=(t,s)=>ob._Lt.Cjt(this,t,s);this.LQt=ob.Jr(ob.ld,s),this.OQt=ob.Jr(ob.ld,s),this.RQt=ob.Jr(ob.ld,s),this.kQt=ob.Jr(ob.jQt,this,t.jobScheduler),t.canvas&&(this._Wt=ob.Jr(ob.mFt,this)),this.SUt.onmessage=t=>this._OnMessageFromDOM(t.data),this.XQ("runtime","visibilitychange",t=>this.PQt(t)),this.XQ("runtime","wrapper-extension-message",t=>this.FQt(t)),this.XQ("runtime","get-remote-preview-status-info",()=>this.zQt()),this.XQ("runtime","js-invoke-function",t=>this.yyt(t)),this.XQ("runtime","go-to-last-error-script",self.goToLastErrorScript),this.XQ("runtime","offline-audio-render-completed",t=>this.BQt(t)),this.ODt.addEventListener("window-blur",t=>this.UQt(t)),this.ODt.addEventListener("window-focus",()=>this.WQt()),this.stt.M8(),this.oWt.M8(),this.QQt=null,this.JQt=new WeakMap,this.VQt={keyboard:null,SF:null,TF:null,vF:null},this.YQt=new WeakMap,this.HQt=[]}static QI(t){return ob.Jr(ob.bUt,t)}Vr(){ob.wh(this.cWt),this.fWt.clear(),this.dWt.clear(),this.a4.Vr(),this.a4=null,this.Jpt.Vr(),this.Jpt=null,this.rWt.Vr(),this.rWt=null,this.JK.Vr(),this.JK=null,this.nWt.Vr(),this.nWt=null,this.stt.Vr(),this.stt=null,this.hWt.Vr(),this.hWt=null,this.oWt.Vr(),this.oWt=null,this.Gct.Vr(),this.Gct=null,this.fM.Vr(),this.fM=null,this._Wt&&(this._Wt.Vr(),this._Wt=null),this.ODt.Vr(),this.ODt=null,this.qQt=null}_OnMessageFromDOM(t){const s=t.type;if("event"===s)this.ZQt(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.XQt(t)}}ZQt(t){if(!this._Qt)return void this.EQt.push(t);const s=t.component,i=t.handler,e=t.data,r=t.dispatchOpts,n=!(!r||!r.dispatchRuntimeEvent),h=!(!r||!r.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(n){const t=new ob.Event(i);t.data=e,this.ODt.Nf(t)}if(h){const t=new ob.Event(i,!0);for(const[s,i]of Object.entries(e))t[s]=i;this.GK(t)}}const a=this.xQt.get(s);if(!a)return void(n||h||console.warn(`[Runtime] No DOM event handlers for component '${s}'`));const l=a.get(i);if(!l)return void(n||h||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`));let u=null;try{u=l(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.KQt(o,!1,""+t))}null!==o&&(u&&u.then?u.then(t=>this.KQt(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.KQt(o,!1,""+t)}):this.KQt(o,!0,u))}KQt(t,s,i){this.SUt.postMessage({type:"result",responseId:t,isOk:s,result:i})}XQt(t){const s=t.responseId,i=t.isOk,e=t.result,r=this.IQt.get(s);i?r.resolve(e):r.reject(e),this.IQt.delete(s)}XQ(t,s,i){let e=this.xQt.get(t);if(e||(e=new Map,this.xQt.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}Bc(t,s,i,e){this.SUt.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}WF(t,s,i,e){const r=this.CQt++,n=new Promise((t,s)=>{this.IQt.set(r,{resolve:t,reject:s})});return this.SUt.postMessage({type:"event",component:t,handler:s,data:i,responseId:r},e),n}Uq(t,s,i,e=-1){this.Bc("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}Wq(t,s,i){const e=this.CQt++,r=new Promise((t,s)=>{this.IQt.set(e,{resolve:t,reject:s})});return this.Uq(t,s,i,e),r}FQt(t){if(-1!==t.asyncId){const s=t.asyncId;this.IQt.get(s).resolve(t.params),this.IQt.delete(s)}else this.ZQt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}mJ(t,s,i){this.XQ("wrapper-extension:"+t,s,i)}dJ(t){return this.rWt.dJ(t)}$Qt(t){if(!this.iJ())throw new Error("not in debug mode");this.Bc("runtime","post-to-debugger",t)}async OLt(t){ob.rIt(this),this.iJ()?await ab.OLt(this):self.eJ&&self.eJ.tJt(this);const s=await this.JK.io("data.json");if(await this.sJt(s),await this.iJt(t),this.gUt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.LBt()){const t=this.LBt();console.info(`[C3 runtime] Hosted in ${this.Jj()?"worker":"DOM"}, rendering with WebGL ${t._x()} [${t.NO()}]`)}else this.OBt()&&console.info(`[C3 runtime] Hosted in ${this.Jj()?"worker":"DOM"}, rendering with WebGPU [${this.OBt().RBt()}]`);this.pT().FS()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this._Qt=!0;for(const t of this.EQt)this.ZQt(t);ob.wh(this.EQt),this._Wt&&this._Wt.aUt();for(const s of t.runOnStartupFunctions)this.PUt.push(this.eJt(s));if(await Promise.all([this.JK.xK(),...this.PUt]),ob.wh(this.PUt),!this.JK.CK())return this._Wt&&await this._Wt.cUt(),await this.ODt.Cf(new ob.Event("beforeruntimestart")),await this.$L(),this.SUt.postMessage({type:"runtime-ready"}),this;this._Wt&&this._Wt.oUt()}async eJt(t){try{await t(this.QQt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async sJt(t){const s=t.project;this.BUt=s[0],this.UUt=s[16],this.WUt=s[31],this.QUt=s[38],this.JUt=s[36];const i=s[39]||"loading-logo.png";this.AWt=!!s[9],this.VUt=this.ZUt=s[10],this.YUt=this.XUt=s[11],this.nWt.qPt(this.VUt,this.YUt),this.HUt=this.VUt/2,this.qUt=this.YUt/2,this.DWt=s[37],this.EWt=!!s[40],this.Sx=s[14],this.tWt=s[15],this.sWt=s[42],this.iWt=s[17],this.$Ut=!!s[18],this.KUt=s[19],this.vWt=s[21],this.OWt=s[22];const e=this.JK;if(e.KX(s[45]),e.RK(s[7],s[25]),e.tK(s[8]),e.sK(s[32]),e.eK(s[28]),e.EK(s[29]),0===this.KUt){let t="";t="flat"===e.mz()?e.rK()+i:i,t&&(this.eWt=e.mK({url:t}))}this._Wt&&(this._Wt.xBt(ob.mFt._Bt(s[12])),this._Wt.GBt(s[23]?"high":"low"),this._Wt.kS(0!==s[24]),this._Wt.Czt(s[34]),this._Wt.EBt(s[41]),this._Wt.Gzt(s[13]),this._Wt.Nzt(s[30]),this._Wt.Dzt(s[46],s[47]),this._Wt.Ezt(s[26]),this._Wt.Azt(s[48]),this._Wt.Lzt(s[50]));const r=s[43];r&&await this.rJt(r),this.nJt(),this.rWt.wEt(),this.GWt=self.hJt();const n=s[2];for(const t of n[1])this.rWt.bEt(t);for(const t of n[0])this.rWt.MEt(t);this.GWt=self.hJt(),this.oJt(),this.rWt.CEt();for(const t of s[3]){const s=ob.Mct.QI(this,this.cWt.length,t);this.cWt.push(s),this.fWt.set(s._c().toLowerCase(),s),this.dWt.set(s.G1(),s)}for(const t of s[4])this.cWt[t[0]].MAt(t);for(const t of s[27]){const s=t.map(t=>this.cWt[t]);this.mWt.push(ob.Jr(ob.MLt,this,s))}this.aJt();for(const t of this.cWt)t.bAt();for(const t of s[5])this.a4.QI(t);const h=s[1];if(h){const t=this.a4.N6(h);t&&this.a4.C6(t)}for(const t of s[35])this.hWt.QI(t);for(const t of s[33])this.stt.QI(t);for(const t of s[44])this.oWt.QI(t);this.oWt.yct()||(this.oWt.Vr(),this.oWt=null);for(const t of s[49])this.Gct.QI(t);this.Gct.Ict()||(this.Gct.Vr(),this.Gct=null);for(const t of s[6])this.Jpt.QI(t);this.Jpt.wyt(),this.lJt(),ob.wh(this.GWt),this.pU();let o="any";const a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.Bc("runtime","set-target-orientation",{targetOrientation:o})}async rJt(t){const s=t.format;"image-sequence"===s?this.kWt=new self.uJt(this,t):"image-sequence-gif"===s?this.kWt=new self.cJt(this,t):"webm"===s?this.kWt=new self.fJt(this,t):"mp4"===s&&(this.kWt=new self.dJt(this,t)),this.DWt="unlimited-frame",this._Wt.xBt("off"),this.BR=1,self.devicePixelRatio=1,await this.WF("runtime","set-exporting-to-video",{message:this.kWt.pJt(0),duration:this.kWt.BY()})}uUt(){return this.KUt}hBt(){return null!==this.kWt}mJt(){return this.kWt.BY()}yJt(){return this.kWt.gJt()}MJt(){return this.kWt.OLt({width:this._Wt.hB(),height:this._Wt.aB()})}wJt(){const t=this.UWt/this.yJt();return this.kWt.bJt(this._Wt.TBt(),t)}SJt(){this.kWt&&this.kWt.Pet()}BQt(t){this.kWt.TJt(t)}vJt(){return this.kWt.AS()}MUt(){return this.LUt}TM(){return this.gM}YF(t){this.PUt.push(t)}E5(t){this.zUt=!!t}xJt(t){this.zUt&&this.FUt.push(t)}k5(){return this.FUt}cAt(){return this.pWt++}TAt(){return this.pWt}Rjt(t){this.yWt.add(t)}kjt(t){this.yWt.delete(t)}nBt(){return this.yWt}async iJt(t){this._Wt&&(await this._Wt.uo(t),this._Wt.sUt(this.KUt))}async $L(){this.QWt=!0,this.$Wt=Date.now();let t=null;const s=new Promise(s=>t=s);if(this.$Ut){for(const t of this.cWt)t.w1()||t.DAt()||!t.bB()||t.wNt();(async()=>{await this.JK.xK(),await s,this.gM=!1,this.IJt()})()}else this.gM=!1;this.JK.IK(),this.iJ()&&ab.CJt(cb);for(const t of this.a4.yF())t.Z5();this.hBt()&&await this.MJt();const i=this.a4.G6();await i.p5(null,this.pT()),await i.x5(!0),this.cQt=performance.now(),t(),this.$Ut||this.IJt(),(await this.WF("runtime","before-start-ticking")).isSuspended&&!this.hBt()?(this.ZWt++,this.qWt=!0):this.u7()}IJt(){this.HQ(ob.tz.$F.KF.GJt,null,null),this.Bc("runtime","register-sw")}TSt(t){t=Math.floor(t);const s=this.GWt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}oJt(){for(const t of self.NJt){const s=ob.Fh(Object.keys(t));this.NWt.push(s)}}Wyt(t){t=Math.floor(t);const s=this.NWt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}_Jt(){return this.IUt}EJt(){return this.xUt}Jj(){return this.CUt}nUt(){return this.TUt}DJt(){return this.vUt}oP(){return this.Jpt}bP(){return this.Jpt.bP()}Lyt(){return this.Jpt.Lyt()}dP(){return this.Jpt.dP()}Oyt(){return this.Jpt.Oyt()}iIt(){return 0===this.Lyt().umt()}kyt(){return this.Jpt.kyt()}xjt(){return this.rWt}_K(){return this.rWt._K()}Y0(t){if((t=Math.floor(t))<0||t>=this.cWt.length)throw new RangeError("invalid index");return this.cWt[t]}AJt(t){return this.fWt.get(t.toLowerCase())||null}Kq(t){return this.dWt.get(t)||null}yht(t){const s=ob.pB.RB(t);return s?s.zB():null}M1(){return this.cWt}*LJt(){for(const t of this.cWt)t.w1()||(yield*t.YB())}Mf(){return this.ODt}eP(){return this.B0}GK(t){t.runtime=this.mB();const s=this.iJ()&&!this.Jpt.fU();s&&ab.S6(),this.B0.dispatchEvent(t),s&&ab.T6()}W5(t){return t.runtime=this.mB(),this.B0.Cf(t)}Yj(){return this.VUt}qj(){return this.YUt}OJt(t,s){if(this.VUt===t&&this.YUt===s)return;this.VUt=t,this.YUt=s;const i=this.dF();i.k6(),i.j6()}Z1(){return this.ZUt}X1(){return this.XUt}bBt(t,s){if(this.ZUt===t&&this.XUt===s)return;this.ZUt=t,this.XUt=s;const i=this.dF();i.k6(),i.j6()}oBt(t){this.hBt()||(this.BR=t)}lB(){return this.BR}K2(){return this.HUt}t3(){return this.qUt}IF(){return this._Wt}h3(){return this._Wt?this._Wt.h3():this.ZUt}o3(){return this._Wt?this._Wt.o3():this.XUt}uQ(){return this._Wt?this._Wt.uQ():1}wq(){return this._Wt?this._Wt.wq():1}Q3(){return this._Wt?this._Wt.Q3():1}U3(){return this._Wt?this._Wt.U3():1}Kz(){return this._Wt?this._Wt.Kz():0}tB(){return this._Wt?this._Wt.tB():0}RJt(){return this._Wt?this._Wt.iB():0}kJt(){return this._Wt?this._Wt.rB():0}gq(){return this._Wt?this._Wt.gq():"off"}b3(t){return this._Wt?this._Wt.b3(t):null}D0(t){this._Wt&&this._Wt.D0(t)}M3(){return this.tWt}qzt(){return this.sWt}Zzt(){return this.iWt}qP(){return this._Wt?this._Wt.qP():NaN}II(){return"nearest"!==this.Zj()}XP(){return this.DWt}KP(t){this.DWt!==t&&(this.DWt=t,-1===this.fzt&&-1===this.FWt||(this.jJt(),this.PJt()))}Zj(){return this.Sx}mAt(){return this.$Ut}iUt(){return this.eWt}fUt(){this.eWt&&(this.eWt.oE(),this.eWt.Vr(),this.eWt=null)}dF(){return this.a4}uF(){return this.a4.uF()}Utt(){return this.stt}FJt(){return this.hWt}uOt(){return this.oWt}Hct(){return this.Gct}Gj(){return this.JK}mK(t){return this.JK.mK(t)}aU(t,s,i,e,r,n){if(n&&this.oWt){if(t instanceof ob.Mct&&t.w1()){const h=t.TU(),o=Math.floor(this.lF()*h.length);return this.aU(h[o],s,i,e,r,n)}const h=this.oWt.gct(t,n);if(h){const t=this.i1(h,s,!1,i,e,!1,r,void 0,r);return this.oWt.wct(t,n),t}}return this.i1(t,s,!1,i,e,!1,r,void 0,r)}i1(t,s,i,e,r,n,h,o,a){let l=null,u=null;if(t instanceof ob.Mct){if(u=t,u.w1()){const t=u.TU();u=t[Math.floor(this.lF()*t.length)]}l=u.q0()}else l=t,u=this.Y0(l[1]);const c=u.JB().bB();if(this.gM&&c&&!u.DAt())return null;const f=s;let d;c||(s=null),d=i&&!n&&l&&!this.xWt.has(l[2])?l[2]:this.vWt++;const p=l?l[0]:null,m=ob.Jr(ob.Instance,{runtime:this,objectType:u,TJ:s,LLt:p,jLt:l?l[3]:null,uid:d,tags:l?l[6]:null});this.xWt.set(d,m);let y=null;if(c&&(y=m.OF(),void 0!==e&&void 0!==r&&(y.HT(e),y.XT(r)),u.rLt(!0)),s&&(a||s.e1(m,!0),s.pF().y5(u)),this.TWt++,u.vQ()&&!i&&!n){const t=new Set;for(const s of u.f5().vU()){if(s===u)continue;const i=this.zJt(s,y,t);if(i){const t=this.i1(i,f,!1,y?y.YT():e,y?y.ZT():r,!0,!1,void 0,a);m.H5(t)}else{const t=this.i1(s,f,!1,y?y.YT():e,y?y.ZT():r,!0,!1,void 0,a);m.H5(t)}}for(const t of m.xQ()){t.H5(m);for(const s of m.xQ())t!==s&&t.H5(s)}}if(c&&!i&&h&&this.BJt(m,p,y,s,e,r,a),u.vQ()&&!i&&!n&&h)for(const t of m.xQ()){const i=t.OF();if(!i)continue;const e=t.JB(),r=t.fQ().q0()[0];e.bB()?this.BJt(t,r,i,s,i.YT(),i.ZT(),a):this.BJt(t,r,i,s,void 0,void 0,a)}if(!n&&h){void 0===e&&(e=p[0]),void 0===r&&(r=p[1]);const t=y.oV(),s=e-y.YT()+t.YT(),i=r-y.ZT()+t.ZT();t.xJ(s,i)}u.$At();const g=l?ob.Ah(l[5]):null,M=l?l[4].map(t=>ob.Ah(t)):null,w=c&&p&&p[13];if(w&&m.WLt(),m._At(g,M),w){const t=p[13];m.sY().kNt(t[2],t[0],t[1])}this.MWt.push(m),this.bWt=!0,this.iJ()&&ab.UJt(m);const b=this.DQt.instancecreate;return b.fY=m,this.ODt.dispatchEvent(b),m}gRt(t){const s=t[0],i=t[1],e=t[2],r=t[6];return r||this.a4._6(s).RF(i).K0(e)}zJt(t,s,i){const e=s?.lOt()??[];for(const s of e){const e=this.gRt(s),r=!!s[4],n=this.Y0(e[1]);if(!i.has(e)&&t===n&&r)return i.add(e),e}}BJt(t,s,i,e,r,n,h){const o=i.zkt(),a=i.lOt();if(t.OF().Bkt(o),!a)return;void 0===r&&(r=s[0]),void 0===n&&(n=s[1]);const l=new Set,u=s[0],c=s[1];for(const s of a){const i=s[0],o=s[1],a=s[2],f=s[3],d=!!s[4],p=s[5],m=s[6];let y;y=m||this.a4._6(i).RF(o).K0(a);const g=this.Y0(y[1]),M=t.fOt(g),w=l.has(g);if(M&&!w&&d){const s=t.dOt(g);s.OF().OLt(y[0]);const i=r+y[0][0]-u,e=n+y[0][1]-c;s.OF().xJ(i,e),s.OF().Bkt(p),t.mV(s,{bV:!!(1&f),TV:!!(f>>1&1),xV:!!(f>>2&1),CV:!!(f>>3&1),NV:!!(f>>4&1),kV:!!(f>>5&1),EV:!!(f>>6&1),AV:!!(f>>7&1),OV:!!(f>>8&1)}),l.add(g)}else{const s=r+y[0][0]-u,i=n+y[0][1]-c,o=this.i1(y,e,!1,s,i,!1,!0,t,h);o.OF().Bkt(p),t.mV(o,{bV:!!(1&f),TV:!!(f>>1&1),xV:!!(f>>2&1),CV:!!(f>>3&1),NV:!!(f>>4&1),kV:!!(f>>5&1),EV:!!(f>>6&1),AV:!!(f>>7&1),OV:!!(f>>8&1)})}}}MQ(t){if(this.IWt.has(t))return;const s=t.fQ();let i=this.wWt.get(s);if(i){if(i.has(t))return;i.add(t)}else i=new Set,i.add(t),this.wWt.set(s,i);if(this.iJ()&&ab.WJt(t),t.JLt(),this.bWt=!0,t.vQ())for(const s of t.xQ())this.MQ(s);for(const s of t.children())s.jV()&&this.MQ(s);if(!this.a4.dU()&&!this.gQt){const s=this.oP();s.uU(!0),t.IOt(),s.uU(!1)}t.COt(this.a4.dU())}pU(){this.bWt&&(this.SWt=!0,this.QJt(),this.JJt(),this.SWt=!1,this.bWt=!1,this.BF())}QJt(){for(const t of this.MWt){const s=t.fQ();s.e1(t);for(const i of s.yU())i.e1(t),i.$At()}ob.wh(this.MWt)}JJt(){this.ODt.cf(!0);for(const[t,s]of this.wWt.entries())this.VJt(t,s),s.clear();this.wWt.clear(),this.ODt.cf(!1)}VJt(t,s){for(const t of s){const s=this.DQt.instancedestroy;s.fY=t,this.ODt.dispatchEvent(s),this.xWt.delete(t.IQ()),this.lQt.delete(t);const i=t.OF();i&&(i.Jkt(),i.a1(),i.JLt()),this.IWt.add(t),this.TWt--}ob._h(t.iU(),s),t.$At(),this.CWt.add(t);for(const i of t.yU())ob._h(i.iU(),s),i.$At(),this.CWt.add(i);if(t.JB().bB()){const t=new Set([...s].map(t=>t.OF().RF()));for(const i of t)i.G2(s)}}sLt(){return this.MWt}*oCt(t){for(const s of this.sLt())t.w1()?s.fQ().eIt(t)&&(yield s):s.fQ()===t&&(yield s)}NAt(){return this.vWt++}EAt(t,s){this.xWt.set(t,s)}Yq(t){t=!!t,this.HWt!==t&&(this.HWt=!!t,this.HWt&&this.qWt&&(this.Zq(!1),this.qWt=!1))}Hq(){return this.HWt}v5(){this.ODt.dispatchEvent(ob.Jr(ob.Event,"renderercontextlost")),this.Zq(!0);for(const t of this.cWt)!t.w1()&&t.AAt()&&t.S5();const t=this.uF();t&&t.v5(),ob._Et.r$(),ob.MK.r$()}async ABt(){await this.uF().p5(null,this.pT()),this.ODt.dispatchEvent(ob.Jr(ob.Event,"renderercontextrestored")),this.Zq(!1),this.BF()}PQt(t){if(!this.HWt)return;const s=t.hidden;this.Zq(s),this.qWt=s,s||this.BF()}UQt(t){this.gUt()&&this.OWt&&!ob.Xs.hi&&(t.data.parentHasFocus||(this.Zq(!0),this.RWt=!0))}WQt(){this.RWt&&(this.Zq(!1),this.RWt=!1)}PJt(){const t=this.jWt;"vsync"===this.DWt?-1===this.fzt&&(this.fzt=self.requestAnimationFrame(t.PWt)):"unlimited-tick"===this.DWt?(-1===this.FWt&&(this.FWt=ob.Qh(t.zWt)),-1===this.fzt&&(this.fzt=self.requestAnimationFrame(t.BWt))):-1===this.FWt&&(this.FWt=ob.Qh(t.PWt))}jJt(){-1!==this.fzt&&(self.cancelAnimationFrame(this.fzt),this.fzt=-1),-1!==this.FWt&&(ob.Jh(this.FWt),this.FWt=-1)}NP(){return this.ZWt>0}Zq(t){if(this.hBt())return;const s=this.NP();this.ZWt+=t?1:-1,this.ZWt<0&&(this.ZWt=0);const i=this.NP();if(!s&&i)console.log("[Construct] Suspending"),this.jJt(),this.ODt.dispatchEvent(ob.Jr(ob.Event,"suspend")),this.GK(ob.Jr(ob.Event,"suspend")),this.HQ(ob.tz.$F.KF.YJt,null,null);else if(s&&!i){console.log("[Construct] Resuming");const t=performance.now();this.tQt=t,this.cQt=t,this.uQt=0,this.fQt=0,this.dQt=0,this.pQt=0,this.yQt=0,this.mQt=0,this.ODt.dispatchEvent(ob.Jr(ob.Event,"resume")),this.GK(ob.Jr(ob.Event,"resume")),this.HQ(ob.tz.$F.KF.HJt,null,null),this.Sgt()||this.u7(t)}}Oq(t){this.LQt.Fu(t)}Pq(t){this.OQt.Fu(t)}kq(t){this.RQt.Fu(t)}Rq(t){this.LQt.Xf(t)}Fq(t){this.OQt.Xf(t)}jq(t){this.RQt.Xf(t)}qJt(t,s){const i=s?performance.now():0;let e;return t instanceof lb?(e=t.rJ(),s&&ab.ZJt(t.behavior,performance.now()-i)):(e=t.u7(),s&&ab.ZJt(t.aY(),performance.now()-i)),e}XJt(){const t=this.iJ();this.LQt.Ud(!0);for(const s of this.LQt)this.qJt(s,t);this.LQt.Ud(!1)}KJt(t,s){const i=s?performance.now():0;let e;return t instanceof lb?(e=t.Bq(),s&&ab.ZJt(t.behavior,performance.now()-i)):(e=t.oEt(),s&&ab.ZJt(t.aY(),performance.now()-i)),e}$Jt(){const t=this.iJ();this.OQt.Ud(!0);for(const s of this.OQt)this.KJt(s,t);this.OQt.Ud(!1)}tVt(t,s){const i=s?performance.now():0;let e;return t instanceof lb?(e=t.oJ(),s&&ab.ZJt(t.behavior,performance.now()-i)):(e=t.e_t(),s&&ab.ZJt(t.aY(),performance.now()-i)),e}sVt(){const t=this.iJ();this.RQt.Ud(!0);for(const s of this.RQt)this.tVt(s,t);this.RQt.Ud(!1)}*iVt(){const t=this.iJ();this.LQt.Ud(!0);for(const s of this.LQt){const i=this.qJt(s,t);ob.So(i)&&(yield*i)}this.LQt.Ud(!1)}*eVt(){const t=this.iJ();this.OQt.Ud(!0);for(const s of this.OQt){const i=this.KJt(s,t);ob.So(i)&&(yield*i)}this.OQt.Ud(!1)}*rVt(){const t=this.iJ();this.RQt.Ud(!0);for(const s of this.RQt){const i=this.tVt(s,t);ob.So(i)&&(yield*i)}this.RQt.Ud(!1)}async u7(t,s,i){this.VWt=!0;const e="background-wake"===i,r="background-wake"!==i&&"skip-render"!==i,n=this.dF(),h=this.IF();if(!this.QWt||this.NP()&&!s&&!e)return;const o=performance.now();this.JWt=!0,this.nVt(t||0),this.dQt++,this.hVt();const a=this.oVt();this.iCt()&&await a;const l=this.ODt.Gf(this.DQt.pretick);l instanceof Promise&&await l,this.GK(this.AQt.pretick);const u=this.aVt();this.iCt()&&await u,this.lVt()&&await this.uVt(),n.MF()&&await this.cVt();const c=this.fVt();this.iCt()&&await c;const f=n.uF(),d=f.o5();let p=!1;if(-1!==d&&(f.a5(),h.h5()!==d)){const t=this.IF().N5(d);this.Jj()&&(p=!0,await t)}this.Bc("canvas","update-html-layer-dom-state",{layersDomState:f.C1().filter(t=>t.xW()).map(t=>t.O2())}),r&&this.ck(),p&&this.Bc("canvas","cleanup-html-layers"),this.hBt()&&(await this.wJt(),this.OP()>=this.mJt())?this.vJt():(this.NP()||e||this.PJt(),this.UWt++,this.WWt++,this.JWt=!1,this.mQt+=performance.now()-o)}async oVt(){const t=this.Jpt,s=this.iJ();this.pU(),t.uU(!0),this.lgt(this.uF()),s&&ab.dVt(),this.iCt()?await t.Ugt():t.jgt(),s&&ab.pVt(),this.ugt(),t.uU(!1),this.pU(),t.uU(!0)}async aVt(){const t=this.Jpt,s=this.iJ(),i=this.iCt(),e=this.ODt,r=this.DQt,n=this.AQt;s&&ab.dVt(),i?await this.mVt(this.iVt()):this.XJt(),i?await this.mVt(this.eVt()):this.$Jt(),s&&ab.yVt(),s&&ab.dVt(),i?await this.gVt(r.tick):e.dispatchEvent(r.tick),s&&ab.MVt(),t.uU(!1),this.GK(n.tick)}async fVt(){const t=this.Jpt,s=this.ODt,i=this.DQt,e=this.AQt,r=this.iJ(),n=this.iCt();r&&ab.dVt(),n?await t.cgt(this.a4):t.agt(this.a4),r&&ab.pVt(),this.nWt.MPt(),this.hVt(),this.YWt=!1,t.uU(!0),r&&ab.dVt(),n?await this.mVt(this.rVt()):this.sVt(),r&&ab.yVt(),r&&ab.dVt(),n?await this.gVt(i.tick2):s.dispatchEvent(i.tick2),r&&ab.MVt(),t.uU(!1),this.GK(e.tick2),n&&await t.Tgt(),this.pU(),this.hVt()}hVt(){if(0===this.IWt.size)return;const t=this.ODt;t.cf(!0);for(const t of this.CWt)t.Dgt().Spt(this.IWt);this.CWt.clear(),this.Jpt.Qgt(this.IWt);for(const t of this.IWt)t.Vr();this.IWt.clear(),t.cf(!1)}async cVt(){const t=this.dF();let s=0;for(;t.MF()&&s++<10;)await this.wVt(t.R6())}nVt(t){let s=0;this.hBt()?(s=1/this.yJt(),this.sQt=s,this.iQt=s):0!==this.tQt&&(s=Math.max(t-this.tQt,0)/1e3,s>.5&&(s=0),this.sQt=s,this.iQt=ob.Xr(s,this.nQt,this.rQt)),this.tQt=t,this.eQt=this.iQt*this.DLt,this.hQt.Fu(this.eQt),this.oQt.Fu(s*this.DLt),this.aQt.Fu(this.iQt);for(const[t,s]of this.lQt)s.Fu(this.iQt*t.zP());this._Wt&&this._Wt.JBt(),t-this.cQt>=1e3&&(this.cQt+=1e3,t-this.cQt>=1e3&&(this.cQt=t),this.fQt=this.uQt,this.uQt=0,this.pQt=this.dQt,this.dQt=0,this.yQt=Math.min(this.mQt/1e3,1),this.mQt=0,this._Wt&&this._Wt.QBt(),this.nWt.pPt(),this.iJ()&&ab.bVt())}BLt(t,s){if(s){if(!this.lQt.has(t)){const s=ob.Jr(ob.$f);s.nd(this.hQt),this.lQt.set(t,s)}}else this.lQt.delete(t)}ULt(t){const s=this.lQt.get(t);return s?s.Js():this.OP()}async wVt(t){const s=this.ODt,i=this.dF().uF();await i.K5(),i.T5(t,this.pT()),i===t&&this.Jpt.i6(),this.nWt.MPt(),this.hVt(),s.dispatchEvent(this.DQt.beforelayoutchange),ob.df.Ef(!0),await t.p5(i,this.pT()),ob.df.Ef(!1),await t.x5(!1),s.dispatchEvent(this.DQt.layoutchange),this.BF(),this.YWt=!0,this.pU(),this.SJt()}BF(){this.LWt=!0}LBt(){return this._Wt?this._Wt.LBt():null}OBt(){return this._Wt?this._Wt.OBt():null}pT(){return this._Wt?this._Wt.pT():null}ck(){const t=this._Wt;if(!t||t.DBt())return;const s=this.pT(),i=s.SO(),e=i&&s.zS(),r=i&&s.tb();if(e&&s.oO(),!this.LWt&&!this.hBt())return void s.RS();const n=this.a4.uF();this.uQt++,s.$L();const h=this.iJ();h&&ab.dVt(),this.LWt=!1;let o=null;e&&(o=t.qBt().UD(),s.bO(o));let a=null;r&&(a=s.SVt(2*(1+n.t5())),s.m3(0,1)),this.a2()&&"low"===t.w3()?s.lL(t.h3(),t.o3()):s.uL(),this.TVt(this.pT(),n),o&&s.TO(o),r&&(s.vVt(),this._Wt.ZBt(a)),s.AS(),h&&(ab.xVt(),ab.IVt()),t&&t.XBt()}f6(t){return"low"===this.IF().w3()||t.zS()&&(this.M3()||this.a2())}TVt(t,s){t.ab(),t.GL(),t.GS(),t.wL(1,1,1,1),t.cO(null),t.vL(null),t.sO(this.a2()),this.f6(t)&&s.u6(t);const i=s.h5();for(let e=1;e<i;++e)s.y6(t,e),t.tb()&&t.CVt();this.f6(t)||s.u6(t),s.m6(t)}HQ(t,s,i){if(!this.QWt)return!1;const e=!this.JWt&&!this.Jpt.Cgt();let r=0;e&&(r=performance.now());const n=this.iJ();n&&this.rZ(!1);const h=this.Jpt.mgt(this.a4,t,s,i);if(e){const t=performance.now()-r;this.mQt+=t,n&&ab.GVt(t)}return n&&this.rZ(!0),h}JNt(t,s,i){if(!this.iCt())return this.HQ(t,s,i);if(this.Sgt())throw new Error("called DebugTrigger() while stopped on breakpoint");if(!this.JWt&&!this.Jpt.Cgt())throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead");return this.Jpt.Mgt(this.a4,t,s,i)}async ZF(t,s,i){if(!this.iCt())return this.HQ(t,s,i);if(!this.QWt)return!1;if(this.Sgt())return this.Jpt.wgt(t,s,i);if(!this.uF())return this.Jpt.ygt(t,s,i);const e=performance.now(),r=this.Jpt.Mgt(this.a4,t,s,i);let n=r.next();for(;!n.done;)await this.dgt(n.value),n=r.next();return this.NP()||this.Jpt.Cgt()||(await this.Jpt.Tgt(),this.VWt&&!this.JWt&&this.PJt()),this.mQt+=performance.now()-e,n.value}VNt(t,s,i){const e=this.iJ();e&&this.rZ(!1);const r=this.Jpt.vgt(this.a4,t,s,i);return e&&this.rZ(!0),r}YNt(t,s,i){return this.Jpt.xgt(this.a4,t,s,i)}HNt(t){return this.XWt.Fu(t)}lgt(t){this.gWt.push(t)}ugt(){if(!this.gWt.length)throw new Error("layout stack empty");this.gWt.pop()}AF(){return this.gWt.length?this.gWt.at(-1):this.uF()}EP(t){return t&&-1!==t.zP()?this.iQt*t.zP():this.eQt}a7(){return this.eQt}l7(){return this.iQt}AP(){return this.sQt}zP(){return this.DLt}BP(t){(isNaN(t)||t<0)&&(t=0),this.DLt=t}sF(t){this.nQt=Math.max(t,0)}tF(){return this.nQt}rF(t){this.rQt=Math.max(t,0)}eF(){return this.rQt}WP(){return this.fQt}JP(){return this.pQt}YP(){return this.yQt}NVt(){return this.$Wt}OP(){return this.hQt.Js()}_Vt(){return this.oQt.Js()}PP(){return this.aQt.Js()}kP(){return this.UWt}EVt(){return this.WWt}DVt(){return this.TWt}Oj(){return this.BUt}kj(){return this.UUt}zj(){return this.WUt}Pj(){return this.QUt}Uj(){return this.JUt}_F(t){if(this.gQt)throw new Error("cannot call while loading state - wait until afterload event");return this.xWt.get(t)||null}fRt(t){if(this.gQt)throw new Error("cannot call while loading state - wait until afterload event");this.xWt.delete(t)}Y5(){this.xWt.clear();for(const t of this.cWt)if(!t.w1())for(const s of t.iU())this.xWt.set(s.IQ(),s)}gUt(){return"preview"===this.NUt}iJ(){return this.OUt}Qz(){return this.NUt}Jz(){return"nwjs"===this.Qz()||this._Ut}wUt(){return"cordova"===this.NUt}AVt(){return"Android"===ob.Xs.Ks&&("cordova"===this.NUt||"playable-ad-single-file"===this.NUt||"playable-ad-zip"===this.NUt||"instant-games"===this.NUt)}LVt(){return this.CX}OVt(){return this.EUt}Vz(){return this.DUt}RVt(){return this.AUt}Ej(){return this.nWt}GEt(){return this.rWt.GEt()}NEt(){return this.rWt.NEt()}a2(){return this.EWt}kVt(){return this.pT().Ww(this.X1())}zw(t){return this.pT().zw(t||this.X1())}jVt(){return this.YWt}PVt(t){t=!!t,this.AWt!==t&&(this.AWt=t,this.dF().j6(),this.BF())}Kj(){return this.AWt}FVt(t){if(!this.uWt.has(t)){const s=()=>this.zVt(t);this.uWt.set(t,s),t.Mf().addEventListener("animationframeimagechange",s)}const s=this.fM.hM(t);return s.SM()||s.vM().then(()=>this.BF()),s}zVt(t){this.fM.uM(t)}aWt(t){const s=[];for(const i of t.WAt())for(const t of i.OY()){const i=t.zY();s.push({source:t,width:i.Yy(),height:i.eg(),tag:t.tH()})}return{wM:s}}async lWt(t){const s=ob.Jr(ob.Qd),i=[],e=new Map;for(const r of t.WAt())for(const t of r.OY()){const r=t.zY().qEt();e.has(r)||(e.set(r,null),i.push(s.Fu(async()=>{const t=await r.a$();e.set(r,t)})))}await Promise.all(i);const r=[];for(const i of t.WAt())for(const t of i.OY())r.push(s.Fu(async()=>{const s=t.zY(),i=e.get(s.qEt()),r=await s.ZEt(i);return{IM:await createImageBitmap(r)}}));const n=await Promise.all(r);for(const t of e.values())t instanceof ImageBitmap&&t.close&&t.close();return{wM:n}}BVt(t){this.MQt=t,this.wQt=!1}UVt(){this.MQt="",this.wQt=!0}WVt(t){this.bQt=t}ZCt(t){this.cJ=t}QVt(){return this.SQt}lVt(){return!!(this.MQt||this.wQt||this.bQt||null!==this.cJ)}async uVt(){if(this.MQt&&(this.pU(),await this.JVt(this.MQt),this.VVt()),this.bQt&&(await this.YVt(this.bQt),this.VVt(),this.iJ()&&ab.HVt()),this.wQt){const t=await this.qVt();this.SQt=t,await this.ZF(ob.tz.$F.KF.ZVt,null),this.SQt="",this.VVt()}if(null!==this.cJ){this.pU();try{await this.XVt(this.cJ),this.SQt=this.cJ,await this.ZF(ob.tz.$F.KF.KVt,null),this.SQt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.ZF(ob.tz.$F.KF.$Vt,null)}this.VVt()}}VVt(){this.MQt="",this.wQt=!1,this.bQt="",this.cJ=null}cB(){return this.TQt||(this.TQt=localforage.Ii({name:"c3-localstorage-"+this.zj(),description:this.Oj()})),this.TQt}tYt(){return this.vQt||(this.vQt=localforage.Ii({name:"c3-savegames-"+this.zj(),description:this.Oj()})),this.vQt}async JVt(t){const s=await this.qVt();try{await this.tYt().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.SQt=s,await this.ZF(ob.tz.$F.KF.ZVt,null),this.SQt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.ZF(ob.tz.$F.KF.sYt,null)}}async YVt(t){try{const s=await this.tYt().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.XVt(s),this.SQt=s,await this.ZF(ob.tz.$F.KF.KVt,null),this.SQt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.ZF(ob.tz.$F.KF.$Vt,null)}}async qVt(){const t={c3save:!0,version:1,rt:{time:this.OP(),timeRaw:this._Vt(),walltime:this.PP(),timescale:this.zP(),tickcount:this.kP(),next_uid:this.vWt,running_layout:this.uF().G1(),start_time_offset:Date.now()-this.$Wt},types:{},layouts:{},events:this.Jpt.i4(),timelines:this.stt.i4(),user_script_data:null};for(const s of this.cWt)s.w1()||s.cLt()||(t.types[s.G1().toString()]=s.i4());for(const s of this.a4.yF())t.layouts[s.G1().toString()]=s.i4();const s=this.iYt("save");return s.saveData=null,await this.W5(s),t.user_script_data=s.saveData,JSON.stringify(t)}j5(){return this.gQt}async XVt(t){const s=this.dF(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(i.version>1)throw new Error("C3 save data from future version");this.XCt(),this.ODt.dispatchEvent(ob.Jr(ob.Event,"beforeload"));for(const t of this.LJt())t.fQ().cLt()||t.u8();const e=i.rt;this.hQt.Set(e.time),e.hasOwnProperty("timeRaw")&&this.oQt.Set(e.timeRaw),this.aQt.Set(e.walltime),this.DLt=e.timescale,this.UWt=e.tickcount,this.$Wt=Date.now()-e.start_time_offset;const r=e.running_layout;this.gQt=!0;let n=!1;if(r!==this.uF().G1()){const t=s._6(r);if(!t)return;await this.wVt(t),n=!0}for(const[t,e]of Object.entries(i.layouts)){const i=parseInt(t,10),r=s._6(i);r&&r.e4(e)}const h=new Set;for(const[t,s]of Object.entries(i.types)){const i=parseInt(t,10),e=this.Kq(i);!e||e.w1()||e.cLt()||e.e4(s,h)}for(const t of this.a4.yF())for(const s of t.JU())s.r4();if(this.pU(),this.Y5(),this.gQt=!1,n){for(const t of this.LJt())t.P5();for(const[t,s]of Object.entries(i.types)){const i=parseInt(t,10),e=this.Kq(i);!e||e.w1()||e.cLt()||e.yLt(s)}}this.vWt=e.next_uid,this.Jpt.e4(i.events);for(const t of this.cWt)if(!t.w1()&&t.vQ())for(const s of t.iU()){const i=s.GQ();s.cOt();for(const e of t.f5().vU()){if(e===t)continue;const r=e.iU();if(i<0||i>=r.length)throw new Error("missing sibling instance");s.H5(r[i])}}this.stt.e4(i.timelines),s.k6(),s.j6();for(const t of h)t.xOt();this.KCt(),this.ODt.dispatchEvent(ob.Jr(ob.Event,"afterload")),this.GK(this.iYt("afterload"));for(const[t,s]of Object.entries(i.types)){const s=parseInt(t,10),i=this.Kq(s);i&&i.mLt()}const o=this.iYt("load");o.saveData=i.user_script_data,await this.W5(o),this.BF()}eYt(t,s){return s.OF().Rkt()-t.OF().Rkt()}vjt(t,s){t.OF()&&(this.YQt.has(t)||(this.YQt.set(t,s),this.HQt.push(t)))}XCt(){this.YQt=new WeakMap,ob.wh(this.HQt),ob.a6.CRt()}KCt(t="full",s=null){this.HQt.sort(this.eYt),s||(s={}),s.cRt=new Set;const i=this.HQt.length;for(const i of this.HQt)i.f8(this.YQt.get(i),t,s);for(const i of this.HQt)i._Ot(this.YQt.get(i),t,s);if(this.XCt(),i){this.pU(),this.Y5();for(const t of this.a4.yF())for(const s of t.JU())s.c1(),s.zF()}}async rYt(t){const s=await Promise.all(t.map(async t=>{if(this.wUt()&&this.JK.nK()||"playable-ad-single-file"===this.Qz()){const s=await this.JK.eo(t);return URL.createObjectURL(s)}return new URL(t,location.href).toString()}));this.kQt.nYt(s)}hYt(t,s){this.kQt.oYt(t,s)}aYt(t,s){this.kQt.lYt(t,s)}uYt(t,s,i,e){return this.kQt.uYt(t,s,i,null,null,e)}cYt(t,s,i,e){return this.kQt.cYt(t,s,i,e)}fYt(){return this.kQt.dYt()}GF(t,s){this.Bc("runtime","invoke-download",{url:t,filename:s})}async hUt(t,s,i,e,r,n){if(e=e||s,r=r||i,this.Jj())return(await this.WF("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:r,imageBitmapOpts:n})).imageBitmap;{const h=await self.C3_RasterSvgImageBlob(t,s,i,e,r);return n?await self.createImageBitmap(h,n):h}}async pYt(t){return this.Jj()?await this.WF("runtime","get-svg-image-size",{blob:t}):await self.C3_GetSvgImageSize(t)}mYt(){this.GQt||(this.GQt=!0,this.Bc("runtime","enable-device-orientation"))}yYt(){this.NQt||(this.NQt=!0,this.Bc("runtime","enable-device-motion"))}lF(){return this.KWt()}gYt(t){this.KWt=t}zQt(){const t=this.pT();return{fps:this.WP(),tps:this.JP(),cpu:this.YP(),gpu:this.qP(),layout:this.uF()?this.uF()._c():"",renderer:t.zS()?t.NO():t.RBt()}}Sgt(){return!!this.iJ()&&ab.Sgt()}dgt(t){return this.iCt()?ab.dgt(t):Promise.resolve()}Ybt(){return!!this.iCt()&&ab.MYt()}wYt(t){this.RUt=!!t,this.bYt()}SYt(){return this.RUt}iCt(){return this.kUt}rZ(t){t?this.jUt--:this.jUt++,this.bYt()}bYt(){this.kUt=this.iJ()&&this.RUt&&0===this.jUt}fwt(){return this.iJ()&&ab.fwt()}c3(){return this.iJ()&&this.pT().SO()&&ab.c3()}async mVt(t){if(t)for(const s of t)await this.dgt(s)}gVt(t){return this.mVt(this.ODt._f(t))}yyt(t){return this.Jpt.yyt(t.name,t.params)}JF(t){if(this.Jj())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}mB(){return this.QQt}iYt(t){const s=ob.Jr(ob.Event,t,!1);return s.runtime=this.QQt,s}nJt(){this.QQt=new self.xj(this),this.AQt={pretick:this.iYt("pretick"),tick:this.iYt("tick"),tick2:this.iYt("tick2")}}aJt(){const t={};for(const s of this.cWt)t[s.Wyt()]={value:s.PB(),enumerable:!0,writable:!1};this.QQt.rP(t)}lJt(){const t={};for(const s of this.oP().Zyt())t[s.Wyt()]=s.Qyt();this.QQt.nP(t)}bF(){return this.VQt}LB(t,s){this.JQt.set(t,s)}HU(t){return this.JQt.get(t)}jz(t){if(!(t instanceof self.WB))throw new TypeError("expected IObjectClass");const s=this.HU(t);if(!(s&&s instanceof ob.Mct))throw new Error("invalid IObjectClass");return s}$B(t){if(!(t instanceof self.cQ))throw new TypeError("expected IInstance");const s=this.HU(t);if(!(s&&s instanceof ob.Instance))throw new Error("invalid IInstance");return s}LF(t){if(!(t instanceof self.ZV))throw new TypeError("expected IWorldInstance");const s=this.HU(t);if(!(s&&s instanceof ob.Instance))throw new Error("invalid IInstance");return s}},self.C3_CreateRuntime=ob.bUt.QI,self.C3_InitRuntime=(t,s)=>t.OLt(s)}{const fb=self.Cs;fb.jQt=class extends fb.Wr{constructor(t,s){super(),this.Pc=t,this.TYt=new Map,this.vYt=0,this.xYt=s.inputPort,s.outputPort.onmessage=t=>this.IYt(t),this.CYt=s.maxNumWorkers,this.GYt=1,this.NYt=!1,this._Yt=!1}dYt(){return this.CYt}nYt(t){this.xYt.postMessage({type:"_import_scripts",scripts:t})}oYt(t,s){this.xYt.postMessage({type:"_send_blob",blob:t,id:s})}lYt(t,s){this.xYt.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}uYt(t,s,i,e,r,n){if(i||(i=[]),"number"==typeof n&&(n=Math.floor(n))<=0)throw new Error("invalid maxWorkerNum");const h=this.vYt++,o={type:t,isBroadcast:!1,maxWorkerNum:n,jobId:h,params:s,transferables:i},a=new Promise((t,s)=>{this.TYt.set(h,{resolve:t,progress:e,reject:s,EYt:!1,DYt:n})});return r&&r.qf(()=>this.AYt(h)),this.xYt.postMessage(o,i),this.LYt(),a}cYt(t,s,i,e){if(i||(i=[]),"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const r={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:this.vYt++,params:s,transferables:i};this.xYt.postMessage(r,i)}AYt(t){const s=this.TYt.get(t);s&&(s.EYt=!0,s.resolve=null,s.progress=null,s.reject=null,this.xYt.postMessage({type:"_cancel",jobId:t}))}IYt(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.OYt(e,s.result);break;case"progress":this.RYt(e,s.progress);break;case"error":this.kYt(e,s.error);break;case"ready":this.jYt();break;default:throw new Error(`unknown message from worker '${i}'`)}}OYt(t,s){const i=this.TYt.get(t);if(!i)throw new Error("invalid job ID");i.EYt||i.resolve(s),this.TYt.delete(t)}RYt(t,s){const i=this.TYt.get(t);if(!i)throw new Error("invalid job ID");!i.EYt&&i.progress&&i.progress(s)}kYt(t,s){const i=this.TYt.get(t);if(!i)throw new Error("invalid job ID");i.EYt||i.reject(s),this.TYt.delete(t)}jYt(){this.NYt&&(this.NYt=!1,this.GYt++,this.GYt<this.CYt?this.LYt():this.xYt.postMessage({type:"_no_more_workers"}))}PYt(){let t=0;const s=[...this.TYt.values()].sort((t,s)=>(t.DYt||1/0)-(s.DYt||1/0));for(const i of s)t<(i.DYt||1/0)&&t++;return t}async LYt(){if(!(this.GYt>=this.CYt||this.NYt||this._Yt||this.PYt()<=this.GYt))try{this.NYt=!0,(await this.Pc.WF("runtime","create-job-worker")).outputPort.onmessage=t=>this.IYt(t)}catch(t){this._Yt=!0,this.NYt=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.GYt} so far)`,t)}}}}self.C3_Shaders={};{let db=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const t=""+i,s=""+e;return t<s?-1:t>s?1:0}};0;const pb=self.Cs;let mb=null,yb="",gb="",Mb=[],wb="",bb="",Sb="";const Tb=pb.Jr(pb.Bmt);pb.tz.$F=class extends pb.ZGt{constructor(t){super(t),this.kmt=this.Pc.oP().iZ(),this.Tpt=this.Pc.oP().bP(),this.FYt=0,this.zYt=0,this.BYt=new Map}Vr(){super.Vr()}BF(){this.Pc.BF()}HQ(t){this.Pc.HQ(t,null,null)}UYt(t,s){return mb&&t===yb&&s===gb||(mb=new RegExp(t,s),yb=t,gb=s),mb.lastIndex=0,mb}WYt(t,s,i){if(t===wb&&s===bb&&i===Sb)return Mb;const e=this.UYt(s,i);return Mb=t.match(e),wb=t,bb=s,Sb=i,Mb}async QYt(t,s){if(!s.length)return;this.FYt+=s.length;const i=[];for(const e of s)i.push(t.y5(e));await pb.Bh(i,()=>{this.zYt++}),this.zYt++,this.zYt===this.FYt&&(this.zYt=0,this.FYt=0,this.Pc.HQ(pb.tz.$F.KF.JYt,null,null))}NK(){return 0===this.FYt?1:this.zYt/this.FYt}VYt(t,s){for(const i of s)0===i.hU()&&t.b5(i)}YYt(){return Tb}HYt(t){const s=this.Pc.oP(),i=s.bP(),e=i.tZ(),r=e.dP(),n=r.$q(),h=e.Tmt(),o=i.sZ(r),a=s.iZ(),l=a.sZ();if(l.Fmt(t),h)for(let i=0;i<t&&!l.cZ();++i)s.hZ(n),l.lZ(i),r.oZ(e,o),s.aZ(n);else for(let s=0;s<t&&!l.cZ();++s)l.lZ(s),r.oZ(e,o);return i.fZ(),a.fZ(),!1}*qYt(t){const s=this.Pc.oP(),i=s.bP(),e=i.tZ(),r=e.dP(),n=r.$q(),h=e.Tmt(),o=i.sZ(r),a=s.iZ(),l=a.sZ();if(l.Fmt(t),h)for(let i=0;i<t&&!l.cZ();++i)s.hZ(n),l.lZ(i),yield*r.rSt(e,o),s.aZ(n);else for(let s=0;s<t&&!l.cZ();++s)l.lZ(s),yield*r.rSt(e,o);return i.fZ(),a.fZ(),!1}ZYt(){const t=this.Pc.oP(),s=t.bP(),i=s.tZ(),e=i.dP(),r=e.$q(),n=i.Tmt(),h=s.sZ(e),o=t.iZ(),a=o.sZ();if(n)for(let s=0;!a.cZ();++s)t.hZ(r),a.lZ(s),e.oZ(i,h)||a.eH(),t.aZ(r);else for(let t=0;!a.cZ();++t)a.lZ(t),e.oZ(i,h)||a.eH();return s.fZ(),o.fZ(),!1}*XYt(){const t=this.Pc.oP(),s=t.bP(),i=s.tZ(),e=i.dP(),r=e.$q(),n=i.Tmt(),h=s.sZ(e),o=t.iZ(),a=o.sZ();if(n)for(let s=0;!a.cZ();++s)t.hZ(r),a.lZ(s),(yield*e.rSt(i,h))||a.eH(),t.aZ(r);else for(let t=0;!a.cZ();++t)a.lZ(t),(yield*e.rSt(i,h))||a.eH();return s.fZ(),o.fZ(),!1}KYt(t,s,i){const e=this.Pc.oP(),r=e.bP(),n=r.tZ(),h=n.dP(),o=h.$q(),a=n.Tmt(),l=r.sZ(h),u=e.iZ(),c=u.sZ();if(c.eZ(t),c.Fmt(i),i<s)if(a)for(let t=s;t>=i&&!c.cZ();--t)e.hZ(o),c.lZ(t),h.oZ(n,l),e.aZ(o);else for(let t=s;t>=i&&!c.cZ();--t)c.lZ(t),h.oZ(n,l);else if(a)for(let t=s;t<=i&&!c.cZ();++t)e.hZ(o),c.lZ(t),h.oZ(n,l),e.aZ(o);else for(let t=s;t<=i&&!c.cZ();++t)c.lZ(t),h.oZ(n,l);return r.fZ(),u.fZ(),!1}*$Yt(t,s,i){const e=this.Pc.oP(),r=e.bP(),n=r.tZ(),h=n.dP(),o=h.$q(),a=n.Tmt(),l=r.sZ(h),u=e.iZ(),c=u.sZ();if(c.eZ(t),c.Fmt(i),i<s)if(a)for(let t=s;t>=i&&!c.cZ();--t)e.hZ(o),c.lZ(t),yield*h.rSt(n,l),e.aZ(o);else for(let t=s;t>=i&&!c.cZ();--t)c.lZ(t),yield*h.rSt(n,l);else if(a)for(let t=s;t<=i&&!c.cZ();++t)e.hZ(o),c.lZ(t),yield*h.rSt(n,l),e.aZ(o);else for(let t=s;t<=i&&!c.cZ();++t)c.lZ(t),yield*h.rSt(n,l);return r.fZ(),u.fZ(),!1}tHt(t){const s=t.eU(),i=s.iU();if(0===i.length)return!1;const e=this.Pc.oP(),r=e.bP(),n=r.tZ(),h=n.dP(),o=h.$q(),a=n.Tmt(),l=r.sZ(h),u=e.iZ(),c=u.sZ(),f=t.vQ(),d=Tb.sZ();if(pb.xh(d,i),c.Fmt(d.length),a)for(let s=0,i=d.length;s<i&&!c.cZ();++s){e.hZ(o);const i=d[s];t.eU().kpt(i),f&&i.Mwt(),c.lZ(s),h.oZ(n,l),e.aZ(o)}else{s.Lpt(!1);const t=s.Opt();pb.wh(t),t.push(null);for(let s=0,i=d.length;s<i&&!c.cZ();++s){const i=d[s];t[0]=i,f&&i.Mwt(),c.lZ(s),h.oZ(n,l)}}return r.fZ(),u.fZ(),pb.wh(d),Tb.fZ(),!1}*sHt(t){const s=t.eU(),i=s.iU();if(0===i.length)return!1;const e=this.Pc.oP(),r=e.bP(),n=r.tZ(),h=n.dP(),o=h.$q(),a=n.Tmt(),l=r.sZ(h),u=e.iZ(),c=u.sZ(),f=t.vQ(),d=Tb.sZ();if(pb.xh(d,i),c.Fmt(d.length),a)for(let s=0,i=d.length;s<i&&!c.cZ();++s){e.hZ(o);const i=d[s];t.eU().kpt(i),f&&i.Mwt(),c.lZ(s),yield*h.rSt(n,l),e.aZ(o)}else{s.Lpt(!1);const t=s.Opt();pb.wh(t),t.push(null);for(let s=0,i=d.length;s<i&&!c.cZ();++s){const i=d[s];t[0]=i,f&&i.Mwt(),c.lZ(s),yield*h.rSt(n,l)}}return r.fZ(),u.fZ(),pb.wh(d),Tb.fZ(),!1}iHt(t,s){const i=t.eU(),e=i.iU();if(0===e.length)return!1;const r=this.Pc.oP(),n=r.bP(),h=r.Oyt(),o=n.tZ(),a=o.dP(),l=a.$q(),u=o.Tmt(),c=n.sZ(a),f=r.iZ(),d=f.sZ(),p=t.vQ(),m=Tb.sZ();pb.wh(m),d.Fmt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.bxt(1,t)]);if(m.sort(db),1===s&&m.reverse(),u)for(let s=0,i=m.length;s<i&&!d.cZ();++s){r.hZ(l);const i=m[s][0];t.eU().kpt(i),p&&i.Mwt(),d.lZ(s),a.oZ(o,c),r.aZ(l)}else{i.Lpt(!1);const t=i.Opt();pb.wh(t),t.push(null);for(let s=0,i=m.length;s<i&&!d.cZ();++s){const i=m[s][0];t[0]=i,p&&i.Mwt(),d.lZ(s),a.oZ(o,c)}}return n.fZ(),f.fZ(),pb.wh(m),Tb.fZ(),!1}*eHt(t,s){const i=t.eU(),e=i.iU();if(0===e.length)return!1;const r=this.Pc.oP(),n=r.bP(),h=r.Oyt(),o=n.tZ(),a=o.dP(),l=a.$q(),u=o.Tmt(),c=n.sZ(a),f=r.iZ(),d=f.sZ(),p=t.vQ(),m=Tb.sZ();pb.wh(m),d.Fmt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.bxt(1,t)]);if(m.sort(db),1===s&&m.reverse(),u)for(let s=0,i=m.length;s<i&&!d.cZ();++s){r.hZ(l);const i=m[s][0];t.eU().kpt(i),p&&i.Mwt(),d.lZ(s),yield*a.rSt(o,c),r.aZ(l)}else{i.Lpt(!1);const t=i.Opt();pb.wh(t),t.push(null);for(let s=0,i=m.length;s<i&&!d.cZ();++s){const i=m[s][0];t[0]=i,p&&i.Mwt(),d.lZ(s),yield*a.rSt(o,c)}}return n.fZ(),f.fZ(),pb.wh(m),Tb.fZ(),!1}rHt(t,s){let i=this.BYt.get(t);return i||(s?(i={nHt:null,hHt:new Map},this.BYt.set(t,i),i):null)}oHt(t,s,i,e,r){s.cP().bSt(i,s.yP()),e&&t.aZ(r)}*aHt(t,s,i,e,r){yield*s.cP().SSt(i,s.yP()),e&&t.aZ(r)}}}{const vb=self.Cs;vb.tz.$F.fAt=class extends vb.Wr{constructor(t){super(),this.ppt=t,this.Pc=t.oz(),this.RNt=t.JB()}wNt(){}Vr(){this.ppt=null,this.Pc=null,this.RNt=null}}}{const xb=self.Cs;xb.tz.$F.Instance=class extends xb.Wr{constructor(t,s){super(),this.fi=t,this.ppt=this.fi.fQ(),this.BNt=this.ppt.Xxt(),this.Pc=this.fi.oz()}Vr(){this.fi=null,this.ppt=null,this.BNt=null,this.Pc=null}}}{const Ib=self.Cs,Cb=[];Ib.tz.$F.KF={lHt:()=>!0,J5:()=>!0,t6:()=>!0,YJt:()=>!0,HJt:()=>!0,NP(){return this.Pc.NP()},ibt(){const t=this.Pc.Lyt();return!t.gmt()&&!t.mmt()},uHt(){const t=this.Pc.Oyt().oxt();let s=t.get("TriggerOnce_lastTick");void 0===s&&(s=-1,t.set("TriggerOnce_lastTick",-1));const i=this.Pc.kP();return t.set("TriggerOnce_lastTick",i),this.Pc.jVt()||s!==i-1},cHt(t){const s=this.Pc.Oyt().oxt(),i=s.get("Every_lastTime")||0,e=this.Pc.OP();s.has("Every_seconds")||s.set("Every_seconds",t);const r=s.get("Every_seconds");return e>=i+r?(s.set("Every_lastTime",i+r),e>=s.get("Every_lastTime")+.04&&s.set("Every_lastTime",e),s.set("Every_seconds",t),!0):(e<i-.1&&s.set("Every_lastTime",e),!1)},MMt(t){const s=this.Pc.oP().tgt(t);return s&&s.MMt()},gUt(){return this.Pc.gUt()},hi:()=>Ib.Xs.hi,GJt:()=>!0,XF:()=>!0,fHt:()=>!0,ZVt:()=>!0,sYt:()=>!0,KVt:()=>!0,$Vt:()=>!0,dHt(t){return!!this.Pc._F(t)},pHt(t){switch(t){case 0:return"browser"===Ib.Xs.ri;case 1:return"iOS"===Ib.Xs.Ks;case 2:return"Android"===Ib.Xs.Ks;case 8:return"cordova"===Ib.Xs.ri;case 9:return"scirra-arcade"===this.Pc.Qz();case 10:return"nwjs"===Ib.Xs.ri;case 13:return"windows-uwp"===this.Pc.Qz();default:return!1}},mHt(t,s,i){return this.UYt(s,i).test(t)},yHt:(t,s,i)=>Ib.compare(t,s,i),gHt:(t,s,i)=>t>=s&&t<=i,MHt:(t,s,i)=>Ib.compare(t.Grt(),s,i),wHt:t=>!!t.Grt(),bHt(t,s){const i=this.Pc.OP();if(0===t){const t=this.Pc.Oyt().oxt();return!t.get("CompareTime_executed")&&i>=s&&(t.set("CompareTime_executed",!0),!0)}return Ib.compare(i,t,s)},SHt:t=>isNaN(t),MGt:(t,s,i)=>Ib.an(Ib.$r(t),Ib.$r(i))<=Ib.$r(s),wGt:(t,s)=>Ib.un(Ib.$r(t),Ib.$r(s)),NIt(t,s,i){let e=Ib.$r(t),r=Ib.$r(s),n=Ib.$r(i);return Ib.un(n,r)?Ib.un(e,r)&&!Ib.un(e,n):!(!Ib.un(e,r)&&Ib.un(e,n))},THt:(t,s)=>"number"==typeof t?0===s:1===s,vHt:t=>!!t,Zgt(t){return t.toLowerCase()===this.Pc.oP().tMt()},xHt(t,s,i,e){if(!t)return!1;const r=this.YYt(),n=r.sZ(),h=t.eU();Ib.xh(n,h.iU()),h.Cpt()&&Ib.wh(h.Rpt());const o=this.Pc.Oyt();let a=0;for(let t=0,r=n.length;t<r;++t){const r=n[t];n[a]=r,s=o.bxt(1,t),e=o.bxt(3,t),Ib.compare(s,i,e)?++a:h.Apt(r)}Ib.Mh(n,a),h.jpt(n);const l=!!n.length;return Ib.wh(n),r.fZ(),t.dSt(),l},IHt(t,s){if(!t)return!1;const i=this.YYt(),e=i.sZ(),r=t.eU();Ib.xh(e,r.iU()),r.Cpt()&&Ib.wh(r.Rpt());const n=this.Pc.Oyt();let h=0;for(let t=0,s=e.length;t<s;++t){const s=e[t];e[h]=s,n.bxt(1,t)?++h:r.Apt(s)}Ib.Mh(e,h),r.jpt(e);const o=!!e.length;return Ib.wh(e),i.fZ(),t.dSt(),o},CHt(t,s,i){if(!t)return!1;const e=t.eU(),r=e.iU();if(0===r.length)return!1;const n=this.Pc.Oyt();let h=null,o=0;for(let t=0,e=r.length;t<e;++t){const e=r[t];i=n.bxt(2,t),(null===h||0===s&&i<o||1===s&&i>o)&&(o=i,h=e)}return e.Upt(h),t.dSt(),!0},GHt(t,s){if(!t)return!1;const i=t.eU(),e=i.iU();if((s=Math.floor(s))>=e.length)return!1;const r=e[s];return i.Upt(r),t.dSt(),!0},NHt(t){if(!t)return!1;const s=t.eU(),i=s.iU(),e=Math.floor(this.Pc.lF()*i.length);if(e>=i.length)return!1;const r=i[e];return s.Upt(r),t.dSt(),!0},_Ht:t=>!!t&&(!!t.hU()&&(t.eU().Lpt(!0),t.dSt(),!0)),EHt(t,s,i){if(!t)return!1;const e=t.eU(),r=e.iU(),n=this.Pc.dP().Wpt(),h=this.Pc.Oyt().sxt();e.Cpt()?(Ib.xh(Cb,r),e.Ipt(),e.Lpt(!1)):n?(Ib.xh(Cb,e.Rpt()),Ib.wh(e.Rpt())):(Ib.xh(Cb,e.Opt()),Ib.wh(e.Opt()));for(let t=0,r=Cb.length;t<r;++t){const r=Cb[t];Ib.xor(r.OF().rV(s,i),h)?e.Dpt(r):e.Apt(r)}return t.dSt(),Ib.xor(!!e.Opt().length,h)},DHt(t){if(!t)return!1;const s=t.w1();let i=null;const e=this.Pc.sLt();for(let r=e.length-1;r>=0;--r){const n=e[r];if(s){if(n.fQ().eIt(t)){i=n;break}}else if(n.fQ()===t){i=n;break}}if(!i){const s=t.iU();s.length&&(i=s.at(-1))}return!!i&&(t.eU().Upt(i),t.dSt(),!0)},AHt(t){return this.Pc.iCt()?this.qYt(t):this.HYt(t)},LHt(){return this.Pc.iCt()?this.XYt():this.ZYt()},OHt(t,s,i){return this.Pc.iCt()?this.$Yt(t,s,i):this.KYt(t,s,i)},Wd(t){return this.Pc.iCt()?this.sHt(t):this.tHt(t)},RHt(t,s,i){return this.Pc.iCt()?this.eHt(t,i):this.iHt(t,i)},kHt:t=>!!t&&t.wW(),jHt:t=>!!t&&t.NW(),PHt:t=>!!t&&t.xW(),FHt:t=>!!t&&!t.hU(),zHt:(t,s,i)=>!!t&&Ib.compare(100*t.ML(),s,i),BHt(t){const s=this.Pc.uF();return!!s&&s.s5(t)},JYt:()=>!0,UHt(){return this.FYt>0},WHt(t,s){const i=this.Pc.uOt();return!!i&&!!s&&!!i.gct(t,s)}}}{let Gb=function(t,s){const i=t[0]-s[0];return 0!==i?i:t[1]-s[1]},Nb=function(t,s){return t[1]-s[1]};0;const _b=self.Cs,Eb=[],Db=[],Ab=_b.Jr(_b.Rect),Lb=_b.Jr(_b.vo),Ob=[];_b.tz.$F.ght={QHt(t,s){t.lnt(s)},JHt(t,s){t.Ki()&&"number"!=typeof s&&(s=parseFloat(s)),t.lnt(t.Grt()+s)},VHt(t,s){t.Ki()&&t.lnt(t.Grt()-s)},YHt(t,s){t.lnt(!!s)},HHt(t){t.lnt(!t.Grt())},qHt(t){t.lnt(t.Ayt())},ZHt(t){this.Pc.oP().Kyt(t)},XHt(t,s,i,e,r,n){if(!t||!s)return;const h=this.Pc.aU(t,s,i,e,r,n);if(!h)return;r&&s.lU(h);const o=this.Pc.oP();o.uU(!0),h.cU(),o.uU(!1);const a=new Map;h.sOt(a,t,r);for(const[t,s]of a)t.eU().Ppt(s)},KHt(t,s,i,e,r,n){if(!t||!s)return;const h=this.Pc.AJt(t);h&&_b.tz.$F.ght.XHt.call(this,h,s,i,e,r,n)},g1(t,s,i,e,r,n,h,o,a,l,u){if(!t)return;const c=this.Pc.AF();let f=c;if(n){const t=this.Pc.dF().N6(n);if(!t)return;f=t}let d=null;if(("number"!=typeof h||h>=0)&&(d=f.RF(h),!d))return;let p=null;if(("number"!=typeof o||o>=0)&&(p=c.RF(o),!p))return;Ab.set(s,i,e,r);const m=f.g1(t,Ab,d,p,a,l,u);t.eU().jpt(m),t.dSt()},$Ht(){const t=this.kmt;t.Amt()&&t.Emt().eH()},wMt(t,s){const i=this.Pc.oP().tgt(t);i&&(0===s?i.wMt(!1):1===s?i.wMt(!0):i.wMt(!i.MMt()))},tqt(t){this.Pc.BP(t)},sqt(t,s){if(s<0&&(s=0),!t)return;const i=t.eU().iU();for(const t of i)t.BP(s)},iqt(t){if(!t)return;const s=t.eU().iU();for(const t of s)t.AQ()},dh(t,s){if(t<0)return;const i=this.Pc.oP().Ogt();return s?i.BGt(t):i.UGt(t),!0},IP(t){return this.Pc.oP().Ogt().WGt(t),!0},eqt(){const t=this.Pc.oP();return t.Ogt().QGt(t.qgt()),!0},vP(t){this.Pc.oP().vP(t)},async qF(t,s,i,e,r,n){const h=this.Pc.IF();h&&(this.BF(),await h.qF(0===t?"image/png":"image/jpeg",s/100,i,e,r,n),await this.Pc.ZF(_b.tz.$F.KF.XF,null))},rqt(t,s){if(t<=0||s<=0)return;this.Pc.bBt(t,s),this.Pc.AF().V3();const i=this.Pc.IF();i&&("off"===i.dBt()||this.Pc.OJt(t,s),i.FE(i.eq(),i.rq(),!0),this.Pc.BF())},nqt(t){const s=this.Pc.IF();s&&"off"!==s.dBt()&&(s.GBt(0!==t?"high":"low"),s.FE(s.eq(),s.rq(),!0))},Jet(t){this.Pc.BVt(t)},hqt(){this.Pc.UVt()},oqt(t){this.Pc.WVt(t)},aqt(t){this.Pc.ZCt(t)},lqt(t){},uqt(){for(const t of this.Pc.dF().yF())t.l6()},cqt(t){this.Pc.PVt(0!==t)},fqt(t,s){this.Pc.rF(1/t),this.Pc.sF(1/s)},dqt(t,s){this.Pc.sF(t),this.Pc.rF(s)},pqt(t){this.Pc.KP(["vsync","unlimited-tick","unlimited-frame"][t])},mqt(t,s){if(!t)return;const i=t.eU().iU(),e=Eb,r=Db,n=this.Pc.AF(),h=t.w1(),o=t.kTt();for(let t=0,n=i.length;t<n;++t){const n=i[t],a=n.OF();if(!a)continue;let l;l=h?n.lot(s+n.fQ().RTt(o)):n.lot(s),e.push([a.RF().Tj(),a.kF()]),r.push([n,l])}if(!e.length)return;e.sort(Gb),r.sort(Nb);let a=!1;for(let t=0,s=e.length;t<s;++t){const s=r[t][0],i=n.jF(e[t][0]),h=e[t][1],o=i.PF();o[h]!==s&&(o[h]=s,s.OF().FF(i,!0),i.zF(s),a=!0)}a&&this.Pc.BF(),_b.wh(Eb),_b.wh(Db)},Lz(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.Pc.Ej().Lz(t,s)},yqt(t){if(this.Pc.TM())return;const s=this.Pc.dF();s.MF()||s.wF(t)},gqt(t){if(this.Pc.TM())return;const s=this.Pc.dF();if(s.MF())return;const i=s.N6(t);i&&s.wF(i)},Mqt(t){if(this.Pc.TM())return;const s=this.Pc.dF();if(s.MF())return;const i=s.yF(),e=i.indexOf(s.uF());if(t&&0===e)return;if(!t&&e===i.length-1)return;const r=i[e+(t?-1:1)];s.wF(r)},wqt(){if(this.Pc.TM())return;const t=this.Pc.dF();t.MF()||(t.wF(t.uF()),this.Pc.oP().rgt())},bqt(t,s){t&&t.gW(s)},Sqt(t,s){t&&t.TW(s)},Tqt(t,s){t&&t.IW(s)},vqt(t,s){t&&t.bL(s/100)},xqt(t,s){t&&t._W(s)},Iqt(t,s){t&&t.AW(s)},Cqt(t,s){t&&t.AU(_b.$r(+s))},Gqt(t,s,i){t&&(t.KW(!0),t.OU(s),t.kU(i))},Nqt(t){t&&t.KW(!1)},_qt(t,s,i){t&&t.K1(s/100,i/100)},Eqt(t,s){t&&t.$T(+s)},Dqt(t,s){t&&t.UW(1===s)},Aqt(t,s){if(!t)return;Lb.$o(s),Lb.Xr();const i=t.XW();i.Jo(Lb)||(i.ko(Lb),this.BF())},Lqt(t,s){t&&t.JW(s)},Oqt(t,s){t&&t.kT(s)},Rqt(t,s,i){if(!t)return;const e=t.CU().Rnt(i);if(!e)return;const r=1===s;e.lwt()!==r&&(e.Wjt(r),t.wY(),this.Pc.BF())},kqt(t,s,i,e){if(!t)return;const r=t.CU(),n=r.Rnt(s);if(!n)return;i=Math.floor(i);const h=n.JC().YC(i);h&&("color"===h?(Lb.$o(e),e=Lb):"percent"===h&&(e/=100),r.SY(n.Tj(),i,e)&&n.lwt()&&this.Pc.BF())},jqt(t,s){t&&t.HW(s)},Pqt(t){this.Pc.AF().EU(+t)},Fqt(t){this.Pc.AF().AU(_b.$r(+t))},zqt(t,s){const i=this.Pc.AF(),e=i.CU().Rnt(s);if(!e)return;const r=1===t;e.lwt()!==r&&(e.Wjt(r),i.wY(),this.Pc.BF())},Bqt(t,s,i){const e=this.Pc.AF().CU(),r=e.Rnt(t);if(!r)return;s=Math.floor(s);const n=r.JC().YC(s);n&&("color"===n?(Lb.$o(i),i=Lb):"percent"===n&&(i/=100),e.SY(r.Tj(),s,i)&&r.lwt()&&this.Pc.BF())},Uqt(t,s){this.Pc.AF().eW(t/100,s/100)},Wqt(t){const s=this.Pc.AF();0===t?s.hW():s.oW()},Qqt(t){this.Pc.AF().OU(t)},Jqt(t){this.Pc.AF().kU(t)},Vqt(t,s){const i=this.Pc.AF();i.OU(t),i.kU(s)},Yqt(t){if(!t)return;const s=t.QIt();if(!s)return;const i=s.OF();if(!i)return;const e=this.Pc.AF();e.OU(i.YT()),e.kU(i.ZT())},qU(t,s,i){const e=this.Pc.AF();try{e.qU(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},XU(t,s,i){if(!t)return;const e=this.Pc.AF();try{e.XU(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}},$U(t){t&&this.Pc.AF().$U(t)},sW(){this.Pc.AF().sW()},async Hqt(t){const s=this.Pc.uF();if(!s||!t||this.Pc.TM())return;const i=t.w1()?t.TU():[t];await this.QYt(s,i)},async qqt(t){await _b.tz.$F.ght.Hqt.call(this,this.Pc.AJt(t))},Zqt(t){const s=this.Pc.uF();if(!s||!t)return;const i=t.w1()?t.TU():[t];this.VYt(s,i)},Xqt(t){_b.tz.$F.ght.Zqt.call(this,this.Pc.AJt(t))},Kqt(){const t=this.Pc.uF();if(!t)return;const s=t.d5();this.VYt(t,s)},async $qt(t){const s=this.Pc.uF();t&&s&&!this.Pc.TM()&&await this.QYt(s,t.u5())},async tZt(t){const s=this.Pc.uF(),i=this.Pc.dF().N6(t);i&&s&&!this.Pc.TM()&&await this.QYt(s,i.u5())},TP(t){const s=this.Tpt.wP();if(s)switch(s.SP()){case 1:"number"==typeof t&&s.TP(t);break;case 2:"string"==typeof t&&s.TP(t);break;case 3:s.TP(t)}},sZt(t,s,i){const e=this.rHt(t.toLowerCase(),!0),r=e.hHt,n=s.toLowerCase();r.has(n)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`);const h=_b.Fh(r.values())||e.nHt;h&&0!==h.gP()!=(0!==i.gP())?console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`):r.set(n,i)},iZt(t,s){const i=this.rHt(t.toLowerCase(),!0);i.nHt&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`);const e=_b.Fh(i.hHt.values())||i.nHt;e&&0!==e.gP()!=(0!==s.gP())?console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`):i.nHt=s},eZt(t,s,i){const e=this.Pc,r=e.iCt()?Ob:null;i=Math.floor(i);const n=this.rHt(t.toLowerCase(),!1);if(!n)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),r;let h=n.hHt.get(s.toLowerCase());if(!h){if(!n.nHt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),r;h=n.nHt,i=0}if(!h.Cu())return r;if(0!==h.gP())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),r;const o=e.oP(),a=o.dP(),l=a.fP(),u=l.length>0;u&&(h.yP()?o.hZ(l):o.Agt(l));const c=[],f=o.IMt(a);if(f){const t=f.GMt();for(let s=i,e=t.length;s<e;++s)c.push(t[s].Grt())}const d=h.GMt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].Ayt());return e.iCt()?this.aHt(o,h,c,u,l):this.oHt(o,h,c,u,l)}}}{const Rb=self.Cs;Rb.tz.$F.Mht={rZt:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t)&&(t=0)),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t)&&(t=0)),t},N:t=>t.toString(),kt:t=>"string"==typeof t?t.length:0,random(t,s){return void 0===s?this.Pc.lF()*t:this.Pc.lF()*(s-t)+t},bTt(...t){return t[Math.floor(this.Pc.lF()*t.length)]},nZt:(t,...s)=>("number"!=typeof t&&(t=0),s[t=Rb.Xr(Math.floor(t),0,s.length-1)]),hZt:()=>Math.PI,oZt:()=>1/0,sqrt:t=>Math.sqrt(t),abs:t=>Math.abs(t),round:t=>Math.round(t),aZt(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor:t=>Math.floor(t),ceil:t=>Math.ceil(t),sign:t=>Math.sign(t),sin:t=>Math.sin(Rb.$r(t)),cos:t=>Math.cos(Rb.$r(t)),tan:t=>Math.tan(Rb.$r(t)),asin:t=>Rb.tn(Math.asin(t)),acos:t=>Rb.tn(Math.acos(t)),atan:t=>Rb.tn(Math.atan(t)),exp:t=>Math.exp(t),Ut:t=>Math.log(t),log10:t=>Math.log10(t),max(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let i=1,e=t.length;i<e;++i){let e=t[i];"number"==typeof e&&s<e&&(s=e)}return s},min(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let i=1,e=t.length;i<e;++i){let e=t[i];"number"==typeof e&&s>e&&(s=e)}return s},Xr:(t,s,i)=>Rb.Xr(t,s,i),bt:(t,s,i,e)=>Rb.rn(t,s,i,e),angle:(t,s,i,e)=>Rb.tn(Rb.hn(t,s,i,e)),Ct:(t,s,i)=>Rb.Ct(t,s,i),mn:(t,s,i)=>Rb.mn(t,s,i),gn:(t,s,i,e)=>Rb.gn(t,s,i,e),Mn:(t,s,i,e,r)=>Rb.Mn(t,s,i,e,r),wn:(t,s,i)=>Rb.wn(t,s,i),lZt:(t,s)=>Rb.tn(Rb.an(Rb.$r(t),Rb.$r(s))),uZt:(t,s,i)=>Rb.tn(Rb.cn(Rb.$r(t),Rb.$r(s),i)),cZt:(t,s,i)=>Rb.tn(Rb.ln(Rb.$r(t),Rb.$r(s),Rb.$r(i))),fZt:(t,s,i)=>(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s,dZt:(t,s)=>(t|=0)^1<<s,pZt:(t,s)=>(t|=0)&1<<(s|=0)?1:0,mZt:()=>"\n",yZt:t=>"string"==typeof t?t.toUpperCase():"",gZt:t=>"string"==typeof t?t.toLowerCase():"",left:(t,s)=>"string"==typeof t?t.substr(0,s):"",mid:(t,s,i)=>"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i),right:(t,s)=>"string"==typeof t?t.substr(Math.max(t.length-s,0)):"",trim:t=>"string"==typeof t?t.trim():"",MZt(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},wZt:(t,s)=>"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0,find:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(Rb.Zi(s),"i")):-1,bZt:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(Rb.Zi(s),"")):-1,replace:(t,s,i)=>"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(Rb.Zi(s),"gi"),i):"string"==typeof t?t:"",SZt(t,...s){let i=t;for(let t=0,e=s.length;t<e;++t)i=i.replaceAll(`{${t}}`,s[t].toString());return i},TZt(t,s,i){const e=this.UYt(s,i);return t?t.search(e):-1},vZt(t,s,i,e){const r=this.UYt(s,i);return t?t.replace(r,e):""},xZt(t,s,i){const e=this.WYt(t.toString(),s,i);return e?e.length:0},IZt(t,s,i,e){e=Math.floor(e);const r=this.WYt(t.toString(),s,i);return!r||e<0||e>=r.length?"":r[e]},CZt(t,s){let i=t<0?"-":"";t<0&&(t=-t);const e=s-t.toString().length;return i+="0".repeat(Math.max(e,0)),i+t.toString()},GZt:t=>encodeURIComponent(t),NZt:t=>decodeURIComponent(t),_P(){return this.Pc.a7()},_Zt(){return this.Pc.l7()},EZt(){return this.Pc.zP()},DZt(){return(Date.now()-this.Pc.NVt())/1e3},AZt:()=>Date.now(),time(){return this.Pc.OP()},LZt(){return this.Pc.kP()},OZt(){return this.Pc.DVt()},UP(){return this.Pc.WP()},RZt(){return this.Pc.YP()},kZt(){return this.Pc.qP()},jZt(){return this.Pc.IF().hB()},PZt(){return this.Pc.IF().aB()},FZt(){return this.Pc.Yj()},zZt(){return this.Pc.qj()},BZt(){return this.Pc.Yj()},UZt(){return this.Pc.qj()},WZt(){return this.Pc.AF().RU()},QZt(){return this.Pc.AF().jU()},JZt(){return this.Pc.AF()._c()},VZt(){return this.Pc.AF().DU()},YZt(){return Rb.tn(this.Pc.AF().LU())},HZt(){return this.Pc.AF().Yy()},qZt(){return this.Pc.AF().eg()},ZZt(){return 100*this.Pc.AF().H4()},XZt(){return 100*this.Pc.AF().q4()},KZt(t){const s=this.Pc.AF().RF(t);return s?s.J1().Ka():0},$Zt(t){const s=this.Pc.AF().RF(t);return s?s.J1().$a():0},tXt(t){const s=this.Pc.AF().RF(t);return s?s.J1().tl():0},sXt(t){const s=this.Pc.AF().RF(t);return s?s.J1().sl():0},iXt(t){const s=this.Pc.AF().RF(t);return s?s.J1().width():0},eXt(t){const s=this.Pc.AF().RF(t);return s?s.J1().height():0},rXt(t){const s=this.Pc.AF().RF(t);if(s){const t=s.J1();return(t.Ka()+t.tl())/2}return 0},nXt(t){const s=this.Pc.AF().RF(t);if(s){const t=s.J1();return(t.$a()+t.sl())/2}return 0},hXt(t,s,i){const e=this.Pc.AF().RF(t);return e?e.iQ(s,i)[0]:0},oXt(t,s,i){const e=this.Pc.AF().RF(t);return e?e.iQ(s,i)[1]:0},aXt(t,s,i){const e=this.Pc.AF().RF(t);return e?e.rQ(s,i)[0]:0},lXt(t,s,i){const e=this.Pc.AF().RF(t);return e?e.rQ(s,i)[1]:0},uXt(t,s,i,e){const r=this.Pc.AF(),n=r.RF(t),h=r.RF(s);if(!n||!h||n===h)return i;const[o,a]=n.rQ(i,e);return h.iQ(o,a)[0]},cXt(t,s,i,e){const r=this.Pc.AF(),n=r.RF(t),h=r.RF(s);if(!n||!h||n===h)return e;const[o,a]=n.rQ(i,e);return h.iQ(o,a)[1]},fXt(t){const s=this.Pc.AF().RF(t);return s?s.EW():0},dXt(t){const s=this.Pc.AF().RF(t);return s?Rb.tn(s.OW()):0},pXt(t){const s=this.Pc.AF().RF(t);return s?100*s.ML():0},mXt(t){const s=this.Pc.AF().RF(t);return s?s.LW():0},yXt(t){const s=this.Pc.AF().RF(t);return s?s.RU():0},gXt(t){const s=this.Pc.AF().RF(t);return s?s.jU():0},MXt(t){const s=this.Pc.AF().RF(t);return s?100*s.jW():0},wXt(t){const s=this.Pc.AF().RF(t);return s?100*s.zW():0},bXt(t){const s=this.Pc.AF().RF(t);return s?s.KT():0},SXt(t){const s=this.Pc.AF().RF(t);return s?s.Tj():-1},TXt(){const t=this.Pc.IF();return t?t.KBt():""},vXt(t){const s=this.kmt;if(!s.Amt())return 0;if(t){const i=s.Omt(t);return i?i.Tj():0}return s.Emt().Tj()},xXt(){return this.Pc.QVt()},IXt(t,s,...i){const e=this.rHt(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let r=e.hHt.get(s.toLowerCase());if(!r){if(!e.nHt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;r=e.nHt}const n=r.gP(),h=r.lP();if(0===n)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!r.Cu())return h;const o=this.Pc.oP(),a=o.dP().fP(),l=a.length>0;l&&(r.yP()?o.hZ(a):o.Agt(a));const u=r.GMt();for(let t=i.length,s=u.length;t<s;++t)i.push(u[t].Ayt());const c=r.cP(),f=c.mP(c.fP(),r.yP(),n,h,...i);return l&&o.aZ(a),f},CXt(){return this.Pc.Gj().hF()},GXt(){return this.NK()},VG(){return this.Pc.OBt()?"webgpu":"webgl"},NXt(){return this.Pc.OBt()?this.Pc.OBt().RBt():this.Pc.LBt().NO()},_Xt(){let t=this.Pc.pT().WS();return Math.round(100*t/1048576)/100},EXt:(t,s,i)=>Rb.Cn(t,s,i),DXt:(t,s,i)=>Rb.Nn(t/100,s/100,i/100),AXt:(t,s,i,e)=>Rb.Gn(t/100,s/100,i/100,e/100),LXt:(t,s,i)=>Rb.Nn(t/255,s/255,i/255),OXt:(t,s,i,e)=>Rb.Gn(t/255,s/255,i/255,e/255),RXt(){return this.Pc.Oj()},kXt(){return this.Pc.kj()},jXt(){return this.Pc.Pj()},PXt(){return this.Pc.zj()},FXt(){return this.Pc.dP().K4()._c()},zXt(){return this.Pc.dP().vbt()}}}{const kb=self.Cs;kb.tz.Keyboard=class extends kb.ZGt{constructor(t){super(t)}Vr(){super.Vr()}}}{let jb=function(){return Fb.UB().sY()};0;const Pb=self.Cs;self.js,Pb.tz.Keyboard.fAt=class extends Pb.ONt{constructor(t){super(t)}Vr(){super.Vr()}wNt(){}bNt(){return self.BXt}};let Fb=null;self.BXt=class extends self.rU{constructor(t){super(t),Fb=t,t.oz().bF().keyboard=this}UXt(t){const s=jb();if("string"==typeof t)return s.WXt(t);if("number"==typeof t)return s.QXt(t);throw new TypeError("expected string or number")}}}{const zb=self.Cs,Bb="keyboard";zb.tz.Keyboard.Instance=class extends zb.FNt{constructor(t,s){super(t,Bb),this.JXt=new Set,this.VXt=new Set,this.YXt=0,this.HXt="",this.qXt="",this.ZXt=!1;const i=this.oz().Mf();this.Zf=new zb.Yf(zb.Bf.Vf(i,"keydown",t=>this.XXt(t.data)),zb.Bf.Vf(i,"keyup",t=>this.KXt(t.data)),zb.Bf.Vf(i,"window-blur",()=>this.$Xt()),zb.Bf.Vf(i,"keyboard-blur",()=>this.$Xt())),this.Pc.YF(this.VT())}Vr(){super.Vr()}async VT(){const t=await this.KNt("init");this.ZXt=t.isKeyboardLockSupported}XXt(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.JXt.has(i)||(this.JXt.add(i),this.VXt.add(s),this.HXt=i,this.YXt=s,this.qXt=e,this.HQ(zb.tz.Keyboard.KF.tKt),this.HQ(zb.tz.Keyboard.KF.sKt),this.HQ(zb.tz.Keyboard.KF.iKt),this.HQ(zb.tz.Keyboard.KF.eKt))}KXt(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.JXt.delete(i),this.VXt.delete(s),this.HXt=i,this.YXt=s,this.qXt=e,this.HQ(zb.tz.Keyboard.KF.rKt),this.HQ(zb.tz.Keyboard.KF.nKt),this.HQ(zb.tz.Keyboard.KF.hKt),this.HQ(zb.tz.Keyboard.KF.oKt)}$Xt(){for(const t of this.VXt)this.VXt.delete(t),this.YXt=t,this.HQ(zb.tz.Keyboard.KF.rKt),this.HQ(zb.tz.Keyboard.KF.nKt),this.HQ(zb.tz.Keyboard.KF.oKt);this.JXt.clear()}WXt(t){return this.JXt.has(t)}QXt(t){return this.VXt.has(t)}ov(){return{tk:this.YXt,tkk:this.qXt}}av(t){this.YXt=t.tk,t.hasOwnProperty("tkk")&&(this.qXt=t.tkk)}a_t(){const t="plugins.keyboard";return[{title:t+".name",properties:[{name:t+".debugger.last-key-code",value:this.YXt},{name:t+".debugger.last-key-string",value:zb.tz.Keyboard.Mht.aKt(this.YXt)},{name:t+".debugger.last-typed-key",value:this.qXt}]}]}}}{const Ub=self.Cs,Wb=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];Ub.tz.Keyboard.KF={WXt(t){return this.VXt.has(t)},sKt(t){return this.YXt===t},tKt:()=>!0,rKt:()=>!0,nKt(t){return this.YXt===t},QXt(t){return t=Math.floor(t),this.VXt.has(t)},eKt(t){return this.YXt===t},oKt(t){return this.YXt===t},iKt(t){const s=Wb[t];return this.HXt===s},hKt(t){const s=Wb[t];return this.HXt===s},lKt(t){const s=Wb[t];return this.JXt.has(s)},uKt(){return this.ZXt},cKt:()=>!0,fKt:()=>!0}}{const Qb=self.Cs;Qb.tz.Keyboard.ght={async dKt(t){if(!this.ZXt)return;let s=[];t&&(s=t.split(",")),(await this.KNt("lock-keyboard",{keysArr:s})).isOk?this.HQ(Qb.tz.Keyboard.KF.cKt):this.HQ(Qb.tz.Keyboard.KF.fKt)},pKt(){this.ZXt&&this.KNt("unlock-keyboard")}}}{let Jb=function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"←";case 38:return"↑";case 39:return"→";case 40:return"↓";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}};self.Cs.tz.Keyboard.Mht={mKt(){return this.YXt},aKt:t=>Jb(t),yKt(){return this.qXt}}}{const Vb=self.Cs;Vb.tz.Touch=class extends Vb.ZGt{constructor(t){super(t)}Vr(){super.Vr()}}}{let Yb=function(){return Zb.UB().sY()};0;const Hb=self.Cs,qb=self.js;Hb.tz.Touch.fAt=class extends Hb.ONt{constructor(t){super(t)}Vr(){super.Vr()}wNt(){}bNt(){return self.gKt}};let Zb=null;self.gKt=class extends self.rU{constructor(t){super(t),Zb=t,t.oz().bF().TF=this}requestPermission(t){qb.le(t);const s=Yb();if("orientation"===t)return s.MKt(0);if("motion"===t)return s.MKt(1);throw new Error("invalid type")}}}{const Xb=self.Cs,Kb="touch";Xb.tz.Touch.Instance=class extends Xb.FNt{constructor(t,s){super(t,Kb),this.wKt=new Map,this.bKt=!1,this.SKt=!1,this.TKt=0,this.vKt=0,this.xKt=0,this.IKt=0,this.CKt=0,this.GKt=0,this.NKt=0,this._Kt=0,this.EKt=0,this.DKt=0,this.AKt=0,this.LKt=0,this.OKt=0,this.RKt=0,this.kKt=0,this.jKt=0,this.PKt=0,this.FKt=[],s&&(this.bKt=s[0]),this.qNt("permission-result",t=>this.zKt(t));const i=this.oz().Mf();this.Zf=new Xb.Yf(Xb.Bf.Vf(i,"pointerdown",t=>this.BKt(t.data)),Xb.Bf.Vf(i,"pointermove",t=>this.UKt(t.data)),Xb.Bf.Vf(i,"pointerup",t=>this.WKt(t.data,!1)),Xb.Bf.Vf(i,"pointercancel",t=>this.WKt(t.data,!0)),Xb.Bf.Vf(i,"deviceorientation",t=>this.QKt(t.data)),Xb.Bf.Vf(i,"deviceorientationabsolute",t=>this.JKt(t.data)),Xb.Bf.Vf(i,"devicemotion",t=>this.VKt(t.data)),Xb.Bf.Vf(i,"tick2",t=>this.i8()))}Vr(){this.wKt.clear(),super.Vr()}BKt(t){if("mouse"===t.pointerType){if(!this.bKt)return;this.SKt=!0}const s=t.pointerId;if(this.wKt.has(s))return;const i=t.pageX-this.Pc.Kz(),e=t.pageY-this.Pc.tB(),r=performance.now(),n=this.wKt.size;this.AKt=n,this.LKt=s;const h=Xb.Jr(Xb.tz.Touch.YKt);h.OLt(r,i,e,s,n),this.wKt.set(s,h),this.HQ(Xb.tz.Touch.KF.HKt),this.HQ(Xb.tz.Touch.KF.qKt),this.RKt=i,this.kKt=e,this.PKt=0,this.HQ(Xb.tz.Touch.KF.ZKt)}UKt(t){if("mouse"===t.pointerType&&!this.SKt)return;const s=this.wKt.get(t.pointerId);if(!s)return;const i=performance.now();if(i-s.HO()<2)return;const e=t.pageX-this.Pc.Kz(),r=t.pageY-this.Pc.tB();s.N$(i,e,r,t.width,t.height,t.pressure)}WKt(t,s){if("mouse"===t.pointerType){if(!this.SKt)return;this.SKt=!1}const i=performance.now(),e=t.pointerId,r=this.wKt.get(e);if(r){if(this.AKt=r.XKt(),this.LKt=r.DH(),!s){const s=t.pageX-this.Pc.Kz(),i=t.pageY-this.Pc.tB();this.RKt=s,this.kKt=i,this.PKt=1,this.HQ(Xb.tz.Touch.KF.ZKt)}if(this.HQ(Xb.tz.Touch.KF.KKt),this.HQ(Xb.tz.Touch.KF.$Kt),!s){const t=r.t$t(i);"single-tap"===t?(this.HQ(Xb.tz.Touch.KF.s$t),this.RKt=r.YT(),this.kKt=r.ZT(),this.HQ(Xb.tz.Touch.KF.i$t)):"double-tap"===t&&(this.HQ(Xb.tz.Touch.KF.e$t),this.RKt=r.YT(),this.kKt=r.ZT(),this.HQ(Xb.tz.Touch.KF.r$t))}r.Vr(),this.wKt.delete(e)}}MKt(t){return this.$Nt("request-permission",{type:t}),new Promise((s,i)=>{this.FKt.push({type:t,resolve:s,reject:i})})}zKt(t){const s=t.result,i=t.type;this.OKt=i;const e=this.FKt.filter(t=>t.type===i);for(const t of e)t.resolve(s?"granted":"denied");this.FKt=this.FKt.filter(t=>t.type!==i),s?(this.HQ(Xb.tz.Touch.KF.n$t),0===i?this.Pc.mYt():this.Pc.yYt()):this.HQ(Xb.tz.Touch.KF.h$t)}QKt(t){"number"==typeof t.webkitCompassHeading?this.TKt=t.webkitCompassHeading:t.absolute&&(this.TKt=t.alpha),this.vKt=t.alpha,this.xKt=t.beta,this.IKt=t.gamma}JKt(t){this.TKt=t.alpha}VKt(t){const s=t.acceleration;s&&(this.CKt=s.x,this.GKt=s.y,this.NKt=s.z);const i=t.accelerationIncludingGravity;i&&(this._Kt=i.x,this.EKt=i.y,this.DKt=i.z)}i8(){const t=performance.now();let s=0;for(const i of this.wKt.values())i.HO()<=t-50&&i.o$t(t),i.a$t(t)&&(this.AKt=i.XKt(),this.LKt=i.DH(),this.jKt=s,this.HQ(Xb.tz.Touch.KF.l$t),this.RKt=i.YT(),this.kKt=i.ZT(),this.HQ(Xb.tz.Touch.KF.u$t),this.jKt=0),++s}c$t(t){t=Math.floor(t);for(const s of this.wKt.values()){if(0===t)return s;--t}return null}f$t(t,s){return t>=0&&s>=0&&t<this.Pc.RJt()&&s<this.Pc.kJt()}a_t(){return[{title:"plugins.touch.debugger.touches",properties:[...this.wKt.values()].map(t=>({name:"$"+t.DH(),value:t.YT()+", "+t.ZT()}))}]}}}{const $b=self.Cs;$b.tz.Touch.KF={qKt:()=>!0,$Kt:()=>!0,d$t(){return this.wKt.size>0},ZKt(t,s){return!!t&&s===this.PKt&&!!this.f$t(this.RKt,this.kKt)&&this.Pc.Ej().CPt(t,[[this.RKt,this.kKt]],!1)},p$t(t){if(!t)return!1;const s=this.Pc.Oyt().sxt(),i=[...this.wKt.values()].filter(t=>this.f$t(t.YT(),t.ZT())).map(t=>[t.YT(),t.ZT()]);return $b.xor(this.Pc.Ej().CPt(t,i,s),s)},m$t(t,s,i){const e=this.c$t(t);return!!e&&$b.compare(e.vY(),s,i)},y$t:()=>!0,g$t:()=>!0,M$t(t,s,i){this.Pc.mYt();let e=0;return e=0===t?this.vKt:1===t?this.xKt:this.IKt,$b.compare(e,s,i)},w$t(t,s,i){this.Pc.yYt();let e=0;return e=0===t?this._Kt:1===t?this.EKt:2===t?this.DKt:3===t?this.CKt:4===t?this.GKt:this.NKt,$b.compare(e,s,i)},HKt(t){return(t=Math.floor(t))===this.AKt},KKt(t){return(t=Math.floor(t))===this.AKt},b$t(t){return t=Math.floor(t),this.wKt.size>=t+1},l$t:()=>!0,s$t:()=>!0,e$t:()=>!0,u$t(t){return!!t&&!!this.f$t(this.RKt,this.kKt)&&this.Pc.Ej().CPt(t,[[this.RKt,this.kKt]],!1)},i$t(t){return!!t&&!!this.f$t(this.RKt,this.kKt)&&this.Pc.Ej().CPt(t,[[this.RKt,this.kKt]],!1)},r$t(t){return!!t&&!!this.f$t(this.RKt,this.kKt)&&this.Pc.Ej().CPt(t,[[this.RKt,this.kKt]],!1)},n$t(t){return this.OKt===t},h$t(t){return this.OKt===t}}}self.Cs.tz.Touch.ght={S$t(t){this.MKt(t)}};{const tS=self.Cs;tS.tz.Touch.Mht={T$t(){return this.wKt.size},aGt(t){const s=this.c$t(this.jKt);return s?s.v$t(this.Pc.AF(),t,!0):0},lGt(t){const s=this.c$t(this.jKt);return s?s.v$t(this.Pc.AF(),t,!1):0},x$t(t,s){const i=this.c$t(t);return i?i.v$t(this.Pc.AF(),s,!0):0},I$t(t,s){const i=this.c$t(t);return i?i.v$t(this.Pc.AF(),s,!1):0},C$t(t,s){const i=this.wKt.get(t);return i?i.v$t(this.Pc.AF(),s,!0):0},G$t(t,s){const i=this.wKt.get(t);return i?i.v$t(this.Pc.AF(),s,!1):0},N$t(){const t=this.c$t(0);return t?t.YT():0},_$t(){const t=this.c$t(0);return t?t.ZT():0},E$t(t){const s=this.c$t(t);return s?s.YT():0},D$t(t){const s=this.c$t(t);return s?s.ZT():0},A$t(t){const s=this.wKt.get(t);return s?s.YT():0},L$t(t){const s=this.wKt.get(t);return s?s.ZT():0},O$t(t){const s=this.c$t(t);return s?s.vY():0},R$t(t){const s=this.wKt.get(t);return s?s.vY():0},k$t(t){const s=this.c$t(t);return s?tS.tn(s.LU()):0},j$t(t){const s=this.wKt.get(t);return s?tS.tn(s.LU()):0},P$t(){return this.Pc.mYt(),this.TKt},F$t(){return this.Pc.mYt(),this.vKt},z$t(){return this.Pc.mYt(),this.xKt},B$t(){return this.Pc.mYt(),this.IKt},U$t(){return this.Pc.yYt(),this._Kt},W$t(){return this.Pc.yYt(),this.EKt},Q$t(){return this.Pc.yYt(),this.DKt},J$t(){return this.Pc.yYt(),this.CKt},V$t(){return this.Pc.yYt(),this.GKt},Y$t(){return this.Pc.yYt(),this.NKt},H$t(){return this.AKt},q$t(){return this.LKt},Z$t(t){const s=this.wKt.get(t);return s?s.Yy():0},X$t(t){const s=this.wKt.get(t);return s?s.eg():0},K$t(t){const s=this.wKt.get(t);return s?s.$$t():0}}}{const sS=self.Cs;let iS=-1e3,eS=-1e3,rS=-1e4;sS.tz.Touch.YKt=class extends sS.Wr{constructor(){super(),this.t0t=0,this.XG=0,this.$Wt=0,this.QR=0,this.s0t=0,this.i0t=0,this.e0t=0,this._a=0,this.Ea=0,this.r0t=0,this.n0t=0,this._g=0,this.Eg=0,this.h0t=0,this.o0t=!1,this.a0t=!1}Vr(){}OLt(t,s,i,e,r){this.t0t=e,this.XG=r,this.QR=t,this.s0t=t,this.$Wt=t,this.i0t=s,this.e0t=i,this._a=s,this.Ea=i,this.r0t=s,this.n0t=i}N$(t,s,i,e,r,n){this.s0t=this.QR,this.QR=t,this.r0t=this._a,this.n0t=this.Ea,this._a=s,this.Ea=i,this._g=e,this.Eg=r,this.h0t=n,!this.a0t&&sS.rn(this.i0t,this.e0t,this._a,this.Ea)>=15&&(this.a0t=!0)}DH(){return this.t0t}XKt(){return this.XG}HO(){return this.QR}o$t(t){this.s0t=t}YT(){return this._a}ZT(){return this.Ea}vY(){const t=sS.rn(this._a,this.Ea,this.r0t,this.n0t),s=(this.QR-this.s0t)/1e3;return s>0?t/s:0}LU(){return sS.hn(this.r0t,this.n0t,this._a,this.Ea)}Yy(){return this._g}eg(){return this.Eg}$$t(){return this.h0t}a$t(t){return!this.o0t&&t-this.$Wt>=500&&!this.a0t&&sS.rn(this.i0t,this.e0t,this._a,this.Ea)<15&&(this.o0t=!0,!0)}t$t(t){return this.o0t?"":t-this.$Wt<=333&&!this.a0t&&sS.rn(this.i0t,this.e0t,this._a,this.Ea)<15?t-rS<=666&&sS.rn(iS,eS,this._a,this.Ea)<25?(iS=-1e3,eS=-1e3,rS=-1e4,"double-tap"):(iS=this._a,eS=this.Ea,rS=t,"single-tap"):""}v$t(t,s,i){if(void 0===s)return t.jF(0).q3(this._a,this.Ea)[i?0:1];{const e=t.RF(s);return e?e.iQ(this._a,this.Ea)[i?0:1]:0}}}}{const nS=self.Cs;nS.tz.Text=class extends nS.ZGt{constructor(t){super(t)}Vr(){super.Vr()}}}{const hS=self.Cs;hS.tz.Text.fAt=class extends hS.ONt{constructor(t){super(t)}Vr(){super.Vr()}wNt(){}m5(t){}S5(){}}}{const oS=self.Cs,aS=self.js,lS=[0,0,0],uS=0,cS=1,fS=2,dS=3,pS=4,mS=5,yS=6,gS=7,MS=8,wS=9,bS=10,SS=11,TS=12,vS=13,xS=15,IS=["left","center","right"],CS=["top","center","bottom"],GS=["ltr","rtl"],NS=["word","cjk","character"],_S=new oS.Rect,ES=new oS.Nl,DS=new oS.vo,AS=oS.Jr(oS.Na),LS=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]);oS.tz.Text.Instance=class extends oS.d_t{constructor(t,s){if(super(t),this.Fc="",this.l0t=!0,this.u0t="Arial",this.c0t=12,this.f0t=0,this.v_=!1,this.x_=!1,this.DT=oS.Jr(oS.vo),this.E_=0,this.D_=0,this.O_="word",this.R_=0,this.d0t="auto",this.p0t=1,this.m0t=null,this.y0t="",this.g0t=!1,this.M0t=!1,this.w0t=null,this.b0t=-1,this.S0t=-1,this.T0t=0,this.v0t=oS.Jr(oS.RM.VS,this.Pc.pT(),{timeout:5}),this.v0t.lE=()=>this.Pc.BF(),this.x0t=()=>this.I0t(),this.C0t=!1,s){this.Fc=s[uS],this.l0t=!!s[cS],this.u0t=s[fS],this.c0t=s[dS],this.f0t=s[pS],this.v_=!!s[mS],this.x_=!!s[yS],this.E_=s[MS],this.D_=s[wS],this.O_=NS[s[bS]],this.R_=s[SS],this.G0t(this.Pc.Kq(s[TS]));const t=s[gS];this.DT._o(t[0],t[1],t[2]),this.OF().gW(s[vS]),this.M0t=!!s[xS]}this.N0t(),this._0t()}Vr(){this.G0t(null),this.E0t(),this.w0t&&(this.w0t.Vr(),this.w0t=null),this.v0t.Vr(),this.v0t=null,super.Vr()}N0t(){const t=this.v0t;t.Uc(this.Fc),t.dE(this.l0t),this.v0t.y_()&&this.m0t?this.v0t.Jy(this.oz().FVt(this.m0t)):this.v0t.Jy(null),t.pE("nearest"!==this.Pc.Zj()),t.mE(this.u0t),t.wE(this.f0t),t.SE(this.v_),t.vE(this.x_),t.jT(this.DT),t.EE(IS[this.E_]),t.AE(CS[this.D_]),t.OE(this.O_),t.kE(GS[this.R_])}D0t(){const t=this.OF();this.v0t.yE(this.c0t),this.v0t.ME(t.fkt());const s=t.RF();let i;"auto"===this.d0t?i=s.V2(t.kJ()):"fixed"===this.d0t&&(i=this.p0t),t.JV()&&i!==this.v0t.zE()&&t.yjt(!0),this.v0t.FE(t.Yy(),t.eg(),i)}G0t(t){t&&(t.w1()||t.JB().constructor!==oS.tz.Pnt)||t!==this.m0t&&(this.m0t&&this.m0t.Mf().removeEventListener("animationframeimagechange",this.x0t),this.m0t=t,this.m0t&&this.m0t.Mf().addEventListener("animationframeimagechange",this.x0t),this.N0t(),this.g0t=!1,this.Pc.BF())}I0t(){this.Pc.zVt(this.m0t),this.Pc.BF(),this.C0t=!0}_0t(){if(this.M0t){let t=this.Fc;this.l0t&&(t=oS.dr.Fy(t)),this.w0t?this.w0t.Uc(t):this.w0t=oS.Jr(oS.jc,this.Pc,t)}else this.w0t&&(this.w0t.Vr(),this.w0t=null)}Qv(t){const s=this.OF();this.D0t(),this.C0t&&(this.C0t=!1,this.v0t.y_()&&this.m0t&&this.v0t.Jy(this.oz().FVt(this.m0t)));const i=this.v0t.vI();if(!i)return;const e=s.RF();if(0===s.LU()&&0===e.LU()&&0===s.kJ()&&!s.JV()&&e.o2()){const r=s.BJ(),[n,h]=e.aQ(r.Pn(),r.Fn()),[o,a]=e.aQ(r.Un(),r.Wn()),l=n-Math.round(n),u=h-Math.round(h);_S.set(n,h,o,a),_S.offset(-l,-u),ES.ql(_S);const[c,f]=t.zL(t.nO());t.zS()?this.Pc.IF().nX(t,c,f):(t.Jk(!0),ES.Mt(c,f)),t.vL(i),t.sS(ES,this.v0t.yD()),t.zS()?e.oX(t):t.Jk(!1)}else t.vL(i),s.JV()?this.A0t(s,t):this.L0t(s,t)}L0t(t,s){let i=t.BJ();this.Pc.Kj()&&(i=this.O0t(i)),s.sS(i,this.v0t.yD())}A0t(t,s){const i=t.mjt();if(t.gjt()){t.PJ(_S,ES,!1);let s=ES;this.Pc.Kj()&&(s=this.O0t(s)),i.Pv(t.VV(),s,this.v0t.yD()),t.yjt(!1)}i.Qv(s,t.kJ())}O0t(t){const s=t.Pn()-Math.round(t.Pn()),i=t.Fn()-Math.round(t.Fn());return 0===s&&0===i?t:(ES.m(t),ES.offset(-s,-i),ES)}T_t(){const t=this.v0t.vI();return t?[t.Yy(),t.eg()]:[100,100]}v_t(){return this.v0t.yD()}C_t(){return!1}ov(){const t={t:this.Fc,c:this.DT.toJSON(),fn:this.u0t,ps:this.c0t};return this.l0t&&(t.bbc=this.l0t),0!==this.E_&&(t.ha=this.E_),0!==this.D_&&(t.va=this.D_),"word"!==this.O_&&(t.wr=this.O_),0!==this.f0t&&(t.lho=this.f0t),this.v_&&(t.b=this.v_),this.x_&&(t.i=this.x_),-1!==this.S0t&&(t.tw={st:this.b0t,en:this.S0t,l:this.T0t}),this.m0t&&(t.ioc=this.m0t.G1()),"fixed"===this.d0t&&(t.fs=this.p0t),t}av(t){if(this.E0t(),this.Fc=t.t,this.DT.Ma(t.c),this.u0t=t.fn,this.c0t=t.ps,this.l0t=!!t.hasOwnProperty("bbc")&&t.bbc,this.E_=t.hasOwnProperty("ha")?t.ha:0,this.D_=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const s=t.wr;this.O_="boolean"==typeof s?s?"word":"character":s}else this.O_="word";if(this.f0t=t.hasOwnProperty("lho")?t.lho:0,this.v_=!!t.hasOwnProperty("b")&&t.b,this.x_=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const s=t.tw;this.b0t=s.st,this.S0t=s.en,this.T0t=s.l}if(t.hasOwnProperty("ioc")){const s=this.oz().Kq(t.ioc);s&&this.G0t(s)}else this.G0t(null);t.hasOwnProperty("fs")?(this.d0t="fixed",this.p0t=t.fs):this.d0t="auto",this.N0t(),this._0t(),this.g0t=!1,-1!==this.S0t&&this.r_t()}tot(t){switch(t){case uS:return this.PE();case cS:return this.l0t;case fS:return this.R0t();case dS:return this.k0t();case pS:return this.j0t();case mS:return this.P0t();case yS:return this.F0t();case gS:return lS[0]=this.DT.jo(),lS[1]=this.DT.Po(),lS[2]=this.DT.Fo(),lS;case MS:return this.z0t();case wS:return this.B0t();case bS:return this.U0t();case xS:return this.W0t()}}hot(t,s){switch(t){case uS:this.Q0t(s);break;case cS:if(this.l0t===!!s)return;this.l0t=!!s,this.N0t();break;case fS:this.J0t(s);break;case dS:this.V0t(s);break;case pS:this.Y0t(s);break;case mS:this.H0t(s);break;case yS:this.q0t(s);break;case gS:const t=this.DT,i=s;if(t.jo()===i[0]&&t.Po()===i[1]&&t.Fo()===i[2])return;this.DT._o(i[0],i[1],i[2]),this.N0t();break;case MS:this.Z0t(s);break;case wS:this.X0t(s);break;case bS:this.K0t(s)}}l_t(t,s,i,e){0===s&&0===i&&0===e||t!==gS||(this.DT.Eo(s,i,e),this.N0t())}Q0t(t){this.Fc!==t&&(this.Fc=t,this.v0t.Uc(t),this._0t(),this.g0t=!1,this.Pc.BF())}PE(){return this.Fc}$0t(t,s){this.D0t(),this.Q0t(t),this.b0t=this.Pc.PP(),this.S0t=this.b0t+s/this.GH().EQ(),this.T0t=this.v0t.QE(),this.v0t.IE(0),this.r_t()}E0t(){this.b0t=-1,this.S0t=-1,this.T0t=0,this.v0t.IE(-1),this.UNt()}t1t(){-1!==this.S0t&&(this.E0t(),this.HQ(oS.tz.Text.KF.s1t),this.Pc.BF())}J0t(t){this.u0t!==t&&(this.u0t=t,this.v0t.mE(t),this.Pc.BF())}R0t(){return this.u0t}H0t(t){t=!!t,this.v_!==t&&(this.v_=t,this.v0t.SE(t),this.Pc.BF())}P0t(){return this.v_}q0t(t){t=!!t,this.x_!==t&&(this.x_=t,this.v0t.vE(t),this.Pc.BF())}F0t(){return this.x_}V0t(t){this.c0t!==t&&(this.c0t=t,this.Pc.BF())}k0t(){return this.c0t}i1t(t){this.DT.Jo(t)||(this.DT.ko(t),this.v0t.jT(this.DT),this.Pc.BF())}e1t(){return this.DT}Y0t(t){this.f0t!==t&&(this.f0t=t,this.N0t(),this.Pc.BF())}j0t(){return this.f0t}Z0t(t){this.E_!==t&&(this.E_=t,this.N0t(),this.Pc.BF())}z0t(){return this.E_}X0t(t){this.D_!==t&&(this.D_=t,this.N0t(),this.Pc.BF())}B0t(){return this.D_}r1t(t){this.K0t(NS[t])}K0t(t){this.O_!==t&&(this.O_=t,this.N0t(),this.Pc.BF())}U0t(){return this.O_}n1t(t){this.R_!==t&&(this.R_=t,this.N0t(),this.Pc.BF())}h1t(){return this.R_}o1t(t){this.M0t=!!t,this._0t()}W0t(){return this.M0t}a1t(t){this.d0t!==t&&(this.d0t=t,this.Pc.BF())}l1t(){return this.d0t}u1t(t){this.p0t!==t&&(this.p0t=t,"fixed"===this.d0t&&this.Pc.BF())}c1t(){return this.p0t}f1t(){return this.D0t(),this.v0t.BE()}d1t(){return this.D0t(),this.v0t.WE()}p1t(t,s){this.D0t();const i=this.OF();AS.set(t-i.YT(),s-i.ZT()),AS.rotate(-i.LU()),AS.offset(i.Yy()*i.NJ(),i.eg()*i.DJ()),AS.Mt(i.Yy(),i.eg()),AS.scale(this.v0t.Yy(),this.v0t.eg());const e=this.v0t.VE(AS.La(),AS.Ra());if(e){const t=e.Qg("tag");if(t)return t.Ly}return""}m1t(t,s,i){const e=this.p1t(s,i);return e&&oS.Xe(t,e)}y1t(t,s){this.D0t(),s=Math.floor(s);const i=this.v0t.HE(t,s);if(!i)return null;const e=this.OF(),r=this.v0t.NE(),n=i.Fg(),h=i.Bg()-(i.eg()-i.ng())*r,o=i.Yy()*r/this.v0t.Yy()*e.Yy(),a=i.eg()*r/this.v0t.eg()*e.eg();return AS.set(n,h),AS.Mt(this.v0t.Yy(),this.v0t.eg()),AS.scale(e.Yy(),e.eg()),AS.offset(-e.Yy()*e.NJ(),-e.eg()*e.DJ()),AS.rotate(e.LU()),AS.offset(e.YT(),e.ZT()),{x:AS.La(),y:AS.Ra(),width:o,height:a}}g1t(t){return this.D0t(),this.v0t.qE(t)}M1t(t){let s=LS.get(t);return null===s?"":(s||(s="span"),`</${s||"span"}>`)}w1t(t,s){let i=LS.get(t);if(null===i)return"";switch(i||(i="span"),t){case"color":return`<${i} style="color: ${s}">`;case"font":return`<${i} style="font-family: '${s}'">`;case"opacity":return`<${i} style="opacity: ${s}%">`;case"size":return`<${i} style="font-size: ${s}pt">`;case"background":return`<${i} style="background-color: ${s}">`;case"hide":return`<${i} style="visibility: hidden">`;case"class":return`<${i} class="${s}">`;case"tag":return`<${i} data-tag="${s}">`;default:return`<${i}>`}}async b1t(){if(this.g0t)return this.y0t;const t=new oS.dr(this.Fc,{My:!0}).Dy(),s=new Map;let i='<span class="c3-text"';const e=[];e.push(`font-family: '${this.R0t()}';`),this.P0t()&&e.push("font-weight: bold;"),this.F0t()&&e.push("font-style: italic;"),"character"===this.U0t()&&e.push("word-break: break-all;"),i+=` style="${e.join(" ")}">`;const r=this.m0t?this.oz().FVt(this.m0t):null;if(this.m0t){const i=oS.Jr(oS.Qd),e=[],n=new Map;for(const s of t)if(s.sg()){const t=s.Zg(r);if(t){const s=t.DM().zY().qEt();if(n.has(s))continue;n.set(s,null),e.push(i.Fu(async()=>{const t=await s.a$();n.set(s,t)}))}}await Promise.all(e);const h=[];for(const e of t)if(e.sg()){const t=e.Zg(r);if(t){const e=t.DM(),r=e.zY().qEt();h.push(i.Fu(async()=>{const i=await e.zY().XEt(n.get(r));s.set(t,i)}))}}await Promise.all(h);for(const t of n.values())t instanceof ImageBitmap&&t.close&&t.close()}const n=new Map;for(const e of t){const t=e.Vg();let h=[...n.keys()];h.reverse();for(const s of h)t.has(s)&&t.get(s)===n.get(s)||(n.delete(s),i+=this.M1t(s));for(const[s,e]of t)n.has(s)||(n.set(s,e),i+=this.w1t(s,e));if(e.$y()&&(i+=oS._m(oS.Gm(e.gg().join("")),"\n","<br>")),e.sg()&&r){const n=e.Zg(r);if(n){const r=s.get(n);if(r){const s=[];let h="0.2em";const o=t.get("iconoffsety");if(o){let t=o.trim();h=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}s.push(`top: ${h}`),"nearest"===this.Pc.Zj()&&s.push("image-rendering: pixelated"),i+=`<img class="c3-text-icon" data-icon="${e.qg()}" width="${n.Yy()}" height="${n.eg()}" style="${s.join(";")}" src="${r}">`}}}}const h=[...n.keys()];h.reverse();for(const t of h)i+=this.M1t(t);return i+="</span>",this.y0t=i,this.g0t=!0,this.y0t}u7(){const t=this.Pc.PP();if(t>=this.S0t)this.E0t(),this.HQ(oS.tz.Text.KF.s1t),this.Pc.BF();else{let s=oS.yn(this.b0t,this.S0t,t,0,this.T0t);s=Math.floor(s),s!==this.v0t.CE()&&(this.v0t.IE(s),this.Pc.BF())}}a_t(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.PE(),S1t:t=>this.Q0t(t)},{name:t+".properties.font.name",value:this.R0t(),S1t:t=>this.J0t(t)},{name:t+".properties.size.name",value:this.k0t(),S1t:t=>this.V0t(t)},{name:t+".properties.line-height.name",value:this.j0t(),S1t:t=>this.Y0t(t)},{name:t+".properties.bold.name",value:this.P0t(),S1t:t=>this.H0t(t)},{name:t+".properties.italic.name",value:this.F0t(),S1t:t=>this.q0t(t)},{name:t+".debugger.text-width",value:this.f1t()},{name:t+".debugger.text-height",value:this.d1t()}]}]}bNt(){return self.T1t}};const OS=new WeakMap,RS=new Map([["left",0],["center",1],["right",2]]),kS=new Map([["top",0],["center",1],["bottom",2]]),jS=["ltr","rtl"];self.T1t=class extends self.ZV{constructor(){super(),OS.set(this,self.cQ.mQ().sY())}get text(){return OS.get(this).PE()}set text(t){aS.le(t);const s=OS.get(this);s.E0t(),s.Q0t(t)}v1t(t,s){aS.le(t),aS.ne(s);const i=OS.get(this);i.E0t(),i.$0t(t,s)}x1t(){OS.get(this).t1t()}set lX(t){aS.le(t),OS.get(this).J0t(t)}get lX(){return OS.get(this).R0t()}set cX(t){OS.get(this).H0t(t)}get cX(){return OS.get(this).P0t()}set fX(t){OS.get(this).q0t(t)}get fX(){return OS.get(this).F0t()}set uX(t){aS.ne(t),OS.get(this).V0t(t)}get uX(){return OS.get(this).k0t()}set I1t(t){if(aS.xe(t),t.length<3)throw new Error("expected 3 elements");DS._o(t[0],t[1],t[2]),OS.get(this).i1t(DS)}get I1t(){const t=OS.get(this).e1t();return[t.jo(),t.Po(),t.Fo()]}set lineHeight(t){aS.ne(t),OS.get(this).Y0t(t)}get lineHeight(){return OS.get(this).j0t()}set mX(t){aS.le(t);const s=RS.get(t);if(void 0===s)throw new Error("invalid mode");OS.get(this).Z0t(s)}get mX(){return IS[OS.get(this).z0t()]}set verticalAlign(t){aS.le(t);const s=kS.get(t);if(void 0===s)throw new Error("invalid mode");OS.get(this).X0t(s)}get verticalAlign(){return CS[OS.get(this).B0t()]}set yX(t){if(!NS.includes(t))throw new Error("invalid mode");OS.get(this).K0t(t)}get yX(){return OS.get(this).U0t()}set gX(t){aS.le(t);const s=jS.indexOf(t);if(-1===s)throw new Error("invalid text direction");OS.get(this).n1t(s)}get gX(){return jS[OS.get(this).h1t()]}set C1t(t){OS.get(this).o1t(!!t)}get C1t(){return OS.get(this).W0t()}G1t(t){aS.ne(t);const s=OS.get(this);s.a1t("fixed"),s.u1t(t)}N1t(){OS.get(this).a1t("auto")}get bX(){return OS.get(this).f1t()}get SX(){return OS.get(this).d1t()}_1t(){const t=OS.get(this);return[t.f1t(),t.d1t()]}E1t(t,s,i){return aS.le(t),aS.ne(s),aS.ne(i),OS.get(this).m1t(t,s,i)}D1t(t,s){return aS.ne(t),aS.ne(s),OS.get(this).p1t(t,s)}A1t(t,s=0){return aS.le(t),aS.ne(s),OS.get(this).y1t(t,s)}L1t(t){return aS.le(t),OS.get(this).g1t(t)}O1t(t){const s=OS.get(this),i=s.oz().jz(t);s.G0t(i)}R1t(){return OS.get(this).b1t()}}}{const PS=self.Cs;PS.tz.Text.KF={k1t(t,s){return s?this.Fc===t:PS.Xe(this.Fc,t)},j1t(){return-1!==this.S0t},s1t:()=>!0,P1t(t,s,i){return this.m1t(t,s,i)}}}{const FS=self.Cs,zS=FS.Jr(FS.vo);FS.tz.Text.ght={Uc(t){this.E0t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.Q0t(t.toString())},F1t(t){this.E0t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),(t=t.toString())&&this.Q0t(this.Fc+t)},z1t(t,s){this.E0t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.$0t(t.toString(),s)},B1t(t,s){let i=!1,e=!1;switch(s){case 1:i=!0;break;case 2:e=!0;break;case 3:i=!0,e=!0}t===this.u0t&&i===this.v_&&e===this.x_||(this.J0t(t),this.H0t(i),this.q0t(e))},yE(t){this.V0t(t)},U1t(t){zS.$o(t),zS.Xr(),this.i1t(zS)},W1t(t,s){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},Q1t(t){this.OF().kT(t),this.Pc.BF()},J1t(){this.t1t()},wE(t){this.Y0t(t)},V1t(t){this.Z0t(t)},Y1t(t){this.X0t(t)},H1t(t){this.r1t(t)},kE(t){this.n1t(t)},q1t(t){this.G0t(t)},Z1t(){return this.b1t()},X1t(t){this.o1t(t)},K1t(t,s){this.a1t(["auto","fixed"][t]),this.u1t(s)}}}{const BS=self.Cs;BS.tz.Text.Mht={Text(){return this.Fc},$1t(){return this.l0t?BS.dr.Fy(this.Fc):this.Fc},t2t(){return this.u0t},s2t(){return this.c0t},i2t(){return this.f1t()},e2t(){return this.d1t()},r2t(){return this.f0t},n2t(t,s){return this.p1t(t,s)},h2t(t){return this.g1t(t)},o2t(t,s){const i=this.y1t(t,s);return i?i.x:0},a2t(t,s){const i=this.y1t(t,s);return i?i.y:0},l2t(t,s){const i=this.y1t(t,s);return i?i.width:0},u2t(t,s){const i=this.y1t(t,s);return i?i.height:0},c2t(){return this.y0t}}}{let US=function(t,s){return"number"==typeof t&&"number"==typeof s},WS=function(t,s){return US(t,s)?t+s:t},QS=function(t,s){return US(t,s)?t-s:t},JS=function(t,s){return US(t,s)?t*s:t},VS=function(t,s){return US(t,s)?t/s:t},YS=function(t,s){return US(t,s)?t%s:t},HS=function(t,s){return US(t,s)?Math.pow(t,s):t},qS=function(t,s){if("string"==typeof t||"string"==typeof s){let i,e;return i="number"==typeof t?(Math.round(1e10*t)/1e10).toString():t,e="number"==typeof s?(Math.round(1e10*s)/1e10).toString():s,i+e}return t&&s?1:0},ZS=function(t,s){return US(t,s)?t||s?1:0:t};0;self.Cs;self.VTt=[()=>0,()=>"lady",t=>{const s=t.ivt(0).TTt();return()=>s(0,0,0)},()=>1,()=>.1,()=>.5,t=>{const s=t.ivt(0).TTt();return()=>qS(Math.round(1/s())," FPS")}]}globalThis.Cs.tz.f2t=class extends globalThis.OH{constructor(){super()}},globalThis.Cs.tz.f2t.fAt=class extends globalThis.UH{constructor(){super()}WH(){}};var Ct=globalThis.Cs;Ct.tz.f2t.Instance=class extends globalThis.zQ{constructor(){super({BQ:"Jammanna_MakeIt3D"}),this.d2t="",this.p2t="Hello",this.m2t=!1,this.y2t="",this.g2t={M2t:"",name:"",index:-1},this.w2t={x:0,y:0,y:0},this.b2t={x:0,y:0},this.Touch={x:0,y:0},this.S2t=[],this.T2t={M2t:"objectId",v2t:null,bt:0,x2t:null,I2t:0,updated:!1,PWt:null},this._a=0,this.C2t={},this.G2t=0,this.N2t={position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},color:65280,visible:!0,type:"",tag:"",_2t:[]},this.E2t=0,this.D2t=!0,this.A2t="";const t=this.JQ();t&&(this.D2t=void 0!==t[0]&&t[0]),this.L2t=new Gt(this.D2t,"MakeIt3D"),this.runtime.addEventListener("beforeanylayoutstart",t=>{}),this.runtime.addEventListener("afteranylayoutstart",t=>{}),this.runtime.addEventListener("beforeanylayoutend",s=>{0==t[1]&&this.tJ("on-layout-end",{}).then(t=>{})}),this.runtime.addEventListener("afteranylayoutend",t=>{}),this.runtime.sP.VF(this.tJ("set-initial-state",{logsEnabled:this.D2t}).then(t=>{})),this.ZQ("on-scene-create-status",async t=>{this.O2t(t)}),this.ZQ("on-object-added",async t=>{this.R2t(t)}),this.ZQ("property-result",async t=>{this.k2t(t)}),this.ZQ("on-animation-finished",async t=>{this.j2t(t)}),this.ZQ("on-animation-loop-finished",async t=>{this.P2t(t)}),this.ZQ("set-object-material",async t=>{this.F2t(t)})}z2t(){console.log("Layout changed to:",this.runtime.layout.name)}B2t(){this.U2t=setInterval(async()=>{Object.keys(this.C2t).length>0&&await this.W2t()},1)}async W2t(){try{const t=Object.keys(this.C2t);for(const s of t)if(this.C2t[s].visible){const t=await this.tJ("get-object-properties",{M2t:s,properties:["position","rotation","scale","color","visible","type","tag"]});if(t){const i=this.C2t[s],e={position:t.position||i.position,rotation:t.rotation||i.rotation,scale:t.scale||i.scale,color:t.color||i.color,visible:void 0!==t.visible?t.visible:i.visible,type:t.type||i.type,tag:t.tag||i.tag};JSON.stringify(i)!==JSON.stringify(e)&&(this.C2t[s]=e)}}}catch(t){this.L2t.error("Error updating property cache:",t)}}gQ(){super.gQ(),this.U2t&&clearInterval(this.U2t)}Q2t(t){t.J2t?(this.m2t=!0,this.YQ(Ct.tz.f2t.KF.V2t)):(this.m2t=!1,this.YQ(Ct.tz.f2t.KF.Y2t))}async H2t(){this.tJ("load-threejs-libraries").then(t=>(this.Q2t(t),!0)).catch(t=>(this.L2t.error("Error checking Three.js loading status:",t),this.m2t=!1,this.YQ(Ct.tz.f2t.KF.Y2t),!1))}O2t(t){t?this.YQ(Ct.tz.f2t.KF.q2t):this.YQ(Ct.tz.f2t.KF.Z2t)}X2t(t){this.tJ("set-camera-position",{x:t.x,y:t.y,z:t.z}).then(t=>{t&&t.J2t||this.L2t.error("Failed to set camera position:",t?.error)}).catch(t=>{this.L2t.error("Error setting camera position:",t)})}K2t(t){this.tJ("set-camera-type",{type:t.type}).then(s=>{s&&s.J2t?this.L2t.info("Camera type set to:",t.type):this.L2t.error("Failed to set camera type:",s?.error)}).catch(t=>{this.L2t.error("Error setting camera type:",t)})}$2t(t){this.tJ("set-camera-angle",{x:t.x,y:t.y,z:t.z}).then(t=>{t&&t.J2t||this.L2t.error("Failed to set camera position:",t?.error)}).catch(t=>{this.L2t.error("Error setting camera position:",t)})}t3t(t){this.$Q("set-camera-lookat",{x:t.x,y:t.y,z:t.z})}s3t(t){this.$Q("set-camera-lookat-object",t)}i3t(t){this.$Q("set-camera-follow-object",t)}e3t(t){this.$Q("set-camera-translation",t)}r3t(t){this.$Q("update-render-loop",{n3t:t._P})}h3t(t){this.tJ("add-primitive-at-position",t).then(t=>(this.R2t(t),!0)).catch(t=>{this.L2t.error("Error checking Three.js loading status:",t)})}o3t(t){this.tJ("add-light-at-position",{e:t}).then(t=>(this.R2t(t),!0)).catch(t=>{this.L2t.error("Error checking Three.js loading status:",t)})}R2t(t){if(!t.J2t)return this.A2t=t.error,void this.YQ(Ct.tz.f2t.KF.a3t);this.y2t=t.M2t,this.C2t[t.M2t]={position:t.position||{x:0,y:0,z:0},rotation:t.rotation||{x:0,y:0,z:0},scale:t.scale||{x:1,y:1,z:1},color:65280,visible:void 0===t.visible||t.visible,type:"",tag:t.tag||"",_2t:t._2t||[]},this.YQ(Ct.tz.f2t.KF.l3t,t.M2t)}async u3t(t,s,i,e,r,n){await this.tJ("load-model-from-path",{M2t:t,path:s,position:i||{x:0,y:0,z:0},rotation:e||{x:0,y:0,z:0},scale:r||{x:.5,y:.5,z:.5},visible:n}).then(t=>{this.L2t.info("Model loaded successfully:",t),this.R2t(t)}).catch(t=>{})}k2t(t){this.w2t.x=t.value.x,this.w2t.y=t.value.y,this.w2t.z=t.value.z,this._a=this.w2t.x}c3t(){this.$Q("load-threejs-libraries")}async f3t(t){var s=this.runtime.Qj;const i=this.runtime.layout.WU();if(t.d3t<0||t.d3t>=i)this.L2t.error(`Invalid layer index: ${t.d3t}. Available layers: 0-${i-1}`);else{for(let t=0;t<this.runtime.layout.WU().length;t++)this.runtime.layout.BU(t).vW=!1;this.runtime.layout.BU(t.d3t).vW=!0;var e="";if(!s)try{e=this.runtime.QF(0).className}catch(t){return this.L2t.error("Error getting HTML layer:",t),void this.p3t(t)}await this.tJ("create-threejs-scene",{d3t:t.d3t,m3t:s,containerId:e,y3t:this.runtime.$j.sB,g3t:this.runtime.$j.eB,devicePixelRatio:this.runtime.$j.devicePixelRatio,M3t:t.M3t,w3t:t.w3t,b3t:t.b3t,S3t:t.S3t,T3t:t.T3t,v3t:t.v3t,x3t:t.x3t,Vj:this.runtime.Vj,Hj:this.runtime.Hj,path:t.path}).then(()=>{this.L2t.info("Three.js scene created successfully")}).catch(t=>{this.L2t.error("Error sending Three.js initialization message:",t),this.p3t(t)})}}I3t(){this.tJ("launch-scene-editor").then(t=>{this.L2t.info("scene editor launched",t)}).catch(t=>{this.L2t.error("Error launching scene editor:",t)})}C3t(t){const s=this.C2t[t]?._2t;return s&&0!==s.length?s.map((t,s)=>`${s}: ${t.name}`):[]}G3t(t){const s=this.C2t[t]?._2t;return s?s.length:0}N3t(t,s){const i=this.C2t[t]?._2t;if(!i||0===i.length)return this.L2t.warn(`No animations found for object: ${t}`),null;let e=null;return"string"==typeof s?e=i.find(t=>t.name===s):"number"!=typeof s||isNaN(s)?this.L2t.warn("Invalid input for index_or_name:",s):s>=0&&s<i.length?e=i[s]:this.L2t.warn(`Animation index out of range: ${s}`),e?e.duration:(this.L2t.warn(`Animation not found for object: ${t}, input: ${s}`),null)}_3t(t,s,i,e,r=1,n){if(!t)return void this.L2t.error("PlayAnimation: objectId is required");const h={M2t:t,loop:e,FP:"number"==typeof r?r:1,E3t:n,D3t:i};!isNaN(Number(s))?h.A3t=parseInt(s):"string"==typeof s&&s.length>0?h.A3t=s:(this.L2t.warn("PlayAnimation: no valid animationIndex or animationName provided – using default (index 0)"),h.L3t=0),this.tJ("play-animation",h).then(t=>{}).catch(t=>{this.L2t.error("Error sending animation play message:",t)})}O3t(t){this.$Q("blend-animations",t)}R3t(t){this.$Q("transition-animations",t)}k3t(t){this.$Q("set-object-look-at",t)}j3t(t){this.tJ("pause-animation",{M2t:t}).then(()=>{this.L2t.info("Animation paused successfully for object:",t)}).catch(t=>{this.L2t.error("Error sending animation pause message:",t)})}P3t(t){this.tJ("resume-animation",{M2t:t}).then(()=>{this.L2t.info("Animation resumed for object:",t)}).catch(t=>{this.L2t.error("Error sending animation resume message:",t)})}F3t(t){this.tJ("stop-animation",{M2t:t}).then(()=>{this.L2t.info("Animation stoped for object:",t)}).catch(t=>{this.L2t.error("Error sending animation stop message:",t)})}j2t(t){this.L2t.info("Animation finished for object:",t.M2t,"animation:",t.animationName),this.g2t.M2t=t.M2t,this.g2t.name=t.animationName,this.g2t.index=t.L3t,this.YQ(Ct.tz.f2t.KF.z3t,t.M2t,"string"==typeof t.animationName?t.animationName:t.L3t)}P2t(t){this.L2t.info("Animation Loop finished for object:",t),this.g2t.M2t=t.M2t,this.g2t.name=t.animationName,this.g2t.index=t.L3t,this.YQ(Ct.tz.f2t.KF.B3t,t.M2t,"string"==typeof t.animationName?t.animationName:t.L3t)}U3t(){this.tJ("add-test-cube")}W3t(t){this.E2t=t}Q3t(){return this.E2t}J3t(){return this.m2t}uJ(){return{V3t:this.E2t,J3t:this.m2t,Y3t:this.C2t,H3t:this.q3t}}cJ(t){void 0!==t.V3t&&(this.E2t=t.V3t),void 0!==t.J3t&&(this.m2t=t.J3t),void 0!==t.Y3t&&(this.C2t=t.Y3t),void 0!==t.H3t&&(this.q3t=t.H3t)}Z3t(){return this.q3t}X3t(t){this.q3t=t}K3t(t){t.M2t?t.net?void 0!==t.value&&null!==t.value?(this.$Q("set-object-property",{M2t:t.M2t,net:t.net,value:t.value,$3t:t.Ct}),this.t4t(t.M2t,t.net,t.value)):this.L2t.error("SetObjectProperty: value is required and cannot be null or undefined"):this.L2t.error("SetObjectProperty: propertyName is required"):this.L2t.error("SetObjectProperty: objectId is required")}t4t(t,s,i){const e=this.C2t[t];if(e)switch(s.toLowerCase()){case"position":e.position={x:void 0!==i.x?i.x:this.C2t[t].position.x,y:void 0!==i.y?i.y:this.C2t[t].position.y,z:void 0!==i.z?i.z:this.C2t[t].position.z};break;case"translation":if("object"==typeof i&&null!==i){const t=e.position;t.x+=i.x||0,t.y+=i.y||0,t.z+=i.z||0}break;case"positionx":case"position_x":"number"==typeof i&&(e.position.x=i);break;case"positiony":case"position_y":"number"==typeof i&&(e.position.y=i);break;case"positionz":case"position_z":"number"==typeof i&&(e.position.z=i);break;case"rotation":"object"==typeof i&&null!==i&&(e.rotation={x:void 0!==i.x?i.x:this.C2t[t].rotation.x,y:void 0!==i.y?i.y:this.C2t[t].rotation.y,z:void 0!==i.z?i.z:this.C2t[t].rotation.z});break;case"rotationx":case"rotation_x":"number"==typeof i&&(e.rotation.x=i||this.C2t[t].rotation.x);break;case"rotationy":case"rotation_y":"number"==typeof i&&(e.rotation.y=i||this.C2t[t].rotation.y);break;case"rotationz":case"rotation_z":"number"==typeof i&&(e.rotation.z=i||this.C2t[t].rotation.z);break;case"scale":"object"==typeof i&&null!==i&&(e.scale={x:Math.max(.001,void 0!==i.x?i.x:this.C2t[t].scale.x),y:Math.max(.001,void 0!==i.y?i.y:this.C2t[t].scale.y),z:Math.max(.001,void 0!==i.z?i.z:this.C2t[t].scale.z)});break;case"scalex":case"scale_x":"number"==typeof i&&(e.scale.x=Math.max(.001,i));break;case"scaley":case"scale_y":"number"==typeof i&&(e.scale.y=Math.max(.001,i));break;case"scalez":case"scale_z":"number"==typeof i&&(e.scale.z=Math.max(.001,i));break;case"color":e.color=i;break;case"visible":e.visible=Boolean(i);break;case"tag":e.tag=i}}F2t(t){t.J2t?this.L2t.info("Material applied successfully to object:",t.M2t):this.L2t.error("Failed to apply material:",t.error)}s4t(t,s){this.tJ("set-object-material",{M2t:t,...s}).then(t=>{this.L2t.info("SetObjectMaterial - ",t)}).catch(t=>{this.L2t.error("Error setting object material:",t)})}i4t(t,s){this.C2t[t]&&(this.C2t[t].visible=s),this.tJ("set-object-visible",{M2t:t,visible:s}).then(t=>{this.L2t.info("SetObjectVisible response -",t)}).catch(t=>{this.L2t.error("Error setting object visibility:",t)})}e4t(t){const s=t.toString(),i=this.C2t[s];return!!i&&i.visible}r4t(t,s){this.tJ("set-custom-shader-material",{M2t:t,...s}).then(t=>{this.L2t.info("SetCustomShaderMaterial - ",t)}).catch(t=>{this.L2t.error("Error setting custom shader material:",t)})}n4t(t,s,i){this.tJ("set-shader-uniform",{M2t:t,name:s,value:i}).then(t=>{this.L2t.info("SetShaderUniform - ",t)}).catch(t=>{this.L2t.error("Error setting shader uniform:",t)})}async h4t(t){try{const s=await this.tJ("set-texture",{M2t:t.M2t,path:t.path});this.L2t.info("SetTexture - ",s)}catch(t){this.L2t.error("Error setting texture:",t)}}o4t(t,s="repeat",i="repeat"){this.tJ("set-texture-wrap",{M2t:t,a4t:s,l4t:i}).then(t=>{this.L2t.info("SetTextureWrap - ",t)}).catch(t=>{this.L2t.error("Error setting texture wrap:",t)})}u4t(t,s=1,i=1){this.tJ("set-texture-repeat",{M2t:t,x:s,y:i}).then(t=>{this.L2t.info("SetTextureRepeat - ",t)}).catch(t=>{this.L2t.error("Error setting texture repeat:",t)})}c4t(t,s=1){this.tJ("set-texture-opacity",{M2t:t,value:s}).then(t=>{this.L2t.info("SetTextureOpacity - ",t)}).catch(t=>{this.L2t.error("Error setting texture opacity:",t)})}f4t(t,s,i){this.tJ("set-emissive-map",{M2t:t,path:s,d4t:i}).then(t=>{this.L2t.info("SetEmissiveMap - ",t)}).catch(t=>{this.L2t.error("Error setting emissive map:",t)})}p4t(t,s,i){this.tJ("set-normal-map",{M2t:t,path:s,m4t:i}).then(t=>{this.L2t.info("SetNormalMap - ",t)}).catch(t=>{this.L2t.error("Error setting normal map:",t)})}y4t(t,s){this.tJ("set-roughness-map",{M2t:t,path:s}).then(t=>{this.L2t.info("SetRoughnessMap - ",t)}).catch(t=>{this.L2t.error("Error setting roughness map:",t)})}g4t(t,s){this.tJ("set-metalness-map",{M2t:t,url:s}).then(t=>{this.L2t.info("SetMetalnessMap - ",t)}).catch(t=>{this.L2t.error("Error setting metalness map:",t)})}M4t(t,s){this.tJ("set-color",{M2t:t,color:s}).then(t=>{this.L2t.info("Set color - ",t)}).catch(t=>{this.L2t.error("Error setting color:",t)})}w4t(t){this.tJ("texture-unload",{M2t:t}).then(t=>{this.L2t.info("Texture unload - ",t)}).catch(t=>{this.L2t.error("Error unloading texture:",t)})}b4t(t,s,i=!1,e=!0,r=!0){this.tJ("set-video-texture",{M2t:t,path:s,loop:i,autoplay:e,muted:r}).then(t=>{this.L2t.info("Texture unload - ",t)}).catch(t=>{this.L2t.error("Error unloading texture:",t)})}S4t(t,s,i,e){this.tJ("enable-pixelated-edge-pass",{T4t:t,v4t:s,x4t:i,controls:e}).then(t=>{this.L2t.info("Pixel post process enabled:",t)}).catch(t=>{this.L2t.error("Error on enable pixel postprocess:",t)})}I4t(){this.tJ("desable-pixelated-edge-pass",{}).then(t=>{}).catch(t=>{})}C4t(t,s,i,e){this.tJ("enable-bloom-pass",{m4t:t,radius:s,threshold:i,controls:e}).then(t=>{this.L2t.info("bloom post process enabled:",t)}).catch(t=>{this.L2t.error("Error on enable bloom postprocess:",t)})}G4t(){this.tJ("disable-bloom-pass",{}).then(t=>{}).catch(t=>{})}N4t(){this.tJ("enable-fxaa-pass",{}).then(t=>{this.L2t.info("fxaa post process enabled:",t)}).catch(t=>{this.L2t.error(" error on fxaa post process:",t)})}_4t(){this.tJ("disable-fxaa-pass",{}).then(t=>{}).catch(t=>{})}E4t(t,s,i,e,r){this.tJ("enable-outline-pass",{D4t:t,A4t:s,color:i,texture:e,controls:r}).then(t=>{this.L2t.info("outline post process enabled:",t)}).catch(t=>{this.L2t.error(" error on outline post process:",t)})}L4t(){this.tJ("disable-outline-pass",{}).then(t=>{}).catch(t=>{})}O4t(t,s,i){this.tJ("enable-rgbshift-pass",{angle:t,amount:s,controls:i}).then(t=>{this.L2t.info("RGBShift post process enabled:",t)}).catch(t=>{this.L2t.error("Error on enable RGBShift postprocess:",t)})}R4t(){this.tJ("disable-rgbshift-pass",{}).then(t=>{}).catch(t=>{})}k4t(t,s,i,e){this.tJ("enable-ssao-pass",{j4t:t,P4t:s,maxDistance:i,controls:e}).then(t=>{this.L2t.info("SSAO post process enabled:",t)}).catch(t=>{this.L2t.error("Error on enable SSAO postprocess:",t)})}F4t(){this.tJ("disable-ssao-pass",{}).then(t=>{}).catch(t=>{})}z4t(t,s,i,e,r){this.tJ("enable-film-pass",{B4t:t,U4t:s,count:i,W4t:e,controls:r}).then(t=>{this.L2t.info("Film post process enabled:",t)}).catch(t=>{this.L2t.error("Error on enable film postprocess:",t)})}Q4t(){this.tJ("disable-film-pass",{}).then(t=>{}).catch(t=>{})}J4t(t,s){this.tJ("enable-after-image-pass",{V4t:t,controls:s}).then(t=>{this.L2t.info("AfterImage post process enabled:",t)}).catch(t=>{this.L2t.error("Error on enable AfterImage postprocess:",t)})}Y4t(){this.tJ("disable-afterimage-pass",{}).then(t=>{}).catch(t=>{})}H4t(t,s){this.tJ("enable-glitch-pass",{q4t:t,controls:s}).then(t=>{this.L2t.info("Glitch post process enabled:",t)}).catch(t=>{this.L2t.error("Error on enable glitch postprocess:",t)})}Z4t(){this.tJ("disable-glitch-pass",{}).then(t=>{}).catch(t=>{})}X4t(t,s,i,e){this.tJ("enable-bokeh-pass",{focus:t,K4t:s,$4t:i,controls:e}).then(t=>{this.L2t.info("Bokeh post process enabled:",t)}).catch(t=>{this.L2t.error("Error on enable bokeh postprocess:",t)})}t5t(){this.tJ("disable-bokeh-pass",{}).then(t=>{}).catch(t=>{})}s5t(t,s,i,e,r,n,h,o){this.tJ("enable-scene-transition-pass",{json:t,i5t:s,threshold:i,e5t:e,r5t:r,duration:n,n5t:h,controls:o}).then(t=>{this.L2t.info("Scene transition post process enabled:",t)}).catch(t=>{this.L2t.error("Error on enable pixel postprocess:",t)})}h5t(){this.tJ("disable-scenetransition-pass",{}).then(t=>{}).catch(t=>{})}o5t(t){this.tJ("camera-to-object-ray",{objectId:t}).then(t=>{this.S2t=t.a5t,this.S2t.length>0&&this.l5t(this.S2t)}).catch(t=>{})}u5t(t){this.tJ("camera-to-screen-ray",{x:t.x,y:t.y,raylength:t.c5t}).then(t=>{this.S2t=t.a5t,this.S2t.length>0&&this.l5t(this.S2t)}).catch(t=>{})}f5t(t){this.tJ("camera-to-point-ray",t).then(t=>{this.S2t=t.a5t,this.S2t.length>0&&this.l5t(this.S2t)}).catch(t=>{})}d5t(t){this.tJ("object-to-directional-ray",t).then(t=>{this.S2t=t.a5t,this.S2t.length>0&&this.l5t(this.S2t)}).catch(t=>{})}p5t(t){this.tJ("origin-to-directional-ray",t).then(t=>{this.S2t=t.a5t,this.S2t.length>0&&this.l5t(this.S2t)}).catch(t=>{})}l5t(t){const s=t[0];s&&(this.T2t={M2t:s.M2t||null,v2t:s.v2t,bt:s.bt,x2t:s.x2t||null,I2t:s.I2t||0,updated:!0,PWt:{x:s.PWt.x,y:s.PWt.y,z:s.PWt.z}},this.YQ(Ct.tz.f2t.KF.m5t))}y5t(t){this.$Q("ignore-raycast",t)}g5t(t){this.$Q("set-rotation-from-normal",t)}M5t(t){t.M2t?this.tJ("destroy-object",{M2t:t.M2t}).then(s=>{s.J2t&&(this.L2t.info("Object destroyed successfully:",t.M2t),delete this.C2t[t.M2t],this.w5t=t.M2t,this.YQ(Ct.tz.f2t.KF.b5t,t.M2t))}).catch(s=>{this.L2t.error("Error destroying object:",s),this.YQ(Ct.tz.f2t.KF.S5t,t.M2t,s.message)}):this.L2t.error("DestroyObject: objectId is required")}};var Gt=class{constructor(t=!1,s="MyPlugin"){this.enabled=t,this.prefix=s}T5t(t,s,...i){this.enabled&&console.log(`%c${t}%c`,s,"color: inherit;",...i)}info(...t){this.T5t(`[${this.prefix} INFO]`,"color: #2196F3; border: 1px solid #2196F3; padding: 1px 4px; border-radius: 6px; font-weight: bold; font-size: 11px;",...t)}debug(...t){this.T5t(`[${this.prefix} DEBUG]`,"color: #9E9E9E; border: 1px solid #9E9E9E; padding: 1px 4px; border-radius: 6px; font-style: italic; font-size: 11px;",...t)}warn(...t){this.T5t(`[${this.prefix} WARN]`,"color: #FFC107; border: 1px solid #FFC107; padding: 1px 4px; border-radius: 6px; font-weight: bold; font-size: 11px;",...t)}error(...t){this.T5t(`[${this.prefix} ERROR]`,"color: #F44336; border: 1px solid #F44336; padding: 1px 4px; border-radius: 6px; font-weight: bold; font-size: 11px; background: rgba(244,67,54,0.1);",...t)}};globalThis.Cs.tz.f2t.KF={V2t:()=>!0,q2t:()=>!0,Z2t:()=>!0,Y2t:()=>!0,v5t:()=>(console.log("OnTestTrigger fired!"),!0),l3t(t){if(!t)return!0;const s=this.y2t;return console.log("Checking object ID match:",{x5t:t,I5t:s}),t===s},C5t(t){return!t||!!this.C2t[t]},z3t(t,s){let i=null,e=null;console.log("==========Trest00000000========="),"string"==typeof s?i=s:"number"!=typeof s||isNaN(s)?null!=s&&console.warn("Unexpected type for name_index:",s):e=s,console.log("==========Trest1111111=========");return!t&&null===i&&null===e||(!t||this.g2t?.M2t===t)&&(console.log("==========Trest22222222========="),(!i||this.g2t?.name===i)&&(-1==e||this.g2t?.index===e))},B3t(t,s){let i=null,e=null;"string"==typeof s?i=s:"number"!=typeof s||isNaN(s)?null!=s&&console.warn("Unexpected type for name_index:",s):e=s;return!(t||null!==i||null!==e)||(!t||this.g2t?.M2t===t)&&((!i||this.g2t?.name===i)&&(-1==e||this.g2t?.index===e))},a3t:()=>!0,m5t:()=>!0,G5t(t){const s=this.runtime.sP.Qq(),i=this.C2t[t]._2t;this.N2t=this.C2t[t];for(let t=0;t<i.length&&(s.nZ(),this.G2t=t,console.log(),!s.uZ);++t);s.release()},b5t(t){return!t||this.w5t===t},N5t(t){return this.e4t(t)}};var Nt=class{constructor(){}static _5t(t,s=0){return Array.isArray(t)?{x:t[0]??s,y:t[1]??s,z:t[2]??s}:"number"==typeof t?{x:t,y:t,z:t}:"object"==typeof t&&null!==t?{x:t.x??s,y:t.y??s,z:t.z??s}:{x:s,y:s,z:s}}static E5t(t){return"object"==typeof t&&null!==t&&"x"in t&&"y"in t&&"z"in t&&"number"==typeof t.x&&"number"==typeof t.y&&"number"==typeof t.z}static D5t(t){const s={};if(!t)return s;return t.split(",").forEach(t=>{const[i,e,r]=t.split(":");if(i&&e)switch(e.trim()){case"f":s[i]={value:void 0!==r?parseFloat(r):0};break;case"i":s[i]={value:void 0!==r?parseInt(r,10):0};break;case"c":s[i]={value:void 0!==r?new THREE.vo(r):new THREE.vo(16777215)};break;case"v2":if(void 0!==r){const[t,e]=r.split("|").map(Number);s[i]={value:new THREE.Na(t,e)}}else s[i]={value:new THREE.Na(0,0)};break;case"v3":if(void 0!==r){const[t,e,n]=r.split("|").map(Number);s[i]={value:new THREE.A5t(t,e,n)}}else s[i]={value:new THREE.A5t(0,0,0)};break;case"t":r&&(s[i]={L5t:r});break;default:console.warn(`[ShaderUniformParser] Unknown uniform type: ${e}`)}}),s}};globalThis.Cs.tz.f2t.ght={O5t(t){this.d2t=t,this.$Q("set-document-title",{title:t})},R5t(t){this.p2t=t,this.$Q("console-msg",{msg:t})},k5t(){this.c3t()},async j5t(){return await this.H2t(),!0},async P5t(t,s,i,e,r,n){await this.f3t({d3t:t.index,M3t:s,b3t:e,S3t:r,x3t:n,v3t:!1,w3t:i,T3t:!1})},async F5t(t,s,i,e,r,n,h){await this.f3t({d3t:t.index,M3t:!1,b3t:r,S3t:n,w3t:e,v3t:i,x3t:h,T3t:!0,path:s})},z5t(){this.I3t()},B5t(t){this.r3t({dt:t})},U5t(){this.$Q("add-test-cube",{})},W5t(t,s,i,e,r,n){let h="cube";switch(s){case 0:h="cube";break;case 1:h="box";break;case 2:h="cylinder";break;case 3:h="sphere";break;case 4:h="plane"}const o=Nt._5t(i,0),a=Nt._5t(e,0),l=Nt._5t(n,0),u=Number(n),c=isNaN(u)||u<=0?1:u;this.h3t({type:h,position:o,rotation:a,scale:l,color:r,scale:c,objectId:t})},Q5t(t,s,i,e,r){const n=["position","rotation","scale"][s];this.$Q("set-object-property",{objectId:t,value:{x:i,y:e,z:r},property:n})},J5t(t,s,i,e,r){this.K3t({M2t:t,net:"position",value:{x:parseFloat(s)||0,y:parseFloat(i)||0,z:parseFloat(e)||0},Ct:r})},V5t(t,s,i,e,r){this.K3t({M2t:t,net:"translation",value:{x:parseFloat(s)||0,y:parseFloat(i)||0,z:parseFloat(e)||0},Ct:r})},Y5t(t,s,i,e,r){this.K3t({M2t:t,net:"rotation",value:{x:parseFloat(s)||0,y:parseFloat(i)||0,z:parseFloat(e)||0},Ct:r})},H5t(t,s,i,e,r,n){s=isNaN(parseFloat(s))?0:parseFloat(s),i=isNaN(parseFloat(i))?1:parseFloat(i),e=isNaN(parseFloat(e))?0:parseFloat(e);let h={x:0,y:1,z:0};switch(r){case 0:h={x:1,y:0,z:0};break;case 1:default:h={x:0,y:1,z:0};break;case 2:h={x:0,y:0,z:1}}this.g5t({M2t:t,q5t:this.T2t.M2t,value:{x:s,y:i,z:e},Z5t:h,Ct:n})},X5t(t,s,i,e,r){this.K3t({M2t:t,net:"scale",value:{x:parseFloat(s)||1,y:parseFloat(i)||1,z:parseFloat(e)||1},Ct:r})},K5t(t,s,i){"object"==typeof i&&(i={x:parseFloat(i.x)||0,y:parseFloat(i.y)||0,z:parseFloat(i.z)||0}),this.Pc.$5t("set-object-property",{M2t:t,net:s,value:i})},t6t(){this.s6t()},async i6t(t,s,i,e,r,n){if(s.endsWith(".glb")||s.endsWith(".fbx")){const h=Nt._5t(i),o=Nt._5t(e),a=Nt._5t(r,.5);await this.u3t(t,s,h,o,a,n)}else console.warn("Unsupported file type:",s)},e6t(t,s,i,e,r,n,h,o,a,l){const u=Nt._5t(s);this.$Q("toggle-orbit-control",{toggle:t,target:u,P4t:i,maxDistance:e,r6t:r,n6t:n,h6t:h,o6t:o,a6t:a,l6t:l})},u6t(t,s,i){this.$Q("adjust-camera-properties",{c6t:t,f6t:s,d6t:i})},p6t(t,s,i,e,r,n){this._3t(t,s,i,e,r,n)},m6t(t,s,i,e,r,n,h,o,a,l){this.O3t({M2t:t,y6t:s,g6t:i,M6t:e,w6t:r,D3t:n,b6t:h,S6t:o,FP:a,E3t:l})},T6t(t,s,i,e,r,n,h){this.R3t({M2t:t,v6t:s,x6t:i,D3t:e,loop:r,FP:n,E3t:h})},I6t(t,s,i,e,r,n){r=Nt._5t(r,0),this.k3t({objectId:t,targetLookAt:{x:parseFloat(s)||0,y:parseFloat(i)||0,z:parseFloat(e)||0},lookAtAxis:r,slerpFactor:n||.1})},C6t(t){this.j3t(t)},G6t(t){this.P3t(t)},N6t(t){this.F3t(t)},_6t(t,s,i,e,r,n,h,o){const a=Nt._5t(i,0);let l={x:0,y:0,z:0},u="";Nt.E5t(e)?l={...e}:"string"==typeof e&&""!==e.trim()&&(u=e.trim());const c=Number(r);let f;switch("number"==typeof c?f=c:(f=16777215,console.warn("Invalid color value:",c)),s){case 0:s="ambient";break;case 1:s="directional";break;case 2:s="point";break;case 3:s="spot";break;case 4:s="hemisphere";break;default:s="point",console.warn("Invalid light type:",s)}const d=Math.max(Number(n),.1);this.o3t({objectId:t,type:s,position:a,targetPos:l,targetId:u,color:f,intensity:d,showHelper:h,controls:o})},E6t(t,s,i){this.X2t({x:t,y:s,z:i})},D6t(t){const s=["perspective","orthographic"][t]||"perspective";this.K2t({type:s})},A6t(t,s,i){this.$2t({x:t,y:s,z:i})},L6t(t,s,i){this.e3t({x:t,y:s,z:i})},O6t(t,s,i,e){this.t3t({x:t,y:s,z:i,lerpFatcor:e||.1})},R6t(t,s,i,e,r){this.s3t({objectId:t,offset:{x:parseFloat(s)||0,y:parseFloat(i)||0,z:parseFloat(e)||0},lerpFactor:r||.1})},k6t(){this.s3t({objectId:""})},j6t(t,s,i,e,r){this.i3t({objectId:t,offset:{x:parseFloat(s)||0,y:parseFloat(i)||0,z:parseFloat(e)||0},lerpFactor:r||.1})},P6t(){this.i3t({objectId:""})},F6t(t,s,i,e=1,r=0,n=2,h=!1,o){const a=Nt._5t(s,0),l=Number(i)||16777215;this.o3t({M2t:t,type:"point",position:a,color:l,z6t:Number(e),bt:Number(r),B6t:Number(n),U6t:!!h,controls:o})},W6t(t,s,i="",e,r,n=1,h=!1,o=!1,a){const l=Nt._5t(s,0),u=Number(r)||16777215;this.o3t({M2t:t,type:"directional",position:l,Q6t:i,J6t:e,color:u,z6t:Number(n),V6t:!!h,U6t:!!o,controls:a})},Y6t(t,s,i=1,e=!1,r){const n=Number(s)||16777215;this.o3t({M2t:t,type:"ambient",color:n,z6t:Number(i),U6t:!!e,controls:r})},H6t(t,s,i={x:0,y:0,z:0},e,r=1,n=0,h=Math.PI/3,o=0,a=2,l=!1,u,c=!1,f){const d=Nt._5t(s,0),p=Number(e)||16777215;this.o3t({M2t:t,type:"spot",position:d,J6t:i,color:p,z6t:Number(r),bt:Number(n),angle:Number(h),q6t:Number(o),B6t:Number(a),V6t:!!l,U6t:!!c,controls:f,lightmap:u})},Z6t(t,s,i,e=4473924,r=1,n=!1,h){const o=Nt._5t(s,0),a=Number(i)||16777215,l=Number(e)||4473924;this.o3t({M2t:t,type:"hemisphere",position:o,color:a,X6t:l,z6t:Number(r),U6t:!!n,controls:h})},K6t(t,s,i,e,r,n,h,o){const a=Nt._5t(s,0),l=Nt._5t(i,0),u=Nt._5t(r,0);this.h3t({type:"plane",position:a,rotation:l,scale:u,color:e,objectId:t,height_segments:n,width_segments:h,controls:o})},$6t(t,s,i,e,r,n,h,o,a){const l=Nt._5t(s,0),u=Nt._5t(i,0),c=Nt._5t(r,0);this.h3t({type:"cube",position:l,rotation:u,scale:c,color:e,objectId:t,height_segments:n,width_segments:h,depth_segments:o,controls:a})},t8t(t,s,i,e,r,n,h,o){const a=Nt._5t(s,0),l=Nt._5t(i,0),u=Nt._5t(r,0);this.h3t({type:"icosahedron",position:a,rotation:l,scale:u,color:e,objectId:t,radius:n||1,detail:h||0,controls:o})},s8t(t,s,i,e,r,n,h,o,a,l){const u=Nt._5t(s,0),c=Nt._5t(i,0),f=Nt._5t(r,0);this.h3t({type:"torus",position:u,rotation:c,scale:f,color:e,objectId:t,radius:n||1,tube:h||.4,radialSegments:o||8,tubularSegments:a||6,controls:l})},i8t(t,s,i,e,r,n,h,o,a,l,u,c){const f=Nt._5t(s,0),d=Nt._5t(i,0),p=Nt._5t(r,0);this.h3t({type:"torusknot",position:f,rotation:d,scale:p,color:e,objectId:t,radius:n||1,tube:h||.4,tubularSegments:o||64,radialSegments:a||8,p:l||2,q:u||3,controls:c})},e8t(t,s,i,e,r,n,h,o,a,l){const u=Nt._5t(s,0),c=Nt._5t(i,0),f=Nt._5t(r,0),d=Number(r);isNaN(d);this.h3t({type:"cone",position:u,rotation:c,scale:f,color:e,objectId:t,radius:n||1,height:h||2,radialSegments:o||8,heightSegments:a||1,controls:l})},r8t(t,s,i,e,r,n,h,o,a,l){const u=Nt._5t(s,0),c=Nt._5t(i,0),f=Nt._5t(r,0),d=Number(r);isNaN(d);this.h3t({type:"capsule",position:u,rotation:c,scale:f,color:e,objectId:t,radius:n||1,length:h||2,capSegments:o||4,radialSegments:a||8,controls:l})},n8t(t,s,i,e,r,n,h,o,a,l,u,c){const f=Nt._5t(s,0),d=Nt._5t(i,0),p=Nt._5t(r,0),m=Number(r);isNaN(m);this.h3t({type:"ring",position:f,rotation:d,scale:p,color:e,objectId:t,innerRadius:n||.5,outerRadius:h||1,thetaSegments:o||8,phiSegments:a||1,thetaStart:l||0,thetaLength:u||2*Math.PI,controls:c})},h8t(t,s,i,e,r,n,h,o,a,l){const u=Nt._5t(s,0),c=Nt._5t(i,0),f=Nt._5t(r,0),d=Number(r);isNaN(d);this.h3t({type:"circle",position:u,rotation:c,scale:f,color:e,objectId:t,radius:n||1,segments:h||32,thetaStart:o||0,thetaLength:a||2*Math.PI,controls:l})},o8t(t,s,i,e,r,n,h,o){const a=Nt._5t(s,0),l=Nt._5t(i,0),u=Nt._5t(r,0),c=Number(r);isNaN(c);this.h3t({type:"dodecahedron",position:a,rotation:l,scale:u,color:e,objectId:t,radius:n||1,detail:h||0,controls:o})},a8t(t,s,i,e,r,n,h,o){const a=Nt._5t(s,0),l=Nt._5t(i,0),u=Nt._5t(r,0),c=Number(r);isNaN(c);this.h3t({type:"octahedron",position:a,rotation:l,scale:u,color:e,objectId:t,radius:n||1,detail:h||0,controls:o})},l8t(t,s,i,e,r,n,h,o){const a=Nt._5t(s,0),l=Nt._5t(i,0),u=Nt._5t(r,0),c=Number(r);isNaN(c);this.h3t({type:"tetrahedron",position:a,rotation:l,scale:u,color:e,objectId:t,radius:n||1,detail:h||0,controls:o})},u8t(t,s,i,e,r,n,h,o,a,l,u,c,f,d){const p=Nt._5t(s,0),m=Nt._5t(i,0),y=Nt._5t(r,1),g=(t,s)=>"number"!=typeof t||isNaN(t)?s:t;var M,w;this.h3t({type:"cylinder",position:p,rotation:m,scale:y,color:e,M2t:t,c8t:g(n,1),f8t:g(h,1),height:g(o,2),d8t:g(a,8),p8t:g(l,1),m8t:(M=u,w=!1,"boolean"==typeof M?M:w),y8t:g(c,0),g8t:g(f,2*Math.PI),controls:d})},M8t(t,s,i,e,r,n,h,o,a,l,u,c,f,d,p,m,y,g,M,w,b,S){let T="cube";switch(s){case 0:T="cube";break;case 1:T="box";break;case 2:T="cylinder";break;case 3:T="sphere";break;case 4:T="plane";break;case 5:T="icosahedron";break;case 6:T="torus";break;case 7:T="torusknot";break;case 8:T="cone";break;case 9:T="capsule";break;case 10:T="ring";break;case 11:T="circle";break;case 12:T="dodecahedron";break;case 13:T="octahedron";break;case 14:T="tetrahedron"}const v=Nt._5t(i,0),x=Nt._5t(e,0),I=Nt._5t(n,0),C=Number(n),G={type:T,position:v,rotation:x,scale:I,color:r,scale:isNaN(C)||C<=0?1:C,objectId:t};void 0!==h&&(G.radius=h),void 0!==o&&(G.detail=o),void 0!==a&&(G.w8t=a),void 0!==l&&(G.d8t=l),void 0!==u&&(G.b8t=u),void 0!==c&&(G.p=c),void 0!==f&&(G.q=f),void 0!==d&&(G.height=d),void 0!==p&&(G.S8t=p),void 0!==m&&(G.T8t=m),void 0!==y&&(G.v8t=y),void 0!==g&&(G.x8t=g),void 0!==M&&(G.I8t=M),void 0!==w&&(G.y8t=w),void 0!==b&&(G.g8t=b),void 0!==S&&(G.Y7=S),this.h3t(G)},C8t(t,s,i=.5,e=.5,r=!1,n=0,h,o=1){this.s4t(t,{G8t:"standard",color:s,N8t:i,_8t:e,E8t:r,D8t:n,d4t:h,opacity:o})},A8t(t,s,i=30,e=!1,r=1,n=0,h,o=1118481){this.s4t(t,{G8t:"phong",color:s,L8t:i,D8t:n,O8t:o,E8t:e,d4t:h,opacity:r})},R8t(t,s,i=!1,e=1,r=0,n){this.s4t(t,{G8t:"lambert",color:s,D8t:r,E8t:i,opacity:e,d4t:n})},k8t(t,s,i=!1,e=1){this.s4t(t,{G8t:"basic",color:s,E8t:i,opacity:e})},j8t(t,s,i){-1!=i&&(s=i>=1),this.i4t(t,s)},P8t(t,s,i,e,r=!1,n=!1){e=Nt.D5t(e),this.r4t(t,{F8t:s,z8t:i,B8t:e,U8t:r,E8t:n})},W8t(t,s,i){this.n4t(t,s,i)},async vL(t,s){return await this.h4t({M2t:t,path:s}),!0},Q8t(t,s,i){this.o4t(t,s,i)},J8t(t,s,i){this.u4t(t,s,i)},V8t(t,s){this.c4t(t,s)},Y8t(t,s,i,e){const r=i?-1:1;this.p4t(t,s,r*e)},H8t(t,s,i){this.f4t(t,s,i)},q8t(t,s){this.y4t(t,s)},Z8t(t,s){this.g4t(t,s)},jT(t,s){this.M4t(t,s)},X8t(t){this.w4t(t)},K8t(t,s,i=!1,e=!0,r=!0){return this.b4t(t,s,i,e,r)},$8t(t,s,i,e){this.S4t(t,s,i,e)},t7t(t,s,i,e){this.C4t(t,s,i,e)},s7t(){this.N4t()},i7t(t,s,i,e,r){this.E4t(t,s,i,e,r)},e7t(t,s,i,e,r,n,h,o){this.s5t(t,s,i,e,r,n,h,o)},r7t(t){switch(t){case 0:this.I4t();break;case 1:this.G4t();break;case 2:this._4t();break;case 3:this.L4t();break;case 4:this.R4t();break;case 5:this.F4t();break;case 6:this.Y4t();break;case 7:this.z4t();break;case 8:this.Z4t();break;case 9:this.t5t();break;case 10:this.h5t()}},n7t(t,s,i){this.K3t({M2t:t,net:"positionx",value:parseFloat(s)||0,Ct:i})},h7t(t,s,i){this.K3t({M2t:t,net:"positiony",value:parseFloat(s)||0,Ct:i})},o7t(t,s,i){this.K3t({M2t:t,net:"positionz",value:parseFloat(s)||0,Ct:i})},a7t(t,s,i){this.K3t({M2t:t,net:"rotationx",value:parseFloat(s)||0,Ct:i})},l7t(t,s,i){this.K3t({M2t:t,net:"rotationy",value:parseFloat(s)||0,Ct:i})},u7t(t,s,i){this.K3t({M2t:t,net:"rotationz",value:parseFloat(s)||0,Ct:i})},c7t(t,s){this.K3t({M2t:t,net:"scalex",value:parseFloat(s)||1})},f7t(t,s){this.K3t({M2t:t,net:"scaley",value:parseFloat(s)||1})},d7t(t,s){this.K3t({M2t:t,net:"scalez",value:parseFloat(s)||1})},p7t(t,s,i){this.O4t(t,s,i)},m7t(t,s,i,e){this.k4t(t,s,i,e)},y7t(t,s,i,e,r){this.z4t(t,s,i,e,r)},g7t(t,s){this.J4t(t,s)},M7t(t,s){this.H4t(t,s)},w7t(t,s,i,e){this.X4t(t,s,i,e)},b7t(t,s,i){this.u5t({x:t,y:s,c5t:i})},S7t(t,s,i){this.f5t({x:t,y:s,z:i})},T7t(t){this.o5t(t)},v7t(t,s,i,e){this.d5t({M2t:t,direction:s,c5t:i,Rs:e})},x7t(t,s,i,e){this.p5t({origin:t,direction:s,c5t:i,Rs:e})},I7t(t,s){this.y5t({M2t:t,C7t:s})},G7t(t,s,i,e,r){this.h3t({type:"line",startPos:s,endPos:i,color:r,points:e,isDashed:!1,objectId:t||"line",canUpdatable:!0})},N7t(t,s,i,e,r,n,h,o){this.h3t({type:"line",startPos:s,endPos:i,lineScale:o,points:e,color:r,isDashed:!0,objectId:t||"dashedline",dashSize:n,gapSize:h})},_7t(t){this.M5t({objectId:t})}},globalThis.Cs.tz.f2t.Mht={E7t(){return this.d2t},RGB:(t,s,i)=>(t=Math.max(0,Math.min(255,Math.floor(t))))<<16|(s=Math.max(0,Math.min(255,Math.floor(s))))<<8|(i=Math.max(0,Math.min(255,Math.floor(i)))),RGBA:(t,s,i,e)=>(t=Math.max(0,Math.min(255,Math.floor(t))),s=Math.max(0,Math.min(255,Math.floor(s))),i=Math.max(0,Math.min(255,Math.floor(i))),e<=1&&(e=Math.floor(255*e)),t<<24|s<<16|i<<8|(e=Math.max(0,Math.min(255,Math.floor(e))))),D7t(t){return this.C3t(t)},A7t(t){return this.G3t(t)},L7t(t,s){return this.N3t(t,s)},O7t(){return this.N2t._2t[this.G2t].name},R7t(){return this.N2t._2t[this.G2t].duration},k7t(){return this.A2t},A5t:(t,s,i)=>({x:t,y:s,z:i}),j7t(t){const s={};if(!t||"string"!=typeof t)return s;return t.split(",").forEach(t=>{const[i,e,r]=t.split(":");if(i&&e&&void 0!==r)switch(e.trim()){case"f":s[i]={value:parseFloat(r)};break;case"i":s[i]={value:parseInt(r,10)};break;case"c":s[i]={value:r};break;case"v2":{const[t,e]=r.split("|").map(Number);s[i]={value:[t,e]};break}case"v3":{const[t,e,n]=r.split("|").map(Number);s[i]={value:[t,e,n]};break}}}),s},P7t(){return this.m2t?1:0},C5t(t){return Object.prototype.hasOwnProperty.call(this.C2t,t)?1:0},F7t(){return this.T2t.v2t?.x??0},z7t(){return this.T2t.v2t?.y??0},B7t(){return this.T2t.v2t?.z??0},U7t(){return this.T2t.PWt?.x??0},W7t(){return this.T2t.PWt?.y??0},Q7t(){return this.T2t.PWt?.z??0},J7t(){return this.T2t.bt??0},V7t(){return this.T2t.M2t??""},Y7t(){const t=this.C2t?.[this.T2t.M2t];return t?.object?.name??""},H7t(){return this.T2t.x2t?.x??0},q7t(){return this.T2t.x2t?.y??0},Z7t(){return this.T2t.I2t??-1},X7t(){return JSON.stringify(this.T2t)},K7t(t){return this.C2t[t].position.x||0},$7t(t){return this.C2t[t].position.y||0},t9t(t){return this.C2t[t].position.z||0},s9t(t){return console.log(this.C2t[t]),this.C2t[t].rotation.x||0},i9t(t){return this.C2t[t].rotation.y||0},e9t(t){return this.C2t[t].rotation.z||0},r9t(t){return this.C2t[t].scale.x||0},n9t(t){return this.C2t[t].scale.y||0},h9t(t){return this.C2t[t].scale.z||0},o9t:(...t)=>t};var _t=self.Cs;self.hJt=function(){return[_t.tz.f2t,_t.tz.Keyboard,_t.tz.Touch,_t.tz.Text,_t.tz.$F.KF.J5,_t.tz.f2t.ght.P5t,_t.tz.f2t.ght.i6t,_t.tz.f2t.Mht.A5t,_t.tz.f2t.ght.R6t,_t.tz.$F.ght.eqt,_t.tz.f2t.ght.p6t,_t.tz.$F.KF.lHt,_t.tz.Text.ght.Uc,_t.tz.$F.Mht._P]},self.NJt=[{a9t:0},{Keyboard:0},{Touch:0},{Text:0},{y:0}],self.l9t={a9t:class extends _t.tz.f2t.Instance{},Keyboard:class extends self.cQ{},Touch:class extends self.cQ{},Text:class extends self.T1t{}};
/*!
@fileoverview gl-matrix - High performance matrix and vector operations
@author Brandon Jones
@author Colin MacKenzie IV
@version 3.4.1

Copyright (c) 2015-2021, Brandon Jones, Colin MacKenzie IV.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/